! function(e) {
    var t = {};

    function n(r) {
        if (t[r]) return t[r].exports;
        var o = t[r] = {
            i: r,
            l: !1,
            exports: {}
        };
        return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports
    }
    n.m = e, n.c = t, n.d = function(e, t, r) {
        n.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: r
        })
    }, n.r = function(e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }, n.t = function(e, t) {
        if (1 & t && (e = n(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var r = Object.create(null);
        if (n.r(r), Object.defineProperty(r, "default", {
                enumerable: !0,
                value: e
            }), 2 & t && "string" != typeof e)
            for (var o in e) n.d(r, o, function(t) {
                return e[t]
            }.bind(null, o));
        return r
    }, n.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default
        } : function() {
            return e
        };
        return n.d(t, "a", t), t
    }, n.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, n.p = "", n(n.s = 540)
}({
    0: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return i
        }));
        var r = n(45),
            o = n(43);

        function a(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var i = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, i;
            return t = e, i = [{
                key: "init",
                value: function(e) {
                    r.a.init(), void 0 === e && console.error("Project settings undefined, using defaults"), this._initCookieVariables(), this._initUrlVariables(), this._initProjectSettings(e || {}), this.debug && this.initDebugSettings(), this._initUrlVariables(), this._defaultPartSettings = {
                        groundOffset: 0,
                        bounds: void 0,
                        allowMirror: !0
                    }, !ART_VERSION || "" === ART_VERSION || ART_VERSION.indexOf("}") > 0 ? (console.warn("Generating random art version number because ART_VERSION set by server to", ART_VERSION), this.artVersionNumber = (new Date).getTime() + "") : this.artVersionNumber = ART_VERSION, this._applyConsequences(), this.initialized = !0
                }
            }, {
                key: "_initDefaults",
                value: function() {
                    this.SubsurfaceMode = {
                        None: 0,
                        AmbientTint: 1,
                        TextureSpaceDiffusion: 2
                    }, this.debug = !1, this.color = !1, this.rez = "loRez", this.forge = !1, this.texturePath = "/static/herobundles/", this.thumbnailPath = "/static/herobundles/", this.meshBundlePath = "/static/herobundles/", this.meshBundlePathHigh = "/forge_static/herobundles/", this.smokeTest = !1, this.normalMaps = !0, this.hiRezNormalMaps = !1, this.morphNormals = !1, this.thumbFormat = "png", this.cached = !1, this.characterCount = 1, this.siteUrl = "", this.hackyPromptForToS = !1, this.cameraPosition = void 0, this.fixedCamera = !1, this.dragRotateMesh = !1, this.globalScale = 1, this.hasMainSkeleton = !0, this.cameraOffset = !0, this.hiRez = !1, this.cameras = {
                        default: {
                            position: [0, 4.5, 1.9999],
                            rotation: [-.9827, 0, 0],
                            target: [0, 1.5, 0]
                        }
                    }, this.extraLoaders = {}, this.mobileCheck = !1, this.showJoints = !1, this.groundColor = void 0, this.lighting = "highContrast", this.bgLighting = {}, this.alwaysShowMaterialSim = !1, this.hasBeenToColor = !1, this.userSettings = {
                        hasBeenToColor: !1,
                        occlusion: !0,
                        morphids: !0,
                        shadows: !0,
                        graphics: !1,
                        extraProducts: !1,
                        debug: !1,
                        eyeOrientHack: !0
                    }, this.graphics = !1, this.morphids = !0, this.disableClipping = !1, this.rtShadows = !1, this.shadowMapSize = 512, this.sunOcclusion = !1, this.regular = !1, this.initialConfig = void 0, this.forceNormalMaps = !1, this.snapBoundaries = !0, this.clearParts = !1, this.hideBackgroundForScreenshots = !1, this.hideBackgroundForThumbnails = !0, this.thumbnailSize = [300, 300], this.configThumbnailSize = [120, 120], this.backgroundCube = !0, this.thumbnailHighAA = !1, this.thumbTransparency = !0, this.useEnvironmentMapInShader = !0, this.userMontageThumbs = !1, this.hasPoses = !0, this.twinsies = !1, this.skeleton = {}, this.slots = {}, this.sliders = {}, this.slotGroups = {}, this.projectName = "TestProject", this.projectLabel = "Test Project", this.defaultConfigCount = 2, this.defaultCharacterName = "Unnamed Character", this.characterPlural = "Heroes", this.prefix = "hf", this.compact = o.a.compact(), this.bounds = [-2, -0, -2, 2, 3, 2], this.characterRotation = {
                        x: 0,
                        y: 0,
                        z: 0
                    }, this.blankInitialConfig = !1, this.config_id = void 0, this.materialSims = {}, this.displacementScale = 1, this.addonKeywords = {}, this.logMaterial = void 0, this.frostbiteSpecularOcclusion = !0, this.occlusionCombineMin = !1, this.voxelCanvas = !1, this.configEditorMode = !1, this.configEditorSaveMeshes = !0, this.configEditorSaveColor = !1, this.configEditorSavePoseMode = !1, this.configEditorSaveDecals = !1, this.occlusionDepthTileDim = 4, this.occlusionTextureSize = 1024, this.occlusionSampleCount = 4096, this.sunOcclusionSampleCount = 256, this.allowBakedPhysical = !0, this.allowBakedEmissive = !0, this.allowBakedNormal = !1, this.renderedThumbnails = !0, this.colorTextureSize = Math.pow(2, Math.ceil(Math.log(screen.height) / Math.log(2))), this.colorTextureSize > 2048 ? this.colorTextureSize = 2048 : this.colorTextureSize < 512 && (this.colorTextureSize = 512), this.colorTextureSizeHigh = 2048, this.ignoreSpecs = !1, this.webgl2 = !1, this.packedThumbs = !1, this.FOV = 45, this.squareCamera = !1, this.preBakedOcclusion = !0, this.groundPlane = !0, this.useVolumeNormals = !1, this.forgePostVerify = !0, this.forgeVerifyNormals = !0, this.mobileConfigThumbs = !1, this.showBackgroundImageInScreenshots = !1, this.occlusion = !0, this.newOcclusion = !0, this.vertexOcclusion = !1, this.reflections = !1, this.content = void 0, this.rc = void 0, this.groundPlane = !0, this.CustomDisplay = void 0, this.CustomModded = void 0, this.CustomData = void 0, this.CustomCharacter = void 0, this.screenHeightInWorldUnits = 5, this.debugPaints = !1, this.units = "cm", this.globalClipPlane = void 0, this.invitationKey = void 0, this.progressiveAA = !0, this.subsurface = this.SubsurfaceMode.None, this.newPartAge = 27, this.montageCameras = void 0, this.tokenCameras = void 0, this.holdAll = !1, this.mobileThumbs = !1, this.newBreadcrumbs = !1, this.searchable = !1, this.cameraControls = {
                        damping: .2,
                        minPolarAngle: .01,
                        maxPolarAngle: .52 * Math.PI,
                        pushMinRadius: 4,
                        pushUpMin: 0,
                        pushUpMax: 1,
                        trackMinRadius: 4,
                        trackMaxRadius: 8,
                        trackLeftMax: -.5,
                        trackLeftMin: -1.5,
                        minDistance: 4,
                        maxDistance: 9,
                        maxZoom: 2,
                        enableZoom: !0,
                        enablePan: !1,
                        enableRotate: !0,
                        zoomOnCursor: !1
                    }, this.shaderballs = !1, this.smallEnvMaps = !0, this.seamFin = !0, this.extras = !1, this.surfaceBakeMaxWhite254 = !0, this.materialSim = void 0, this.text = {
                        mobileNotSupported: "Mobile devices not supported yet.",
                        browserMinimumRequirements: "Your browser currently does not meet the minimum requirements.",
                        webgDisabled: "It appears 3D graphics (WebGL) are disabled on your device.",
                        graphicsNotSupported: "Sorry, your graphics device is not supported yet.",
                        loadingFailed: "Critical Miss!",
                        somethingWentWrong: "Something went wrong!",
                        newsletterCopy: "I wish to receive emails with news and promotions from HeroForge.",
                        emptyCartCopy: "Time to create some miniatures you'll love.",
                        emptyCartCTA: "Create Mini",
                        emptyOrderHistoryCopy: "create some miniatures you'll love?",
                        digitalShipCopy: "Digital models are made available for download on your Digital Orders page",
                        physicalShipCopy: "Physical minis will be shipped to:",
                        giftShipCopy: "Gift cards will be emailed to you at:",
                        digitalOnlyShipCopy: function(e) {
                            return e ? "minis are ready for download!" : "mini is ready for download"
                        },
                        shippingAlert: "",
                        digitalAlert: "",
                        purchaseConfirmationAlert: "You will have 24 hours after placing your order to cancel it from your Order Details page. Digital models cannot be cancelled."
                    }, this.theme = {}, this.compactWidth = 960, this.loadingSolutions = {}, this.showLoadingFailureSolutions = !0, this.showLoadingScreen = !0, this.dataPath = "/options_static/", this.routeMappings = void 0, this.skinInfluenceMax = 4, this.refraction = !1, this.hidePerVertex = !1, this.detectWebglCrash = !1
                }
            }, {
                key: "_applyConsequences",
                value: function() {
                    this.color || (this.bakeColorLayers = !1)
                }
            }, {
                key: "initDebugSettings",
                value: function() {
                    this.cameraControls.enablePan = !0, this.cameraControls.minDistance = 0, this.cameraControls.maxDistance = 5e3
                }
            }, {
                key: "getSlotSetting",
                value: function(e, t) {
                    return e in this.slots && t in this.slots[e] ? this.slots[e][t] : t in this._defaultPartSettings ? this._defaultPartSettings[t] : void 0
                }
            }, {
                key: "_initProjectSettings",
                value: function(e) {
                    for (var t in e) t in this ? this[t] = e[t] : console.warn("Unrecognized variable " + t + " found in project settings ")
                }
            }, {
                key: "_initUrlVariables",
                value: function() {
                    this._setUserSettings(r.a.variables)
                }
            }, {
                key: "GetCookieSetting",
                value: function(e) {
                    return this._LoadCookieSettings()[e]
                }
            }, {
                key: "SetCookieSetting",
                value: function(e, t) {
                    var n = this._LoadCookieSettings();
                    n[e] = t, this._SaveCookieSettings(n)
                }
            }, {
                key: "_LoadCookieSettings",
                value: function() {
                    var e = localStorage.getItem("settings") || "{}";
                    return JSON.parse(e)
                }
            }, {
                key: "_SaveCookieSettings",
                value: function(e) {
                    var t = JSON.stringify(e);
                    localStorage.setItem("settings", t)
                }
            }, {
                key: "_initCookieVariables",
                value: function() {
                    try {
                        var e = this._LoadCookieSettings();
                        this._setUserSettings(e)
                    } catch (e) {
                        console.log("Error loading setttings"), console.log(e)
                    }
                }
            }, {
                key: "_setUserSettings",
                value: function(t) {
                    for (var n in t) n in e.userSettings && null != this[n] && (this[n] = t[n])
                }
            }], (n = null) && a(t.prototype, n), i && a(t, i), e
        }();
        i._initDefaults()
    },
    1: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return h
        }));
        var r, o, a, i, s, c = n(18),
            l = n(20),
            u = n(27),
            f = n(8);

        function h(e, t, n) {
            this.x = e || 0, this.y = t || 0, this.z = n || 0
        }
        h.slerp = function(e, t, n) {
            var r = e.length(),
                o = t.length();
            e = e.clone().normalize(), t = t.clone().normalize();
            var a = e.dot(t);
            c.a.clamp(a, -1, 1);
            var i = Math.acos(a) * n,
                s = t.clone().sub(e.clone().multiplyScalar(a));
            s.normalize();
            var l = e.clone().multiplyScalar(Math.cos(i)).add(s.multiplyScalar(Math.sin(i)));
            return l.multiplyScalar(c.a.lerp(r, o, n)), l
        }, Object.defineProperties(h.prototype, {
            xy: {
                get: function() {
                    return new f.a(this.x, this.y)
                },
                set: function(e) {
                    this.x = e.x, this.y = e.y
                }
            },
            xz: {
                get: function() {
                    return new f.a(this.x, this.z)
                },
                set: function(e) {
                    this.x = e.x, this.z = e.y
                }
            },
            yx: {
                get: function() {
                    return new f.a(this.y, this.x)
                },
                set: function(e) {
                    this.y = e.x, this.x = e.y
                }
            },
            yz: {
                get: function() {
                    return new f.a(this.y, this.z)
                },
                set: function(e) {
                    this.y = e.x, this.z = e.y
                }
            },
            zx: {
                get: function() {
                    return new f.a(this.z, this.x)
                },
                set: function(e) {
                    this.z = e.x, this.x = e.y
                }
            },
            zy: {
                get: function() {
                    return new f.a(this.z, this.y)
                },
                set: function(e) {
                    this.z = e.x, this.y = e.y
                }
            }
        }), Object.assign(h.prototype, {
            isVec3: !0,
            set: function(e, t, n) {
                return this.x = e, this.y = t, this.z = n, this
            },
            setScalar: function(e) {
                return this.x = e, this.y = e, this.z = e, this
            },
            setX: function(e) {
                return this.x = e, this
            },
            setY: function(e) {
                return this.y = e, this
            },
            setZ: function(e) {
                return this.z = e, this
            },
            setComponent: function(e, t) {
                switch (e) {
                    case 0:
                        this.x = t;
                        break;
                    case 1:
                        this.y = t;
                        break;
                    case 2:
                        this.z = t;
                        break;
                    default:
                        throw new Error("index is out of range: " + e)
                }
                return this
            },
            getComponent: function(e) {
                switch (e) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    case 2:
                        return this.z;
                    default:
                        throw new Error("index is out of range: " + e)
                }
            },
            clone: function() {
                return new this.constructor(this.x, this.y, this.z)
            },
            copy: function(e) {
                return this.x = e.x, this.y = e.y, this.z = e.z, this
            },
            add: function(e, t) {
                return void 0 !== t ? (console.warn("RK.Vec3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this)
            },
            addScalar: function(e) {
                return this.x += e, this.y += e, this.z += e, this
            },
            addVectors: function(e, t) {
                return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this
            },
            addScaledVector: function(e, t) {
                return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this
            },
            sub: function(e, t) {
                return void 0 !== t ? (console.warn("RK.Vec3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this)
            },
            toSimple: function() {
                return {
                    x: this.x,
                    y: this.y,
                    z: this.z
                }
            },
            subScalar: function(e) {
                return this.x -= e, this.y -= e, this.z -= e, this
            },
            subVectors: function(e, t) {
                return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this
            },
            multiply: function(e, t) {
                return void 0 !== t ? (console.warn("RK.Vec3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(e, t)) : (this.x *= e.x, this.y *= e.y, this.z *= e.z, this)
            },
            multiplyScalar: function(e) {
                return this.x *= e, this.y *= e, this.z *= e, this
            },
            multiplyVectors: function(e, t) {
                return this.x = e.x * t.x, this.y = e.y * t.y, this.z = e.z * t.z, this
            },
            applyEuler: (s = new u.a, function(e) {
                return e && e.isEuler || console.error("RK.Vec3: .applyEuler() now expects an Euler rotation rather than a Vec3 and order."), this.applyQuaternion(s.setFromEuler(e))
            }),
            applyAxisAngle: function() {
                var e = new u.a;
                return function(t, n) {
                    return this.applyQuaternion(e.setFromAxisAngle(t, n))
                }
            }(),
            applyMatrix3: function(e) {
                var t = this.x,
                    n = this.y,
                    r = this.z,
                    o = e.elements;
                return this.x = o[0] * t + o[3] * n + o[6] * r, this.y = o[1] * t + o[4] * n + o[7] * r, this.z = o[2] * t + o[5] * n + o[8] * r, this
            },
            applyMatrix4: function(e) {
                var t = this.x,
                    n = this.y,
                    r = this.z,
                    o = e.elements,
                    a = 1 / (o[3] * t + o[7] * n + o[11] * r + o[15]);
                return this.x = (o[0] * t + o[4] * n + o[8] * r + o[12]) * a, this.y = (o[1] * t + o[5] * n + o[9] * r + o[13]) * a, this.z = (o[2] * t + o[6] * n + o[10] * r + o[14]) * a, this
            },
            applyQuaternion: function(e) {
                var t = this.x,
                    n = this.y,
                    r = this.z,
                    o = e.x,
                    a = e.y,
                    i = e.z,
                    s = e.w,
                    c = s * t + a * r - i * n,
                    l = s * n + i * t - o * r,
                    u = s * r + o * n - a * t,
                    f = -o * t - a * n - i * r;
                return this.x = c * s + f * -o + l * -i - u * -a, this.y = l * s + f * -a + u * -o - c * -i, this.z = u * s + f * -i + c * -a - l * -o, this
            },
            project: (i = new l.a, function(e) {
                return i.multiplyMatrices(e.projectionMatrix, i.getInverse(e.matrixWorld)), this.applyMatrix4(i)
            }),
            unproject: function() {
                var e = new l.a;
                return function(t) {
                    return e.multiplyMatrices(t.matrixWorld, e.getInverse(t.projectionMatrix)), this.applyMatrix4(e)
                }
            }(),
            transformDirection: function(e) {
                var t = this.x,
                    n = this.y,
                    r = this.z,
                    o = e.elements;
                return this.x = o[0] * t + o[4] * n + o[8] * r, this.y = o[1] * t + o[5] * n + o[9] * r, this.z = o[2] * t + o[6] * n + o[10] * r, this.normalize()
            },
            divide: function(e) {
                return this.x /= e.x, this.y /= e.y, this.z /= e.z, this
            },
            divideScalar: function(e) {
                return this.multiplyScalar(1 / e)
            },
            min: function(e) {
                return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this.z = Math.min(this.z, e.z), this
            },
            max: function(e) {
                return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this.z = Math.max(this.z, e.z), this
            },
            clamp: function(e, t) {
                return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this.z = Math.max(e.z, Math.min(t.z, this.z)), this
            },
            clampScalar: (o = new h, a = new h, function(e, t) {
                return o.set(e, e, e), a.set(t, t, t), this.clamp(o, a)
            }),
            clampLength: function(e, t) {
                var n = this.length();
                return this.divideScalar(n || 1).multiplyScalar(Math.max(e, Math.min(t, n)))
            },
            floor: function() {
                return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this
            },
            round: function() {
                return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this
            },
            roundToZero: function() {
                return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this
            },
            negate: function() {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
            },
            dot: function(e) {
                return this.x * e.x + this.y * e.y + this.z * e.z
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y + this.z * this.z
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
            },
            lengthManhattan: function() {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
            },
            normalize: function() {
                return this.divideScalar(this.length() || 1)
            },
            safeNormalize: function(e) {
                var t = Math.max(Math.max(Math.abs(this.x), Math.abs(this.y)), Math.abs(this.z));
                return t > 0 ? this.divideScalar(t).normalize() : this.copy(e), this
            },
            setLength: function(e) {
                return this.normalize().multiplyScalar(e)
            },
            lerp: function(e, t) {
                return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this
            },
            lerpVectors: function(e, t, n) {
                return this.subVectors(t, e).multiplyScalar(n).add(e)
            },
            cross: function(e, t) {
                if (void 0 !== t) return console.warn("RK.Vec3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(e, t);
                var n = this.x,
                    r = this.y,
                    o = this.z;
                return this.x = r * e.z - o * e.y, this.y = o * e.x - n * e.z, this.z = n * e.y - r * e.x, this
            },
            crossVectors: function(e, t) {
                var n = e.x,
                    r = e.y,
                    o = e.z,
                    a = t.x,
                    i = t.y,
                    s = t.z;
                return this.x = r * s - o * i, this.y = o * a - n * s, this.z = n * i - r * a, this
            },
            projectOnVector: function(e) {
                var t = e.dot(this) / e.lengthSq();
                return this.copy(e).multiplyScalar(t)
            },
            projectOnPlane: (r = new h, function(e) {
                return r.copy(this).projectOnVector(e), this.sub(r)
            }),
            reflect: function() {
                var e = new h;
                return function(t) {
                    return this.sub(e.copy(t).multiplyScalar(2 * this.dot(t)))
                }
            }(),
            angleTo: function(e) {
                var t = this.dot(e) / Math.sqrt(this.lengthSq() * e.lengthSq());
                return Math.acos(c.a.clamp(t, -1, 1))
            },
            distanceTo: function(e) {
                return Math.sqrt(this.distanceToSquared(e))
            },
            distanceToSquared: function(e) {
                var t = this.x - e.x,
                    n = this.y - e.y,
                    r = this.z - e.z;
                return t * t + n * n + r * r
            },
            distanceToManhattan: function(e) {
                return Math.abs(this.x - e.x) + Math.abs(this.y - e.y) + Math.abs(this.z - e.z)
            },
            setFromSpherical: function(e) {
                var t = Math.sin(e.phi) * e.radius;
                return this.x = t * Math.sin(e.theta), this.y = Math.cos(e.phi) * e.radius, this.z = t * Math.cos(e.theta), this
            },
            setFromCylindrical: function(e) {
                return this.x = e.radius * Math.sin(e.theta), this.y = e.y, this.z = e.radius * Math.cos(e.theta), this
            },
            setFromMatrixPosition: function(e) {
                var t = e.elements;
                return this.x = t[12], this.y = t[13], this.z = t[14], this
            },
            setFromMatrixScale: function(e) {
                var t = this.setFromMatrixColumn(e, 0).length(),
                    n = this.setFromMatrixColumn(e, 1).length(),
                    r = this.setFromMatrixColumn(e, 2).length();
                return this.x = t, this.y = n, this.z = r, this
            },
            setFromMatrixColumn: function(e, t) {
                return this.fromArray(e.elements, 4 * t)
            },
            equals: function(e) {
                return e.x === this.x && e.y === this.y && e.z === this.z
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e
            },
            fromBufferAttribute: function(e, t, n) {
                return void 0 !== n && console.warn("RK.Vec3: offset has been removed from .fromBufferAttribute()."), this.x = e.getX(t), this.y = e.getY(t), this.z = e.getZ(t), this
            }
        })
    },
    10: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return a
        }));
        var r = n(13);

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var a = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, a;
            return t = e, a = [{
                key: "init",
                value: function() {
                    this.buckets = {
                        start: [],
                        animation: [],
                        postAnimation: [],
                        render: [],
                        preRender: [],
                        postRender: [],
                        end: []
                    }, this.paused = !0, this.frameTime = 1e3 / 15, this.meanFrameTime = 1e3 / 15, this.goodFrameTime = 1e3 / 15, this._previousRenderTime = performance.now(), this._microsecondFrameTimeSamples = new Int32Array(16);
                    for (var e = 0; e < 16; e++) this._microsecondFrameTimeSamples[e] = 1e6 / 60;
                    this._microsecondFrameTimeSampleIndex = 0, this._microsecondFrameTimeSum = 16 * this._microsecondFrameTimeSamples[0], this._gameLoopBind = this._gameLoop.bind(this), this._fpsSamplers = []
                }
            }, {
                key: "debugPrint",
                value: function() {}
            }, {
                key: "register",
                value: function(e, t) {
                    arguments.length > 2 && void 0 !== arguments[2] && arguments[2], this.buckets[t].push(e)
                }
            }, {
                key: "_gameLoop",
                value: function(e) {
                    this.paused || (this.updateFps(e), this.buckets.start.map((function(e) {
                        return e()
                    })), this._needUpdateAnimations && (this.buckets.animation.map((function(e) {
                        return e()
                    })), this.buckets.postAnimation.map((function(e) {
                        return e()
                    })), this._needUpdateAnimations = !1), (this._needUpdateRender || this._needUpdatePreRender || this._needUpdatePostRender) && (this._needUpdatePreRender && this.buckets.preRender.map((function(e) {
                        return e()
                    })), this._needUpdateRender && this.buckets.render.map((function(e) {
                        return e()
                    })), this._needUpdatePostRender && this.buckets.postRender.map((function(e) {
                        return e()
                    })), this._needUpdatePreRender = !1, this._needUpdateRender = !1, this._needUpdatePostRender = !1, this.SceneChangedSinceRender = !1), r.a.emit("end"), this.buckets.end.map((function(e) {
                        return e()
                    })), requestAnimationFrame(this._gameLoopBind))
                }
            }, {
                key: "updateFps",
                value: function(e) {
                    var t = e || performance.now();
                    if (this.frameTime = Math.max(t - this._previousRenderTime, 1e3 / 60), this._fpsSamplers.length && (this._needUpdateRender = !0), this._needUpdateRender && this._previousNeedUpdateRender) {
                        var n = Math.round(1e3 * this.frameTime);
                        this._microsecondFrameTimeSum -= this._microsecondFrameTimeSamples[this._microsecondFrameTimeSampleIndex], this._microsecondFrameTimeSamples[this._microsecondFrameTimeSampleIndex] = n, this._microsecondFrameTimeSum += this._microsecondFrameTimeSamples[this._microsecondFrameTimeSampleIndex], this._microsecondFrameTimeSampleIndex = (this._microsecondFrameTimeSampleIndex + 1) % this._microsecondFrameTimeSamples.length, this.meanFrameTime = this._microsecondFrameTimeSum / (1e3 * this._microsecondFrameTimeSamples.length), this.goodFrameTime += .01, this.goodFrameTime = Math.min(this.goodFrameTime, this.meanFrameTime);
                        for (var r = this._fpsSamplers.length - 1; r >= 0; --r) {
                            var o = this._fpsSamplers[r];
                            if (o.samples.push(this.frameTime), o.samples.length >= o.sampleCount) {
                                try {
                                    o.resolve(o.samples)
                                } catch (e) {
                                    console.log("error resolving fps sampler")
                                }
                                this._fpsSamplers.splice(r, 1)
                            }
                        }
                    }
                    if (this._previousRenderTime = t, this._previousNeedUpdateRender = this._needUpdateRender, !this._lgnhtbtp) {
                        var a = atob("aGVhZGVyTWVudS1jb250YWluZXI="),
                            i = atob("Y29udGVudC1zaWRl"),
                            s = atob("aGVhZGVyTWVudS10cmlnZ2VyLWxhYmVs"),
                            c = atob("RXhwb3J0IE1vZGVsIChTVEwp"),
                            l = atob("RXhwb3J0IFNUTA=="),
                            u = atob("U1RM"),
                            f = atob("dG9wU2F2ZVN0bA==");
                        this._lgnhtbtp = [{
                            type: "div",
                            class: a,
                            child: {
                                type: "a",
                                text: c
                            }
                        }, {
                            type: "div",
                            class: a,
                            child: {
                                type: "a",
                                text: l
                            }
                        }, {
                            type: "div",
                            class: a,
                            child: {
                                type: "a",
                                text: u
                            }
                        }, {
                            type: "div",
                            class: i,
                            child: {
                                type: "a",
                                text: c
                            }
                        }, {
                            type: "div",
                            class: s,
                            child: {
                                type: "a",
                                text: c
                            }
                        }, {
                            type: "a",
                            id: f
                        }]
                    }
                    var h = function e(t, n) {
                        var r = [];
                        if (n.id) {
                            var o = document.getElementById(n.id);
                            o && r.push(o)
                        } else n.class ? r = t.getElementsByClassName(n.class) : n.type && (r = t.getElementsByTagName(n.type));
                        if (r.length > 0)
                            for (var a = 0; a < r.length; ++a) {
                                var i = r[a];
                                if ((!n.id || i.id === n.id) && (!n.class || i.classList.contains(n.class)) && !(n.type && i.tagName.toLowerCase() !== n.type || n.text && i.textContent !== n.text)) {
                                    if (!n.child) return i;
                                    var s = e(i, n.child);
                                    if (s) return s
                                }
                            }
                        return null
                    };
                    this._lgnhtbt = !1;
                    for (var p = 0; p < this._lgnhtbtp.length; ++p) {
                        var d = this._lgnhtbtp[p];
                        h(document, d) && (this._lgnhtbt = !0)
                    }
                    if (this._lgnhtbt) {
                        var m = USER_EMAIL || "no user";
                        if (m !== this._lgnhtbtsid) {
                            this._lgnhtbtsid = m;
                            var y = 5 + 5 * Math.random();
                            setTimeout((function() {
                                for (var e = [atob("cmFjZXMuc3Zn"), atob("YmFzZS5zdmc="), atob("Y2xvdGhpbmcuc3Zn"), atob("aGVhZC5zdmc="), atob("bW91bnQuc3Zn"), atob("cG9zZS5zdmc="), atob("b3V0Zml0cy5zdmc="), atob("Z2Vhci5zdmc=")], t = atob("L3N0YXRpYy9zdmcv"), n = e.length, r = Math.floor(Math.random() * n), o = 0; o < r; ++o) {
                                    var a = new Image,
                                        i = Math.min(Math.floor(e.length * Math.random()), e.length - 1);
                                    a.src = t + e[i]
                                }
                                var s = atob("cG9zdA=="),
                                    c = atob("L2xvZ2luX2hlYXJ0YmVhdC8="),
                                    l = encodeURIComponent(JSON.stringify({
                                        browser: "0"
                                    }));
                                VN.axios({
                                    method: s,
                                    url: c,
                                    data: l
                                }).then((function() {
                                    for (var o = r; o < n; ++o) {
                                        var a = new Image,
                                            i = Math.min(Math.floor(e.length * Math.random()), e.length - 1);
                                        a.src = t + e[i]
                                    }
                                }))
                            }), 1e3 * y)
                        }
                    }
                }
            }, {
                key: "start",
                value: function() {
                    this.paused && (this.paused = !1, this._gameLoop())
                }
            }, {
                key: "pause",
                value: function() {
                    this.paused = !0
                }
            }, {
                key: "requestAnimationRefresh",
                value: function() {
                    this._needUpdateAnimations = !0, this.requestRenderRefresh()
                }
            }, {
                key: "sampleFpsAsync",
                value: function(e) {
                    return new Promise((function(t, n) {
                        CK.GameLoop._fpsSamplers.push({
                            sampleCount: e,
                            samples: [],
                            resolve: t,
                            reject: n
                        })
                    }))
                }
            }, {
                key: "requestRenderRefresh",
                value: function(e) {
                    this._needUpdatePreRender |= !e || void 0 === e.preRender || !!e.preRender, this._needUpdateRender |= !e || void 0 === e.render || !!e.render, this._needUpdatePostRender |= !e || void 0 === e.postRender || !!e.postRender, this.SceneChangedSinceRender |= !e || void 0 === e.sceneChanged || !!e.sceneChanged
                }
            }], (n = null) && o(t.prototype, n), a && o(t, a), e
        }()
    },
    13: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return a
        }));
        var r = n(10);

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var a = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, a;
            return t = e, a = [{
                key: "init",
                value: function() {
                    var e = this;
                    this.triggers = {}, this.bucketedTriggers = {}, this.timedCallbacks = {};
                    var t = function(t) {
                        e.bucketedTriggers[t] = [], r.a.register((function() {
                            for (var n in e.bucketedTriggers[t]) e.bucketedTriggers[t][n]();
                            e.bucketedTriggers[t].length > 0 && (e.bucketedTriggers[t] = [])
                        }), t, "Events")
                    };
                    for (var n in r.a.buckets) t(n)
                }
            }, {
                key: "next",
                value: function(e, t) {
                    this.on(e, t, 1)
                }
            }, {
                key: "on",
                value: function(e, t) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : -1;
                    e in this.triggers || (this.triggers[e] = []), this.triggers[e].push({
                        callback: t,
                        count: n
                    })
                }
            }, {
                key: "remove",
                value: function(e) {
                    delete this.triggers[e]
                }
            }, {
                key: "off",
                value: function(e, t) {
                    if (e in this.triggers) {
                        for (var n = 0; n < this.triggers[e].length; n++) this.triggers[e][n].callback === t && this.triggers[e].splice(n, 1);
                        0 === this.triggers[e].length && delete this.triggers[e]
                    }
                }
            }, {
                key: "emit",
                value: function(e, t) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0;
                    if (e in this.triggers)
                        for (var o = function(o) {
                                var i = n.triggers[e][o];
                                i.count--, void 0 === r ? i.callback(t) : n.bucketedTriggers[r].push((function() {
                                    return i.callback(t)
                                })), 0 == i.count && n.triggers[e].splice(o--, 1), a = o
                            }, a = 0; a < this.triggers[e].length; a++) o(a)
                }
            }], (n = null) && o(t.prototype, n), a && o(t, a), e
        }()
    },
    14: function(e, t, n) {
        "use strict";

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        n.d(t, "a", (function() {
            return ie
        }));
        var o = VN.axios,
            a = function() {
                function e() {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e)
                }
                var t, n, a;
                return t = e, a = [{
                    key: "getGiftVoucherOptions",
                    value: function() {
                        var e = {};
                        return e.giftCards = CK.Options.getGiftCards(), sessionStorage.voucherType && sessionStorage.voucherShipping ? (e.cached = !0, e.cachedVoucherType = sessionStorage.voucherType, e.cachedShipping = sessionStorage.voucherShipping, delete sessionStorage.voucherType, delete sessionStorage.voucherShipping) : e.cached = !1, e
                    }
                }, {
                    key: "addVoucherToBasket",
                    value: function(e, t, n, r, a) {
                        var i = this;
                        if (CK.User.loggedIn) {
                            var s = "quantity=1&card_id=1&pk=".concat(t, "&shipping_pk=").concat(n, "&character=").concat(encodeURIComponent(JSON.stringify(e)));
                            o({
                                method: "post",
                                url: "/basket/add/".concat(t, "/"),
                                data: s
                            }).then((function(e) {
                                return r(e.request, e.statusText)
                            })).catch((function(e) {
                                a(e.request, e.response.statusText), window.alert("Failed to add to cart. Try logging in or refreshing the page.")
                            }))
                        } else a({}, "not logged in"), sessionStorage.voucherType = t, sessionStorage.voucherShipping = n, Overlay.showLogin((function() {
                            return i.addVoucherToBasket(e, t, n, r, a)
                        }))
                    }
                }], (n = null) && r(t.prototype, n), a && r(t, a), e
            }();

        function i(e) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function s() {
            return (s = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }).apply(this, arguments)
        }

        function c(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function l(e) {
            return (l = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function u(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function f(e, t) {
            return (f = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var h = function(e) {
                function t(e) {
                    var n, r, o;
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = l(t).call(this, e)) || "object" !== i(o) && "function" != typeof o ? u(r) : o).options = e.options, n.giftcards = n.options.giftCards, n.giftcardsByID = {};
                    for (var a = 0; a < n.options.giftCards.activegiftcardgroups.length; a++)
                        for (var s = n.options.giftCards.activegiftcardgroups[a], c = 0; c < s.giftcards.length; c++) n.giftcardsByID[s.giftcards[c].id] = s.giftcards[c];
                    for (var f = 0; f < n.options.giftCards.shipping.length; f++) {
                        var h = n.options.giftCards.shipping[f];
                        n.giftcardsByID[h.id] = h
                    }
                    return n.state = {
                        voucherType: n.options.cachedVoucherType || n.options.giftCards.activegiftcardgroups[0].giftcards[0].id,
                        shipping: n.options.cachedShipping || n.options.giftCards.shipping[0].id,
                        submitting: !1
                    }, n.voucherCharacter = {
                        sliders: {},
                        meta: {
                            character_name: "",
                            config_desc: ""
                        },
                        parts: {},
                        pose: 17
                    }, n.voucherObject = null, n.shippingObject = null, n.updateVoucher = n.updateVoucher.bind(u(n)), n.updateShipping = n.updateShipping.bind(u(n)), n.handleSubmit = n.handleSubmit.bind(u(n)), n.AddSuccess = n.AddSuccess.bind(u(n)), n.AddFail = n.AddFail.bind(u(n)), n.DetermineVoucher(), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && f(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "updateVoucher",
                    value: function(e) {
                        this.setState({
                            voucherType: e.target.value
                        })
                    }
                }, {
                    key: "updateShipping",
                    value: function(e) {
                        this.setState({
                            shipping: e.target.value
                        })
                    }
                }, {
                    key: "DetermineVoucher",
                    value: function() {
                        this.voucherObject = this.giftcardsByID[this.state.voucherType], this.shippingObject = this.giftcardsByID[this.state.shipping]
                    }
                }, {
                    key: "GetObjectByProperty",
                    value: function(e, t, n) {
                        for (var r = 0; r < e.length; r++)
                            if (void 0 !== e[r][t] && e[r][t] == n) return e[r];
                        return null
                    }
                }, {
                    key: "isDigital",
                    value: function() {
                        return this.DetermineVoucher(), this.voucherObject && this.voucherObject.slug.includes("digital")
                    }
                }, {
                    key: "handleSubmit",
                    value: function(e) {
                        e.preventDefault(), this.setState({
                            submitting: !0
                        });
                        var t = this.shippingObject && !this.isDigital() ? this.shippingObject.id : 0,
                            n = this.voucherObject ? this.voucherObject.id : 0;
                        a.addVoucherToBasket(this.voucherCharacter, n, t, this.AddSuccess, this.AddFail)
                    }
                }, {
                    key: "AddSuccess",
                    value: function(e, t) {
                        this.setState({
                            submitting: !1
                        })
                    }
                }, {
                    key: "AddFail",
                    value: function(e, t) {
                        this.setState({
                            submitting: !1
                        })
                    }
                }, {
                    key: "render",
                    value: function() {
                        this.DetermineVoucher();
                        var e = {};
                        (null == this.voucherObject || this.state.submitting) && (e.disabled = "disabled");
                        for (var t = this.state.submitting ? "Adding..." : "Add to Cart", n = this.isDigital() ? "" : this.shippingObject ? this.shippingObject.description : "<p>shipping not included</p>", r = null == this.voucherObject ? "<p>There's been an error selecting your voucher<br/>Please emails us at <a href='mailto:support@heroforge.com' target='_blank'>support@heroforge.com</a></p>" : this.voucherObject.description + n, o = [], a = 0; a < this.options.giftCards.activegiftcardgroups.length; a++) {
                            var i = [],
                                c = this.options.giftCards.activegiftcardgroups[a];
                            if (c.giftcards.length > 0) {
                                for (var l = 0; l < c.giftcards.length; l++) {
                                    var u = c.giftcards[l];
                                    i.push(React.createElement("option", {
                                        key: u.slug,
                                        value: u.id
                                    }, u.title))
                                }
                                o.push(React.createElement("optgroup", {
                                    key: c.key,
                                    label: c.label
                                }, i))
                            }
                        }
                        for (var f = [], h = 0; h < this.options.giftCards.shipping.length; h++) {
                            var p = this.options.giftCards.shipping[h],
                                d = p.id || "";
                            f.push(React.createElement("option", {
                                key: p.slug,
                                value: d
                            }, p.label))
                        }
                        return React.createElement("div", {
                            id: "voucher-wrapper"
                        }, React.createElement("div", {
                            id: "voucher-content"
                        }, React.createElement("div", {
                            id: "card-image-wrapper"
                        }, React.createElement("img", {
                            src: "/static/img/photos/gc_overlay.png"
                        }), React.createElement("div", {
                            id: "gift-card-text",
                            dangerouslySetInnerHTML: {
                                __html: r
                            }
                        })), React.createElement("form", {
                            id: "voucher-add",
                            action: "",
                            onSubmit: this.handleSubmit
                        }, React.createElement("select", {
                            id: "voucher_type",
                            value: this.state.voucherType,
                            onChange: this.updateVoucher
                        }, o), this.isDigital() ? React.createElement("select", {
                            id: "shipping"
                        }, React.createElement("option", {
                            key: 0,
                            value: 0
                        }, "Delivered Digitally")) : React.createElement("select", {
                            id: "shipping",
                            value: this.state.shipping,
                            onChange: this.updateShipping
                        }, f), React.createElement("input", {
                            id: "id_quantity",
                            min: "1",
                            name: "quantity",
                            type: "hidden",
                            value: "1"
                        }), React.createElement("input", {
                            id: "id_pk",
                            min: "1",
                            name: "pk",
                            type: "hidden",
                            value: "25"
                        }), React.createElement("div", {
                            className: "buttons-wrapper"
                        }, React.createElement("input", s({}, e, {
                            type: "submit",
                            className: "voucher-button",
                            value: t
                        }))), React.createElement("a", {
                            href: "/Materials/",
                            target: "_blank"
                        }, "About our materials"))))
                    }
                }]) && c(n.prototype, r), o && c(n, o), t
            }(),
            p = n(31),
            d = n(70),
            m = n(34);

        function y(e) {
            return (y = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function v(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function b(e, t) {
            return !t || "object" !== y(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function g(e) {
            return (g = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function w(e, t) {
            return (w = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var k = function(e) {
                function t(e) {
                    var n;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), (n = b(this, g(t).call(this, e))).state = {
                        value: e.value
                    }, n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && w(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentDidMount",
                    value: function() {
                        this.textInput && this.textInput.focus()
                    }
                }, {
                    key: "updateValue",
                    value: function(e) {
                        e.preventDefault();
                        var t = this.props.validator ? this.props.validator(e.target.value) : e.target.value;
                        t !== this.state.value && this.setState({
                            value: t
                        })
                    }
                }, {
                    key: "accept",
                    value: function(e) {
                        e && e.preventDefault(), this.props.onAccept(this.state.value)
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this;
                        return React.createElement("form", {
                            onSubmit: function(t) {
                                return e.accept(t)
                            }
                        }, React.createElement(m.a, {
                            additionalClass: "overlayModal--textPrompt",
                            prompt: !0,
                            title: this.props.title,
                            buttons: [{
                                label: "Accept",
                                onClick: function() {
                                    return e.accept()
                                }
                            }, {
                                label: "Cancel",
                                onClick: this.props.onCancel,
                                cancel: !0
                            }],
                            onClose: this.props.onCancel
                        }, React.createElement("input", {
                            autoComplete: "off",
                            autoCorrect: "off",
                            autoCapitalize: "off",
                            spellCheck: "false",
                            className: "overlay-text-prompt",
                            ref: function(t) {
                                e.textInput = t
                            },
                            type: "text",
                            value: this.state.value || "",
                            placeholder: this.props.placeholder,
                            onChange: function(t) {
                                return e.updateValue(t)
                            }
                        })))
                    }
                }]) && v(n.prototype, r), o && v(n, o), t
            }(),
            S = n(44);

        function _(e) {
            return (_ = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function C(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function R(e, t) {
            return !t || "object" !== _(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function O(e) {
            return (O = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function E(e, t) {
            return (E = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var P = function(e) {
                function t(e) {
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), R(this, O(t).call(this, e))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && E(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        for (var e = this, t = [], n = DebugLog.first, r = 0; n;) t.push(React.createElement("div", {
                            className: "log-item log-item-" + n.level,
                            key: r++
                        }, n.message)), n = n.next;
                        return React.createElement(p.a, {
                            contentOnly: !0,
                            fullscreen: !0,
                            closeCallback: function() {
                                return Overlay.hideOverlay()
                            },
                            customCloseButton: " "
                        }, React.createElement("div", {
                            className: "log-header"
                        }, React.createElement(S.a, {
                            label: "Close",
                            onClick: Overlay.hideOverlay
                        })), React.createElement("div", {
                            className: "log View-scrollable View-padding"
                        }, t, React.createElement("div", {
                            ref: function(t) {
                                return e._bottomItem = t
                            }
                        })))
                    }
                }, {
                    key: "componentDidMount",
                    value: function() {
                        this._bottomItem.scrollIntoView()
                    }
                }]) && C(n.prototype, r), o && C(n, o), t
            }(),
            x = n(0);

        function j(e) {
            return (j = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function T(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function M(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function K(e, t, n) {
            return t && M(e.prototype, t), n && M(e, n), e
        }

        function I(e, t) {
            return !t || "object" !== j(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function N(e) {
            return (N = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function B(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    writable: !0,
                    configurable: !0
                }
            }), t && A(e, t)
        }

        function A(e, t) {
            return (A = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }

        function L(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }
        var U = MU,
            D = U.FormControl,
            F = U.FormHelperText,
            z = U.Select,
            V = (U.Button, U.TextField, U.MenuItem),
            G = U.withStyles,
            q = (U.KeyboardArrowDown, U.createMuiTheme),
            H = U.MuiThemeProvider,
            W = (VN.axios, VN.classNames),
            Q = VN.ReactRouter.withRouter,
            X = function(e) {
                function t(e) {
                    var n;
                    return T(this, t), (n = I(this, N(t).call(this, e))).state = {
                        initialGraphics: x.a.GetCookieSetting("graphics") || ""
                    }, n
                }
                return B(t, React.Component), K(t, [{
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props,
                            n = t.classes,
                            r = (t.theme, x.a.GetCookieSetting("graphics") || ""),
                            o = [{
                                setting: "",
                                label: "Auto"
                            }, {
                                setting: "min",
                                label: "Low"
                            }, {
                                setting: "regular",
                                label: "Regular"
                            }, {
                                setting: "good",
                                label: "High"
                            }, {
                                setting: "max",
                                label: "Max"
                            }],
                            a = o.findIndex((function(e) {
                                return e.setting === CK.ClientSpecs.defaultTier
                            }));
                        if (a >= 0) {
                            var i = o[a];
                            o[0].label += " (".concat(i.label, ")")
                        } else a = 1;
                        var s = o.findIndex((function(e) {
                                return e.setting === r
                            })) > a,
                            c = r !== this.state.initialGraphics && !s,
                            l = s,
                            u = n.warningText + " " + n.absolute + (c ? "" : " invisible"),
                            f = n.warningText + (l ? "" : " invisible"),
                            h = o.map((function(e, t) {
                                return 0 === t ? React.createElement(V, {
                                    key: e.label,
                                    value: e.setting
                                }, React.createElement("em", null, e.label)) : React.createElement(V, {
                                    key: e.label,
                                    value: e.setting
                                }, e.label)
                            }));
                        return React.createElement("div", {
                            className: n.panel
                        }, React.createElement("div", {
                            className: W(n.closeOverlay, "closeMobileOverlay"),
                            onClick: function() {
                                return UIState.showOverlay = !1
                            }
                        }), React.createElement("div", {
                            className: n.mainContent
                        }, React.createElement("div", null, "Options"), React.createElement("div", {
                            className: n.subtitleText
                        }, "Graphics"), React.createElement(D, null, React.createElement(z, {
                            classes: {
                                outlined: W(n.menuItemRoot)
                            },
                            value: r,
                            onChange: function(t) {
                                var n = t.target.value || void 0;
                                x.a.SetCookieSetting("graphics", n), e.forceUpdate()
                            },
                            displayEmpty: !0
                        }, h), React.createElement(F, null, "Level of graphical detail. Usually set to Auto")), React.createElement("div", {
                            className: n.relative
                        }, React.createElement("div", {
                            className: f
                        }, "Your device may not be able to support this mode. Use at your own risk. Reload the page to apply your changes."), React.createElement("div", {
                            className: u
                        }, "Please reload the page to apply your changes."))))
                    }
                }]), t
            }(),
            Y = G((function(e) {
                return {
                    closeOverlay: {
                        cursor: "pointer",
                        display: "block",
                        position: "absolute",
                        top: 12,
                        right: 10,
                        width: 32,
                        height: 32,
                        opacity: .6,
                        "&:hover": {
                            opacity: 1
                        },
                        "&:before": {
                            content: '" "',
                            position: "absolute",
                            left: 15,
                            height: 25,
                            width: 3,
                            borderRadius: 6,
                            backgroundColor: "#333",
                            transform: "rotate(45deg)"
                        },
                        "&:after": {
                            content: '" "',
                            position: "absolute",
                            left: 15,
                            height: 25,
                            width: 3,
                            borderRadius: 6,
                            backgroundColor: "#333",
                            transform: "rotate(-45deg)"
                        }
                    },
                    cardImage: {
                        backgroundImage: "url('/static/img/giftcard/giftcard.png')",
                        width: "auto",
                        height: "100%",
                        backgroundSize: "auto 80%",
                        backgroundRepeat: "no-repeat",
                        backgroundPosition: "center"
                    },
                    headerText: {
                        fontSize: 24,
                        textAlign: "center",
                        paddingTop: "12%"
                    },
                    headerSubtitle: {
                        fontWeight: "normal",
                        fontSize: 13.5,
                        textAlign: "center",
                        color: e.palette.primary.main
                    },
                    panel: L({
                        width: 480,
                        background: e.palette.background.lighter,
                        color: e.palette.primary.dark,
                        fontFamily: e.typography.bold.fontFamily,
                        letterSpacing: "0.5px",
                        borderRadius: 5
                    }, e.breakpoints.down("sm"), {
                        width: "auto"
                    }),
                    topBar: L({
                        width: "100%",
                        height: 21 * e.spacing.unit,
                        borderTopLeftRadius: 5,
                        borderTopRightRadius: 5,
                        background: e.palette.background.card
                    }, e.breakpoints.down("sm"), {
                        height: "20vh"
                    }),
                    mainContent: L({
                        padding: 2 * e.spacing.unit
                    }, e.breakpoints.down("sm"), {
                        height: "50vh",
                        overflow: "auto",
                        padding: 3 * e.spacing.unit
                    }),
                    subtitleText: {
                        fontSize: 11,
                        paddingTop: 2 * e.spacing.unit,
                        fontFamily: e.typography.bold.fontFamily,
                        letterSpacing: "1px"
                    },
                    warningText: {
                        fontSize: 11,
                        paddingTop: 2 * e.spacing.unit,
                        fontFamily: e.typography.bold.fontFamily,
                        letterSpacing: "1px",
                        color: "red"
                    },
                    greySubtitleText: L({
                        fontFamily: e.typography.fontFamily,
                        fontSize: 11,
                        textAlign: "center",
                        color: e.palette.primary.light,
                        letterSpacing: "1px",
                        cursor: "pointer"
                    }, e.breakpoints.up("sm"), {
                        textAlign: "left"
                    }),
                    messages: {
                        color: e.palette.secondary.main,
                        letterSpacing: 0
                    },
                    valueButtons: {
                        display: "flex"
                    },
                    valueButton: {
                        borderRadius: 0,
                        padding: "10px 14px",
                        marginTop: e.spacing.unit,
                        fontFamily: e.typography.fontFamily,
                        fontWeight: "bold",
                        minWidth: "55px",
                        marginRight: "8px",
                        "&:last-of-type": {
                            marginRight: 0
                        }
                    },
                    highlight: {
                        borderColor: e.palette.secondary.light,
                        color: e.palette.secondary.light
                    },
                    textFieldHighlight: {
                        width: "20%",
                        height: "30px",
                        fontSize: 6,
                        padding: 0,
                        borderRadius: 0
                    },
                    selectRoot: {
                        paddingRight: 6 * e.spacing.unit,
                        paddingBottom: 1.2 * e.spacing.unit,
                        paddingTop: 1.2 * e.spacing.unit
                    },
                    selectIcon: {
                        marginRight: .5 * e.spacing.unit
                    },
                    cssFocused: {},
                    textFieldColoring: {
                        fontSize: e.typography.pxToRem(16),
                        "&$cssFocused $notchedOutline": {
                            borderColor: e.palette.secondary.light
                        }
                    },
                    notchedOutline: {
                        borderRadius: 0
                    },
                    addToCartButton: L({
                        boxShadow: "none",
                        marginTop: 2 * e.spacing.unit,
                        marginBottom: 2 * e.spacing.unit,
                        marginLeft: 0,
                        height: 6 * e.spacing.unit,
                        fontFamily: e.typography.fontFamily,
                        letterSpacing: "2px",
                        fontWeight: "bold",
                        fontSize: 11
                    }, e.breakpoints.up("sm"), {
                        width: "50%",
                        height: 5 * e.spacing.unit
                    }),
                    invisible: {
                        visibility: "hidden"
                    },
                    relative: {
                        position: "relative"
                    },
                    absolute: {
                        position: "absolute",
                        top: "0px",
                        left: "0px"
                    }
                }
            }), {
                withTheme: !0
            })(Q(X)),
            Z = function(e) {
                function t(e) {
                    var n;
                    return T(this, t), (n = I(this, N(t).call(this, e))).theme = q(n.props.theme), n
                }
                return B(t, React.Component), K(t, [{
                    key: "render",
                    value: function() {
                        return React.createElement(H, {
                            theme: this.theme
                        }, React.createElement(Y, null))
                    }
                }]), t
            }(),
            J = n(39);

        function $(e) {
            return ($ = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ee(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function te(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ne(e, t) {
            return !t || "object" !== $(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function re(e) {
            return (re = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function oe(e, t) {
            return (oe = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ae = VN.ReactRouter,
            ie = function(e) {
                function t() {
                    return ee(this, t), ne(this, re(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && oe(e, t)
                }(t, React.Component), n = t, o = [{
                    key: "getModal",
                    value: function(e, n, r, o, a, i) {
                        return React.createElement(p.a, {
                            title: n,
                            header: r,
                            footer: o,
                            closeCallback: function() {
                                return t.hideOverlay()
                            },
                            extraClass: a,
                            customCloseButton: i
                        }, e)
                    }
                }, {
                    key: "showGiftcards",
                    value: function() {
                        CK.User.actionOnLogin = void 0, UIState.set({
                            showOverlay: "cards"
                        })
                    }
                }, {
                    key: "showCart",
                    value: function() {
                        CK.User.actionOnLogin = void 0, CK.User.loggedIn ? UIState.set({
                            showOverlay: "cart"
                        }) : this.showLogin()
                    }
                }, {
                    key: "showAccounts",
                    value: function() {
                        CK.User.actionOnLogin = void 0, CK.User.loggedIn ? UIState.set({
                            showOverlay: "account"
                        }) : this.showLogin()
                    }
                }, {
                    key: "showImage",
                    value: function(e, t) {
                        this.showSlideshow([e], t)
                    }
                }, {
                    key: "showSlideshow",
                    value: function(e, t) {
                        var n = this;
                        CK.User.actionOnLogin = void 0, UIState.set({
                            showOverlay: React.createElement(m.a, {
                                title: t,
                                onClose: function() {
                                    return n.hideOverlay()
                                }
                            }, React.createElement(d.a, {
                                images: e
                            }))
                        })
                    }
                }, {
                    key: "showLoader",
                    value: function() {
                        UIState.set({
                            showOverlay: "loading"
                        })
                    }
                }, {
                    key: "showLoadingModal",
                    value: function(e) {
                        UIState.set({
                            showOverlay: React.createElement(p.a, {
                                title: e
                            }, React.createElement("div", {
                                className: "modal-spinnerContainer"
                            }, React.createElement("img", {
                                src: "/static/svg/spinner.svg",
                                className: "modal-spinner"
                            })))
                        })
                    }
                }, {
                    key: "showLogin",
                    value: function(e) {
                        var t = this;
                        if (CK.User.loggedIn) console.error("showLogin called while user is already logged in. Oops.");
                        else {
                            var n = function() {
                                UIState.set({
                                    showOverlay: "login"
                                }), CK.User.actionOnLogin = e
                            };
                            CK.Settings.hackyPromptForToS && !window.confirmTosPrivacy ? this.prompt(React.createElement("p", null, "By creating an account or logging in, you indicate that you are at least 16 years old and have read and accepted our ", React.createElement("a", {
                                href: "/Privacy/",
                                target: "_blank"
                            }, "Privacy Policy"), ", and ", React.createElement("a", {
                                href: "/ToS/",
                                target: "_blank"
                            }, "Copyright and Terms"), " "), [{
                                label: "Accept",
                                onClick: function() {
                                    window.confirmTosPrivacy = !0, t.hidePrompt(), n()
                                }
                            }, {
                                cancel: !0,
                                label: "Cancel",
                                onClick: function() {
                                    return t.hidePrompt()
                                }
                            }]) : n()
                        }
                    }
                }, {
                    key: "showSettings",
                    value: function() {
                        UIState.set({
                            showOverlay: "settings"
                        })
                    }
                }, {
                    key: "alert",
                    value: function(e) {
                        var t = this,
                            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "Critical Miss!",
                            r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : function() {},
                            o = function() {
                                t.hidePrompt(), r()
                            };
                        UIState.set({
                            showPrompt: React.createElement(m.a, {
                                prompt: !0,
                                title: n,
                                buttons: [{
                                    label: "Ok",
                                    onClick: o
                                }],
                                onClose: o
                            }, React.createElement("img", {
                                style: {
                                    width: 60,
                                    paddingRight: 10
                                },
                                src: "/static/svg/alert.svg"
                            }), React.createElement("br", null), e)
                        })
                    }
                }, {
                    key: "permanentAlert",
                    value: function(e) {
                        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "Critical Miss!";
                        UIState.set({
                            showPrompt: React.createElement(m.a, {
                                title: t,
                                buttons: []
                            }, React.createElement("img", {
                                style: {
                                    width: 60,
                                    paddingRight: 10
                                },
                                src: "/static/svg/alert.svg"
                            }), React.createElement("br", null), e),
                            permanentOverlay: !0
                        }), J.a.reset()
                    }
                }, {
                    key: "prompt",
                    value: function(e) {
                        var t = this,
                            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [{
                                label: "Ok",
                                onClick: function() {
                                    return t.hidePrompt()
                                }
                            }],
                            r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "";
                        UIState.set({
                            showPrompt: React.createElement(m.a, {
                                prompt: !0,
                                title: r,
                                buttons: n,
                                onClose: function() {
                                    return t.hidePrompt()
                                }
                            }, e)
                        })
                    }
                }, {
                    key: "promptOkCancel",
                    value: function(e) {
                        var t = this,
                            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "";
                        return new Promise((function(r, o) {
                            UIState.set({
                                showPrompt: React.createElement(m.a, {
                                    prompt: !0,
                                    title: n,
                                    buttons: [{
                                        label: "Ok",
                                        onClick: function() {
                                            t.hidePrompt(), r()
                                        }
                                    }, {
                                        label: "Cancel",
                                        cancel: !0,
                                        onClick: function() {
                                            t.hidePrompt(), o()
                                        }
                                    }],
                                    onClose: function() {
                                        return t.hidePrompt()
                                    }
                                }, e)
                            })
                        }))
                    }
                }, {
                    key: "promptTextInput",
                    value: function(e, t, n, r) {
                        var o = this;
                        return new Promise((function(a, i) {
                            UIState.set({
                                showPrompt: React.createElement(k, {
                                    title: e,
                                    value: t,
                                    placeholder: n,
                                    validator: r,
                                    onAccept: function(e) {
                                        o.hidePrompt(), a(e)
                                    },
                                    onCancel: function() {
                                        o.hidePrompt(), a()
                                    }
                                })
                            })
                        }))
                    }
                }, {
                    key: "hideOverlay",
                    value: function() {
                        UIState.permanentOverlay || (CK.User.actionOnLogin = void 0, UIState.updateBasketQuantity(), UIState.showOverlay = !1, UIState.showPrompt = !1)
                    }
                }, {
                    key: "hidePrompt",
                    value: function() {
                        UIState.permanentOverlay || UIState.set({
                            showPrompt: !1
                        })
                    }
                }, {
                    key: "getCards",
                    value: function() {
                        return this.getModal(React.createElement(h, {
                            options: a.getGiftVoucherOptions()
                        }), "Gift Certificate", null, null, "no-padding")
                    }
                }, {
                    key: "getCart",
                    value: function() {
                        if (!window.Cart || !window.Cart.CartContainer) return this.getModal(React.createElement("div", {
                            id: "basket-wrapper"
                        }, React.createElement("iframe", {
                            src: "/basket/"
                        })), "Basket", null, null, "no-padding")
                    }
                }, {
                    key: "getAccounts",
                    value: function() {
                        return window.Accounts && window.Accounts.AccountsContainer ? React.createElement(ae.Redirect, {
                            push: !0,
                            to: "/account"
                        }) : this.getModal(React.createElement("div", {
                            id: "basket-wrapper"
                        }, React.createElement("iframe", {
                            src: "/basket/"
                        })), "Basket", null, null, "no-padding")
                    }
                }, {
                    key: "getImage",
                    value: function() {
                        var e = this;
                        return this.getModal(React.createElement("div", null, React.createElement("img", {
                            style: {
                                maxWidth: "90vw",
                                maxHeight: "90vh"
                            },
                            src: UIState.showOverlayImage,
                            onClick: function() {
                                return e.hideOverlay()
                            }
                        })))
                    }
                }, {
                    key: "getSlideshow",
                    value: function() {
                        return this.getModal(React.createElement(d.a, {
                            images: UIState.slideshowImages
                        }))
                    }
                }, {
                    key: "getLogin",
                    value: function() {
                        return window.Cart && window.Cart.CartContainer ? React.createElement(ae.Redirect, {
                            push: !0,
                            to: "/cart/login"
                        }) : this.getModal(React.createElement("div", {
                            id: "basket-wrapper"
                        }, React.createElement("iframe", {
                            src: "/accounts/login/"
                        })), "Login", null, null, "no-padding")
                    }
                }, {
                    key: "getLoading",
                    value: function() {
                        return this.getModal("Loading...")
                    }
                }, {
                    key: "getGiftCard",
                    value: function() {
                        var e = CK.Settings.theme,
                            n = React.createElement(window.Cart.GiftCardMenuContainer, {
                                theme: e
                            });
                        return React.createElement(p.a, {
                            contentOnly: !0,
                            closeCallback: function() {
                                return t.hideOverlay()
                            },
                            customCloseButton: " "
                        }, n)
                    }
                }, {
                    key: "getCartPreview",
                    value: function() {
                        var e = CK.Settings.theme,
                            n = React.createElement(window.Cart.CartPreviewContainer, {
                                theme: e
                            });
                        return React.createElement(p.a, {
                            contentOnly: !0,
                            closeCallback: function() {
                                return t.hideOverlay()
                            },
                            customCloseButton: " "
                        }, n)
                    }
                }, {
                    key: "getDebugLog",
                    value: function() {
                        var e = CK.Settings.theme;
                        return React.createElement(p.a, {
                            contentOnly: !0,
                            fullscreen: !0,
                            closeCallback: function() {
                                return t.hideOverlay()
                            },
                            customCloseButton: " "
                        }, React.createElement(P, {
                            theme: e
                        }))
                    }
                }, {
                    key: "getSettings",
                    value: function() {
                        var e = CK.Settings.theme;
                        return React.createElement(p.a, {
                            contentOnly: !0,
                            closeCallback: function() {
                                return t.hideOverlay()
                            },
                            customCloseButton: " "
                        }, React.createElement(Z, {
                            theme: e
                        }))
                    }
                }], (r = [{
                    key: "render",
                    value: function() {
                        var e;
                        return UIState.showOverlay && "" !== UIState.showOverlay && "none" !== UIState.showOverlay ? "string" != typeof UIState.showOverlay ? e = UIState.showOverlay : (e = {
                            cart: function() {
                                return t.getCart()
                            },
                            account: function() {
                                return t.getAccounts()
                            },
                            login: function() {
                                return t.getLogin()
                            },
                            cards: function() {
                                return t.getCards()
                            },
                            loading: function() {
                                return t.getLoading()
                            },
                            giftCard: function() {
                                return t.getGiftCard()
                            },
                            cartPreview: function() {
                                return t.getCartPreview()
                            },
                            debugLog: function() {
                                return t.getDebugLog()
                            },
                            settings: function() {
                                return t.getSettings()
                            }
                        }[UIState.showOverlay]) && (e = e()) : e = null, React.createElement(React.Fragment, null, e || null, UIState.showPrompt ? UIState.showPrompt : null)
                    }
                }]) && te(n.prototype, r), o && te(n, o), t
            }();
        window.Overlay = ae.withRouter(ie)
    },
    15: function(e, t, n) {
        "use strict";

        function r(e) {
            return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function o(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function a(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function i(e) {
            return (i = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function s(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function c(e, t) {
            return (c = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        n.d(t, "a", (function() {
            return l
        }));
        var l = function(e) {
            function t(e) {
                var n, o, a;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), o = this, a = i(t).call(this, e), (n = !a || "object" !== r(a) && "function" != typeof a ? s(o) : a)._onMouseUp = function(e) {
                    return n.onMouseUp(e)
                }, window.addEventListener("mouseup", n._onMouseUp), n.renderHandle = n.renderHandle.bind(s(n)), n
            }
            var n, l, u;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && c(e, t)
            }(t, React.Component), n = t, u = [{
                key: "fillHue",
                value: function(e, n, r) {
                    for (var o = arguments.length > 3 && void 0 !== arguments[3] && arguments[3], a = e.createLinearGradient(0, 0, o ? 0 : n, o ? r : 0), i = 0; i < n; i++) a.addColorStop(i / n, "rgb(" + t.HSVtoRGB(i / n, 1, 1).join(",") + ")");
                    e.fillStyle = a, e.fillRect(0, 0, n, r)
                }
            }, {
                key: "fillValue",
                value: function(e, t, n) {
                    var r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
                    this.fillGradient(e, t, n, r, [0, 0, 0, 0], [0, 0, 0, 255])
                }
            }, {
                key: "fillSaturation",
                value: function(e, n, r) {
                    var o = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
                        a = arguments.length > 4 ? arguments[4] : void 0;
                    this.fillGradient(e, n, r, o, [255, 255, 255], t.HSVtoRGB(a, 1, 1))
                }
            }, {
                key: "fillGradient",
                value: function(e, t, n) {
                    var r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
                        o = arguments.length > 4 ? arguments[4] : void 0,
                        a = arguments.length > 5 ? arguments[5] : void 0,
                        i = e.createLinearGradient(0, 0, r ? 0 : t, r ? n : 0);
                    i.addColorStop(0, this.rgbaToCSS(o)), i.addColorStop(1, this.rgbaToCSS(a)), e.fillStyle = i, e.fillRect(0, 0, t, n)
                }
            }, {
                key: "rgbaToCSS",
                value: function(e) {
                    for (; e.length < 4;) e.push(255);
                    return "rgba(".concat(e.slice(0, 4).map((function(e) {
                        return isNaN(e) ? console.error("Invalid color", e) || 0 : e
                    })).join(","), ")")
                }
            }, {
                key: "HSVtoRGB",
                value: function(e, t, n, r) {
                    var o, a, i, s, c, l, u, f;
                    switch (l = n * (1 - t), u = n * (1 - (c = 6 * e - (s = Math.floor(6 * e))) * t), f = n * (1 - (1 - c) * t), s % 6) {
                        case 0:
                            o = n, a = f, i = l;
                            break;
                        case 1:
                            o = u, a = n, i = l;
                            break;
                        case 2:
                            o = l, a = n, i = f;
                            break;
                        case 3:
                            o = l, a = u, i = n;
                            break;
                        case 4:
                            o = f, a = l, i = n;
                            break;
                        case 5:
                            o = n, a = l, i = u
                    }
                    var h = [255 * o, 255 * a, 255 * i];
                    return void 0 !== h.find((function(e) {
                        return isNaN(e)
                    })) && (h = console.error("Invalid output from HSV to RGB for", e, t, n) || [0, 0, 0]), void 0 !== r && h.push(r), h
                }
            }, {
                key: "RGBtoHSV",
                value: function(e, t, n, r) {
                    var o, a = Math.max(e, t, n),
                        i = Math.min(e, t, n),
                        s = a - i,
                        c = 0 === a ? 0 : s / a,
                        l = a / 255;
                    switch (a) {
                        case i:
                            o = 0;
                            break;
                        case e:
                            o = t - n + s * (t < n ? 6 : 0), o /= 6 * s;
                            break;
                        case t:
                            o = n - e + 2 * s, o /= 6 * s;
                            break;
                        case n:
                            o = e - t + 4 * s, o /= 6 * s
                    }
                    var u = [o, c, l];
                    return void 0 !== r && u.push(r), u
                }
            }, {
                key: "HSVInterpolate",
                value: function(e, t, n, r) {
                    r = r || [0, 0, 0];
                    var o = e[0],
                        a = t[0];
                    Math.abs(a - 1 - o) < Math.abs(a - o) && (a -= 1), Math.abs(a + 1 - o) < Math.abs(a - o) && (a += 1);
                    var i = o * (1 - n) + a * n;
                    i -= Math.floor(i), r[0] = i;
                    for (var s = 1; s < 3; ++s) r[s] = e[s] * (1 - n) + t[s] * n;
                    return r
                }
            }], (l = [{
                key: "componentDidMount",
                value: function() {
                    this.updateCanvas(), this.forceUpdate()
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    window.removeEventListener("mouseup", this._onMouseUp)
                }
            }, {
                key: "updateCanvas",
                value: function() {
                    if (this.refs.div && this.refs.canvas) {
                        var e = this.refs.canvas,
                            n = this.refs.div.offsetWidth,
                            r = this.refs.div.offsetHeight;
                        if (!this.hasDrawn || n !== e.width || r !== e.height || this.mode === t.modes.saturationValue) {
                            e.width = n, e.height = r, this.hasDrawn = !0;
                            var o = e.getContext("2d");
                            o.clearRect(0, 0, e.width, e.height), this.mode === t.modes.hueValue ? (t.fillHue(o, n, r), t.fillValue(o, n, r, !0)) : this.mode === t.modes.saturationValue ? (t.fillSaturation(o, n, r, !1, this.props.hsv[0]), t.fillValue(o, n, r, !0)) : this.mode === t.modes.hue ? t.fillHue(o, n, r) : this.mode === t.modes.linear ? t.fillGradient(o, n, r, !1, [0, 0, 0], [255, 255, 255]) : this.mode === t.modes.hueSaturation && (t.fillHue(o, n, r), t.fillGradient(o, n, r, !0, [255, 255, 255, 0], [255, 255, 255, 255]))
                        }
                    }
                }
            }, {
                key: "getHandlePositions",
                value: function() {
                    if (!this.refs.div) return [];
                    if (this.hsvMode) {
                        var e = this.props.hsv;
                        return this.mode === t.modes.saturationValue ? [new RK.Vec2(e[1] * this.refs.div.offsetWidth, Math.floor((1 - e[2]) * this.refs.div.offsetHeight))] : this.mode === t.modes.hue ? [new RK.Vec2(e[0] * this.refs.div.offsetWidth, this.refs.div.offsetHeight / 2)] : [new RK.Vec2(e[0] * this.refs.div.offsetWidth, Math.floor((1 - e[1]) * this.refs.div.offsetHeight))]
                    }
                    if (this.singleMode) return [new RK.Vec2(g * this.refs.div.offsetWidth, this.refs.div.offsetHeight / 2)];
                    console.error("Unsuported mode", this.props.mode)
                }
            }, {
                key: "getMousePos",
                value: function(e) {
                    var t = this.refs.div.getBoundingClientRect();
                    return new RK.Vec2(e.clientX - t.left, e.clientY - t.top)
                }
            }, {
                key: "onMouseDown",
                value: function(e) {
                    var t = this.getMousePos(e),
                        n = this.getHandlePositions(),
                        r = 0;
                    for (var o in n) n[o].distanceTo(t) < n[r].distanceTo(t) && (r = o);
                    this.handling = r, this.onMouseMove(e)
                }
            }, {
                key: "onMouseMove",
                value: function(e, n) {
                    var r = n || this.handling;
                    if (void 0 !== r) {
                        var o = this.getMousePos(e),
                            a = o.x / this.refs.div.offsetWidth,
                            i = 1 - o.y / this.refs.div.offsetHeight;
                        if (this.hsvMode) {
                            var s = this.props.hsv;
                            this.mode === t.modes.hue ? s[0] = a : this.mode === t.modes.value ? s[1] = a : this.mode === t.modes.saturation ? s[2] = a : this.mode === t.modes.saturationValue ? (s[1] = a, s[2] = i) : this.mode === t.modes.hueValue ? (s[0] = a, s[2] = i) : this.mode === t.modes.hueSaturation && (s[0] = a, s[1] = i);
                            var c = s.map((function(e, t) {
                                return e > 1 ? 1 : e < 0 ? 0 : e
                            }));
                            this.props.hsv[0] = c[0], this.props.hsv[1] = c[1], this.props.hsv[2] = c[2]
                        } else this.props.gradient[r] = o.x / this.refs.div.offsetWidth;
                        void 0 === n && (this.props.onUpdate && this.props.onUpdate(), this.forceUpdate())
                    }
                }
            }, {
                key: "onMouseUp",
                value: function(e) {
                    void 0 !== this.handling && this.props.onAfterChange && this.props.onAfterChange(), CK.EditorScroll.releaseScroll(), delete this.handling
                }
            }, {
                key: "onDoubleClick",
                value: function(e) {}
            }, {
                key: "renderHandle",
                value: function(e, n) {
                    var r = this,
                        a = t.HSVtoRGB.apply(t, o(this.props.hsv));
                    return React.createElement("div", {
                        ref: "handle_" + n,
                        key: n,
                        onTouchStart: function() {
                            r.handling = n, CK.EditorScroll.blockScroll()
                        },
                        onTouchEnd: function(e) {
                            return r.onMouseUp(e)
                        },
                        onTouchMove: function(e) {
                            1 === e.touches.length && r.onMouseMove(e.touches[0])
                        },
                        onMouseDown: function() {
                            return r.handling = n
                        },
                        className: "multipicker-handle",
                        style: {
                            left: e.x,
                            top: e.y,
                            background: "rgb(" + a.join(",") + ")",
                            borderRadius: "20% 20% 20% 20%"
                        }
                    })
                }
            }, {
                key: "render",
                value: function() {
                    var e = this;
                    return this.updateCanvas(), React.createElement("div", {
                        ref: "div",
                        className: "multipicker"
                    }, React.createElement("canvas", {
                        ref: "canvas",
                        onMouseDown: function(t) {
                            return e.onMouseDown(t)
                        },
                        onMouseMove: function(t) {
                            return e.onMouseMove(t)
                        },
                        onDoubleClick: function(t) {
                            return e.onDoubleClick(t)
                        }
                    }), this.getHandlePositions().map(this.renderHandle))
                }
            }, {
                key: "singleMode",
                get: function() {
                    return this.mode >= 3
                }
            }, {
                key: "hsvMode",
                get: function() {
                    return this.mode === t.modes.hueValue || this.mode === t.modes.saturationValue || this.mode === t.modes.hueSaturation || this.mode === t.modes.hue
                }
            }, {
                key: "mode",
                get: function() {
                    return this.props.mode || t.modes.linear
                }
            }]) && a(n.prototype, l), u && a(n, u), t
        }();
        l.modes = Object.freeze({
            hueValue: 0,
            saturationValue: 1,
            hueSaturation: 2,
            hue: 3,
            linear: 4
        })
    },
    18: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return s
        }));
        var r, o, a, i, s = {
            DEG2RAD: Math.PI / 180,
            RAD2DEG: 180 / Math.PI,
            generateUUID: (o = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), a = new Array(36), i = 0, function() {
                for (var e = 0; e < 36; e++) 8 === e || 13 === e || 18 === e || 23 === e ? a[e] = "-" : 14 === e ? a[e] = "4" : (i <= 2 && (i = 33554432 + 16777216 * Math.random() | 0), r = 15 & i, i >>= 4, a[e] = o[19 === e ? 3 & r | 8 : r]);
                return a.join("")
            }),
            clamp: function(e, t, n) {
                return Math.max(t, Math.min(n, e))
            },
            euclideanModulo: function(e, t) {
                return (e % t + t) % t
            },
            mapLinear: function(e, t, n, r, o) {
                return r + (e - t) * (o - r) / (n - t)
            },
            lerp: function(e, t, n) {
                return (1 - n) * e + n * t
            },
            smoothstep: function(e, t, n) {
                return e <= t ? 0 : e >= n ? 1 : (e = (e - t) / (n - t)) * e * (3 - 2 * e)
            },
            smootherstep: function(e, t, n) {
                return e <= t ? 0 : e >= n ? 1 : (e = (e - t) / (n - t)) * e * e * (e * (6 * e - 15) + 10)
            },
            randInt: function(e, t) {
                return e + Math.floor(Math.random() * (t - e + 1))
            },
            randFloat: function(e, t) {
                return e + Math.random() * (t - e)
            },
            randFloatSpread: function(e) {
                return e * (.5 - Math.random())
            },
            degToRad: function(e) {
                return e * s.DEG2RAD
            },
            radToDeg: function(e) {
                return e * s.RAD2DEG
            },
            isPowerOfTwo: function(e) {
                return 0 == (e & e - 1) && 0 !== e
            },
            nearestPowerOfTwo: function(e) {
                return Math.pow(2, Math.round(Math.log(e) / Math.LN2))
            },
            nextPowerOfTwo: function(e) {
                return e--, e |= e >> 1, e |= e >> 2, e |= e >> 4, e |= e >> 8, e |= e >> 16, ++e
            }
        }
    },
    19: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return i
        }));
        var r = n(0);

        function o(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function a(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var i = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, i;
            return t = e, i = [{
                key: "init",
                value: function() {
                    e.textures = "/static/textures/", e.images = "/static/img/", e.fonts = "/static/fonts/", r.a.debug && console.info("Data url:", r.a.dataPath), e.prefix = r.a.prefix, e.artVersion = "?version=" + r.a.artVersionNumber, e.paintPotImage = e.textures + "paint-grid.png", e.clearPaintThumb = e.textures + "clear-paint.png"
                }
            }, {
                key: "getMeshPath",
                value: function(t, n) {
                    return void 0 !== t.displayFilename && "" !== t.displayFilename ? this.getMeshBundlePath(n) + t.displayFilename : this.getMeshBundlePath(n) + t.slot + "/" + t.baseName + "/" + e.prefix + "_" + t.slot + "_" + this.getRez(n) + "_" + t.name + ("" === t.nameAffix ? "" : "_" + t.nameAffix) + ".ckb"
                }
            }, {
                key: "getMeshPairPath",
                value: function(t, n, r) {
                    var o = t.slot < n.slot,
                        a = o ? t : n,
                        i = o ? n : t,
                        s = this.getMeshBundlePath(r),
                        c = this.getRez(r);
                    return "".concat(s).concat(a.slot, "/").concat(a.name, "/pairs/").concat(e.prefix, "_").concat(i.slot, "_").concat(c, "_").concat(i.name, ".ckp")
                }
            }, {
                key: "getMainSkeleton",
                value: function(t) {
                    return this.getMeshBundlePath(t) + "skeleton/body/" + e.prefix + "_human_" + this.getRez(t) + "_body.ckb"
                }
            }, {
                key: "getPose",
                value: function(t) {
                    var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "human";
                    return this.getMeshBundlePath(!1) + "poses/".concat(n, "/") + e.prefix + "_".concat(n, "_master_").concat(t, "_pose.ckb")
                }
            }, {
                key: "getRez",
                value: function(e) {
                    return e ? "hiRez" : "loRez"
                }
            }, {
                key: "getMeshBundlePath",
                value: function(e) {
                    return e ? r.a.meshBundlePathHigh : r.a.meshBundlePath
                }
            }, {
                key: "getNormalMap2",
                value: function(t) {
                    var n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                        o = t.slot;
                    return r.a.meshBundlePath + o + "/" + t.baseName + "/" + e.prefix + "_" + o + "_" + this.getRez(n) + "_" + t.name + "_normalMap2.jpg"
                }
            }, {
                key: "getPartThumb",
                value: function(t) {
                    var n = t.sided ? t.unsidedSlot + "R" : t.slot;
                    return "CLEAR" === t.name ? "/static/img/clear_thumb.png" : r.a.thumbnailPath + n + "/" + t.baseName + "/" + e.prefix + "_" + n + "_hiRez_" + t.baseName + "_thumb.png" + e.artVersion
                }
            }, {
                key: "getPartThumbSmall",
                value: function(t) {
                    if (r.a.mobileThumbs) {
                        var n = t.sided ? t.unsidedSlot + "R" : t.slot;
                        return "CLEAR" === t.name ? "/static/img/clear_thumb.png" : r.a.thumbnailPath + n + "/" + t.baseName + "/" + e.prefix + "_" + n + "_hiRez_" + t.baseName + "_thumb_60.png" + e.artVersion
                    }
                    return this.getPartThumb(t)
                }
            }, {
                key: "getPartHighlightThumb",
                value: function(t, n) {
                    return r.a.thumbnailPath + t.slotR + "/" + t.baseName + "/" + e.prefix + "_" + t.slotR + "_hiRez_" + t.baseName + "_idMask_" + n + ".png" + e.artVersion
                }
            }, {
                key: "getNoun",
                value: function(t) {
                    return void 0 === t && (t = e.getDefaultNoun()), "/cache/" + t.slice(0, 3) + "/" + t.slice(3, 6) + "/" + t.slice(6, 8) + "/" + t + ".png"
                }
            }, {
                key: "getDefaultNoun",
                value: function() {
                    return "01318004"
                }
            }, {
                key: "getNounInfoPath",
                value: function(e) {
                    return "/getLocalNoun=" + parseInt(e)
                }
            }, {
                key: "getImageUpload",
                value: function(e) {
                    return "userupload/" + e
                }
            }, {
                key: "getNounIdFromPath",
                value: function(e) {
                    return e.substring(e.lastIndexOf("/") + 1).split(".")[0].split("-")[0]
                }
            }, {
                key: "getConfigThumbPacked",
                value: function(t) {
                    var n = e.prefix + "_config_hiRez_" + t + "_thumb.png";
                    if (r.a.packedThumbs && void 0 !== window.CKPACKEDIMAGES && void 0 !== CKPACKEDIMAGES.config && void 0 !== CKPACKEDIMAGES.config[n]) {
                        var o = CKPACKEDIMAGES.config[n];
                        return {
                            path: r.a.thumbnailPath + "/config/packed.png" + e.artVersion,
                            packedPos: [o[0], o[1]],
                            packedSize: [o[2], o[3]]
                        }
                    }
                    return {
                        path: r.a.thumbnailPath + "config/" + n + e.artVersion
                    }
                }
            }, {
                key: "getConfigThumb",
                value: function(t) {
                    var n = e.prefix + "_config_hiRez_" + t + "_thumb" + (r.a.compact && r.a.mobileConfigThumbs ? "_60" : "") + ".png";
                    return r.a.thumbnailPath + "config/" + n + e.artVersion
                }
            }, {
                key: "getPalletThumb",
                value: function(e) {
                    var t = o(e.config_type.split("_"), 2),
                        n = t[0],
                        a = t[1];
                    return r.a.thumbnailPath + n + "/" + a + "/" + e.name + ".png"
                }
            }, {
                key: "getCamera",
                value: function(e) {
                    return r.a.meshBundlePath + e.slot + "/" + e.baseName + "/cam.json"
                }
            }, {
                key: "getEnvCubePaths",
                value: function(t) {
                    var n = e.textures + "cube/skybox/";
                    return [n + t + "-px.jpg" + e.artVersion, n + t + "-nx.jpg" + e.artVersion, n + t + "-py.jpg" + e.artVersion, n + t + "-ny.jpg" + e.artVersion, n + t + "-pz.jpg" + e.artVersion, n + t + "-nz.jpg" + e.artVersion]
                }
            }, {
                key: "getSphereEnvMap",
                value: function(t) {
                    return e.textures + "cube/" + t + (r.a.smallEnvMaps ? "_512" : "") + ".png"
                }
            }, {
                key: "getBG",
                value: function(e) {
                    return r.a.texturePath + "decals/bg/" + r.a.prefix + "_bg_loRez_" + e + ".jpg"
                }
            }, {
                key: "getDecalTexturePath",
                value: function(e) {
                    return r.a.texturePath + "decals/" + e.slot + "/" + r.a.prefix + "_" + e.slot + "_loRez_" + e.name + ".png"
                }
            }, {
                key: "getTextureSlot",
                value: function(e) {
                    return "itemD" === e.slot ? "itemR" : "L" === e.side ? e.unsidedSlot + "R" : e.slot
                }
            }, {
                key: "getTexture",
                value: function(e, t, n, r) {
                    r = t && "aaid" !== n ? e.bakedTextureSize : r;
                    var o = this.getTexturePath(e, t),
                        a = t || "aaid" === n ? "png" : "jpg",
                        i = e.normalFilename && "" !== e.normalFilename ? e.normalFilename : e.name;
                    return "".concat(o).concat(i, "_").concat(n, "_").concat(r, ".").concat(a)
                }
            }, {
                key: "getTexturePath",
                value: function(e, t) {
                    return (t ? r.a.meshBundlePathHigh : r.a.texturePath) + this.getTextureSlot(e) + "/" + e.baseName + "/"
                }
            }, {
                key: "getDecalBaseLayerPath",
                value: function(e, t) {
                    return this.getTexturePath(e, !1) + r.a.prefix + "_" + this.getTextureSlot(e) + "_loRez_" + e.name + ".jpg"
                }
            }, {
                key: "getDecalThumb",
                value: function(t, n) {
                    return r.a.texturePath + "decals/" + t + "/" + r.a.prefix + "_" + t + "_hiRez_" + n + "_thumb.png" + e.artVersion
                }
            }, {
                key: "shortenBundlePath",
                value: function(e) {
                    return e.replace(r.a.meshBundlePath, "../")
                }
            }, {
                key: "getIconPath",
                value: function(t, n) {
                    var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "parameters";
                    return e.images + r + "/" + t + "/" + n + ".png"
                }
            }, {
                key: "getFont",
                value: function(t) {
                    return e.fonts + t.group.toLowerCase() + "/" + t.name + "." + (t.extension || "ttf")
                }
            }, {
                key: "getFontBack",
                value: function(t) {
                    return e.fonts + t.group.toLowerCase() + "/" + t.name + "-back." + (t.extension || "ttf")
                }
            }, {
                key: "getExtrasScript",
                value: function() {
                    return "".concat("/static/js/", "/extras.js")
                }
            }, {
                key: "getPositionMapPath",
                value: function(e) {
                    return this.getMeshBundlePath(!0) + e.slot + "/" + e.baseName + "/" + e.baseName + "_opos.dds"
                }
            }], (n = null) && a(t.prototype, n), i && a(t, i), e
        }()
    },
    20: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return u
        }));
        var r, o, a, i, s, c, l = n(1);

        function u() {
            this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], arguments.length > 0 && console.error("RK.Matrix4: the constructor no longer reads arguments. use .set() instead.")
        }
        Object.assign(u.prototype, {
            isMatrix4: !0,
            set: function(e, t, n, r, o, a, i, s, c, l, u, f, h, p, d, m) {
                var y = this.elements;
                return y[0] = e, y[4] = t, y[8] = n, y[12] = r, y[1] = o, y[5] = a, y[9] = i, y[13] = s, y[2] = c, y[6] = l, y[10] = u, y[14] = f, y[3] = h, y[7] = p, y[11] = d, y[15] = m, this
            },
            identity: function() {
                return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            },
            clone: function() {
                return (new u).fromArray(this.elements)
            },
            copy: function(e) {
                var t = this.elements,
                    n = e.elements;
                return t[0] = n[0], t[1] = n[1], t[2] = n[2], t[3] = n[3], t[4] = n[4], t[5] = n[5], t[6] = n[6], t[7] = n[7], t[8] = n[8], t[9] = n[9], t[10] = n[10], t[11] = n[11], t[12] = n[12], t[13] = n[13], t[14] = n[14], t[15] = n[15], this
            },
            setFromMatrix3: function(e) {
                var t = this.elements,
                    n = e.elements;
                return t[0] = n[0], t[1] = n[1], t[2] = n[2], t[4] = n[3], t[5] = n[4], t[6] = n[5], t[8] = n[6], t[9] = n[7], t[10] = n[8], this
            },
            copyPosition: function(e) {
                var t = this.elements,
                    n = e.elements;
                return t[12] = n[12], t[13] = n[13], t[14] = n[14], this
            },
            extractBasis: function(e, t, n) {
                return e.setFromMatrixColumn(this, 0), t.setFromMatrixColumn(this, 1), n.setFromMatrixColumn(this, 2), this
            },
            makeBasis: function(e, t, n) {
                return this.set(e.x, t.x, n.x, 0, e.y, t.y, n.y, 0, e.z, t.z, n.z, 0, 0, 0, 0, 1), this
            },
            extractRotation: (c = new l.a, function(e) {
                var t = this.elements,
                    n = e.elements,
                    r = 1 / c.setFromMatrixColumn(e, 0).length(),
                    o = 1 / c.setFromMatrixColumn(e, 1).length(),
                    a = 1 / c.setFromMatrixColumn(e, 2).length();
                return t[0] = n[0] * r, t[1] = n[1] * r, t[2] = n[2] * r, t[4] = n[4] * o, t[5] = n[5] * o, t[6] = n[6] * o, t[8] = n[8] * a, t[9] = n[9] * a, t[10] = n[10] * a, this
            }),
            makeRotationFromEuler: function(e) {
                e && e.isEuler || console.error("RK.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vec3 and order.");
                var t = this.elements,
                    n = e.x,
                    r = e.y,
                    o = e.z,
                    a = Math.cos(n),
                    i = Math.sin(n),
                    s = Math.cos(r),
                    c = Math.sin(r),
                    l = Math.cos(o),
                    u = Math.sin(o);
                if ("XYZ" === e.order) {
                    var f = a * l,
                        h = a * u,
                        p = i * l,
                        d = i * u;
                    t[0] = s * l, t[4] = -s * u, t[8] = c, t[1] = h + p * c, t[5] = f - d * c, t[9] = -i * s, t[2] = d - f * c, t[6] = p + h * c, t[10] = a * s
                } else if ("YXZ" === e.order) {
                    var m = s * l,
                        y = s * u,
                        v = c * l,
                        b = c * u;
                    t[0] = m + b * i, t[4] = v * i - y, t[8] = a * c, t[1] = a * u, t[5] = a * l, t[9] = -i, t[2] = y * i - v, t[6] = b + m * i, t[10] = a * s
                } else if ("ZXY" === e.order) {
                    m = s * l, y = s * u, v = c * l, b = c * u;
                    t[0] = m - b * i, t[4] = -a * u, t[8] = v + y * i, t[1] = y + v * i, t[5] = a * l, t[9] = b - m * i, t[2] = -a * c, t[6] = i, t[10] = a * s
                } else if ("ZYX" === e.order) {
                    f = a * l, h = a * u, p = i * l, d = i * u;
                    t[0] = s * l, t[4] = p * c - h, t[8] = f * c + d, t[1] = s * u, t[5] = d * c + f, t[9] = h * c - p, t[2] = -c, t[6] = i * s, t[10] = a * s
                } else if ("YZX" === e.order) {
                    var g = a * s,
                        w = a * c,
                        k = i * s,
                        S = i * c;
                    t[0] = s * l, t[4] = S - g * u, t[8] = k * u + w, t[1] = u, t[5] = a * l, t[9] = -i * l, t[2] = -c * l, t[6] = w * u + k, t[10] = g - S * u
                } else if ("XZY" === e.order) {
                    g = a * s, w = a * c, k = i * s, S = i * c;
                    t[0] = s * l, t[4] = -u, t[8] = c * l, t[1] = g * u + S, t[5] = a * l, t[9] = w * u - k, t[2] = k * u - w, t[6] = i * l, t[10] = S * u + g
                }
                return t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
            },
            makeRotationFromQuaternion: function(e) {
                var t = this.elements,
                    n = e._x,
                    r = e._y,
                    o = e._z,
                    a = e._w,
                    i = n + n,
                    s = r + r,
                    c = o + o,
                    l = n * i,
                    u = n * s,
                    f = n * c,
                    h = r * s,
                    p = r * c,
                    d = o * c,
                    m = a * i,
                    y = a * s,
                    v = a * c;
                return t[0] = 1 - (h + d), t[4] = u - v, t[8] = f + y, t[1] = u + v, t[5] = 1 - (l + d), t[9] = p - m, t[2] = f - y, t[6] = p + m, t[10] = 1 - (l + h), t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
            },
            lookAt: (a = new l.a, i = new l.a, s = new l.a, function(e, t, n) {
                var r = this.elements;
                return s.subVectors(e, t), 0 === s.lengthSq() && (s.z = 1), s.normalize(), a.crossVectors(n, s), 0 === a.lengthSq() && (1 === Math.abs(n.z) ? s.x += 1e-4 : s.z += 1e-4, s.normalize(), a.crossVectors(n, s)), a.normalize(), i.crossVectors(s, a), r[0] = a.x, r[4] = i.x, r[8] = s.x, r[1] = a.y, r[5] = i.y, r[9] = s.y, r[2] = a.z, r[6] = i.z, r[10] = s.z, this
            }),
            multiply: function(e, t) {
                return void 0 !== t ? (console.warn("RK.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), this.multiplyMatrices(e, t)) : this.multiplyMatrices(this, e)
            },
            premultiply: function(e) {
                return this.multiplyMatrices(e, this)
            },
            multiplyMatrices: function(e, t) {
                var n = e.elements,
                    r = t.elements,
                    o = this.elements,
                    a = n[0],
                    i = n[4],
                    s = n[8],
                    c = n[12],
                    l = n[1],
                    u = n[5],
                    f = n[9],
                    h = n[13],
                    p = n[2],
                    d = n[6],
                    m = n[10],
                    y = n[14],
                    v = n[3],
                    b = n[7],
                    g = n[11],
                    w = n[15],
                    k = r[0],
                    S = r[4],
                    _ = r[8],
                    C = r[12],
                    R = r[1],
                    O = r[5],
                    E = r[9],
                    P = r[13],
                    x = r[2],
                    j = r[6],
                    T = r[10],
                    M = r[14],
                    K = r[3],
                    I = r[7],
                    N = r[11],
                    B = r[15];
                return o[0] = a * k + i * R + s * x + c * K, o[4] = a * S + i * O + s * j + c * I, o[8] = a * _ + i * E + s * T + c * N, o[12] = a * C + i * P + s * M + c * B, o[1] = l * k + u * R + f * x + h * K, o[5] = l * S + u * O + f * j + h * I, o[9] = l * _ + u * E + f * T + h * N, o[13] = l * C + u * P + f * M + h * B, o[2] = p * k + d * R + m * x + y * K, o[6] = p * S + d * O + m * j + y * I, o[10] = p * _ + d * E + m * T + y * N, o[14] = p * C + d * P + m * M + y * B, o[3] = v * k + b * R + g * x + w * K, o[7] = v * S + b * O + g * j + w * I, o[11] = v * _ + b * E + g * T + w * N, o[15] = v * C + b * P + g * M + w * B, this
            },
            multiplyScalar: function(e) {
                var t = this.elements;
                return t[0] *= e, t[4] *= e, t[8] *= e, t[12] *= e, t[1] *= e, t[5] *= e, t[9] *= e, t[13] *= e, t[2] *= e, t[6] *= e, t[10] *= e, t[14] *= e, t[3] *= e, t[7] *= e, t[11] *= e, t[15] *= e, this
            },
            applyToBufferAttribute: function() {
                var e = new l.a;
                return function(t) {
                    for (var n = 0, r = t.count; n < r; n++) e.x = t.getX(n), e.y = t.getY(n), e.z = t.getZ(n), e.applyMatrix4(this), t.setXYZ(n, e.x, e.y, e.z);
                    return t
                }
            }(),
            determinant: function() {
                var e = this.elements,
                    t = e[0],
                    n = e[4],
                    r = e[8],
                    o = e[12],
                    a = e[1],
                    i = e[5],
                    s = e[9],
                    c = e[13],
                    l = e[2],
                    u = e[6],
                    f = e[10],
                    h = e[14];
                return e[3] * (+o * s * u - r * c * u - o * i * f + n * c * f + r * i * h - n * s * h) + e[7] * (+t * s * h - t * c * f + o * a * f - r * a * h + r * c * l - o * s * l) + e[11] * (+t * c * u - t * i * h - o * a * u + n * a * h + o * i * l - n * c * l) + e[15] * (-r * i * l - t * s * u + t * i * f + r * a * u - n * a * f + n * s * l)
            },
            transpose: function() {
                var e, t = this.elements;
                return e = t[1], t[1] = t[4], t[4] = e, e = t[2], t[2] = t[8], t[8] = e, e = t[6], t[6] = t[9], t[9] = e, e = t[3], t[3] = t[12], t[12] = e, e = t[7], t[7] = t[13], t[13] = e, e = t[11], t[11] = t[14], t[14] = e, this
            },
            setPosition: function(e) {
                var t = this.elements;
                return t[12] = e.x, t[13] = e.y, t[14] = e.z, this
            },
            getInverse: function(e, t) {
                var n = this.elements,
                    r = e.elements,
                    o = r[0],
                    a = r[1],
                    i = r[2],
                    s = r[3],
                    c = r[4],
                    l = r[5],
                    u = r[6],
                    f = r[7],
                    h = r[8],
                    p = r[9],
                    d = r[10],
                    m = r[11],
                    y = r[12],
                    v = r[13],
                    b = r[14],
                    g = r[15],
                    w = p * b * f - v * d * f + v * u * m - l * b * m - p * u * g + l * d * g,
                    k = y * d * f - h * b * f - y * u * m + c * b * m + h * u * g - c * d * g,
                    S = h * v * f - y * p * f + y * l * m - c * v * m - h * l * g + c * p * g,
                    _ = y * p * u - h * v * u - y * l * d + c * v * d + h * l * b - c * p * b,
                    C = o * w + a * k + i * S + s * _;
                if (0 === C) {
                    var R = "RK.Matrix4: .getInverse() can't invert matrix, determinant is 0";
                    if (!0 === t) throw new Error(R);
                    return console.warn(R), this.identity()
                }
                var O = 1 / C;
                return n[0] = w * O, n[1] = (v * d * s - p * b * s - v * i * m + a * b * m + p * i * g - a * d * g) * O, n[2] = (l * b * s - v * u * s + v * i * f - a * b * f - l * i * g + a * u * g) * O, n[3] = (p * u * s - l * d * s - p * i * f + a * d * f + l * i * m - a * u * m) * O, n[4] = k * O, n[5] = (h * b * s - y * d * s + y * i * m - o * b * m - h * i * g + o * d * g) * O, n[6] = (y * u * s - c * b * s - y * i * f + o * b * f + c * i * g - o * u * g) * O, n[7] = (c * d * s - h * u * s + h * i * f - o * d * f - c * i * m + o * u * m) * O, n[8] = S * O, n[9] = (y * p * s - h * v * s - y * a * m + o * v * m + h * a * g - o * p * g) * O, n[10] = (c * v * s - y * l * s + y * a * f - o * v * f - c * a * g + o * l * g) * O, n[11] = (h * l * s - c * p * s - h * a * f + o * p * f + c * a * m - o * l * m) * O, n[12] = _ * O, n[13] = (h * v * i - y * p * i + y * a * d - o * v * d - h * a * b + o * p * b) * O, n[14] = (y * l * i - c * v * i - y * a * u + o * v * u + c * a * b - o * l * b) * O, n[15] = (c * p * i - h * l * i + h * a * u - o * p * u - c * a * d + o * l * d) * O, this
            },
            scale: function(e) {
                var t = this.elements,
                    n = e.x,
                    r = e.y,
                    o = e.z;
                return t[0] *= n, t[4] *= r, t[8] *= o, t[1] *= n, t[5] *= r, t[9] *= o, t[2] *= n, t[6] *= r, t[10] *= o, t[3] *= n, t[7] *= r, t[11] *= o, this
            },
            getMaxScaleOnAxis: function() {
                var e = this.elements,
                    t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2],
                    n = e[4] * e[4] + e[5] * e[5] + e[6] * e[6],
                    r = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
                return Math.sqrt(Math.max(t, n, r))
            },
            makeTranslation: function(e, t, n) {
                return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1), this
            },
            makeRotationX: function(e) {
                var t = Math.cos(e),
                    n = Math.sin(e);
                return this.set(1, 0, 0, 0, 0, t, -n, 0, 0, n, t, 0, 0, 0, 0, 1), this
            },
            makeRotationY: function(e) {
                var t = Math.cos(e),
                    n = Math.sin(e);
                return this.set(t, 0, n, 0, 0, 1, 0, 0, -n, 0, t, 0, 0, 0, 0, 1), this
            },
            makeRotationZ: function(e) {
                var t = Math.cos(e),
                    n = Math.sin(e);
                return this.set(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            },
            makeRotationAxis: function(e, t) {
                var n = Math.cos(t),
                    r = Math.sin(t),
                    o = 1 - n,
                    a = e.x,
                    i = e.y,
                    s = e.z,
                    c = o * a,
                    l = o * i;
                return this.set(c * a + n, c * i - r * s, c * s + r * i, 0, c * i + r * s, l * i + n, l * s - r * a, 0, c * s - r * i, l * s + r * a, o * s * s + n, 0, 0, 0, 0, 1), this
            },
            makeScale: function(e, t, n) {
                return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this
            },
            makeShear: function(e, t, n) {
                return this.set(1, t, n, 0, e, 1, n, 0, e, t, 1, 0, 0, 0, 0, 1), this
            },
            compose: function(e, t, n) {
                return this.makeRotationFromQuaternion(t), this.scale(n), this.setPosition(e), this
            },
            toUInt8Array: function(e, t) {
                void 0 === e && (e = []), void 0 === t && (t = 0);
                for (var n, r = this.elements, o = 0; o < 16; o++) n = this.encodeFloatRGBA(r[o]), e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], t += 4;
                return e
            },
            encodeFloatRGBA: function(e) {
                (e > 128 || e < -128) && console.error("Encoding matrix floats does not work for values above 128 because Teagan is not great at math. What weird things are the joints doing?");
                var t = Math.floor(e + 128),
                    n = e + 128 - t;
                n = Math.floor(16777215 * n);
                var r = Math.floor(n % 256),
                    o = Math.floor((n - r) / 256) % 256;
                return [t, r, o, Math.floor((n - r - 256 * o) / 65536)]
            },
            decodeFloatRGBA: function(e) {
                return e[0] - 128 + (e[1] + 256 * e[2] + 256 * e[3] * 256) / 16777215
            },
            decompose: (r = new l.a, o = new u, function(e, t, n) {
                var a = this.elements,
                    i = r.set(a[0], a[1], a[2]).length(),
                    s = r.set(a[4], a[5], a[6]).length(),
                    c = r.set(a[8], a[9], a[10]).length();
                this.determinant() < 0 && (i = -i), e.x = a[12], e.y = a[13], e.z = a[14], o.copy(this);
                var l = 1 / i,
                    u = 1 / s,
                    f = 1 / c;
                return o.elements[0] *= l, o.elements[1] *= l, o.elements[2] *= l, o.elements[4] *= u, o.elements[5] *= u, o.elements[6] *= u, o.elements[8] *= f, o.elements[9] *= f, o.elements[10] *= f, t.setFromRotationMatrix(o), n.x = i, n.y = s, n.z = c, this
            }),
            makePerspective: function(e, t, n, r, o, a) {
                void 0 === a && console.warn("RK.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
                var i = this.elements,
                    s = 2 * o / (t - e),
                    c = 2 * o / (n - r),
                    l = (t + e) / (t - e),
                    u = (n + r) / (n - r),
                    f = -(a + o) / (a - o),
                    h = -2 * a * o / (a - o);
                return i[0] = s, i[4] = 0, i[8] = l, i[12] = 0, i[1] = 0, i[5] = c, i[9] = u, i[13] = 0, i[2] = 0, i[6] = 0, i[10] = f, i[14] = h, i[3] = 0, i[7] = 0, i[11] = -1, i[15] = 0, this
            },
            makeOrthographic: function(e, t, n, r, o, a) {
                var i = this.elements,
                    s = 1 / (t - e),
                    c = 1 / (n - r),
                    l = 1 / (a - o),
                    u = (t + e) * s,
                    f = (n + r) * c,
                    h = (a + o) * l;
                return i[0] = 2 * s, i[4] = 0, i[8] = 0, i[12] = -u, i[1] = 0, i[5] = 2 * c, i[9] = 0, i[13] = -f, i[2] = 0, i[6] = 0, i[10] = -2 * l, i[14] = -h, i[3] = 0, i[7] = 0, i[11] = 0, i[15] = 1, this
            },
            equals: function(e) {
                for (var t = this.elements, n = e.elements, r = 0; r < 16; r++)
                    if (t[r] !== n[r]) return !1;
                return !0
            },
            fromArray: function(e, t) {
                void 0 === t && (t = 0);
                for (var n = 0; n < 16; n++) this.elements[n] = e[n + t];
                return this
            },
            toArray: function(e, t) {
                void 0 === e && (e = []), void 0 === t && (t = 0);
                var n = this.elements;
                return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e[t + 9] = n[9], e[t + 10] = n[10], e[t + 11] = n[11], e[t + 12] = n[12], e[t + 13] = n[13], e[t + 14] = n[14], e[t + 15] = n[15], e
            }
        })
    },
    21: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return q
        }));
        var r = n(13);

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        Math.pow(2, 8);
        var a = Math.pow(2, 16) - 1,
            i = (Math.pow(2, 16) - 2) / 2,
            s = function() {
                function e(t) {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e), this.buffer = t, this.dataView = new DataView(t), this.version = Math.round(100 * this.dataView.getFloat32(0, !0)) / 100, this._getStartPoints(), this._getBits()
                }
                var t, n, r;
                return t = e, (n = [{
                    key: "_getStartPoints",
                    value: function() {
                        this.count32 = this.dataView.getFloat32(4, !0), this.count16 = this.dataView.getFloat32(8, !0), this.count8 = this.dataView.getFloat32(12, !0), this.count1 = this.dataView.getFloat32(16, !0);
                        var e = 20;
                        this.version >= 1.4 && (this.exportTime = this.dataView.getFloat32(e, !0), e += 4), this.i32 = e, this.i16 = this.i32 + 4 * this.count32, this.i8 = this.i16 + 2 * this.count16, this.i1 = this.i8 + this.count8, this.bi = 0
                    }
                }, {
                    key: "_getBits",
                    value: function() {
                        for (var e, t, n = [], r = Math.ceil(this.count1 / 8) + this.i1, o = this.i1, a = this.dataView; o < r; o++)
                            for (e = a.getUint8(o), t = 0; t < 8; t++) n.push(0 == (e & 1 << t) ? 0 : 1);
                        this.bits = n
                    }
                }, {
                    key: "getBit",
                    value: function() {
                        return this.bits[this.bi++]
                    }
                }, {
                    key: "getFloat",
                    value: function() {
                        return this.i32 += 4, this.dataView.getFloat32(this.i32 - 4, !0)
                    }
                }, {
                    key: "getFloatArray",
                    value: function(e) {
                        var t = new Float32Array(this.buffer, this.i32, e);
                        return this.i32 += 4 * e, t
                    }
                }, {
                    key: "getUint32Array",
                    value: function(e) {
                        for (var t = new Uint32Array(e), n = 0; n < e; n++) t[n] = Math.round(this.dataView.getFloat32(this.i32, !0)), this.i32 += 4;
                        return t
                    }
                }, {
                    key: "getQuaternionArray",
                    value: function(e) {
                        e *= 4;
                        for (var t = this.dataView, n = new Float32Array(e), r = 0; r < e; r++) n[r] = t.getUint16(this.i16, !0) / a * 2 - 1, this.i16 += 2;
                        return n
                    }
                }, {
                    key: "getPositionArray",
                    value: function(e, t) {
                        for (var n, r = this.dataView, o = new Float32Array(3 * e), a = 0; a < e; a++)
                            for (n = 0; n < 3; n++) o[3 * a + n] = (r.getUint16(this.i16, !0) - i) / i * t, this.i16 += 2;
                        return o
                    }
                }, {
                    key: "getScaleArray",
                    value: function(e, t) {
                        for (var n, r = this.dataView, o = new Float32Array(3 * e), i = 0; i < e; i++)
                            for (n = 0; n < 3; n++) o[3 * i + n] = r.getUint16(this.i16, !0) / a * t, this.i16 += 2;
                        return o
                    }
                }, {
                    key: "getInt16",
                    value: function() {
                        return this.i16 += 2, this.dataView.getUint16(this.i16 - 2, !0)
                    }
                }, {
                    key: "getInt16Array",
                    value: function(e) {
                        var t = new Uint16Array(this.buffer, this.i16, e);
                        return this.i16 = this.i16 + 2 * e, t
                    }
                }, {
                    key: "getInt8",
                    value: function() {
                        return this.dataView.getUint8(this.i8++, !0)
                    }
                }, {
                    key: "getInt8Array",
                    value: function(e) {
                        var t = new Uint8Array(this.buffer, this.i8, e);
                        return this.i8 += e, t
                    }
                }, {
                    key: "getString",
                    value: function() {
                        for (var e = this.getInt8(), t = [], n = 0; n < e; n++) t.push(String.fromCharCode(this.dataView.getUint8(this.i8++)));
                        return t.join("")
                    }
                }]) && o(t.prototype, n), r && o(t, r), e
            }(),
            c = n(53),
            l = n(37),
            u = n(63);

        function f(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var h = Math.pow(2, 8) - 1,
            p = Math.pow(2, 16) - 1,
            d = function() {
                function e() {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e)
                }
                var t, n, r;
                return t = e, r = [{
                    key: "debugAddToScene",
                    value: function() {
                        (new e).load("/static/herobundles/test.ckb", (function(e) {
                            var t = new RK.MeshStandardMaterial({
                                    color: new RK.Color(.6, .73, .73),
                                    roughness: .65,
                                    metalness: 0,
                                    map: q.loaders.jpg.load("/static/textures/grid.jpg"),
                                    morphTargets: !0,
                                    skinning: !0
                                }),
                                n = l.a.makeMesh(e, t),
                                r = new c.a;
                            r.add(n, "testSlot"), console.log("test mesh", n), n.hasGeo && CK.scene.add(n), CK.scene.add(r.obj), CK.scene.updateMatrixWorld(), window.nextPose = function() {}, window.prevPose = function() {}, window.setSlider = function(e, t) {
                                r.setSlider(e, t)
                            }
                        }), void 0, (function(e) {
                            console.log("failed!", e)
                        }))
                    }
                }], (n = [{
                    key: "load",
                    value: function(e, t, n, r) {
                        var o = this;
                        e = e.replace("Character0?", "");
                        var a = window.Pre && Pre.resources[e];
                        if (a) Promise.resolve(a).then((function(n) {
                            t(o.process(n, e))
                        })).catch((function(e) {
                            return r(e)
                        }));
                        else {
                            var i = new XMLHttpRequest;
                            i.open("GET", e, !0), i.responseType = "arraybuffer", i.success = t, i.failure = r, i.onload = function(n) {
                                i.response && 200 === i.status ? t(o.process(i.response, e)) : r && r(n)
                            }, i.onprogress = n, i.send(null)
                        }
                    }
                }, {
                    key: "process",
                    value: function(e, t) {
                        this.debugMarkerIterator = 0;
                        try {
                            this.reader = new s(e)
                        } catch (e) {
                            Reporting.exception("Failed to load ckb for " + t)
                        }
                        this.geometry = new u.a, this.geometry.exportTime = this.reader.exportTime;
                        var n = t.split("/");
                        this.geometry.filePath = t, this.geometry.name = n[n.length - 1].split(".")[0], this._settings(), this._indices(), this._points(), this._normals(), this._uvs(), this._vertexColors(), this._blends(), this._weights(), this._parent(), this._poses(), this._posGroups(), this._uvSeams(), this._rivets(), this._faceSizes(), this._creases(), this._extemeIndices(), this._paintMapping();
                        var r = this.geometry;
                        return delete this.geometry, delete this.reader, r
                    }
                }, {
                    key: "_settings",
                    value: function() {
                        Math.floor(this.reader.version) !== Math.floor(1.5) ? console.warn(".ckb mesh file version mismatch, loader is", this.loaderVersion, "while .ckb is", this.reader.version) : this.reader.version > 1.5 && CK.Events.emit("alert", ["We just updated the site. Refreshing!", "Update Needed", function() {
                            return document.location.reload()
                        }]);
                        var e = ["mesh", "normals", "uv1", "uv2", "blendTargets", "blendNormals", "weights", "animations", "jointScales", "addon", "paintMapping", "singleParent", "frameMappings", "indices32bit", "originalIndices", "vertexColors"];
                        this.reader.version >= 1.2 && e.push("posGroups"), this.reader.version > 1.25 && (e.push("uvSeams"), e.push("rivets"), e.push("externalSkel"), e.push("faceSizes"), e.push("creases"), e.push("extremeIndices"));
                        for (var t = {}, n = 0, r = e.length; n < r; n++) t[e[n]] = this.reader.getBit();
                        if (this.reader.version >= 1.2) {
                            var o = 49 - e.length;
                            this.reader.bi += o
                        }
                        this.options = t, this.geometry.mainSkeleton = !this.options.externalSkel && !this.options.addon && this.options.weights
                    }
                }, {
                    key: "_indices",
                    value: function() {
                        if (this.options.mesh) {
                            var e = Math.round(this.reader.getFloat()),
                                t = this.options.indices32bit ? this.reader.getUint32Array(e) : this.reader.getInt16Array(e);
                            if (this.geometry.setIndex(new RK.BufferAttribute(t, 1)), this.options.originalIndices) {
                                var n = this.options.indices32bit ? this.reader.getUint32Array(e) : this.reader.getInt16Array(e);
                                this.geometry.ckbOriginalIndices = new RK.BufferAttribute(n, 1)
                            }
                        }
                    }
                }, {
                    key: "_points",
                    value: function() {
                        if (this.options.mesh) {
                            var e = this.options.indices32bit ? this.reader.getFloat() : this.reader.getInt16();
                            this.vertCount = e, this.geometry.hasGeo = !0;
                            for (var t = [], n = 0; n < 6; n++) t.push(this.reader.getFloat());
                            var r = [t[3] - t[0], t[4] - t[1], t[5] - t[2]];
                            this.geometry.ckBounds = new RK.Box3(t.slice(0, 3), t.slice(3, 6));
                            for (var o = new Float32Array(3 * e), a = 0, i = this.reader.i16, s = this.reader.dataView, c = 0; c < e; c++, i += 6) o[a++] = s.getUint16(i, !0) / p * r[0] + t[0], o[a++] = s.getUint16(i + 2, !0) / p * r[1] + t[1], o[a++] = s.getUint16(i + 4, !0) / p * r[2] + t[2];
                            this.reader.i16 += 6 * e, this.positions = o, this.geometry.addAttribute("position", new RK.BufferAttribute(o, 3))
                        }
                    }
                }, {
                    key: "_normals",
                    value: function() {
                        if (this.options.normals) {
                            var e = this.vertCount;
                            if (0 != e) {
                                for (var t = new Float32Array(3 * e), n = 0, r = 0; r < e; r++) t[n] = this.reader.getInt8() / h * 2 - 1, t[n + 1] = this.reader.getInt8() / h * 2 - 1, t[n + 2] = (2 * this.reader.getBit() - 1) * (1 - Math.pow(t[n], 2) - Math.pow(t[n + 1], 2)), n += 3;
                                this.geometry.addAttribute("normal", new RK.BufferAttribute(t, 3))
                            }
                        } else this.options.mesh && this.geometry.computeVertexNormals()
                    }
                }, {
                    key: "_uvs",
                    value: function() {
                        if (this.options.uv1) {
                            var e = this.vertCount,
                                t = this.options.uv2 ? ["uv", "uv2"] : ["uv"];
                            for (var n in t) {
                                for (var r = t[n], o = [], a = 0; a < 4; a++) o.push(this.reader.getFloat());
                                for (var i = [o[2] - o[0], o[3] - o[1]], s = new Float32Array(2 * e), c = 0, l = 0; l < e; l++) s[c++] = this.reader.getInt16() / p * i[0] + o[0], s[c++] = this.reader.getInt16() / p * i[1] + o[1];
                                this.geometry.addAttribute(r, new RK.BufferAttribute(s, 2))
                            }
                        }
                    }
                }, {
                    key: "_vertexColors",
                    value: function() {
                        if (this.options.vertexColors)
                            for (var e = this.reader.getInt8(), t = 0; t < e; t++) {
                                this.reader.getString();
                                var n = this.reader.getInt8Array(this.vertCount),
                                    r = new Float32Array(3 * this.vertCount);
                                for (var o in n) r[3 * o] = r[3 * o + 1] = r[3 * o + 2] = n[o] / 255;
                                this.geometry.addAttribute("color", new RK.BufferAttribute(r, 3))
                            }
                    }
                }, {
                    key: "_blends",
                    value: function() {
                        if (this.options.blendTargets) {
                            var e = this.reader.getInt8(),
                                t = this.vertCount;
                            if (0 != e) {
                                this.positions;
                                var n = [],
                                    r = [];
                                this.geometry.morphTargetDictionary = {}, this.geometry.morphTargetInfluences = [];
                                for (var o = 0; o < e; o++) {
                                    var a = this.reader.getString();
                                    this.geometry.morphTargetDictionary[a] = o, this.geometry.morphTargetInfluences.push(0);
                                    for (var i = [], s = 0; s < 6; s++) i.push(this.reader.getFloat());
                                    for (var c = [i[3] - i[0], i[4] - i[1], i[5] - i[2]], l = new Float32Array(3 * t), u = 0, f = 0; f < t; f++, u += 3)
                                        for (var p = 0; p < 3; ++p) l[u + p] = this.reader.getInt8() / h * c[p] + i[p];
                                    if (n.push(new RK.BufferAttribute(l, 3)), this.options.blendNormals) {
                                        for (var d = new Float32Array(3 * t), m = 0, y = 0; m < t; m++) d[y] = this.reader.getInt8() / h * 2 - 1, d[y + 1] = this.reader.getInt8() / h * 2 - 1, d[y + 2] = (2 * this.reader.getBit() - 1) * (1 - Math.pow(d[y], 2) - Math.pow(d[y + 1], 2)), y += 3;
                                        r.push(new RK.BufferAttribute(d, 3))
                                    }
                                }
                                this.geometry.morphAttributes.position = n, this.options.blendNormals && (this.geometry.morphAttributes.normal = r)
                            }
                        }
                    }
                }, {
                    key: "_weights",
                    value: function() {
                        if (this.geometry.skinned = this.options.weights, this.options.weights) {
                            var e = this.reader.getInt8();
                            this.geometry.ckbTotalInfluences = e;
                            for (var t = this.vertCount, n = this.reader.i16, r = this.reader.dataView, o = Math.ceil(e / 4), a = [], i = 0; i < o; ++i) a.push(new Float32Array(4 * t));
                            for (var s = 0; s < o; ++s)
                                for (var c = a[s], l = 4 * s, u = Math.min(e - l, 4), f = 0; f < t; ++f)
                                    for (var h = 0; h < u; ++h) {
                                        var d = r.getUint16(n + 2 * (f * e + l + h), !0);
                                        c[4 * f + h] = d
                                    }
                            this.geometry.skinIndexNames = [];
                            for (var m = 0; m < o; ++m) {
                                var y = a[m],
                                    v = "skinIndex".concat(m),
                                    b = new RK.BufferAttribute(y, 4);
                                this.geometry.addAttribute(v, b), this.geometry.skinIndexNames.push(v)
                            }
                            this.reader.i16 = this.reader.i16 + e * t * 2, n = this.reader.i16;
                            for (var g = [], w = 0; w < o; ++w) {
                                var k = new Float32Array(4 * t);
                                g.push(k)
                            }
                            for (var S = 0; S < o; ++S)
                                for (var _ = g[S], C = 4 * S, R = Math.min(e - C, 4), O = 0; O < t; ++O)
                                    for (var E = 0; E < R; ++E) {
                                        var P = r.getUint16(n + 2 * (O * e + C + E), !0) / p;
                                        _[4 * O + E] = P
                                    }
                            this.geometry.skinWeightNames = [];
                            for (var x = 0; x < o; ++x) {
                                var j = g[x],
                                    T = "skinWeight".concat(x),
                                    M = new RK.BufferAttribute(j, 4);
                                this.geometry.addAttribute(T, M), this.geometry.skinWeightNames.push(T)
                            }
                            this.reader.i16 = this.reader.i16 + e * t * 2, this.geometry.skinInfluenceCount = e
                        }
                    }
                }, {
                    key: "_parent",
                    value: function() {
                        if (this.options.singleParent) {
                            this.reader.getString();
                            for (var e = this.reader.getInt16(), t = this.vertCount, n = new Float32Array(4 * t), r = new Float32Array(4 * t), o = 0, a = 4 * t; o < a; o++) n[o] = o % 4 == 0 ? e : 0, r[o] = o % 4 == 0 ? 1 : 0;
                            this.geometry.addAttribute("skinIndex0", new RK.BufferAttribute(n, 4)), this.geometry.addAttribute("skinWeight0", new RK.BufferAttribute(r, 4)), this.geometry.skinIndexNames = ["skinIndex0"], this.geometry.skinWeightNames = ["skinWeight0"], this.geometry.ckbTotalInfluences = 1, this.geometry.skinInfluenceCount = 1, this.geometry.skinned = !0
                        }
                    }
                }, {
                    key: "_poses",
                    value: function() {
                        var e = this;
                        if (this.options.animations) {
                            var t = this.reader,
                                n = t.getInt8(),
                                r = void 0;
                            if (this.options.frameMappings) {
                                var o = this.reader.getInt16(),
                                    a = this.reader.getInt16Array(o);
                                if (a.length) {
                                    r = {};
                                    for (var i = 0; i < a.length; i++) r[a[i]] = i
                                }
                            }
                            for (var s, c, l, u, f = {}, h = [], p = {}, d = this.reader.getFloat(), m = this.options.jointScales, y = m ? this.reader.getFloat() : 1, v = function() {
                                    return {
                                        pos: t.getBit() ? t.getPositionArray(1, d) : t.getPositionArray(l, d),
                                        rot: t.getBit() ? t.getQuaternionArray(1) : t.getQuaternionArray(l),
                                        scl: m ? t.getBit() ? t.getScaleArray(1, y) : t.getScaleArray(l, y) : [1, 1, 1],
                                        frameMapping: e.options.frameMappings ? r : void 0
                                    }
                                }, b = 0; b < n; b++)
                                if (s = t.getString(), c = t.getInt16(), l = t.getInt16(), "main" === s)
                                    for (var g, w, k, S = 0; S < c; S++) g = t.getInt16(), (k = new RK.Bone).boneID = S, k.rotation.order = "ZYX", k.name = t.getString(), 5e3 == g ? (k.parentId = -1, this.geometry.mainSkeleton = !0) : k.parentId = g, w = v(), k.position.fromArray(w.pos), k.quaternion.fromArray(w.rot), k.scale.fromArray(w.scl), k.poses = w, k.idFromName = parseInt(k.name.split("_")[2] || 0), h.push(k);
                                else if ("locators" === s)
                                for (var _, C, R = 0; R < c; R++) {
                                    (_ = new RK.Bone).rotation.order = "ZYX";
                                    var O = t.getString();
                                    O.startsWith("locator_") && (O = O.slice(8)), _.name = O, C = v(), _.position.fromArray(C.pos), _.quaternion.fromArray(C.rot), _.scale.fromArray(C.scl), p[O] = _
                                } else {
                                    u = {};
                                    for (var E = 0; E < c; E++) u[t.getString()] = v();
                                    f[s] = u
                                }
                            if (!this.geometry.mainSkeleton) try {
                                var P = {};
                                h.map((function(e) {
                                    var t = e.name.split("_"),
                                        n = parseInt(t[t.length - 3]);
                                    P[n] = e, e.boneIDPartRelative = e.boneID, e.boneID = n
                                })), this.geometry.mixerBonesByOrigID = P
                            } catch (e) {
                                console.warn("Invalid bone names", e)
                            }
                            this.geometry.mixerBones = h, this.geometry.locators = p, this.geometry.poses = f, this._updateUsefulBones(h)
                        }
                    }
                }, {
                    key: "_updateUsefulBones",
                    value: function(e) {
                        var t = ["_fat", "wist_", "_tuck", "_Chain", "_footprint", "_toe", "_end", "_weight", "_dgLeg", "ffset_", "tretch_", "transform_", "adjustment_", "_tuck", "_muscularity", "skirt", "_adustment", "briefcase", "_snap", "_rider", "_pose"];
                        e.forEach((function(e) {
                            t.some((function(t) {
                                return e.name.includes(t)
                            })) || (e.isUseful = !0)
                        }))
                    }
                }, {
                    key: "_posGroups",
                    value: function() {
                        if (!(this.reader.version < 1.2) && this.options.posGroups) {
                            var e = this.reader.getInt8(),
                                t = this.reader.getInt16Array(e),
                                n = this.reader.getFloatArray(3 * e),
                                r = [],
                                o = 0;
                            for (var a in t) r.push({
                                position: new RK.Vec3(n[3 * a], n[3 * a + 1], n[3 * a + 2]),
                                range: [o, o + t[a]]
                            }), o += t[a];
                            this.geometry.ckPosGroup = r
                        }
                    }
                }, {
                    key: "_uvSeams",
                    value: function() {
                        if (!(this.reader.version < 1.25) && this.options.uvSeams) {
                            var e = this.reader.getUint32Array(1)[0],
                                t = 3 * e;
                            this.geometry.ckSeamHalfEdge = this.reader.getUint32Array(t), this.geometry.ckSeamOriginalIndices = this.reader.getUint32Array(e), this.geometry.ckSeamBoundaries = this.reader.getInt8Array(e);
                            var n = this.reader.getUint32Array(1)[0];
                            this.geometry.ckSeams = this.reader.getUint32Array(n);
                            var r = this.reader.getUint32Array(1)[0];
                            this.geometry.ckBoundaries = [];
                            for (var o = 0; o < r; ++o) {
                                var a = this.reader.getUint32Array(1)[0],
                                    i = this.reader.getUint32Array(1)[0],
                                    s = this.reader.getFloatArray(3),
                                    c = {
                                        triEdge: a,
                                        edgeCount: i,
                                        position: new RK.Vec3(s[0], s[1], s[2])
                                    };
                                this.geometry.ckBoundaries.push(c)
                            }
                        }
                    }
                }, {
                    key: "_rivets",
                    value: function() {
                        if (this.options.rivets) {
                            var e = this.reader.getUint32Array(1)[0];
                            this.geometry.ckRivets = {};
                            for (var t = 0; t < e; ++t) {
                                var n = this.reader.getString();
                                n.startsWith("rivet_") && (n = n.substr(6));
                                var r = {
                                    name: n,
                                    position: (new RK.Vec3).fromArray(this.reader.getFloatArray(3)),
                                    quaternion: (new RK.Quaternion).fromArray(this.reader.getFloatArray(4)),
                                    scale: (new RK.Vec3).fromArray(this.reader.getFloatArray(3)),
                                    triangle: this.reader.getUint32Array(1)[0],
                                    barycentric: this.reader.getFloatArray(3)
                                };
                                this.geometry.ckRivets[r.name] = r
                            }
                        }
                    }
                }, {
                    key: "_faceSizes",
                    value: function() {
                        if (this.options.faceSizes) {
                            var e = this.reader.getUint32Array(1)[0];
                            this.geometry.ckFaceSizes = this.reader.getInt8Array(e)
                        }
                    }
                }, {
                    key: "_creases",
                    value: function() {
                        if (this.options.creases) {
                            var e = this.reader.getUint32Array(1)[0],
                                t = this.reader.getUint32Array(2 * e),
                                n = this.reader.getFloatArray(e);
                            this.geometry.ckbCreases = {
                                indices: t,
                                weights: n
                            }
                        }
                    }
                }, {
                    key: "_extemeIndices",
                    value: function() {
                        if (this.options.extremeIndices) {
                            var e = this.reader.getUint32Array(1)[0],
                                t = this.reader.getUint32Array(e);
                            this.geometry.extremeIndices = t
                        }
                    }
                }, {
                    key: "_paintMapping",
                    value: function() {
                        if (this.geometry.paintMapping = void 0, this.options.paintMapping) {
                            var e = this.reader.getInt8();
                            this.geometry.paintMapping = {
                                surface: this.reader.getInt8Array(e),
                                dominance: this.reader.getInt8Array(e)
                            }
                        }
                    }
                }, {
                    key: "_checkDebugMarker",
                    value: function() {
                        99 != this.reader.getInt8() && console.error("Failed Int8 marker " + this.debugMarkerIterator), 9999 != this.reader.getInt16() && console.error("Failed int16 marker " + this.debugMarkerIterator);
                        var e = this.reader.getFloat();
                        (e < 9.98 || e > 10) && console.error("Failed float marker " + this.debugMarkerIterator, e), "999" != this.reader.getString() && console.error("Failed string marker " + this.debugMarkerIterator), 1 == this.reader.getBit() && 0 == this.reader.getBit() && 1 == this.reader.getBit() || console.error("Failed bit marker " + this.debugMarkerIterator), this.debugMarkerIterator++
                    }
                }]) && f(t.prototype, n), r && f(t, r), e
            }();

        function m(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function y(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function v(e, t, n) {
            return t && y(e.prototype, t), n && y(e, n), e
        }
        Math.pow(2, 8), Math.pow(2, 16);
        var b = function() {
                function e() {
                    m(this, e)
                }
                return v(e, [{
                    key: "load",
                    value: function(e, t, n, r) {
                        var o = this;
                        e = e.replace("Character0?", "");
                        var a = window.Pre && Pre.resources[e];
                        if (a) Promise.resolve(a).then((function(n) {
                            t(o.process(n, e))
                        })).catch((function(e) {
                            return r(e)
                        }));
                        else {
                            var i = new XMLHttpRequest;
                            i.open("GET", e, !0), i.responseType = "arraybuffer", i.success = t, i.failure = r, i.onload = function(n) {
                                i.response && 200 === i.status ? t(o.process(i.response, e)) : r && r(n)
                            }, i.onprogress = n, i.send(null)
                        }
                    }
                }, {
                    key: "process",
                    value: function(e, t) {
                        var n = {
                                path: t,
                                slots: {}
                            },
                            r = t.split("/"),
                            o = r[r.length - 1].split(".")[0].split("_"),
                            a = r[3],
                            i = o[1];
                        n.slots[a] = {
                            attributes: {}
                        }, n.slots[i] = {
                            attributes: {}
                        };
                        var s = new g(e),
                            c = (s.ReadUint32(), s.ReadFloat32()),
                            l = s.ReadFloat32(),
                            u = s.ReadFloat32();
                        n.timestamp = c, n.inputHash = {
                            lo: l,
                            hi: u
                        };
                        for (var f = s.ReadUint32(), h = ["hidePerVertex0", "hidePerVertex1", "hideDeltas0", "hideDeltas1"], p = {}, d = 0; d < h.length; ++d) {
                            var m = 1 << d;
                            p[h[d]] = 0 != (f & m)
                        }
                        for (var y = 0; y < 2; ++y) {
                            var v = [a, i][y];
                            if (p[h[y]]) {
                                var b = s.ReadUint32(),
                                    w = s.MapUint8Array(b),
                                    k = new RK.BufferAttribute(w, 1, !0);
                                n.slots[v].attributes.hidePerVertex = k
                            }
                            if (p[h[2 + y]]) {
                                var S = s.ReadUint32();
                                s.Align(4);
                                var _ = s.MapFloat32Array(3 * S),
                                    C = new RK.BufferAttribute(_, 3);
                                n.slots[v].attributes.hideDeltas = C
                            }
                        }
                        return n
                    }
                }]), e
            }(),
            g = function() {
                function e(t) {
                    m(this, e), this._buffer = t, this._offset = 0, this._view = new DataView(t)
                }
                return v(e, [{
                    key: "Align",
                    value: function(e) {
                        for (; this._offset % e;) this._offset++
                    }
                }, {
                    key: "ReadUint32",
                    value: function() {
                        var e = this._view.getUint32(this._offset, !0);
                        return this._offset += 4, e
                    }
                }, {
                    key: "ReadFloat32",
                    value: function() {
                        var e = this._view.getFloat32(this._offset, !0);
                        return this._offset += 4, e
                    }
                }, {
                    key: "MapUint8Array",
                    value: function(e) {
                        var t = new Uint8Array(this._buffer, this._offset, e);
                        return this._offset += e, t
                    }
                }, {
                    key: "MapFloat32Array",
                    value: function(e) {
                        var t = new Float32Array(this._buffer, this._offset, e);
                        return this._offset += 4 * e, t
                    }
                }]), e
            }();

        function w(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var k = function() {
                function e() {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e)
                }
                var t, n, r;
                return t = e, (n = [{
                    key: "load",
                    value: function(e, t, n, r) {
                        var o = this;
                        e = e.replace("Character0?", "");
                        var a = window.Pre && Pre.resources[e];
                        if (a) Promise.resolve(a).then((function(n) {
                            t(o.process(n, e))
                        })).catch((function(e) {
                            return r(e)
                        }));
                        else {
                            var i = new XMLHttpRequest;
                            i.open("GET", e, !0), i.responseType = "arraybuffer", i.success = t, i.failure = r, i.onload = function(n) {
                                i.response && 200 === i.status ? t(o.process(i.response, e)) : r && r(n)
                            }, i.onprogress = n, i.send(null)
                        }
                    }
                }, {
                    key: "process",
                    value: function(e) {
                        var t = new DataView(e);
                        if (542327876 !== t.getUint32(0, !0)) throw "Invalid .dds file. (magic)";
                        if (124 !== t.getUint32(4, !0)) throw "Invalid .dds file. (size)";
                        t.getUint32(8, !0);
                        var n = t.getUint32(12, !0),
                            r = t.getUint32(16, !0);
                        if (t.getUint32(20, !0), t.getUint32(24, !0), t.getUint32(28, !0), t.getUint32(76, !0), t.getUint32(80, !0), 808540228 !== t.getUint32(84, !0)) throw "Unsupported .dds file type. (Missing dx10)";
                        t.getUint32(92, !0), t.getUint32(96, !0), t.getUint32(100, !0), t.getUint32(104, !0), t.getUint32(108, !0), t.getUint32(112, !0), t.getUint32(116, !0), t.getUint32(120, !0), t.getUint32(124, !0);
                        var o = t.getUint32(128, !0),
                            a = (t.getUint32(132, !0), t.getUint32(141360, !0), t.getUint32(140, !0), t.getUint32(144, !0), -1),
                            i = "";
                        switch (o) {
                            case 2:
                                a = 4, i = "float";
                                break;
                            case 6:
                                a = 3, i = "float";
                                break;
                            default:
                                throw "Unsupported pixel format"
                        }
                        return {
                            width: r,
                            height: n,
                            pixels: new Float32Array(e, 148, r * n * a),
                            channelCount: a,
                            channelType: i
                        }
                    }
                }]) && w(t.prototype, n), r && w(t, r), e
            }(),
            S = n(0);

        function _(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var C = VN.FontFaceObserver,
            R = function() {
                function e() {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e)
                }
                var t, n, r;
                return t = e, r = [{
                    key: "load",
                    value: function(e, t, n, r) {
                        var o = e.substring(e.lastIndexOf("/") + 1).split(".")[0].replace(/_/g, "-"),
                            a = document.querySelector("head"),
                            i = document.createElement("style");
                        i.setAttribute("type", "text/css"), i.appendChild(document.createTextNode("\n            @font-face {\n                font-family: ".concat(o, ";\n                src: url(").concat(e, ') format("truetype");\n            }\n            \n            p.customfont {\n                font-family: ').concat(o, ", Verdana, Tahoma;\n            }\n        "))), a.appendChild(i), new C(o, {
                            weight: 400
                        }).load().then((function() {
                            return t(o)
                        })).catch(r)
                    }
                }], (n = null) && _(t.prototype, n), r && _(t, r), e
            }();

        function O(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var E = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, r;
            return t = e, r = [{
                key: "load",
                value: function(e, t, n, r) {
                    var o = new Image;
                    o.onload = function() {
                        return t(o)
                    }, o.onerror = function(e) {
                        return r(e)
                    }, o.src = e
                }
            }], (n = null) && O(t.prototype, n), r && O(t, r), e
        }();

        function P(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var x = VN.axios,
            j = function() {
                function e() {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e)
                }
                var t, n, r;
                return t = e, r = [{
                    key: "load",
                    value: function(e, t, n, r) {
                        var o = this,
                            a = window.Pre && Pre.resources[e];
                        a ? Promise.resolve(a).then((function(e) {
                            t.call(o, e)
                        })).catch((function(e) {
                            return r.call(o, e)
                        })) : x({
                            method: "get",
                            url: e,
                            onDownloadProgress: n
                        }).then((function(e) {
                            return t.call(o, e.data)
                        })).catch((function(e) {
                            return r.call(o, e)
                        }))
                    }
                }], (n = null) && P(t.prototype, n), r && P(t, r), e
            }();

        function T(e) {
            return (T = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function M(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function K(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function I(e, t) {
            return !t || "object" !== T(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function N(e, t, n) {
            return (N = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(e, t, n) {
                var r = function(e, t) {
                    for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = B(e)););
                    return e
                }(e, t);
                if (r) {
                    var o = Object.getOwnPropertyDescriptor(r, t);
                    return o.get ? o.get.call(n) : o.value
                }
            })(e, t, n || e)
        }

        function B(e) {
            return (B = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function A(e, t) {
            return (A = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var L = function(e) {
            function t() {
                return M(this, t), I(this, B(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && A(e, t)
            }(t, RK.TextureLoader), n = t, (r = [{
                key: "load",
                value: function(e, n, r, o) {
                    N(B(t.prototype), "load", this).call(this, e, (function(e) {
                        e.format = RK.RGBAFormat, e.wrapS = RK.RepeatWrapping, e.wrapT = RK.RepeatWrapping, e.generateMipmaps = !1, e.minFilter = RK.LinearFilter, e.magFilter = RK.LinearFilter, e.needsUpdate = !0, n(e)
                    }), r, o)
                }
            }]) && K(n.prototype, r), o && K(n, o), t
        }();

        function U(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var D = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, r;
            return t = e, r = [{
                key: "load",
                value: function(e, t, n, r) {
                    var o = document.createElement("script");
                    o.src = e, o.onload = function(e) {
                        return t(e)
                    }, o.onerror = function(e) {
                        return r(e)
                    }, document.body.appendChild(o)
                }
            }], (n = null) && U(t.prototype, n), r && U(t, r), e
        }();

        function F(e) {
            return (F = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function z(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function V(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }
        var G = function e(t) {
                V(this, e), this.data = t, this.owners = {}
            },
            q = function() {
                function e() {
                    V(this, e)
                }
                var t, n, o;
                return t = e, o = [{
                    key: "init",
                    value: function() {
                        for (var e in this.loaders.ckb = new d, this.loaders.png = new RK.TextureLoader, this.loaders.jpg = this.loaders.png, this.loaders.json = j, this.loaders.vjson = j, this.loaders.image = E, this.loaders.fjs = new RK.FontLoader, this.loaders.ttf = R, this.loaders.otf = R, this.loaders.envSphere = new L, this.loaders.js = D, this.loaders.dds = new k, this.loaders.ckp = new b, S.a.extraLoaders) this.loaders[e] = S.a.extraLoaders[e];
                        this._resources = {}, this.version = "?version=" + S.a.artVersionNumber
                    }
                }, {
                    key: "addResource",
                    value: function(e, t) {
                        this._resources[e] ? console.error("Resource already loading", e) : this._resources[e] = new G(t)
                    }
                }, {
                    key: "addLoader",
                    value: function(e, t) {
                        this.loaders[e] = t
                    }
                }, {
                    key: "getResources",
                    value: function(e, t) {
                        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : -1,
                            r = arguments.length > 3 ? arguments[3] : void 0,
                            o = [];
                        for (var a in e) o.push(this.getResource(e[a], void 0 === t ? void 0 : t[a], n, r));
                        return Promise.all(o)
                    }
                }, {
                    key: "status",
                    value: function(e) {
                        if (!(e in this._resources)) return this.RESOURCE_STATUS.unrequested;
                        var t = this._resources[e];
                        return void 0 === t.data ? this.RESOURCE_STATUS.failed : "string" != typeof t.data && "then" in t.data ? this.RESOURCE_STATUS.requested : this.RESOURCE_STATUS.loaded
                    }
                }, {
                    key: "loaded",
                    value: function(e) {
                        return this.status(e) === this.RESOURCE_STATUS.loaded
                    }
                }, {
                    key: "getNow",
                    value: function(e) {
                        if (this.status(e) === this.RESOURCE_STATUS.loaded) return this._resources[e].data;
                        console.error("Resource not loaded - ", e)
                    }
                }, {
                    key: "getResource",
                    value: function(e) {
                        var t = this,
                            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0,
                            o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : -1,
                            a = arguments.length > 3 ? arguments[3] : void 0;
                        e || console.error("Undefined resource"), "object" === F(e) && (n = e.type, e = e.path), e || console.error("Undefined resource path", e);
                        var i, s = e.startsWith("data:") ? "" : this.version;
                        return e in this._resources ? i = Promise.resolve(this._resources[e].data) : (void 0 === n && (n = e.includes("request_image=") ? "noun" : e.split("?")[0].split(".").pop()), n in this.loaders || console.error("Unrecognized resource type", n), i = new Promise((function(r) {
                            t.loaders[n].load(e + s, (function(e) {
                                return r(e)
                            }), a ? function(t) {
                                a(e, t)
                            } : void 0, (function(t) {
                                console.error(o, "Failed to load:", e, t), r(void 0)
                            }))
                        })), this._resources[e] = new G(i), i.then((function(n) {
                            t._resources[e] && (t._resources[e].data = n)
                        }))), this._resources[e].owners[o] = !0, r.a.emit("resourcesChanged", void 0), i
                    }
                }, {
                    key: "unregister",
                    value: function(e) {
                        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [],
                            n = {};
                        for (var r in t.map((function(e) {
                                return n[e.path ? e.path : e] = !0
                            })), this._resources) {
                            var o = this._resources[r];
                            if (e in o.owners && !(r in n) && (delete o.owners[e], !Object.keys(o.owners).length)) {
                                var a = o.data;
                                void 0 !== a && "string" != typeof a && !("then" in a) && "dispose" in a && a.dispose(), delete this._resources[r]
                            }
                        }
                    }
                }], (n = null) && z(t.prototype, n), o && z(t, o), e
            }();
        q.loaders = {}, q.RESOURCE_STATUS = {
            unrequested: 0,
            requested: 1,
            loaded: 2,
            failed: 3
        }
    },
    27: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return i
        }));
        var r, o, a = n(1);

        function i(e, t, n, r) {
            this._x = e || 0, this._y = t || 0, this._z = n || 0, this._w = void 0 !== r ? r : 1
        }
        Object.assign(i, {
            slerp: function(e, t, n, r) {
                return n.copy(e).slerp(t, r)
            },
            slerpFlat: function(e, t, n, r, o, a, i) {
                var s = n[r + 0],
                    c = n[r + 1],
                    l = n[r + 2],
                    u = n[r + 3],
                    f = o[a + 0],
                    h = o[a + 1],
                    p = o[a + 2],
                    d = o[a + 3];
                if (u !== d || s !== f || c !== h || l !== p) {
                    var m = 1 - i,
                        y = s * f + c * h + l * p + u * d,
                        v = y >= 0 ? 1 : -1,
                        b = 1 - y * y;
                    if (b > Number.EPSILON) {
                        var g = Math.sqrt(b),
                            w = Math.atan2(g, y * v);
                        m = Math.sin(m * w) / g, i = Math.sin(i * w) / g
                    }
                    var k = i * v;
                    if (s = s * m + f * k, c = c * m + h * k, l = l * m + p * k, u = u * m + d * k, m === 1 - i) {
                        var S = 1 / Math.sqrt(s * s + c * c + l * l + u * u);
                        s *= S, c *= S, l *= S, u *= S
                    }
                }
                e[t] = s, e[t + 1] = c, e[t + 2] = l, e[t + 3] = u
            }
        }), Object.defineProperties(i.prototype, {
            x: {
                get: function() {
                    return this._x
                },
                set: function(e) {
                    this._x = e, this.onChangeCallback()
                }
            },
            y: {
                get: function() {
                    return this._y
                },
                set: function(e) {
                    this._y = e, this.onChangeCallback()
                }
            },
            z: {
                get: function() {
                    return this._z
                },
                set: function(e) {
                    this._z = e, this.onChangeCallback()
                }
            },
            w: {
                get: function() {
                    return this._w
                },
                set: function(e) {
                    this._w = e, this.onChangeCallback()
                }
            }
        }), Object.assign(i.prototype, {
            set: function(e, t, n, r) {
                return this._x = e, this._y = t, this._z = n, this._w = r, this.onChangeCallback(), this
            },
            clone: function() {
                return new this.constructor(this._x, this._y, this._z, this._w)
            },
            copy: function(e) {
                return this._x = e.x, this._y = e.y, this._z = e.z, this._w = e.w, this.onChangeCallback(), this
            },
            toSimple: function() {
                return {
                    x: this.x,
                    y: this.y,
                    z: this.z,
                    w: this.w
                }
            },
            setFromEuler: function(e, t) {
                if (!e || !e.isEuler) throw new Error("RK.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vec3 and order.");
                var n = e._x,
                    r = e._y,
                    o = e._z,
                    a = e.order,
                    i = Math.cos,
                    s = Math.sin,
                    c = i(n / 2),
                    l = i(r / 2),
                    u = i(o / 2),
                    f = s(n / 2),
                    h = s(r / 2),
                    p = s(o / 2);
                return "XYZ" === a ? (this._x = f * l * u + c * h * p, this._y = c * h * u - f * l * p, this._z = c * l * p + f * h * u, this._w = c * l * u - f * h * p) : "YXZ" === a ? (this._x = f * l * u + c * h * p, this._y = c * h * u - f * l * p, this._z = c * l * p - f * h * u, this._w = c * l * u + f * h * p) : "ZXY" === a ? (this._x = f * l * u - c * h * p, this._y = c * h * u + f * l * p, this._z = c * l * p + f * h * u, this._w = c * l * u - f * h * p) : "ZYX" === a ? (this._x = f * l * u - c * h * p, this._y = c * h * u + f * l * p, this._z = c * l * p - f * h * u, this._w = c * l * u + f * h * p) : "YZX" === a ? (this._x = f * l * u + c * h * p, this._y = c * h * u + f * l * p, this._z = c * l * p - f * h * u, this._w = c * l * u - f * h * p) : "XZY" === a && (this._x = f * l * u - c * h * p, this._y = c * h * u - f * l * p, this._z = c * l * p + f * h * u, this._w = c * l * u + f * h * p), !1 !== t && this.onChangeCallback(), this
            },
            setFromAxisAngle: function(e, t) {
                var n = t / 2,
                    r = Math.sin(n);
                return this._x = e.x * r, this._y = e.y * r, this._z = e.z * r, this._w = Math.cos(n), this.onChangeCallback(), this
            },
            setFromRotationMatrix: function(e, t) {
                var n = e.elements,
                    r = n[0],
                    o = n[4],
                    i = n[8],
                    s = n[1],
                    c = n[5],
                    l = n[9],
                    u = n[2],
                    f = n[6],
                    h = n[10];
                if (t) {
                    var p = new a.a(r, s, u),
                        d = new a.a(o, c, f),
                        m = new a.a(i, l, h);
                    p.normalize();
                    var y = p.dot(d);
                    d.sub(p.clone().multiplyScalar(y)), d.normalize(), m.crossVectors(p, d), r = p.x, s = p.y, u = p.z, o = d.x, c = d.y, f = d.z, i = m.x, l = m.y, h = m.z
                }
                var v, b = r + c + h;
                return b > 0 ? (v = .5 / Math.sqrt(b + 1), this._w = .25 / v, this._x = (f - l) * v, this._y = (i - u) * v, this._z = (s - o) * v) : r > c && r > h ? (v = 2 * Math.sqrt(1 + r - c - h), this._w = (f - l) / v, this._x = .25 * v, this._y = (o + s) / v, this._z = (i + u) / v) : c > h ? (v = 2 * Math.sqrt(1 + c - r - h), this._w = (i - u) / v, this._x = (o + s) / v, this._y = .25 * v, this._z = (l + f) / v) : (v = 2 * Math.sqrt(1 + h - r - c), this._w = (s - o) / v, this._x = (i + u) / v, this._y = (l + f) / v, this._z = .25 * v), this.onChangeCallback(), this
            },
            setFromUnitVectors: (o = new a.a, function(e, t) {
                return void 0 === o && (o = new a.a), (r = e.dot(t) + 1) < 1e-6 ? (r = 0, Math.abs(e.x) > Math.abs(e.z) ? o.set(-e.y, e.x, 0) : o.set(0, -e.z, e.y)) : o.crossVectors(e, t), this._x = o.x, this._y = o.y, this._z = o.z, this._w = r, this.normalize()
            }),
            inverse: function() {
                return this.conjugate().normalize()
            },
            conjugate: function() {
                return this._x *= -1, this._y *= -1, this._z *= -1, this.onChangeCallback(), this
            },
            dot: function(e) {
                return this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
            },
            lengthSq: function() {
                return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
            },
            length: function() {
                return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
            },
            normalize: function() {
                var e = this.length();
                return 0 === e ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e = 1 / e, this._x = this._x * e, this._y = this._y * e, this._z = this._z * e, this._w = this._w * e), this.onChangeCallback(), this
            },
            multiply: function(e, t) {
                return void 0 !== t ? (console.warn("RK.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), this.multiplyQuaternions(e, t)) : this.multiplyQuaternions(this, e)
            },
            premultiply: function(e) {
                return this.multiplyQuaternions(e, this)
            },
            multiplyQuaternions: function(e, t) {
                var n = e._x,
                    r = e._y,
                    o = e._z,
                    a = e._w,
                    i = t._x,
                    s = t._y,
                    c = t._z,
                    l = t._w;
                return this._x = n * l + a * i + r * c - o * s, this._y = r * l + a * s + o * i - n * c, this._z = o * l + a * c + n * s - r * i, this._w = a * l - n * i - r * s - o * c, this.onChangeCallback(), this
            },
            slerp: function(e, t) {
                if (0 === t) return this;
                if (1 === t) return this.copy(e);
                var n = this._x,
                    r = this._y,
                    o = this._z,
                    a = this._w,
                    i = a * e._w + n * e._x + r * e._y + o * e._z;
                if (i < 0 ? (this._w = -e._w, this._x = -e._x, this._y = -e._y, this._z = -e._z, i = -i) : this.copy(e), i >= 1) return this._w = a, this._x = n, this._y = r, this._z = o, this;
                var s = Math.sqrt(1 - i * i);
                if (Math.abs(s) < .001) return this._w = .5 * (a + this._w), this._x = .5 * (n + this._x), this._y = .5 * (r + this._y), this._z = .5 * (o + this._z), this;
                var c = Math.atan2(s, i),
                    l = Math.sin((1 - t) * c) / s,
                    u = Math.sin(t * c) / s;
                return this._w = a * l + this._w * u, this._x = n * l + this._x * u, this._y = r * l + this._y * u, this._z = o * l + this._z * u, this.onChangeCallback(), this
            },
            equals: function(e) {
                return e._x === this._x && e._y === this._y && e._z === this._z && e._w === this._w
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0), this._x = e[t], this._y = e[t + 1], this._z = e[t + 2], this._w = e[t + 3], this.onChangeCallback(), this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._w, e
            },
            onChange: function(e) {
                return this.onChangeCallback = e, this
            },
            onChangeCallback: function() {}
        })
    },
    31: function(e, t, n) {
        "use strict";

        function r(e) {
            return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function o(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function a(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function i(e, t) {
            return !t || "object" !== r(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function s(e) {
            return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function c(e, t) {
            return (c = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        n.d(t, "a", (function() {
            return u
        }));
        var l = VN.classNames,
            u = function(e) {
                function t() {
                    return o(this, t), i(this, s(t).apply(this, arguments))
                }
                var n, r, u;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && c(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentWillUnmount",
                    value: function() {
                        var e = document.createElement("input");
                        e.setAttribute("type", "text"), e.setAttribute("id", "tempInputToFixKeyboardFocusBug"), document.body.appendChild(e), e.focus(), e.blur(), document.body.removeChild(e)
                    }
                }, {
                    key: "render",
                    value: function() {
                        return this.props.contentOnly ? React.createElement("div", {
                            className: "overlayModal",
                            key: "modal",
                            style: this.props.style
                        }, React.createElement("div", {
                            className: "overlayModal-bg",
                            onClick: this.props.closeCallback
                        }), React.createElement("div", {
                            className: "overlayModal-window-wrapper"
                        }, React.createElement("div", {
                            className: l("overlayModal-window", {
                                "overlayModal-window-full": this.props.fullscreen
                            })
                        }, this.props.children))) : React.createElement("div", {
                            className: "overlayModal",
                            key: "modal",
                            style: this.props.style
                        }, React.createElement("div", {
                            className: "overlayModal-bg",
                            onClick: this.props.closeCallback
                        }), React.createElement("div", {
                            className: "overlayModal-window-wrapper"
                        }, React.createElement("div", {
                            className: l("overlayModal-window", this.props.extraClass)
                        }, React.createElement("div", {
                            className: "overlayDialog-header"
                        }, React.createElement("div", {
                            className: "overlayDialog-header-title"
                        }, this.props.title), React.createElement("div", {
                            className: "overlayDialog-header-right"
                        }, this.props.header), this.props.customCloseButton || React.createElement("a", {
                            className: "overlay-x",
                            onClick: this.props.closeCallback
                        }, "")), React.createElement("div", {
                            className: "overlayDialog-content"
                        }, this.props.children), this.props.footer && React.createElement("div", {
                            className: "overlayDialog-footer"
                        }, this.props.footer))))
                    }
                }]) && a(n.prototype, r), u && a(n, u), t
            }()
    },
    34: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return f
        }));
        var r = n(31),
            o = n(44);

        function a(e) {
            return (a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function i(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function s(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function c(e, t) {
            return !t || "object" !== a(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function l(e) {
            return (l = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function u(e, t) {
            return (u = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var f = function(e) {
            function t() {
                return i(this, t), c(this, l(t).apply(this, arguments))
            }
            var n, r, a;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && u(e, t)
            }(t, e), n = t, (r = [{
                key: "renderFooter",
                value: function(e) {
                    return 0 !== e.length || this.props.footer ? React.createElement("div", {
                        className: "overlayDialog-footer"
                    }, e, this.props.footer) : null
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.props.title,
                        t = this.props.buttons || [],
                        n = this.props.additionalClass || "",
                        r = this.props.onClose,
                        a = t.map((function(e, t) {
                            return React.createElement(o.a, {
                                icon: e.icon,
                                className: e.cancel ? "button-grey" : "",
                                key: t,
                                label: e.label,
                                onClick: e.onClick,
                                href: e.href,
                                download: e.download,
                                clickFeedbackText: e.clickFeedbackText
                            })
                        }));
                    return React.createElement("div", {
                        style: {
                            zIndex: this.props.prompt ? 20 : 10
                        },
                        className: "overlayModal " + n,
                        key: "modal"
                    }, React.createElement("div", {
                        className: "overlayModal-bg",
                        onClick: r
                    }), React.createElement("div", {
                        className: "overlayModal-window-wrapper"
                    }, React.createElement("div", {
                        className: "overlayModal-window overlayModal-window--prompt"
                    }, React.createElement("div", {
                        className: "overlayDialog-header"
                    }, React.createElement("div", {
                        className: "overlayDialog-title"
                    }, e), r && React.createElement("a", {
                        className: "overlay-x",
                        onClick: r
                    }, "")), React.createElement("div", {
                        className: "overlayDialog-content"
                    }, this.props.children), this.renderFooter(a))))
                }
            }]) && s(n.prototype, r), a && s(n, a), t
        }(r.a)
    },
    35: function(e, t, n) {
        "use strict";

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        n.d(t, "a", (function() {
            return o
        }));
        var o = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, o;
            return t = e, o = [{
                key: "released",
                value: function(t) {
                    var n = CK.serverTime,
                        r = e.dates[t];
                    return r ? !!(n > r) : !1 !== r && !!console.error("No release date set for feature", t)
                }
            }, {
                key: "getDates",
                value: function() {
                    var t = {};
                    for (var n in e.dates) e.dates[n] && (t[n] = e.dates[n]);
                    return t
                }
            }, {
                key: "colorPermissions",
                value: function() {
                    return CK.User.permissions.color || CK.User.permissions.backer2 || !1
                }
            }], (n = null) && r(t.prototype, n), o && r(t, o), e
        }();
        o.dates = {
            upperScale: 1589266800,
            armLength: !1,
            baseItemB: 1592290800,
            baseRim: 1586242800,
            familiarPickAPose: 1592290800,
            extraArms: !1,
            extraTails: 1594623600,
            sideItemLibrary: !1,
            colorForRegularBackers: 1587366e3
        }, window.ckdebugrd = o
    },
    36: function(e, t, n) {
        "use strict";

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        n.d(t, "a", (function() {
            return o
        }));
        var o = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, o;
            return t = e, o = [{
                key: "notify",
                value: function(e) {
                    var t = this;
                    this.handleAction = function(e) {
                        e.preventDefault(), document.body.querySelector("user-notification button").removeEventListener("click", t.handleAction), t._callback(), "remove" in HTMLElement.prototype ? t._notification.remove() : t._notification.style.display = "none !important"
                    }, e ? (this.clearExistingNotifications(), this.createNotification(e)) : console.error("No options object provided")
                }
            }, {
                key: "handleTimeout",
                value: function() {
                    var e = document.body.querySelector("user-notification button");
                    e && e.removeEventListener("click", this.handleAction), "remove" in HTMLElement.prototype ? this._notification.remove() : this._notification.style.display = "none !important"
                }
            }, {
                key: "clearExistingNotifications",
                value: function() {
                    this.timeout && clearTimeout(this.timeout);
                    for (var e = Array.from(document.body.querySelectorAll("user-notification")), t = 0; t < e.length; t++) "remove" in HTMLElement.prototype ? e[t].remove() : e[t].style.display = "none !important"
                }
            }, {
                key: "createNotification",
                value: function(e) {
                    var t = this,
                        n = document.createElement("user-notification"),
                        r = document.createElement("p");
                    if (r.innerText = e.message, n.append(r), e.action) {
                        var o = document.createElement("button");
                        o.innerText = e.action.label, this._callback = e.action.callback, n.append(o)
                    }
                    if (e.duration) {
                        if (e.duration !== 1 / 0) {
                            var a = e.duration;
                            a < 400 ? a = 400 : a > 1e4 && (a = 1e4), this.timeout = setTimeout((function() {
                                t.handleTimeout()
                            }), a)
                        }
                        n.classList.add("is-infinite")
                    } else this.timeout = setTimeout((function() {
                        t.handleTimeout()
                    }), 4e3);
                    document.body.querySelector("#placeholder-canvas").append(n), this._notification = n;
                    var i = document.body.querySelector("user-notification button");
                    i && (i.addEventListener("click", this.handleAction), n.style.paddingRight = i.scrollWidth + 12 + "px")
                }
            }], (n = null) && r(t.prototype, n), o && r(t, o), e
        }()
    },
    37: function(e, t, n) {
        "use strict";

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        n.d(t, "a", (function() {
            return o
        }));
        var o = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, o;
            return t = e, o = [{
                key: "makeMesh",
                value: function(e, t) {
                    var n = e.skinned ? new RK.SkinnedMesh(void 0, t, !0) : new RK.Mesh(e, t);
                    return n.geometry = e, n.castShadow = !0, n.receiveShadow = !0, n.frustumCulled = !1, n.name = e.name, n.morphTargetInfluences = e.morphTargetInfluences, n.morphTargetDictionary = e.morphTargetDictionary, n
                }
            }], (n = null) && r(t.prototype, n), o && r(t, o), e
        }()
    },
    38: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return l
        }));
        var r = n(5),
            o = n(0),
            a = n(64);

        function i(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function s(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function c(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var l = function() {
            function e(t) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), Object.assign(this, t), this._originalData = t, this.keywords = t.keywords || {}, this.side = void 0 !== this.slot ? this.slot.endsWith("R") ? "R" : this.slot.endsWith("L") ? "L" : "" : "", this.unsidedSlot = this.slot.replace(/.$/, ""), this.sided = "" !== this.side, this.occupiesRandL = "R" === this.side && !this.link, this.slotR = "L" === this.side ? this.unsidedSlot + "R" : this.slot, this._findDefaultPaintConfig();
                var n = this.name ? this.name.split("_") : console.error("Slot item", this, "does not have a name attr") || [];
                if (this.subPart = n.length > 1, this.baseName = n[0], this.subName = n[1], this.poseModifier = t.mpose ? t.mpose.split(",").map((function(e) {
                        return e.trim()
                    })) : void 0, this.poseGroup = t.mpose_01, t.targets ? this.targets = t.targets.split(",") : delete this.targets, this.terms = {}, t.terms)
                    for (var r in t.terms) this.terms[r.toLowerCase()] = 1;
                this.mods || (this.mods = {}), this.searchTerms = e.prepTerms([].concat(s(Object.keys(this.keywords)), [this.slot, this.name, this.description || this.desc || "", this.displayname], s(Object.keys(this.terms || {}))))
            }
            var t, n, l;
            return t = e, l = [{
                key: "prepTerms",
                value: function(e) {
                    return e.filter((function(e) {
                        return !!e
                    })).join(" ").toLowerCase().replace(/'s/g, "").replace(/\W+/g, " ").split(" ").map((function(e) {
                        return e.trim()
                    })).filter((function(e) {
                        return e.length >= 3
                    }))
                }
            }, {
                key: "dateAndTag",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : e;
                    t.add_date && CK.serverTime ? (e.releaseDate = parseInt(t.add_date), e.released = e.releaseDate > 0 && e.releaseDate <= CK.serverTime, e.newToUser = !CK.timeTraveler && e.released && CK.User.loggedIn && CK.User.lastAccessDate && CK.User.lastAccessDate < e.releaseDate, e.new = e.released && void 0 !== e.keywords.new || e.releaseDate >= CK.serverTime - 86400 * o.a.newPartAge) : e.released = !0;
                    var n = e.display_order || 1;
                    if (e.keywords.test) e.released = !1, e.new = !1, e.tagLabel = "TEST", e.tagColor = "DarkGreen", e.display_order = -5e3 + n;
                    else if (e.keywords.unselectable && !CK.timeTraveler && CK.User.permissions.test) e.tagLabel = "unselectable", e.tagColor = "DarkBlue", delete e.keywords.unselectable;
                    else if (e.released)(e.newToUser || e.new) && (e.tagLabel = "NEW", e.display_order = -6e3 + n);
                    else {
                        var r = new Date(1e3 * e.releaseDate),
                            a = ("" + r.getFullYear()).slice(2) + " " + (r.getMonth() + 1) + " " + r.getDate();
                        e.tagLabel = e.releaseDate < 0 ? "future" : a, e.tagColor = "black", e.display_order = e.releaseDate < 0 ? -8e3 + n : -e.releaseDate, e.new = !1
                    }(!e.released && !CK.User.permissions.test && !CK.User.permissions.timetravel || !e.released && CK.timeTraveler || e.keywords.hide) && (e.hide = !0)
                }
            }], (n = [{
                key: "hasTarget",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.slot;
                    if (!t) return !0;
                    var n = r.a.slots[t];
                    if (!n) return "general" !== t && console.warn("Could not find slot", t, "for part", this.name), !0;
                    if (!n.targetSlots) return !0;
                    if (!n.targetSlots.length) return !0;
                    var o = n.targetSlots.find((function(t) {
                        return t in e
                    }));
                    if (!o) return !1;
                    var a = e[o];
                    if (!a) return !1;
                    if (n.targets && !(a in n.targets)) return !1;
                    if (!this.targets) return !0;
                    var i = r.a.getPart(a);
                    if (!i) return !1;
                    for (var s in this.targets) {
                        var c = this.targets[s];
                        if (c.startsWith("!")) {
                            if (!(c.slice(1) in i.keywords)) return !0
                        } else if (i.name === c || c in i.keywords) return !0
                    }
                    return !1
                }
            }, {
                key: "getStandard",
                value: function(e, t) {
                    var n = CK.Options.partsByKey[e] && CK.Options.partsByKey[e].standard;
                    if (n) {
                        var r = n.find((function(n) {
                            return n.hasTarget(t, e)
                        }));
                        if (r) return r
                    }
                }
            }, {
                key: "_findDefaultPaintConfig",
                value: function() {
                    if (void 0 !== this.slot) {
                        var e = "" === this.side ? this.slot : this.unsidedSlot + "R",
                            t = e + "_" + this.name,
                            n = r.a.configs[t];
                        void 0 !== n && n.length > 0 && (this.defaultPaints = n[0].paints[e])
                    }
                }
            }, {
                key: "match",
                value: function(e) {
                    var t = this;
                    return !!e.length && (1 === e.length && e[0].length <= 3 ? !!this.searchTerms.find((function(t) {
                        return t.startsWith(e[0])
                    })) : !e.find((function(e) {
                        return !t.searchTerms.find((function(t) {
                            return t.includes(e)
                        }))
                    })))
                }
            }, {
                key: "filter",
                value: function(e) {
                    var t = this;
                    if (!e.length || !e.map) return -9999;
                    var n = 0;
                    return e.map((function(e) {
                        var r;
                        n += t.searchTerms.reduce((function(t, n) {
                            return (r = Object(a.a)(n, e)) < t ? r : t
                        }), 9999)
                    })), n
                }
            }, {
                key: "parseColors",
                value: function(e) {
                    var t = this;
                    e = e.split(",");
                    var n = [];
                    return e.map((function(e) {
                        var r = e.split("_");
                        if (2 === r.length) {
                            var o = i(r, 2),
                                a = o[0],
                                s = o[1],
                                c = CK.Options.surfaces[a] || console.error("Surface id", a, "is missing");
                            n.push({
                                surface: c,
                                priority: parseInt(s)
                            })
                        } else {
                            var l = CK.Options.shaders[r[0]];
                            if (!l) return console.error("Missing shader reference", r[0], "in", t.slot + "_" + t.name), [];
                            var u = CK.Options.surfaces[l.surfaceID];
                            if (!u) return console.error("Invalid surface id in", l.surfaceID), [];
                            n.push({
                                shader: l,
                                surface: u,
                                priority: 0
                            })
                        }
                    })), n
                }
            }, {
                key: "source",
                get: function() {
                    return this._source || (this._source = this.slot.endsWith("D") || this.slot.endsWith("L") ? r.a.getPartBySlotAndName(this.unsidedSlot + "R", this.name) : this), this._source
                }
            }, {
                key: "pipeDone",
                get: function() {
                    return !0
                }
            }, {
                key: "pipeBuggy",
                get: function() {}
            }, {
                key: "debugPartOverlayColor",
                get: function() {
                    return !1
                }
            }]) && c(t.prototype, n), l && c(t, l), e
        }();
        for (var u in l.artPipeStatus = {
                0: "model",
                1: "uvs",
                2: "forms",
                3: "colors",
                4: "normal",
                6: "skin",
                7: "mods",
                8: "print",
                9: "db",
                10: "done"
            }, l.artPipeStatusByName = {}, l.artPipeStatus) l.artPipeStatusByName[l.artPipeStatus[u]] = u;
        l.artPipeStatusOrdered = Object.keys(l.artPipeStatus).sort((function(e, t) {
            return parseInt(e) - parseInt(t)
        })), l.artPipeStatusOrderedNames = l.artPipeStatusOrdered.map((function(e) {
            return l.artPipeStatus[e]
        }))
    },
    39: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return a
        }));
        var r = n(36);

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var a = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, a;
            return t = e, a = [{
                key: "add",
                value: function() {
                    this.queue = this.queue.slice(0, this.currentIndex + 1), this.queue.push(CK.character.data.clone()), this.queue.length > 20 && (this.queue = this.queue.slice(this.queue.length - 20)), this.currentIndex = this.queue.length - 1
                }
            }, {
                key: "undo",
                value: function() {
                    this.hasUndo ? (r.a.notify({
                        message: "UNDO"
                    }), this.currentIndex -= 1, CK.character.change(this.queue[this.currentIndex], !0, !1)) : r.a.notify({
                        message: "CANNOT UNDO",
                        duration: 1600
                    })
                }
            }, {
                key: "redo",
                value: function() {
                    this.hasRedo ? (r.a.notify({
                        message: "REDO"
                    }), this.currentIndex += 1, CK.character.change(this.queue[this.currentIndex], !0, !1)) : r.a.notify({
                        message: "CANNOT REDO",
                        duration: 1600
                    })
                }
            }, {
                key: "reset",
                value: function() {
                    this.queue = [CK.character.data.clone()], this.currentIndex = 0
                }
            }, {
                key: "init",
                value: function() {
                    this.queue = [], this.currentIndex = -1
                }
            }, {
                key: "empty",
                get: function() {
                    return this.queue.length <= 1
                }
            }, {
                key: "hasUndo",
                get: function() {
                    return this.currentIndex > 0
                }
            }, {
                key: "hasRedo",
                get: function() {
                    return this.currentIndex < this.queue.length - 1
                }
            }], (n = null) && o(t.prototype, n), a && o(t, a), e
        }();
        a.init()
    },
    41: function(e, t, n) {
        "use strict";

        function r(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function o(e) {
            return (o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function a(e) {
            return e && "object" === o(e) && !Array.isArray(e)
        }
        t.a = {
            deepCopy: function e(t) {
                if ("object" === o(t)) {
                    if (Array.isArray(t)) {
                        for (var n = t.length, r = new Array(n), a = 0; a < n; a++) r[a] = e(t[a]);
                        return r
                    }
                    var i = {};
                    for (var s in t && t.prototype && (i.prototype = t.prototype), t) i[s] = e(t[s]);
                    return i
                }
                return t
            },
            deepMerge: function e(t) {
                for (var n = arguments.length, o = new Array(n > 1 ? n - 1 : 0), i = 1; i < n; i++) o[i - 1] = arguments[i];
                if (!o.length) return t;
                var s = o.shift();
                if (a(t) && a(s))
                    for (var c in s) a(s[c]) ? (t[c] || Object.assign(t, r({}, c, {})), e(t[c], s[c])) : Object.assign(t, r({}, c, s[c]));
                return e.apply(void 0, [t].concat(o))
            },
            deepClean: function e(t) {
                var n = !0;
                for (var r in t) a(t[r]) && e(t[r]) ? delete t[r] : n = !1;
                return n
            },
            getUrlParameter: function(e) {
                e = e.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                var t = new RegExp("[\\?&]" + e + "=([^&#]*)").exec(location.search);
                return null === t ? "" : decodeURIComponent(t[1].replace(/\+/g, " "))
            }
        }
    },
    43: function(e, t, n) {
        "use strict";
        var r = n(0),
            o = !1;
        var a = {
            pretendWidth: (window.screen.width + window.innerWidth) / 2,
            pretendHeight: (window.screen.height + window.innerHeight) / 2
        };
        t.a = {
            compact: function() {
                var e = window.innerWidth <= (r.a.compactWidth || 960) && window.innerHeight <= 600 || window.innerHeight <= (r.a.compactWidth || 960) && window.innerWidth <= 600;
                return e || (o = !0), !(o && window.CK && !CK.URL.getVar("automation")) && e
            },
            landscape: function() {
                return 90 === window.orientation || -90 === window.orientation
            },
            retinaAdjust: function(e, t) {
                return !r.a.retinaEnabled || r.a.forge || !window.divicePixelRatio || divicePixelRatio < 1.3 ? [e, t] : window.divicePixelRatio > 4 ? [4 * e, 4 * t] : [Math.floor(e * window.divicePixelRatio), Math.floor(t * window.divicePixelRatio)]
            },
            isRetina: function() {
                return window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches
            },
            screenSize: a
        }
    },
    44: function(e, t, n) {
        "use strict";

        function r(e) {
            return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function a(e) {
            return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function i(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function s(e, t) {
            return (s = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        n.d(t, "a", (function() {
            return l
        }));
        var c = VN.classNames,
            l = function(e) {
                function t(e) {
                    var n, o, s;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), o = this, (n = !(s = a(t).call(this, e)) || "object" !== r(s) && "function" != typeof s ? i(o) : s).state = {
                        label: n.props.label
                    }, n.click = n.click.bind(i(n)), n
                }
                var n, l, u;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && s(e, t)
                }(t, React.Component), n = t, (l = [{
                    key: "click",
                    value: function(e) {
                        var t = this;
                        this.props.clickFeedbackText && (this.setState({
                            label: this.props.clickFeedbackText
                        }), setTimeout((function() {
                            t.setState({
                                label: t.props.label
                            })
                        }), 1e3)), this.props.onClick(e)
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = c("button", {
                                selected: this.props.selected
                            }, {
                                disabled: this.props.disabled
                            }, this.props.className);
                        return React.createElement("a", {
                            className: t,
                            onClick: function(t) {
                                return e.click(t)
                            },
                            href: this.props.href,
                            download: this.props.download
                        }, this.props.icon ? React.createElement("img", {
                            className: "buttonicon",
                            src: this.props.icon
                        }) : null, this.state.label)
                    }
                }]) && o(n.prototype, l), u && o(n, u), t
            }()
    },
    45: function(e, t, n) {
        "use strict";

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        n.d(t, "a", (function() {
            return o
        }));
        var o = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, o;
            return t = e, o = [{
                key: "init",
                value: function() {
                    this.initialized || (this.initialized = !0, this.variables = {}, this.initURLVariables())
                }
            }, {
                key: "getCharacterURLString",
                value: function(e) {
                    var t = [];
                    for (var n in e.parts) 0 != e.parts[n] && t.push(e.parts[n]);
                    var r = [];
                    for (var o in e.sliders) 0 != e.sliders[o] && r.push(e.sliders[o]);
                    return t.join(",") + "&" + r.join(",") + "&" + e.poses.main
                }
            }, {
                key: "initURLVariables",
                value: function() {
                    var e = window.location.search.substring(1);
                    if (e && "string" == typeof e) {
                        var t = e.split("&");
                        for (var n in t)
                            if (t[n] && "string" == typeof t[n]) {
                                var r = t[n].split("="),
                                    o = r[0],
                                    a = !(r.length > 1) || r[1];
                                "false" == a ? a = !1 : "true" == a && (a = !0), this.variables[o] = a
                            }
                    }
                }
            }, {
                key: "getVar",
                value: function(e) {
                    return this.initialized || this.init(), this.variables ? this.variables[e] : void 0
                }
            }], (n = null) && r(t.prototype, n), o && r(t, o), e
        }()
    },
    46: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return k
        }));
        var r = n(0);

        function o(e) {
            return (o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function a(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function i(e, t) {
            return !t || "object" !== o(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function s(e) {
            return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function c(e, t) {
            return (c = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var l = function(e) {
                function t() {
                    var e;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), (e = i(this, s(t).call(this))).range = r.a.forge ? 32 : 1, e.setMaterial(new SK.Custom({
                        depthWrite: !1,
                        uv: !1,
                        blending: RK.NormalBlending,
                        vertex: "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 ); ",
                        fragmentPars: "\n                    uniform sampler2D readTexture;\n                    uniform float textureSize;\n                    const int range = ".concat(e.range, ";\n                    const int bounds = ").concat(2 * e.range, ";\n                "),
                        fragment: "\n\n                    float texturePixelSize = 1.0 / textureSize;\n                    \n                    vec2 scanPositionUV;\n                    \n                    float d;\n                    \n                    vec4 scanTexel;\n\n                    vec2 readTextureUV = gl_FragCoord.xy / textureSize;\n                    \n                    //readTextureUV.y = 1.0 - readTextureUV.y;\n                    \n                    vec4 currentPixel = texture2D( readTexture, readTextureUV );\n                            \n                    if( currentPixel.a < 0.003 ){\n                    \n                        float closest = 9999999.0;                \n                        vec4 closestColor = vec4( 0.0 );        \n                                        \n                        for(int dx=0; dx <= bounds; dx++){\n                            for(int dy=0; dy <= bounds; dy++){\n                                \n                                scanPositionUV = readTextureUV + ( vec2(dx, dy) - float(range) ) * texturePixelSize;\n                                \n                                d = distance( scanPositionUV , readTextureUV );\n                                            \n                                if( d < closest ){\n                                    \n                                    scanTexel = texture2D( readTexture, scanPositionUV );\n                                    \n                                    if( scanTexel.a >= 0.003 ){\n                                        \n                                        closest = d;\n                                        closestColor = scanTexel;\n                                       \n                                    }\n                                }\n                            }\n                        }\n                        \n                        currentPixel = closestColor;\n                    \n                    }\n                            \n                    gl_FragColor = currentPixel;\n                                    \n                "
                    }, {
                        uniforms: {
                            readTexture: {
                                type: "t",
                                value: null
                            },
                            textureSize: {
                                type: "f",
                                value: 256
                            }
                        }
                    }, "Dilator")), e
                }
                var n, o, l;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && c(e, t)
                }(t, SK.EffectPass), n = t, (o = [{
                    key: "render",
                    value: function(e, t, n) {
                        this.material.uniforms.readTexture.value = n.texture, this.material.setUniform("textureSize", t.height), CK.renderManager.renderer.autoClear = !0, e.render(this.scene, this.camera, t, !1)
                    }
                }]) && a(n.prototype, o), l && a(n, l), t
            }(),
            u = n(10),
            f = n(5),
            h = n(21),
            p = n(56);

        function d() {
            if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
            if (Reflect.construct.sham) return !1;
            if ("function" == typeof Proxy) return !0;
            try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}))), !0
            } catch (e) {
                return !1
            }
        }

        function m(e, t, n) {
            return (m = d() ? Reflect.construct : function(e, t, n) {
                var r = [null];
                r.push.apply(r, t);
                var o = new(Function.bind.apply(e, r));
                return n && y(o, n.prototype), o
            }).apply(null, arguments)
        }

        function y(e, t) {
            return (y = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }

        function v(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function b(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function g(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function w(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var k = function() {
            function e(t) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.display = t, this.tempShaders = {}, this.tempReplaceShaders = {}, this.tempSchemes = {}, this.atlasTargetKeys = {}
            }
            var t, n, o;
            return t = e, o = [{
                key: "setupBakeMaterial",
                value: function(e, t, n, r, o) {
                    t.bakeMaterials || (t.bakeMaterials = {}), t.bakeMaterials[n] || (t.bakeMaterials[n] = new SK.Patched), t.bakeMaterials[n].setUniform("uvPosScl", r), t.bakeMaterials[n].ckReverseWinding = t.part && "L" === t.part.side, t.bakeMaterials[n].setUniform("flipNormal", t.material.ckReverseWinding ? 1 : 0)
                }
            }, {
                key: "flipCanvas",
                value: function(e) {
                    var t = document.createElement("canvas"),
                        n = t.getContext("2d");
                    return t.width = e.width, t.height = e.height, n.fillStyle = "gray", n.fillRect(0, 0, t.width, t.height), n.translate(0, e.height), n.scale(1, -1), n.drawImage(e, 0, 0), t
                }
            }, {
                key: "getVec4Array",
                value: function(e) {
                    for (var t = [], n = 0; n < e.length; n++) t.push(m(RK.Vec4, v(e[n]).concat([255])).divideScalar(255));
                    return t
                }
            }, {
                key: "getSchemeShader",
                value: function(e, t, n) {
                    if (e.shader) return e.shader;
                    var r = e.surface,
                        o = e.priority,
                        a = t[r.name] || f.a.getScheme("default", "default")[r.name] || console.log("Surface ".concat(r.name, " Not Found In default_scheme")) || [];
                    return a[o - 1] || a[0] || f.a.shaders[1]
                }
            }], (n = [{
                key: "render",
                value: function() {
                    var e = this;
                    CK.Settings.color && (this.display && this.display.sim && this.display.modded && this.display.modded.settings && (this.bakeColor || this.bakePhysical || this.bakeNormals || this.bakeSurface || this.bakeEmissive) ? (this.initialized || this.initialize(), ["normal", "color", "physical", "emissive"].map((function(t) {
                        e.hasBaked(t) && (e.setupMaterials(t), e.regularBaker(t))
                    })), this.display.updateEyeShaders(), this.updateDisplayMaterials(), this.surfaceBaker()) : this.updateDisplayMaterials())
                }
            }, {
                key: "tempReplaceShader",
                value: function(e, t) {
                    this.tempReplaceShaders = g({}, e, t), this.requestRefresh()
                }
            }, {
                key: "applyTempShader",
                value: function(e, t, n) {
                    var r = this;
                    (!this.tempShaders || Object.keys(this.tempShaders).length !== t.length || t.find((function(e) {
                        return !(e in r.tempShaders)
                    })) || t.find((function(t) {
                        return !r.tempShaders[t][n] || r.tempShaders[t][n].key !== e.key
                    }))) && (this.tempShaders = {}, t.map((function(t) {
                        return r.tempShaders[t] = g({}, n, e)
                    })), this.requestRefresh())
                }
            }, {
                key: "applyTempScheme",
                value: function(e, t) {
                    e && t || console.error("Invalid application of temp scheme", e, t), this.tempSchemes[e] = Object.assign({}, t), this.requestRefresh()
                }
            }, {
                key: "tempOverrideConfig",
                value: function(e) {
                    this._tempOverrideConfig || (this._tempOverrideConfig = e, this.requestRefresh())
                }
            }, {
                key: "removeAllTemp",
                value: function() {
                    (Object.keys(this.tempSchemes).length || Object.keys(this.tempShaders).length || Object.keys(this.tempReplaceShaders).length || this._tempOverrideConfig) && (this.tempShaders = {}, this.tempReplaceShaders = {}, this.tempSchemes = {}, delete this._tempOverrideConfig, this.requestRefresh())
                }
            }, {
                key: "requestRefresh",
                value: function() {
                    this.needsRefreshColor = !0, this.needsRefreshPhysical = !0, this.needsRefreshEmissive = !0, u.a.requestRenderRefresh()
                }
            }, {
                key: "requestRefreshColor",
                value: function() {
                    this.needsRefreshColor = !0, u.a.requestRenderRefresh()
                }
            }, {
                key: "requestRefreshPhysical",
                value: function() {
                    this.needsRefreshPhysical = !0, u.a.requestRenderRefresh()
                }
            }, {
                key: "requestRefreshEmissive",
                value: function() {
                    this.needsRefreshEmissive = !0, u.a.requestRenderRefresh()
                }
            }, {
                key: "refresh",
                value: function() {
                    CK.Settings.color && (this.needsRefreshSurfaceBake ? this.render() : (this.needsRefreshColor && this.regularBaker("color"), this.needsRefreshPhysical && this.regularBaker("physical"), this.needsRefreshEmissive && this.regularBaker("emissive"), this.display.updateEyeShaders()), this.needsRefreshColor = !1, this.needsRefreshPhysical = !1, this.needsRefreshEmissive = !1, this.needsRefreshSurfaceBake = !1)
                }
            }, {
                key: "getSize",
                value: function(e) {
                    return this.display.modded.settings.hiRez ? r.a.colorTextureSizeHigh : "color" === e || "normal" === e || "surface" === e ? r.a.colorTextureSize : r.a.colorTextureSize / 2
                }
            }, {
                key: "hasBaked",
                value: function(e) {
                    return {
                        normal: this.bakeNormals,
                        color: this.bakeColor,
                        physical: this.bakePhysical,
                        surface: this.bakeSurface,
                        emissive: this.bakeEmissive
                    }[e]
                }
            }, {
                key: "initialize",
                value: function() {
                    this.layer = 3, this.camera = new RK.PerspectiveCamera(45, 1, .5, 2), this.camera.layers.set(this.layer), this.dilator = new l, this.images = {}, this.textures = {}, this.imageData = {}, this.targetsRGBA = {}, this.initialized = !0
                }
            }, {
                key: "applyMaterials",
                value: function(e, t) {
                    var n = this.display.modded.settings.hiRez,
                        r = this.display.modded.decals;
                    for (var o in t) {
                        var a = t[o],
                            i = this.display.atlas.getSize(o),
                            s = a.bakeMaterials[e],
                            c = a.part.getMaskPath(n, i),
                            l = a.part.hasAAID && a.part.getAAIDPath(n, i);
                        h.a.loaded(c) ? s.setUniform("masksMap", CK.Resources.getNow(c)) : s.setUniform("masksMap", SK.Textures.gray), l && h.a.loaded(l) ? s.setAAID(CK.Resources.getNow(l)) : s.setAAID(SK.Textures.black);
                        var u = r[o] ? Object.keys(r[o]).length : 0;
                        s.setPatchCount(a.part.colors.length, u)
                    }
                }
            }, {
                key: "setPartColors",
                value: function(e, t) {
                    var n = this,
                        r = function(r) {
                            var o = t[r],
                                a = o.part;
                            a.colors.map((function(t, i) {
                                n.applyColor(e, o, r, t.mapping, i, t, a)
                            }))
                        };
                    for (var o in t) r(o)
                }
            }, {
                key: "setDecalColors",
                value: function(t, n) {
                    if (this.display && this.display.data) {
                        var o = this.display.modded.orderedDecals,
                            a = this.display.data,
                            i = a.paints,
                            s = a.shaders,
                            c = this.tempReplaceShaders[-1] || f.a.shaders[1];
                        for (var l in n)
                            for (var u = n[l], d = u.part, m = u.bakeMaterials[t], y = (f.a.slots[l] || f.a.slots[d.slot] || console.error("Invalid slot", d.slot)).scheme_group || "outfit", v = o[l], g = 0; g < m.layerCount; g++) {
                                var w = v[g];
                                if (w) {
                                    var k = w.mapping,
                                        S = w.id,
                                        _ = b(k.split("_"), 3),
                                        C = (_[0], _[1], _[2]),
                                        R = f.a.decals[S] || console.error("Missing decal id", S),
                                        O = R.getTexturePath();
                                    if (h.a.status(O) === h.a.RESOURCE_STATUS.loaded)
                                        if (CK.Settings.shaderballs) {
                                            for (var E = [], P = 0; P < R.maskCount; P++) {
                                                var x = w.mapping + "_" + P,
                                                    j = i[l] && i[l][x],
                                                    T = void 0;
                                                l in this.tempShaders && this.tempShaders[l][x] ? T = this.tempShaders[l][x] : this.tempReplaceShaders[j] ? T = this.tempReplaceShaders[j] : y in this.tempSchemes ? R.colors && R.colors[P] ? T = e.getSchemeShader(R.colors[P], this.tempSchemes[y], y) : console.error("Need to update decal colors for decal", R.id) : void 0 !== j && j in s && (T = s[j]), T || (T = c);
                                                var M = T[t];
                                                if ("color" === t && T === c) {
                                                    M = CK.Helpers.deepCopy(M);
                                                    for (var K = 0; K < 3; K++)
                                                        for (var I = 0; I < 3; I++) M[K][I] = 100 + 4 * g + 8 * P
                                                }
                                                E.push(M)
                                            }
                                            var N = h.a.getNow(O),
                                                B = "pattern" === R.slot,
                                                A = w.patches || (B ? d.pattern : void 0),
                                                L = "pattern" === R.slot,
                                                U = L ? new RK.Vec4(0, 0, d.worldUVSize * R.worldScale, d.worldUVSize * R.worldScale) : R.uvwh,
                                                D = !r.a.shaderballs && u.geometry.attributes.uv2 || d.uvs > 1 && !B && !L,
                                                F = R.form,
                                                z = R.colorIndex;
                                            m.setLayer(N, A, g, U, D, L, F, E, "color" === t ? z : -1, C)
                                        } else {
                                            for (var V = [], G = 0; G < R.layers.length; G++) {
                                                var q = R.layers[G],
                                                    H = R.layerMapping[G] || console.error("Decal need reexport", R);
                                                if (q === p.a.LAYER_TYPES.mask) {
                                                    var W = i[k] || i[R.slot] || console.error(k, R.slot, "Missing from paints", i);
                                                    if (W) {
                                                        var Q = W[H] || console.error("No shader set for", H, d) || 1,
                                                            X = (CK.Options.shaders[Q] || console.error("Missing shader", Q) || CK.Options.shaders[1])[t];
                                                        V.push(X)
                                                    } else console.error("No paints for", k)
                                                }
                                            }
                                            var Y = h.a.getNow(O),
                                                Z = R.uvwh,
                                                J = !!u.geometry.attributes.uv2,
                                                $ = R.form,
                                                ee = R.colorIndex;
                                            m.setLayer(Y, void 0, g, Z, J, !1, $, V, "color" === t ? ee : -1, 0), m.overlayOnColor = !0
                                        } else m.setLayer(SK.Textures.transparentBlack, [], g)
                                } else m.setLayer(SK.Textures.transparentBlack, [], g)
                            }
                    }
                }
            }, {
                key: "applyColor",
                value: function(t, n, r, o, a, i, s) {
                    var c = this.display.data,
                        l = c.paints,
                        u = c.shaders;
                    if (CK.Settings.shaderballs) {
                        var h = r,
                            p = o,
                            d = a,
                            m = i;
                        if (h in this.display.modded.paintMatch) {
                            var y = this.display.modded.paintMatch[h][i.manualName || i.id];
                            if (y) {
                                var v = b(y, 2),
                                    g = v[0],
                                    w = v[1],
                                    k = this.display.meshes[g];
                                if (k) {
                                    var S = k.part.namedColors[w] || k.part.colors[parseInt(w)];
                                    S && (d = S.id, p = S.mapping, h = g, m = S)
                                }
                            }
                        }
                        var _, C = this.tempReplaceShaders[-1] || f.a.shaders[1],
                            R = l[h] && l[h][d];
                        void 0 === R && void 0 !== m.link && void 0 === (R = l[h] && l[h][m.link]) && this.tempShaders && this.tempShaders[h] && !this.tempShaders[h][p] && s.colors[m.link] && (p = s.colors[m.link].mapping);
                        var O = (f.a.slots[r] || f.a.slots[s.slot]).scheme_group || "outfit";
                        (_ = this._tempOverrideConfig && this._tempOverrideConfig.paints[h] && this._tempOverrideConfig.paints[h][d] ? this._tempOverrideConfig.shaders[this._tempOverrideConfig.paints[h][d]] || console.error("Provided invalid override config with missing shader") : h in this.tempShaders && this.tempShaders[h][p] ? this.tempShaders[h][p] : this.tempReplaceShaders[R] ? this.tempReplaceShaders[R] : O in this.tempSchemes ? e.getSchemeShader(n.part.colors[d] || console.error(d, "not found", n.part.name) || n.part.colors[0], this.tempSchemes[O], O) : void 0 !== R && R in u ? u[R] : C) && _.gradient || (_ = console.error("Invalid paint", _) || C), n.bakeMaterials[t].setPatch(a, _[t])
                    } else {
                        var E = CK.Options.shaders[l[r] && l[r][o] || 0];
                        n.bakeMaterials[t].setPatch(a, E[t])
                    }
                }
            }, {
                key: "surfaceBaker",
                value: function() {
                    this.hasBaked("surface")
                }
            }, {
                key: "setupMaterials",
                value: function(t) {
                    var n = this.display.getMeshesInAtlas();
                    for (var r in n) {
                        var o = n[r],
                            a = this.display.atlas.getUV(r);
                        o.layers.enable(this.layer), e.setupBakeMaterial(r, o, t, a)
                    }
                    this.applyMaterials(t, n)
                }
            }, {
                key: "regularBaker",
                value: function(e) {
                    var t = this.display.getMeshesInAtlas();
                    if (this.hasBaked(e) && 0 !== Object.keys(t).length) {
                        for (var n in this.setPartColors(e, t), this.setDecalColors(e, t), e in this.atlasTargetKeys || (this.atlasTargetKeys[e] = {}), this.atlasTargetKeys[e]) n in t || delete this.atlasTargetKeys[e][n];
                        var r = new RK.Scene,
                            o = CK.renderManager.renderer,
                            a = this.getRGBATarget(e, !0);
                        o.setRenderTarget(a);
                        var i = o.getContext();
                        i.enable(i.SCISSOR_TEST);
                        var s = this.getSize(e),
                            c = !1,
                            l = {};
                        for (var u in t)
                            if (this.display.modded.needsBake[u]) {
                                var f = t[u],
                                    h = f.part,
                                    p = f.bakeMaterials[e],
                                    d = [p.getKey(), h.id, f.geometry.uuid || "", u, f.uuid || ""].join("_");
                                if (d !== this.atlasTargetKeys[e][u]) {
                                    f.prevMaterial = f.material, f.material = p, f.oldParent = f.parent, l[u] = f, this.atlasTargetKeys[e][u] = d;
                                    var m = f.material.getUniform("uvPosScl");
                                    i.scissor(Math.floor(m.x * s), Math.floor(m.y * s), Math.floor(m.z * s), Math.floor(m.z * s)), h.solidBake ? p.gradientsMap && p.gradientsMap.image && p.gradientsMap.image.data && p.gradientsMap.image.data.length >= 8 ? i.clearColor.apply(i, v([].concat(v(p.gradientsMap.image.data.slice(4, 7)), [255]).map((function(e) {
                                        return e / 255
                                    })))) : console.error("Invalid bakeMaterial graidentsMap for solidBake color") : (i.clearColor(0, 0, 0, 0), r.add(f), c = !0), i.clear(i.COLOR_BUFFER_BIT)
                                }
                            } else delete this.atlasTargetKeys[e][u];
                        for (var y in i.clearColor(0, 0, 0, 0), i.disable(i.SCISSOR_TEST), this.camera.layers.disable(7), this.camera.layers.disable(8), c && (CK.renderManager.renderer.autoClear = !1, CK.renderManager.renderer.render(r, this.camera, a, !1), this.dilate(e)), l) {
                            var b = l[y];
                            b.material = b.prevMaterial, b.oldParent.add(b), b.oldParent.updateMatrixWorld(!0)
                        }
                    }
                }
            }, {
                key: "getRGBATarget",
                value: function(e, t) {
                    var n = e + (t ? "Src" : "");
                    if (!this.targetsRGBA[n]) {
                        var r = this.getSize(e);
                        this.targetsRGBA[n] = new RK.WebGLRenderTarget(r, r, {
                            minFilter: RK.LinearFilter,
                            magFilter: RK.LinearFilter,
                            format: RK.RGBAFormat
                        })
                    }
                    return this.targetsRGBA[n]
                }
            }, {
                key: "dilate",
                value: function(e) {
                    var t = this.getRGBATarget(e),
                        n = this.getRGBATarget(e, !0);
                    this.dilator.render(CK.renderManager.renderer, t, n), this.storeImagesForForge(e)
                }
            }, {
                key: "storeImagesForForge",
                value: function(e) {}
            }, {
                key: "updateDisplayMaterials",
                value: function() {
                    var e = this.display.getMeshes();
                    for (var t in e)
                        if (!e[t].part.collision) {
                            var n = e[t].material,
                                o = this.display.atlas.packed[t] && this.display.modded.needsBake[t],
                                a = o ? this.display.atlas.getUV(t) : new RK.Vec4(1, 1, 1, 1),
                                i = this.display.sim;
                            this.bakeColor && o ? n.setColorAtlas(a, this.getRGBATarget("color").texture) : n.setColorAtlas(a, SK.Textures.makeTexture([i.diffuse.r, i.diffuse.g, i.diffuse.b, 1])), this.bakeNormals && o ? n.setNormalAtlas(a, this.getRGBATarget("normal").texture) : CK.Settings.allowBakedNormal && n.setNormalAtlas(a, SK.Textures.normal), this.bakePhysical && o ? n.setPhysicalAtlas(a, this.getRGBATarget("physical").texture) : r.a.allowBakedPhysical && n.setPhysicalAtlas(a, SK.Textures.makeTexture([i.roughness, i.metalness, i.opacity, i.sheen])), this.bakeEmissive && o ? n.setEmissiveAtlas(a, this.getRGBATarget("emissive").texture) : r.a.allowBakedEmissive && n.setEmissiveAtlas(a, SK.Textures.transparentBlack)
                        }
                }
            }, {
                key: "bakeNormals",
                get: function() {
                    return this.display.sim && this.display.sim.bakedNormals || this.display.modded.settings.hiRez && this.display.sim.bakeDepthHiRez
                }
            }, {
                key: "bakeColor",
                get: function() {
                    return this.display.sim && this.display.sim.bakedColor
                }
            }, {
                key: "bakePhysical",
                get: function() {
                    return r.a.allowBakedPhysical && this.display.sim && this.display.sim.bakedPhysical
                }
            }, {
                key: "bakeSurface",
                get: function() {
                    return this.display.sim && this.display.sim.bakedSurface || this.display.modded.settings.hiRez && this.display.sim.bakedSurfaceHiRez
                }
            }, {
                key: "bakeEmissive",
                get: function() {
                    return r.a.allowBakedEmissive && this.display.sim && this.display.sim.bakedEmissive
                }
            }]) && w(t.prototype, n), o && w(t, o), e
        }()
    },
    49: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return s
        }));
        var r = n(0),
            o = n(13),
            a = n(5);

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var s = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, s;
            return t = e, s = [{
                key: "initSettings",
                value: function() {
                    if (this.permissions = {}, !r.a.forge && (this.lastAccessDate = "LAST_ACCESS" in window && "" !== LAST_ACCESS ? parseInt(LAST_ACCESS) : void 0, window.USER_PERMISSIONS && "" !== window.USER_PERMISSIONS && window.USER_PERMISSIONS.length))
                        for (var e in window.USER_PERMISSIONS) this.permissions[window.USER_PERMISSIONS[e]] = !0
                }
            }, {
                key: "init",
                value: function() {
                    r.a.forge
                }
            }, {
                key: "logOut",
                value: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                    (CK.character.savedChanges || e || "/" !== window.location.pathname || confirm("Unsaved changes will be lost. Are you sure you want to logout?")) && (CK.uncacheCharacter(), window.loggingOut = !0, window.location.href = "/accounts/logout/")
                }
            }, {
                key: "logOutSilent",
                value: function() {
                    window.location.href = "/accounts/logout/"
                }
            }, {
                key: "isLoggedIn",
                value: function() {
                    return this.loggedIn
                }
            }, {
                key: "isBacker",
                value: function() {
                    return !!this.permissions.backer
                }
            }, {
                key: "loginSuccess",
                value: function(e, t, n, r) {
                    Reporting.successfullyLoggedIn(), window.LOGGED_IN = e, window.USER_PERMISSIONS = r || [], window.LAST_ACCESS = n, window.USER_EMAIL = t, this.initSettings(), a.a.refreshWithUserCredentials(), CK.saves.loadAll(), this.actionOnLogin && (this.actionOnLogin(), this.actionOnLogin = void 0), o.a.emit("finishedLoggingIn")
                }
            }, {
                key: "loggedIn",
                get: function() {
                    return "LOGGED_IN" in window && window.LOGGED_IN && "True" === window.LOGGED_IN || r.a.forge
                }
            }], (n = null) && i(t.prototype, n), s && i(t, s), e
        }();
        s.initSettings()
    },
    5: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return T
        }));
        var r = n(0),
            o = n(38),
            a = n(19);

        function i(e) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function s(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function c(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function l(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function u(e, t) {
            return !t || "object" !== i(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function f(e) {
            return (f = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function h(e, t) {
            return (h = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var p = function(e) {
                function t(e) {
                    var n, o = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "";
                    if (c(this, t), (n = u(this, f(t).call(this, e))).normalFilename = e.normalFilename || "", n.displayFilename = e.displayFilename || "", n.type = e.type || "", n.normalMap = !!e.normalMap, n.blendNormals = !!e.blendNormals, n.useMesh = !!e.mesh, n.isPart = !0, n.namedColors = {}, n.solidBake = n.keywords.solidColor || n.keywords.solidBake || "text" === n.type, r.a.color) {
                        n.solidBake ? (n.idealTextureSize = 32, n.bakedTextureSize = 32, n.worldUVSize = 1, n.colors = [{
                            surface: {
                                response_options: null,
                                id: 1,
                                name: "plastic"
                            },
                            count: 0
                        }]) : e.patches ? (e.colors && (n.colors = n.parseColors(e.colors), n.colors.length !== e.patches.length && delete n.colors), n.colors || (n.colors = e.patches.map((function(e) {
                            var t = e.s || 3;
                            return 0 === parseInt(t) && "HeroForge" === r.a.projectName && (t = 9), {
                                surface: CK.Options.surfaces[t] || CK.Options.surfaces[1]
                            }
                        })))) : n.colors = [];
                        var a = {};
                        n.colors.map((function(e) {
                            var t = e.surface;
                            e.count = a[t.id] || 0, t.id in a ? a[t.id] += 1 : a[t.id] = 1
                        }));
                        var i = [];
                        n.colors.length > 1 && i.push("mask_color");
                        for (var s = 0; s < n.colors.length; s++) {
                            var l = n.colors[s];
                            i.push(l.surface.name + (l.count || "") + (0 === s ? "_base" : "_baseGradient"))
                        }
                        n.colors.map((function(e, t) {
                            e.mapping = e.surface.name + (e.count || ""), e.id = t
                        })), n.mappings = n.colors.map((function(e) {
                            return e.mapping
                        })), n.surfaces = n.colors.map((function(e) {
                            return e.surface.name
                        })), n.colors.length > 26 && (console.error("Too many patches on", n.slot + "_" + n.name, n.colors.length), n.colors.slice(0, 26)), e.patches && e.patches.map((function(e, t) {
                            e.name && (n.colors[t].manualName = e.name, n.namedColors[e.name] = n.colors[t]), e.label && (n.colors[t].label = e.label), void 0 !== e.link && (n.colors[t].link = e.link)
                        })), n.pattern = e.pattern ? e.pattern.split(",").map((function(e) {
                            return parseInt(e)
                        })) : []
                    } else n.colors = [];
                    if (!n.solidBake && void 0 !== e.area) {
                        n.bounds = (new RK.Box3).setFromArray(e.bounds);
                        var h = Math.min(window.screen.height, 1080),
                            p = h / r.a.screenHeightInWorldUnits;
                        n.worldUVSize = Math.sqrt(e.area / e.uvArea), n.idealTextureSize = parseInt(n.worldUVSize * p), n.bakedTextureSize = e.bakeSize
                    }
                    n.rivets = e.rivets || [], n.nameAffix = o;
                    var d = T.slots[n.slot];
                    return n.thumbSize = [n.thumb_x || d.thumb_x || 80, n.thumb_y || d.thumb_y || 80], n.collision = n.slot.endsWith("Collision"), n
                }
                var n, o, i;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && h(e, t)
                }(t, e), n = t, (o = [{
                    key: "cloneFromOriginal",
                    value: function(e) {
                        return new t(this._originalData, e)
                    }
                }, {
                    key: "getRenderIDMapping",
                    value: function(e) {
                        return this.mappings[e] || console.error("Out of range mapping", e, "part only has", this.mappings) || this.mappings[0]
                    }
                }, {
                    key: "getMaskPath",
                    value: function(e, t) {
                        return this.bakedTextureSize || console.error("Part", this.name, " has missing texture info. Try re-baking color."), (!this._usedTextureSize || t > this._usedTextureSize) && (this._usedTextureSize = t), a.a.getTexture(this, e, "mask", this._usedTextureSize)
                    }
                }, {
                    key: "getNormalPath",
                    value: function(e, t) {
                        return this.bakedTextureSize || console.error("Part", this.name, " has missing texture info. Try re-baking color."), (!this._usedTextureSize || t > this._usedTextureSize) && (this._usedTextureSize = t), a.a.getTexture(this, e, "nrml", this._usedTextureSize)
                    }
                }, {
                    key: "getAAIDPath",
                    value: function(e, t) {
                        return this.hasAAID || console.error("Requesting AAID for part that does not have it"), this.bakedTextureSize || console.error("Part", this.name, " has missing texture info. Try re-baking color."), a.a.getTexture(this, e, "aaid", t)
                    }
                }, {
                    key: "getAvailableDecals",
                    value: function() {
                        var e = this,
                            t = (T.decalsBySlot[this.slot] || []).filter((function(t) {
                                return !t.subPart || t.baseName === e.name
                            }));
                        return this.settings.decalSources && this.settings.decalSources.map((function(e) {
                            var n = s(e, 2),
                                r = n[0],
                                o = n[1];
                            t = "*" === r ? t.concat(T.decalsBySlot[o] || []) : t.concat((T.decalsBySlot[r] || []).filter((function(e) {
                                return e.subPart && e.baseName === o
                            })))
                        })), this.pattern && this.pattern.length && (t = t.concat(T.decalsBySlot.pattern)), t
                    }
                }, {
                    key: "hasAAID",
                    get: function() {
                        return this.colors.length > 1
                    }
                }]) && l(n.prototype, o), i && l(n, i), t
            }(o.a),
            d = n(56),
            m = n(13),
            y = n(21),
            v = n(49),
            b = n(65),
            g = n(64);

        function w(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        var k = ["addParts", "addPartsPermanently", "backup", "camera", "disableMenu", "disableSlot", "form", "hide", "disableClip", "disableParts", "excludePoses", "hideSlots", "hideSliders", "ik", "includePoses", "namedPoses", "slide", "sliderLimitMax", "sliderLimitMin", "snap", "vanishIncompatible", "paintMatch", "removePermanent", "removeSlots"],
            S = {
                patches: !0
            };

        function _(e, t, n) {
            var r = (e.standard || {}).inheritSettings,
                o = w(r && r.length ? function(e, t) {
                    if (e.split(":").length > 1) return e.split(":").map((function(e) {
                        return e.trim()
                    }));
                    var n = e.split("_");
                    if (1 === n.length) return [t, n[0]];
                    if (2 === n.length) return n;
                    console.error("Invalid target for mod in", t, e)
                }(r, t) : [t, "defaultSettings"], 2),
                a = o[0],
                i = o[1];
            if (a in n && (i in n[a] || (i = "defaultSettings", a = t), i in n[a])) {
                var s = n[a][i];
                for (var c in s)
                    if (!s[c].globalCondition)
                        if (c in e)
                            for (var l in s[c]) l in e[c] || S[l] || (e[c][l] = s[c][l]);
                        else e[c] = s[c];
                        "defaultSettings" !== i && _(s, a, n)
            }
        }

        function C(e, t) {
            for (var n in t) {
                var r = t[n],
                    o = r.slot,
                    a = r.name;
                r.mods = {};
                var i = o.endsWith("L") || o.endsWith("D") ? o.slice(0, -1) + "R" : o;
                if (i in e && a in e[i]) {
                    var s = e[i][a];
                    for (var c in r.settings = s.standard || {}, s) {
                        var l = s[c];
                        l.ignoreMod || R(l, r.mods, o)
                    }
                }
            }
        }

        function R(e, t, n) {
            var r = function(e, t) {
                for (var n = [], r = 0; r < 4; r++) e["condition" + r] && n.push({
                    condition: e["condition" + r],
                    condition_targets: e["condition".concat(r, "Target")] || [t],
                    condition_values: e["condition".concat(r, "Values")]
                });
                e.isInSlotCondition && n.push({
                    condition: "inslot",
                    condition_targets: e.isInSlotCondition
                });
                return n
            }(e, n);
            k.map((function(o) {
                if (o in e) {
                    o in t || (t[o] = []);
                    var a = Array.isArray(e[o]) ? e[o] : [e[o]],
                        i = e.userMessage || "",
                        s = e.source,
                        c = e.modDescription;
                    t[o].push({
                        conditions: r,
                        effects: a,
                        slot: n,
                        message: i,
                        source: s,
                        modName: o,
                        modDescription: c
                    })
                }
            }))
        }

        function O(e) {
            var t = {};
            for (var n in e) {
                var r = e[n].defaultSettings;
                if (r)
                    for (var o in r) {
                        var a = r[o];
                        "standard" !== o && a.globalCondition && R(a, t, n)
                    }
            }
            return t
        }

        function E(e) {
            for (var t in e)
                for (var n in e[t]) {
                    var r = e[t][n];
                    for (var o in r)
                        if (r[o].mirrorToL) {
                            var a = o.endsWith("R") ? o.slice(0, -1) + "L" : o + "L";
                            if (!(a in r)) {
                                var i = r[o],
                                    s = {};
                                for (var c in i) s[c] = i[c], s[c] && (Array.isArray(s[c]) ? s[c] = s[c].map((function(e) {
                                    return Array.isArray(e) ? e.map((function(e) {
                                        return "string" == typeof e ? e.endsWith("R") ? e.slice(0, -1) + "L" : e.endsWith("L") ? e.slice(0, -1) + "R" : e : e
                                    })) : "string" == typeof e ? e.endsWith("R") ? e.slice(0, -1) + "L" : e.endsWith("L") ? e.slice(0, -1) + "R" : e : e
                                })) : "string" == typeof s[c] && (s[c].endsWith("R") ? s[c] = s[c].slice(0, -1) + "L" : s[c].endsWith("L") && (s[c] = s[c].slice(0, -1) + "R")));
                                r[a] = s
                            }
                        }
                }
        }

        function P(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function x(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function j(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var T = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, i;
            return t = e, i = [{
                key: "init",
                value: function(e, t) {
                    var n = this;
                    this.loaded = !1, this.filtered = {};
                    var o = r.a.projectLabel + "_options";
                    delete localStorage[o];
                    var a = [r.a.dataPath, "/static/options_dynamic.json"],
                        i = ["json", "json"];
                    r.a.forge || (a.push("/static/options_partner.json"), i.push("json")), y.a.getResources(a, i).then((function(r) {
                        return n.tryProcessData(r, e, t)
                    }))
                }
            }, {
                key: "tryProcessData",
                value: function(e, t, n) {
                    try {
                        this.doProcessData(e, t, n)
                    } catch (e) {
                        Reporting.exception("Processing Options Data", e), n()
                    }
                }
            }, {
                key: "doProcessData",
                value: function(t, n, r) {
                    var o = x(t, 5),
                        a = o[0],
                        i = o[1],
                        s = o[2];
                    if (o[3], o[4], !a) return r("Could not load options static");
                    if (!i) return r("Could not load options dynamic");
                    var c = Object.assign(a, i || {}, s || {});
                    for (var l in c.productionBuild ? console.log("Options Source: Production") : c.qaBuild && console.log("Options Source: Local"), c.parts) c.parts[l].mods = {};
                    for (var u in c.slots) c.slots[u].mods = {};
                    c.settings = c.settings || {}, c.meshInfo = c.meshInfo || {}, e.processRawSettings(c || console.error("Settings not included in json") || {
                        settings: {},
                        meshInfo: {}
                    }, c), e.processRawData(c), this.loaded = !0, m.a.emit("optionsLoaded"), n()
                }
            }, {
                key: "processRawData",
                value: function(t) {
                    var n = this;
                    for (var o in v.a.permissions) r.a.addonKeywords[o] = ["default"];
                    for (var a in e.configs = t.configs, this.addFiltersToConfigs(), this.getConfigsByName(), e.surfaces = {}, e.surfacesByName = {}, t.surfaces) e.surfacesByName[t.surfaces[a].name] = t.surfaces[a], e.surfaces[t.surfaces[a].id] = t.surfaces[a];
                    if (this.processShaders(t.shaders), r.a.debug && console.info("Raw Options Data:", t), e.slots = t.slots, e.slots.mods) {
                        var i = function(t) {
                            t in e.globalMods || (e.globalMods[t] = []), e.slots.mods.mods[t].map((function(n) {
                                return e.globalMods[t].push(n)
                            }))
                        };
                        for (var s in e.slots.mods.mods) i(s)
                    }
                    for (var c in e.slotsById = e.processSlotsById(t.slots), e.slotsByKeyword = e.processSlotsByKeyword(t.slots), e.parts = this.processParts(t.parts), e.packs = t.packs || [], e.defaultIcons = t.default_icons || [], e._sortDefaultIcons(), e.applyClearPartsToConfigs(), e.elements = t.elements, t.partner = t.partner || {}, t.products) {
                        var l = t.products[c],
                            u = l.visibility;
                        u || (u = "default"), "extra" !== u && "default" !== u && (u = "hidden"), l.visibility = u
                    }
                    e.products = t.products, this.applyPartnerData(t), e.products.map((function(e) {
                        e.display_name && (e.display_name_bitless = e.display_name.startsWith(e.tag) ? e.display_name.substring(e.tag.length) : e.display_name)
                    })), this.sortItems(e.products), e._sortProductsByName(), e._sortProductsBySlug(), e._sortProductsByPrice(), e.materials = t.materials || [], this.sortItems(e.materials), e._sortMaterials();
                    var f = [];
                    for (var h in t.fonts || [])(r.a.forge || t.fonts[h].active) && f.push(t.fonts[h]);
                    for (var p in e.fonts = f, this.sortItems(e.fonts), e._sortFonts(), e.giftCards = t.giftcards, e.paint = t.paint, e._addonKeywords(e.parts), this.configs) {
                        var d = e.configs[p];
                        d.map((function(e) {
                            if (e.pose_id) {
                                e.config_type.endsWith("pose") || console.error("Config has a pose ID but is not a pose config_type", e);
                                var t = "pose" === e.config_type ? "main" : e.config_type.split("_")[0];
                                e.poses = P({}, t, e.pose_id)
                            }
                            delete e.pose, delete e.displayPose
                        })), e._addonKeywords(d)
                    }
                    e._sortPaintByKeyword(), e.partsBySlot = this._getBySlot(e.parts, !1), e._sortByKeywords(), this.applyDateAndTags(), this.collectSelectableParts(), this.getSlotTargets(), e.decals = this.processDecals(t.decals), e.decalsBySlot = this._getBySlot(e.decals, !0), e.posesByID = this.getPosesByID(), e.posesByKeyword = this.getPosesByKeyword();
                    var m = this.partsBySlot.itemD;
                    if (m && m.map((function(e) {
                            var t = n.getPartBySlotAndName(e.unsidedSlot + "R", e.name);
                            t && ["mappings", "surfaces", "decal", "colors", "bounds", "idealTextureSize", "bakedTextureSize"].map((function(n) {
                                e[n] = t[n]
                            }))
                        })), CK.Settings.color)
                        for (var y in e.configsByName)
                            if (y.endsWith("_scheme")) {
                                var g = e.configsByName[y];
                                for (var w in g) {
                                    var k = g[w].colorScheme;
                                    for (var S in k) k[S] = k[S].map((function(t) {
                                        return isNaN(t) ? new b.a(t, !0) : e.shaders[t] || console.error("Preset shader", t, "no longer exists!!")
                                    }))
                                }
                            }
                    e.finished = !0, this.partsBySlotAndGroup = {};
                    var _ = function(e) {
                        n.partsBySlot[e].map((function(t) {
                            if (t.settings) {
                                var r = t.settings.slotGroup;
                                r && (e in n.partsBySlotAndGroup || (n.partsBySlotAndGroup[e] = {}), r in n.partsBySlotAndGroup[e] || (n.partsBySlotAndGroup[e][r] = []), n.partsBySlotAndGroup[e][r].push(t))
                            }
                        }))
                    };
                    for (var C in this.partsBySlot) _(C);
                    var R = function(e) {
                        var t = n.parts[e];
                        t.attachSlots = {}, t.rivets.map((function(e) {
                            if (e.source && e.parts) {
                                var r = {};
                                e.parts.map((function(t) {
                                    var o = n.parts[t];
                                    if (o) {
                                        o.hide || o.keywords.unselectable || !o.released || (r[o.id] = o);
                                        var a = o.settings.slotGroup;
                                        if (e.label || (e.label = o.settings.slotGroupLabel), a && e.source in n.partsBySlotAndGroup) {
                                            var i = n.partsBySlotAndGroup[e.source][a];
                                            i && i.map((function(e) {
                                                e.hide || e.keywords.unselectable || !e.released || (r[e.id] = e)
                                            }))
                                        }
                                    }
                                })), Object.keys(r).length && (e.availableParts = r, t.attachSlots[e.name] = e)
                            }
                        }))
                    };
                    for (var O in this.parts) R(O)
                }
            }, {
                key: "applyPartnerData",
                value: function(t) {
                    e.partner = void 0;
                    var n = !!t.partner.products,
                        r = !!t.partner.label;
                    for (var o in r && (e.partner = {}, e.partner.static_path = t.partner.static_path, e.partner.label = t.partner.label, e.partner.type = t.partner.type, e.partner.address = t.partner.address, e.partner.offer_codes = t.partner.offer_codes), e.products) {
                        var a = e.products[o];
                        if (n && a.sku in t.partner.products) {
                            var i = t.partner.products[a.sku];
                            a.old_price = a.old_price ? Math.max(a.old_price, a.price) : a.price, a.price = a.price ? Math.min(a.price, i.price) : i.price, a.old_price == a.price && (a.old_price = null), a.currency = i.currency
                        }
                    }
                }
            }, {
                key: "processRawSettings",
                value: function(e, t) {
                    if (CK.Settings.content = e.contentCutoff || console.error("No content inclusion time specified", e) || 9999999999, CK.URL.getVar("timetravel") && (CK.User.permissions.test || CK.User.permissions.timetravel)) {
                        var n = CK.URL.getVar("timetravel") + "T00:00:01",
                            r = new Date(n);
                        console.log("timetravel", n, r), CK.serverTime = r.getTime() / 1e3, CK.timeTraveler = !0
                    } else CK.Settings.content;
                    var o = t.parts,
                        a = e.settings,
                        i = e.meshInfo;
                    for (var s in a = a || {}, i = i || {}, this.globalMods = function() {
                            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                                t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                            for (var n in E(e), t) {
                                var r = t[n],
                                    o = r.slot,
                                    a = r.name;
                                o in e || (e[o] = {}), a in e[o] || (e[o][a] = {}), _(e[o][a], o, e)
                            }
                            return C(e, t), O(e)
                        }(a, o), o) {
                        var c = o[s],
                            l = c.slot,
                            u = c.name;
                        l in i && u in i[l] && Object.assign(c, i[l][u])
                    }
                }
            }, {
                key: "getPosesByID",
                value: function() {
                    var e = this.configsByName.pose;
                    if (!e) return {};
                    var t = {};
                    for (var n in e) e[n].poses ? t[e[n].poses.main] = e[n] : console.error("poses attribute not in pose", n);
                    return t
                }
            }, {
                key: "getPosesByKeyword",
                value: function() {
                    var e = this.configsByName.pose;
                    if (!e) return {};
                    var t = {};
                    for (var n in e) {
                        var r = e[n];
                        for (var o in r.keywords) o in t || (t[o] = []), t[o].push(r)
                    }
                    return t
                }
            }, {
                key: "getScheme",
                value: function(t, n) {
                    var r = (t = (t || "outfit") + "_scheme") in e.configsByName && e.configsByName[t][n];
                    if (r) return r.colorScheme;
                    console.error("Could not find scheme", t, n)
                }
            }, {
                key: "processShaders",
                value: function(t) {
                    if (this.shaders = {}, e.shadersByTexture = {}, t.map((function(e) {
                            for (var t in e) null === e[t] && delete e[t]
                        })), e.responses = {}, CK.Settings.color) {
                        for (var n in t.map((function(n) {
                                var r = n.inherit,
                                    o = r && (t.find((function(e) {
                                        return parseInt(e.id) === parseInt(r)
                                    })) || console.error("Inherited shader", r, "not found")) || {};
                                n.response_name && (e.responses[n.response_name] = n.id);
                                var a = b.a.fromDB(Object.assign({}, o, n));
                                e.shaders[n.id] = a, r || delete e.shaders[n.id].inherit;
                                var i = a.surface;
                                e.shadersByTexture[i] || (e.shadersByTexture[i] = []), e.shadersByTexture[i].push(a)
                            })), e.responses) e.responses[n] = e.shaders[e.responses[n]];
                        for (var r in e.shadersByTexture) e.shadersByTexture[r].map((function(e, t) {
                            e.displayOrder || (e.displayOrder = t)
                        }));
                        this.sortShaders()
                    }
                }
            }, {
                key: "sortShaders",
                value: function() {
                    for (var t in e.shadersByTexture) e.shadersByTexture[t] = e.shadersByTexture[t].sort((function(e, t) {
                        return e.displayOrder - t.displayOrder
                    }))
                }
            }, {
                key: "getSchemePaint",
                value: function(e, t, n) {
                    var r = this.getScheme(e, t);
                    return r ? r[n] || r[n.slice(0, -1)] || r[n.slice(0, -2)] : n in this.shadersByTexture ? this.shadersByTexture[n][0].presetID : n.slice(0, -1) in this.shadersByTexture ? this.shadersByTexture[n.slice(0, -1)][0].presetID : console.warn("Could not find", n, "in scheme", e, t) || 1
                }
            }, {
                key: "applyClearPartsToConfigs",
                value: function() {
                    var e = function(e) {
                        var t = CK.Options.slots[e].clear_group;
                        t && t in CK.Options.configs && CK.Options.configs[t].map((function(t) {
                            t.parts[e] || (t.parts[e] = void 0)
                        }))
                    };
                    for (var t in CK.Options.slots) e(t)
                }
            }, {
                key: "getConfigsByName",
                value: function() {
                    for (var t in this.configsByName = {}, e.configs) {
                        this.configsByName[t] = {};
                        var n = e.configs[t];
                        for (var r in n) this.configsByName[t][n[r].name] = n[r]
                    }
                }
            }, {
                key: "refreshWithUserCredentials",
                value: function() {
                    this.applyDateAndTags(), this.collectSelectableParts()
                }
            }, {
                key: "applyDateAndTags",
                value: function() {
                    for (var t in this.configs) {
                        var n = e.configs[t];
                        for (var r in n) o.a.dateAndTag(n[r])
                    }
                    for (var a in this.parts) o.a.dateAndTag(this.parts[a], this.parts[a]._originalData)
                }
            }, {
                key: "collectSelectableParts",
                value: function() {
                    var t = [];
                    for (var n in e.parts) {
                        var r = e.parts[n];
                        r.name && "CLEAR" !== r.name && !r.name.includes("_") && t.push(r)
                    }
                    this._usablePartsBySlot = this._getBySlot(t, !0)
                }
            }, {
                key: "isExcludedFromMenus",
                value: function(e, t) {
                    if (e.hide || !v.a.isBacker() && e.keywords.backer || e.keywords.unselectable || !e.hasTarget(CK.data.parts, t)) return !0;
                    if (e.mods.exclude)
                        for (var n in e.mods.exclude)
                            if (CK.data._mods._conditionMet(e.mods.exclude[n], e)) return !0;
                    return !1
                }
            }, {
                key: "getSelectableParts",
                value: function(e) {
                    var t = this;
                    if (CK.Options.slots[e]) {
                        var n = CK.Options.slots[e].source || e;
                        return (this._usablePartsBySlot[n] || []).filter((function(n) {
                            return !t.isExcludedFromMenus(n, e)
                        }))
                    }
                    console.error('Slot "'.concat(e, '" has no selectable parts'))
                }
            }, {
                key: "processSlotsById",
                value: function(e) {
                    var t = {};
                    for (var n in e) {
                        var r = e[n];
                        t[r.slot_id] = r
                    }
                    return t
                }
            }, {
                key: "processSlotsByKeyword",
                value: function(e) {
                    var t = {};
                    for (var n in e) {
                        var r = e[n];
                        for (var o in r.keywords) o in t || (t[o] = []), t[o].push(r)
                    }
                    return t
                }
            }, {
                key: "getSlotTargets",
                value: function() {
                    for (var t in this.slotsById) {
                        var n = this.slotsById[t];
                        if (n.target_slot && !n.target_parts && (n.targetSlots = n.target_slot.split(",")), n.target_slot && n.target_parts) {
                            var r = e.slots[n.target_slot];
                            void 0 === r && console.error("Could not find target slot", n.target_slot, " for ", this);
                            var o = n.target_parts.split(",");
                            for (var a in n.targets = {}, o) {
                                var i = o[a],
                                    s = parseInt(i);
                                if (isNaN(s)) {
                                    var c = r.name in e.partsByKey ? e.partsByKey[r.name][i] : void 0;
                                    if (void 0 === c) console.error("No target parts found with keyword", i);
                                    else
                                        for (var l in c) n.targets[c[l].id] = c[l]
                                } else n.targets[s] = e.parts[s]
                            }
                            0 === Object.keys(n.targets).length && (n.targets = void 0)
                        }
                    }
                }
            }, {
                key: "addFiltersToConfigs",
                value: function() {
                    var e = this,
                        t = function(t) {
                            e.configs[t].map((function(e) {
                                e.searchTerms = o.a.prepTerms([e.search_terms, e.config_desc, e.desc, e.name]), e.match = function(t) {
                                    return !!t.length && (1 === t.length && t[0].length <= 3 ? !!e.searchTerms.find((function(e) {
                                        return e.startsWith(t[0])
                                    })) : !t.find((function(t) {
                                        return !e.searchTerms.find((function(e) {
                                            return e.includes(t)
                                        }))
                                    })))
                                }, e.filter = function(t) {
                                    if (!t.length) return -9999;
                                    var n = 0;
                                    return t.map((function(t) {
                                        var r;
                                        n += e.searchTerms.reduce((function(e, n) {
                                            return (r = Object(g.a)(n, t)) < e ? r : e
                                        }), 9999)
                                    })), n
                                }, e.terms = {}, e.searchTerms.map((function(t) {
                                    return e.terms[t] = !0
                                })), e.slotR = "config" + t
                            }))
                        };
                    for (var n in this.configs) t(n)
                }
            }, {
                key: "processDecals",
                value: function(e) {
                    var t = {};
                    for (var n in e) t[n] = new d.a(e[n]);
                    return t
                }
            }, {
                key: "processParts",
                value: function(e) {
                    var t = {};
                    for (var n in e) {
                        var r = e[n];
                        t[r.slot] = t[r.slot] || {}, t[r.slot][r.name] = r
                    }
                    var o = function(n) {
                        var r = e[n],
                            o = r.normalFilename;
                        if (o && o.length) {
                            var a = t[r.slot][r.normalFilename];
                            a ? ["area", "uvArea", "bakeSize", "bounds"].map((function(e) {
                                r[e] = a[e]
                            })) : console.error("could not find normal map texture source part", r.normalFilename, "in slot", r.slot)
                        }
                    };
                    for (var a in e) o(a);
                    var i = {};
                    for (var s in e) {
                        var c = e[s],
                            l = c;
                        if (c.link && c.slot.endsWith("L"))
                            for (var u in l = Object.assign({}, e[c.link]), {
                                    id: !0,
                                    link: !0,
                                    slot: !0
                                }) l[u] = c[u];
                        i[s] = new p(l)
                    }
                    return i
                }
            }, {
                key: "_addonKeywords",
                value: function(e) {
                    for (var t in e) {
                        var n = e[t];
                        if ("keywords" in n)
                            for (var o in n.keywords)
                                if (o in r.a.addonKeywords)
                                    for (var a in r.a.addonKeywords[o]) {
                                        var i = r.a.addonKeywords[o][a];
                                        i in n.keywords || (n.keywords[i] = {})
                                    }
                    }
                }
            }, {
                key: "_getBySlot",
                value: function(e) {
                    var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1],
                        n = {};
                    for (var r in e) e[r].slot in n || (n[e[r].slot] = []), n[e[r].slot].push(e[r]);
                    if (t)
                        for (var o in n) this.sortItems(n[o]);
                    return n
                }
            }, {
                key: "sortItems",
                value: function(e) {
                    e.sort((function(e, t) {
                        return (e.display_order || e.id) < (t.display_order || t.id) ? -1 : 1
                    }))
                }
            }, {
                key: "_sortProductsByName",
                value: function() {
                    for (var e in this.productsByName = {}, this.products) this.productsByName[this.products[e].product_name] = this.products[e]
                }
            }, {
                key: "_sortProductsBySlug",
                value: function() {
                    for (var e in this.productsBySlug = {}, this.products) this.productsBySlug[this.products[e].slug] = this.products[e]
                }
            }, {
                key: "_sortProductsByPrice",
                value: function() {
                    this.productsByPrice = this.products.filter((function(e) {
                        return e.price
                    })).sort((function(e, t) {
                        return e.price < t.price ? -1 : 1
                    }))
                }
            }, {
                key: "_sortMaterials",
                value: function() {
                    for (var e in this.materialsByGroup = {}, this.materialsByName = {}, this.materials) {
                        var t = this.materials[e],
                            n = t.group;
                        if (n && (void 0 === this.materialsByGroup[n] && (this.materialsByGroup[n] = []), this.materialsByGroup[n].push(t)), this.materialsByName[t.name] = t, t.color) {
                            var r = t.color.split(",");
                            t.color = [parseInt(r[0]), parseInt(r[1]), parseInt(r[2]), parseInt(r[3] || 255)]
                        } else console.log("No material color found for", t.name)
                    }
                }
            }, {
                key: "_sortFonts",
                value: function() {
                    for (var e in this.fontsByGroup = {}, this.standardFonts = [], this.standardFontsByGroup = {}, this.fonts) {
                        var t = this.fonts[e],
                            n = (t.group || t.label).toLowerCase();
                        t.group = n, t.style = t.style || "standard", t.path = a.a.getFont(t), t.label = t.label || n, t.usages = t.usages ? t.usages.split(",") : ["standard"], n in this.fontsByGroup || (this.fontsByGroup[n] = []), this.fontsByGroup[n].push(t), "standard" === t.style && (this.standardFontsByGroup[n] = t, this.standardFonts.push(t)), t.backing && (t.backPath = a.a.getFontBack(t))
                    }
                }
            }, {
                key: "getFont",
                value: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "basic",
                        t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "standard",
                        n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "standard";
                    "tinyengraved" === t && (n = "engraving");
                    var r = this.fontsByGroup[e];
                    for (var o in r)
                        if (r[o].style === t && r[o].usages.indexOf(n) > -1) return r[o];
                    for (var a in "tinyengraved" === t && (t = "engraved"), r)
                        if (r[a].style === t && r[a].usages.indexOf(n) > -1) return r[a];
                    var i = this.standardFontsByGroup[e];
                    if (i || console.error("Could not find font", e, t, n), i.usages.indexOf(n) > -1) return i
                }
            }, {
                key: "getAvailableFonts",
                value: function() {
                    return e.standardFonts
                }
            }, {
                key: "_sortPaintByKeyword",
                value: function() {
                    for (var t in e.paintsBykeyword = {}, e.paint) {
                        var n = e.paint[t];
                        for (var r in n.id = t, n.keywords) r in e.paintsBykeyword || (e.paintsBykeyword[r] = []), e.paintsBykeyword[r].push(n)
                    }
                }
            }, {
                key: "_sortDefaultIcons",
                value: function() {
                    for (var e in this.defaultIconsByGroup = {}, this.defaultIcons) {
                        var t = this.defaultIcons[e].search_term;
                        t in this.defaultIconsByGroup || (this.defaultIconsByGroup[t] = []), this.defaultIconsByGroup[t].push(this.defaultIcons[e])
                    }
                }
            }, {
                key: "getArchetype",
                value: function(t) {
                    if (e.configs.archetype && t in e.configs.archetype) return e.configs.archetype[t];
                    r.a.debug && console.warn("Archetype " + t + " not found!")
                }
            }, {
                key: "getPart",
                value: function(t) {
                    if (t in e.parts) return e.parts[t];
                    Reporting.exception("Failed to find part id " + t)
                }
            }, {
                key: "getSlot",
                value: function(t) {
                    var n = e.slots[t];
                    return void 0 === n && console.error(t + " not found in slots!"), n
                }
            }, {
                key: "getDecal",
                value: function(t) {
                    var n = e.decals[t];
                    return void 0 === n && console.error("Decal " + t + " not found!"), n
                }
            }, {
                key: "getSlotFromId",
                value: function(t) {
                    if (t in e.parts) return e.parts[t].slot;
                    Reporting.exception("Failed to find slot for part id " + t)
                }
            }, {
                key: "getPartBySlotAndName",
                value: function(e, t) {
                    if (e in this.partsBySlot) {
                        var n = this.partsBySlot[e];
                        for (var r in n) {
                            var o = n[r];
                            if (o.name == t) return o
                        }
                    }
                }
            }, {
                key: "getMirroredDecal",
                value: function(e) {
                    if (e in this.decals) {
                        var t = this.decals[e],
                            n = t.slot;
                        if (t.slot.endsWith("R")) n = n.substring(0, n.length - 1) + "L";
                        else {
                            if (!t.slot.endsWith("L")) return t;
                            n = n.substring(0, n.length - 1) + "R"
                        }
                        return this.getDecalBySlotAndName(n, t.name)
                    }
                }
            }, {
                key: "getDecalBySlotAndName",
                value: function(e, t) {
                    return this._getBySlotAndName(e, t, this.decalsBySlot)
                }
            }, {
                key: "getRawPartBySlotAndName",
                value: function(e, t) {
                    return this._getBySlotAndName(e, t, this.partsBySlot)
                }
            }, {
                key: "_getBySlotAndName",
                value: function(e, t, n) {
                    if (e in n) {
                        var r = n[e];
                        for (var o in r) {
                            var a = r[o];
                            if (a.name == t) return a
                        }
                    }
                }
            }, {
                key: "getGiftCards",
                value: function() {
                    return e.giftCards
                }
            }, {
                key: "_sortByKeywords",
                value: function() {
                    for (var e in this.configsByKey = {}, this.configs) this.configsByKey[e] = this._groupByKeyword(this.configs[e]);
                    for (var t in this.partsByKey = {}, this.partsBySlot) this.partsByKey[t] = this._groupByKeyword(this.partsBySlot[t])
                }
            }, {
                key: "_groupByKeyword",
                value: function(e) {
                    var t, n = {};
                    for (var r in e)
                        if ("keywords" in (t = e[r]))
                            for (var o in t.keywords) o in n || (n[o] = []), n[o].push(t);
                    return n
                }
            }, {
                key: "partExistsWithAllKeywords",
                value: function(e, t) {
                    var n = this.partsByKey[e],
                        r = n[t[0]];
                    for (var o in r) {
                        for (var a = r[o], i = !0, s = 1; s < t.length; s++)
                            if (!(t[s] in n) || -1 == n[t[s]].indexOf(a)) {
                                i = !1;
                                break
                            }
                        if (i) return !0
                    }
                    return !1
                }
            }, {
                key: "match",
                value: function(e, t) {
                    for (var n in e)
                        if (e[n] in t) return !0;
                    return !1
                }
            }, {
                key: "flipSlot",
                value: function(e) {
                    return e.endsWith("R") ? e.slice(0, -1) + "L" : e.endsWith("L") ? e.slice(0, -1) + "R" : e
                }
            }, {
                key: "getAttr",
                value: function(e, t) {
                    return "keywords" in e && this.filter in e.keywords && t in e.keywords[this.filter] ? e.keywords[this.filter][t] : e[t]
                }
            }], (n = null) && j(t.prototype, n), i && j(t, i), e
        }()
    },
    53: function(e, t, n) {
        "use strict";

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        n.d(t, "a", (function() {
            return h
        }));
        var o = function() {
                function e(t, n, r, o) {
                    if (function(e, t) {
                            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                        }(this, e), void 0 === t || void 0 === t.position) throw new Error("You must provide a target to the IK solver");
                    if (void 0 === n || n.length < 2) throw new Error("The IK solver needs a bone chain with at least two bones");
                    this.target = t, this.boneChain = n, this.boneLengths = new Float32Array(n.length - 1), this.bonePositions = [], this.tolerance = 1e-6, this.targetSnap = r, this.debug = !!o;
                    for (var a = 0, i = n.length; a < i; a++) this.bonePositions.push(new RK.Vec3);
                    this.oldEffectorQuaternion = new RK.Quaternion, this.newEffectorQuaternion = new RK.Quaternion
                }
                var t, n, o;
                return t = e, (n = [{
                    key: "solveBoneTransforms",
                    value: function() {
                        this._initializeBonePositions(), this._solveBonePositions(), this._setBoneTransforms()
                    }
                }, {
                    key: "_dirtyTransformToRoot",
                    value: function(e) {
                        e && !1 === e.matrixWorldNeedsUpdate && (e.matrixWorldNeedsUpdate = !0, this._dirtyTransformToRoot(e.parent))
                    }
                }, {
                    key: "_dirtyTransformToLeaves",
                    value: function(e) {
                        if (e && !1 === e.matrixWorldNeedsUpdate) {
                            e.matrixWorldNeedsUpdate = !0;
                            for (var t = e.children, n = 0; n < t.length; ++n) {
                                var r = t[n];
                                this._dirtyTransformToLeaves(r)
                            }
                        }
                    }
                }, {
                    key: "_initializeBonePositions",
                    value: function() {
                        for (var e = 0; e < this.boneChain.length; e++) {
                            var t = this.boneChain[e];
                            this._dirtyTransformToRoot(t)
                        }
                        this._dirtyTransformToRoot(this.target);
                        for (var n = this.boneChain[0]; n.parent;) n = n.parent;
                        n.updateMatrixWorld(), this.target.updateMatrixWorld();
                        for (var r = 0; r < this.boneChain.length; ++r) {
                            var o = this.boneChain[r];
                            this.bonePositions[r].setFromMatrixPosition(o.matrixWorld)
                        }
                        this._getEffectorQuaternion(this.oldEffectorQuaternion);
                        for (var a = 0, i = 1; i < this.boneChain.length; ++i) {
                            var s = this.bonePositions[i - 1],
                                c = this.bonePositions[i],
                                l = s.distanceTo(c);
                            this.boneLengths[i - 1] = l, a += l
                        }
                        this.chainLengthSquared = a * a
                    }
                }, {
                    key: "_solveBonePositions",
                    value: function() {
                        var e = 0,
                            t = 0,
                            n = 0,
                            r = 0,
                            o = -1,
                            a = 0,
                            i = new RK.Vec3;
                        this.targetSnap ? this.targetSnap(this.target, i) : i.setFromMatrixPosition(this.target.matrixWorld);
                        var s = (new RK.Vec3).copy(this.bonePositions[0]);
                        if (s.distanceToSquared(i) > this.chainLengthSquared)
                            for (e = 0, t = this.boneLengths.length; e < t; ++e) n = this.bonePositions[e].distanceTo(i), r = this.boneLengths[e] / n, this.bonePositions[e + 1].lerpVectors(this.bonePositions[e], i, r);
                        else {
                            var c = this.bonePositions[this.boneChain.length - 1];
                            for (a = 0; a < 50 && !((o = c.distanceToSquared(i)) <= this.tolerance); ++a) {
                                for (c.copy(i), e = this.boneChain.length - 2; e >= 0; --e) n = this.bonePositions[e].distanceTo(this.bonePositions[e + 1]), r = this.boneLengths[e] / n, this.bonePositions[e].lerp(this.bonePositions[e + 1], 1 - r);
                                for (this.bonePositions[0].copy(s), e = 0, t = this.boneChain.length - 1; e < t; ++e) n = this.bonePositions[e].distanceTo(this.bonePositions[e + 1]), r = this.boneLengths[e] / n, this.bonePositions[e + 1].lerp(this.bonePositions[e], 1 - r)
                            }
                            this.debug && console.log("solved bone positions in " + a + " iteration " + o.toFixed(6))
                        }
                    }
                }, {
                    key: "_setBoneTransforms",
                    value: function() {
                        for (var e = 0; e < this.boneChain.length - 1; ++e) {
                            var t = e + 1,
                                n = this.boneChain[e],
                                r = this.boneChain[t],
                                o = (new RK.Matrix4).getInverse(n.matrixWorld),
                                a = new RK.Vec3;
                            a.setFromMatrixPosition(r.matrixWorld), a.applyMatrix4(o), a.normalize();
                            var i = new RK.Vec3;
                            i.copy(this.bonePositions[t]), i.applyMatrix4(o), i.normalize();
                            var s = (new RK.Quaternion).setFromUnitVectors(a, i);
                            n.quaternion.multiply(s), n.updateMatrixWorld(!0)
                        }
                        var c = this.boneChain[this.boneChain.length - 1];
                        this._getEffectorQuaternion(this.newEffectorQuaternion), this.newEffectorQuaternion.inverse(), this.newEffectorQuaternion.multiply(this.oldEffectorQuaternion), c.quaternion.multiply(this.newEffectorQuaternion), c.updateMatrixWorld(!0)
                    }
                }, {
                    key: "_getEffectorQuaternion",
                    value: function(e) {
                        e.x = 0, e.y = 0, e.z = 0, e.w = 1;
                        for (var t = this.boneChain[this.boneChain.length - 1]; t; t = t.parent) e.premultiply(t.quaternion);
                        e.normalize()
                    }
                }, {
                    key: "__debugSkeleton",
                    value: function(e) {}
                }, {
                    key: "__debugEffector",
                    value: function(e, t) {}
                }]) && r(t.prototype, n), o && r(t, o), e
            }(),
            a = n(0);

        function i(e) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function s(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function c(e, t) {
            return !t || "object" !== i(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function l(e, t, n) {
            return (l = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(e, t, n) {
                var r = function(e, t) {
                    for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = u(e)););
                    return e
                }(e, t);
                if (r) {
                    var o = Object.getOwnPropertyDescriptor(r, t);
                    return o.get ? o.get.call(n) : o.value
                }
            })(e, t, n || e)
        }

        function u(e) {
            return (u = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function f(e, t) {
            return (f = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var h = function(e) {
            function t() {
                var e;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (e = c(this, u(t).call(this))).identityMatrix = new RK.Matrix4, e.bones = [], e.firstEmptyJointIndex = 0, e.addons = {}, e.obj = new RK.Object3D, e.useVertexTexture = !0, CK.ClientSpecs.check("OES_texture_float") || a.a.webgl2 ? (e.boneTextureWidth = 64, e.boneTextureHeight = 64, e.boneMatrices = new Float32Array(e.boneTextureWidth * e.boneTextureHeight * 4), e.boneTexture = new RK.DataTexture(e.boneMatrices, e.boneTextureWidth, e.boneTextureHeight, RK.RGBAFormat, RK.FloatType)) : (console.warn("Falling back to int8 bone texture."), e.boneTextureWidth = 128, e.boneTextureHeight = 128, e.boneMatrices = new Uint8Array(e.boneTextureWidth * e.boneTextureHeight * 4), e.boneTexture = new RK.DataTexture(e.boneMatrices, e.boneTextureWidth, e.boneTextureHeight, RK.RGBAFormat)), e.boneTexture.magFilter = RK.NearestFilter, e.boneTexture.minFilter = RK.NearestFilter, e.boneTexture.generateMipmaps = !1, e.poseSliderOverrides = {}, e.poseSliderDeltas = {}, e.namedPoses = {}, e.activeNamedPoses = {}, e.posedJoints = {}, e.mainPoses = {}, e.poseName = "", e.modifiers = [], e.sliders = {}, e.pose = 0, e.needsJointInversesRefresh = !1, e.needsPoseRefresh = !1, e
            }
            var n, r, i;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && f(e, t)
            }(t, RK.Skeleton), n = t, i = [{
                key: "_lerpVec3Anim",
                value: function(e, n) {
                    if (3 == e.length) return e.slice(0);
                    var r = Math.floor(n),
                        o = 3 * r,
                        a = n - r;
                    if (o >= e.length - 3) return e.slice(e.length - 3);
                    for (var i = [], s = 0; s < 3; s++) i.push(t._lerp(e[o + s], e[o + 3 + s], a));
                    return i
                }
            }, {
                key: "_slerpQuatAnim",
                value: function(e, t) {
                    if (4 == e.length) return (new RK.Quaternion).fromArray(e.slice(0));
                    var n = Math.floor(t),
                        r = 4 * Math.floor(t),
                        o = t - n;
                    if (r >= e.length - 4) return (new RK.Quaternion).fromArray(e.slice(e.length - 4));
                    var a = (new RK.Quaternion).fromArray(e.slice(r)),
                        i = (new RK.Quaternion).fromArray(e.slice(r + 4));
                    return a.slerp(i, o)
                }
            }, {
                key: "_lerp",
                value: function(e, t, n) {
                    return e + (t - e) * n
                }
            }], (r = [{
                key: "_requestJointInversesRefresh",
                value: function() {
                    this.needsJointInversesRefresh = !0
                }
            }, {
                key: "requestPoseRefresh",
                value: function() {
                    this.needsPoseRefresh = !0
                }
            }, {
                key: "_refreshPose",
                value: function() {
                    for (var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], t = 0, n = this.bones.length; t < n; t++) {
                        var r = this.bones[t];
                        if (r) {
                            var o = e ? r.poses : this.posedJoints[r.name] || r.poses;
                            this.refreshBone(e, r, o)
                        }
                    }
                }
            }, {
                key: "refreshBone",
                value: function(e, t, n) {
                    if (void 0 !== t) {
                        var r = t.name;
                        if (t.position.fromArray(n.pos, 0), t.quaternion.fromArray(n.rot, 0), t.scale.fromArray(n.scl, 0), t.flip = !1, t.flipOffset.set(0, 0, 0), !e) {
                            if (r in this.poseSliderOverrides) {
                                var o = this.poseSliderOverrides[r];
                                t.position.add(o.pos).sub((new RK.Vec3).fromArray(t.poses.pos)), t.quaternion.set(t.quaternion.x + o.rot.x - t.poses.rot[0], t.quaternion.y + o.rot.y - t.poses.rot[1], t.quaternion.z + o.rot.z - t.poses.rot[2], t.quaternion.w + o.rot.w - t.poses.rot[3]), t.scale.add(o.scl).sub((new RK.Vec3).fromArray(t.poses.scl))
                            }
                            if (r in this.poseSliderDeltas) {
                                var a = this.poseSliderDeltas[r],
                                    i = new RK.Vec3,
                                    s = new RK.Vec3;
                                for (var c in a) {
                                    var l = a[c];
                                    t.position.add(l.pos), t.scale.multiply(l.scl);
                                    var u = l.rot,
                                        f = l.rotWeight;
                                    i.set(0, 0, 0);
                                    var h = Math.acos(Math.min(Math.abs(u.w), 1)),
                                        p = Math.sin(h);
                                    p > 1e-4 && i.set(u.x, u.y, u.z).multiplyScalar(2 * Math.sign(u.w) * h / p), i.multiplyScalar(f), s.add(i)
                                }
                                var d = s.length();
                                if (d > 0) {
                                    var m = Math.cos(d / 2),
                                        y = Math.sin(d / 2);
                                    s.multiplyScalar(y / d);
                                    var v = new RK.Quaternion(s.x, s.y, s.z, m).normalize();
                                    t.quaternion.premultiply(v)
                                }
                            }
                        }
                    }
                }
            }, {
                key: "getBoneByName",
                value: function(e) {
                    return this.bones.find((function(t) {
                        return t && t.name === e
                    }))
                }
            }, {
                key: "getJointTransform",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "pos";
                    return "pos" === t ? this.getPos(e) : "rot" === t ? this.getRot(e) : "scl" === t ? this.getScl(e) : "qtn" === t ? this.getQtn(e) : void console.error("Unrecognized transform", t)
                }
            }, {
                key: "getRot",
                value: function(e) {
                    var t = new RK.Euler;
                    return t.order = "ZYX", t.setFromQuaternion(this.getQtn(e))
                }
            }, {
                key: "getPos",
                value: function(e) {
                    return (new RK.Vec3).fromArray((this.posedJoints[e.name] || e.poses).pos, 0)
                }
            }, {
                key: "getScl",
                value: function(e) {
                    return (new RK.Vec3).fromArray((this.posedJoints[e.name] || e.poses).scl, 0)
                }
            }, {
                key: "getQtn",
                value: function(e) {
                    return (new RK.Quaternion).fromArray((this.posedJoints[e.name] || e.poses).rot, 0)
                }
            }, {
                key: "refreshAnimations",
                value: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                    if (this.needsJointInversesRefresh || e) {
                        var t = this.obj.parent;
                        null != t && t.remove(this.obj);
                        var n = this.obj.snapBones;
                        this.obj.snapBones = void 0;
                        var r = this.obj.position.clone();
                        this.obj.position.set(0, 0, 0), this._refreshPose(!0), this.obj.updateMatrixWorld(!0), this.calculateInverses(), this.obj.position.copy(r), null != t && t.add(this.obj), this.needsPoseRefresh = !0, this.obj.snapBones = n
                    }(this.needsPoseRefresh || e) && this._refreshPose(!1), this.needsJointInversesRefresh = !1, this.needsPoseRefresh = !1, this.needsUpdate = !0
                }
            }, {
                key: "changePose",
                value: function(e, t) {
                    var n = this,
                        r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : ["A1"];
                    (this.poseName !== e || r.length !== this.modifiers.length || r.find((function(e, t) {
                        return e !== n.modifiers[t]
                    }))) && (this.poseName = e, this.modifiers = r, this.posedJoints = {}, r.map((function(e) {
                        var r = t[e] || n.mainPoses[e];
                        if (r)
                            for (var o in r) n.posedJoints[o] = r[o];
                        else console.warn("Activated pose", e, "not available in", t, "or", n.mainPoses)
                    })), this.currentPoses = t, this.requestPoseRefresh())
                }
            }, {
                key: "addMainSkel",
                value: function(e) {
                    this.addSkel(e.mixerBones, "skeleton");
                    var t = e.poses || {};
                    for (var n in t) {
                        var r = t[n];
                        if (n.startsWith("slider_")) {
                            var o = n.split("_")[1];
                            this.sliders[o] = {
                                value: void 0,
                                jointAnims: r
                            }
                        } else this.mainPoses[n] = r
                    }
                    this.requestPoseRefresh()
                }
            }, {
                key: "getSlider",
                value: function(e) {
                    if (e in this.sliders) return void 0 !== this.sliders[e].value ? this.sliders[e].value : .5;
                    console.warn("Slider", e, "does not exist!")
                }
            }, {
                key: "setSlider",
                value: function(e, n) {
                    if (n < 0 && (n = 0), e in this.sliders) {
                        var r = this.sliders[e];
                        if (n !== r.value) {
                            var o, a = r.jointAnims;
                            for (var i in r.value = n, a)
                                if (o = a[i], "lookHDef" === e || "lookVDef" === e) {
                                    var s = this.poseSliderDeltas,
                                        c = this.getBoneByName(i);
                                    if (c) {
                                        void 0 === s[i] && (s[i] = {});
                                        var l = s[i],
                                            u = this.getPos(c),
                                            f = this.getQtn(c),
                                            h = this.getScl(c),
                                            p = (new RK.Vec3).fromArray(t._lerpVec3Anim(o.pos, 2 * n)),
                                            d = (new RK.Vec3).fromArray(t._lerpVec3Anim(o.scl, 2 * n)),
                                            m = (new RK.Quaternion).fromArray(o.rot),
                                            y = -2 * (n - .5);
                                        if (y < 0) {
                                            y = -y;
                                            var v = Math.min(8, o.rot.length - 4);
                                            m.fromArray(o.rot, v)
                                        }
                                        p.sub(u), m.multiply(f.inverse()), d.divide(h), l[e] = {
                                            pos: p,
                                            rot: m,
                                            scl: d,
                                            rotWeight: y
                                        }
                                    }
                                } else {
                                    var b = (new RK.Vec3).fromArray(t._lerpVec3Anim(o.pos, 2 * n)),
                                        g = t._slerpQuatAnim(o.rot, 2 * n),
                                        w = (new RK.Vec3).fromArray(t._lerpVec3Anim(o.scl, 2 * n));
                                    this.poseSliderOverrides[i] = {
                                        pos: b,
                                        rot: g,
                                        scl: w
                                    }
                                }
                            this.requestPoseRefresh()
                        }
                    } else console.warn("Setting missing slider", e, "to", n)
                }
            }, {
                key: "applyIk",
                value: function(e, t, n, r) {
                    var a = this;
                    if (t && e && e.length) {
                        var i = e.map((function(e) {
                                return a.obj.getObjectByName(e ? e.trim() : "")
                            })).filter((function(e) {
                                return void 0 !== e
                            })),
                            s = this.obj.getObjectByName(t) || CK.scene.getObjectByName(t);
                        s && i.length > 0 && new o(s, i, n, r).solveBoneTransforms()
                    }
                }
            }, {
                key: "add",
                value: function(e, t) {
                    void 0 === t && console.error("Slot is undefined in add mesh!", e);
                    var n = e.geometry;
                    if (n.mainSkeleton && this.addMainSkel(n), "mixerBones" in n && n.mixerBones.length && (this.addSkel(n.mixerBones, t), n.skinned))
                        for (var r = n.skinInfluenceCount, o = Math.ceil(r / 4), a = 0; a < o; ++a) {
                            var i = n.skinIndexNames[a],
                                s = n.attributes[i].array;
                            this._remapJointIndices(s, t)
                        }
                    n.skinned && (e.bind(this, new RK.Matrix4), this.obj.add(e))
                }
            }, {
                key: "addSkel",
                value: function(e, t) {
                    t in this.addons && (console.error("Slot", t, "already full. How did we end up adding another skeleton to it?", e), this.removeSkel(t));
                    for (var n = this.bones, r = n.length, o = e.length, a = [], i = this.firstEmptyJointIndex, s = 0; s < o; i++) i >= r ? (n.push(e[s++]), a.push(i)) : null == n[i] && (n[i] = e[s++], a.push(i)), s == o - 1 && (this.firstEmptyJointIndex = i + 1);
                    for (var c, l, u = 0; u < o; u++)(c = e[u]).skin = this, (l = c.parentId) >= 500 && (l = a[l - 500]), -1 == l ? this.obj.add(c) : null !== l && void 0 !== n[l] ? n[l].add(c) : console.error("Invalid bone parent id", l, "of", c, "for skeleton", this, "with bones", n);
                    this.addons[t] = {
                        bones: e,
                        slot: t,
                        boneRemap: a
                    }, o && this._requestJointInversesRefresh()
                }
            }, {
                key: "removeSkel",
                value: function(e) {
                    if (e in this.addons) {
                        var t = this.addons[e].boneRemap;
                        t.length && this.firstEmptyJointIndex > t[0] && (this.firstEmptyJointIndex = t[0]);
                        for (var n, r, o = 0, a = t.length; o < a; o++) n = t[o], (r = this.bones[n]).parent ? r.parent.remove(r) : console.error("Why did bone", r, "have no parent?"), this.bones[n] = void 0;
                        delete this.addons[e]
                    }
                }
            }, {
                key: "_remapJointIndices",
                value: function(e, t) {
                    if (t in this.addons)
                        for (var n = this.addons[t].boneRemap, r = 0, o = e.length; r < o; r++) e[r] >= 500 && (e[r] = n[e[r] - 500])
                }
            }, {
                key: "update",
                value: function() {
                    this.needsUpdate && (l(u(t.prototype), "update", this).call(this), this.needsUpdate = !1)
                }
            }]) && s(n.prototype, r), i && s(n, i), t
        }()
    },
    540: function(t, n, r) {
        "use strict";

        function o(e) {
            return (o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function a(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function s(e, t) {
            return !t || "object" !== o(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function c(e) {
            return (c = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function l(e, t) {
            return (l = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        r.r(n);
        var u = {
                bronze_28mm: !0,
                nylon_plastic_3inch: !0,
                rosegold_28mm: !0,
                steel_3inch: !0,
                steel_28mm: !0,
                strong_plastic_3inch: !0
            },
            f = function(e) {
                function t() {
                    return a(this, t), s(this, c(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && l(e, t)
                }(t, CK.Products), n = t, o = [{
                    key: "getAvailable",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : CK.data,
                            t = this.getSize(e),
                            n = "XL" === t || "XXL" === t,
                            r = e.parts.base && CK.Options.getPart(e.parts.base).keywords.initiative,
                            o = CK.Options.products;
                        return o = o.filter((function(e) {
                            return "hidden" !== e.visibility || e.color && CK.Settings.color
                        })), o = n ? o.filter((function(e) {
                            return e.tag === t
                        })) : o.filter((function(e) {
                            return "standard" == e.size
                        })), r && (o = o.filter((function(e) {
                            return !(e.product_name in u)
                        }))), o
                    }
                }, {
                    key: "getScale",
                    value: function() {
                        var e = this.getSelectedProduct();
                        return e ? e.scale : 1
                    }
                }, {
                    key: "isExtraTall",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : CK.data;
                        return e.sliders && void 0 !== e.sliders.height && e.sliders.height > b.xlSliderThreshold
                    }
                }, {
                    key: "isExtraTallAvailable",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : CK.data;
                        if (e.parts.base) {
                            var t = CK.Options.getPart(e.parts.base);
                            if (t && t.keywords.initiative) return !1
                        }
                        return !(e.parts.mount || e.physical && e.physical.endsWith("_3inch"))
                    }
                }, {
                    key: "countXLParts",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "XL",
                            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : CK.data,
                            n = 0;
                        for (var r in t.parts) {
                            var o = CK.Options.getPart(t.parts[r]);
                            o.keywords[e] && n++
                        }
                        return n
                    }
                }, {
                    key: "getSize",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : CK.data,
                            t = this.countXLParts("XL", e),
                            n = this.countXLParts("XXL", e);
                        return this.isExtraTall(e) && t++, n || t >= 3 || t >= 2 && this.isExtraTall(e) ? "XXL" : t ? "XL" : void 0
                    }
                }], (r = null) && i(n.prototype, r), o && i(n, o), t
            }();

        function h(e) {
            return (h = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function p(e, t) {
            return !t || "object" !== h(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function d(e) {
            return (d = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function m(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function y(e, t, n) {
            return t && m(e.prototype, t), n && m(e, n), e
        }

        function v(e, t) {
            return (v = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var b = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = p(this, d(t).call(this, e))).refresh = function() {
                    return n.forceUpdate()
                }, n
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && v(e, t)
            }(t, React.Component), y(t, null, [{
                key: "updateCamera",
                value: function() {
                    var e = 5.588 * (CK.renderManager.width / CK.renderManager.height),
                        t = CK.orbitCamera.override;
                    t.left = e / -2 + 1, t.right = e / 2 + 1, t.top = 2.794, t.bottom = -2.794, t.updateProjectionMatrix(!0), t.updateMatrixWorld(!0)
                }
            }, {
                key: "enable",
                value: function() {
                    UIState.set({
                        showSizing: !0
                    }), this.backgroundVisible = CK.environment.background.visible, CK.environment.background.visible = !1, this.groundVisible = CK.environment.ground.visible, CK.environment.ground.visible = !1;
                    var e = new RK.OrthographicCamera(-2, 2, 2, -2, 2, 300);
                    e.position.set(10, 2.286, 0), e.rotation.set(0, Math.PI / 2, 0), CK.orbitCamera.setOverride(e), CK.orbitCamera.controls.enabled = !1, this.updateCamera(), CK.GameLoop.requestRenderRefresh()
                }
            }, {
                key: "disable",
                value: function() {
                    UIState.showSizing && (UIState.set({
                        showSizing: !1
                    }), CK.orbitCamera.removeOverride(), CK.orbitCamera.controls.enabled = !0, CK.environment.ground.visible = this.backgroundVisible, CK.environment.background.visible = this.groundVisible, CKUI.hfBGImage && (CKUI.hfBGImage.style.visibility = "hidden"), CK.renderManager.requestShadowUpdate(), CK.GameLoop.requestRenderRefresh())
                }
            }]), y(t, [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("sliderChanged", this.refresh), CK.Events.on("resize", this.refresh), CK.Events.on("CharacterFinishedAnimating", this.refresh)
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("sliderChanged", this.refresh), CK.Events.off("resize", this.refresh), CK.Events.off("CharacterFinishedAnimating", this.refresh)
                }
            }, {
                key: "render",
                value: function() {
                    if (!UIState.showSizing) return null;
                    t.updateCamera(), t.getMarkerScreenPos();
                    var e = CK.renderManager.height,
                        n = Math.floor(CK.renderManager.width / 2 - e / 2 - CK.orbitCamera.getOffsetX(CK.renderManager.width)),
                        r = t.getMarkerScreenPos(),
                        o = "/static/svg/measure".concat(UIState.compact ? "-compact" : "").concat(2 === f.getScale() ? "-2X" : "", ".svg");
                    return React.createElement("div", {
                        className: "sizing",
                        style: {
                            height: e
                        }
                    }, React.createElement("img", {
                        src: o,
                        id: "background-image",
                        className: "sizing-img",
                        style: {
                            left: n
                        }
                    }), React.createElement("div", {
                        className: "sizing-marker",
                        style: {
                            bottom: r
                        }
                    }, React.createElement("div", {
                        className: "sizing-marker-text"
                    }, "Standing Straight")))
                }
            }], [{
                key: "getMarkerScreenPos",
                value: function() {
                    return 1 / 11 * CK.renderManager.height + this.getHeightToTopOfHead() / 55.88 * CK.renderManager.height
                }
            }, {
                key: "getHeightToTopOfHead",
                value: function() {
                    var e = CK.data.sliders.height,
                        t = 0;
                    e < this.midpoint && (t = .7 * (1 - e / this.midpoint));
                    var n = CK.display.getObjectByName("main_head_01_height_247_bind_jnt"),
                        r = CK.display.getObjectByName("main_spine_02_height_182_bind_jnt");
                    if (n && r) {
                        var o = new RK.Vec3;
                        o.setFromMatrixScale(n.matrixWorld);
                        var a = new RK.Vec3;
                        return a.setFromMatrixScale(r.matrixWorld), 1.01 * (29.586 * a.y + 4.42 * o.y - t)
                    }
                }
            }]), t
        }();
        b.minFeet = 3, b.maxFeet = 11, b.xlFeet = 7, b.xlSliderThreshold = (b.xlFeet - b.minFeet) / (b.maxFeet - b.minFeet), b.midpoint = .75 * b.xlSliderThreshold, window.Sizingboi = b;
        var g = {},
            w = b.xlSliderThreshold;
        g.height = {
            val: .5,
            targets: [{
                name: "heightDef",
                type: "joint",
                start: 0,
                end: b.midpoint,
                min: 0,
                max: .5
            }, {
                name: "heightDef",
                type: "joint",
                start: b.midpoint,
                end: 1 * w,
                min: .5,
                max: 1
            }, {
                name: "heightDef",
                type: "joint",
                start: 1 * w,
                end: 1,
                min: 1,
                max: 1
            }]
        }, g.weightUpper = {
            val: 0,
            targets: [{
                name: "bulkUpperDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        }, g.weightLower = {
            val: 0,
            targets: [{
                name: "bulkLowerDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "bulkSkirtDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        }, g.weighTorso = {
            val: 0,
            targets: [{
                name: "bulkTorsoDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "bulkSkirtDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        }, g.posture = {
            val: .5,
            targets: [{
                name: "postureDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        }, g.headSize = {
            val: 0,
            targets: [{
                name: "headScaleDef",
                type: "slider",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        }, g.build = {
            val: 0,
            targets: [{
                name: "shoulderWidthDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }],
            shortName: "b"
        }, g.muscularity = {
            val: 0,
            targets: [{
                name: "muscularityDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "muscularity",
                type: "morph",
                slot: "bodyUpper",
                start: .5,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "muscularity",
                type: "morph",
                slot: "bodyLower",
                start: .5,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "muscularity",
                type: "morph",
                slot: "torsoBridge",
                start: .5,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "normal2Blend",
                type: "shader",
                slot: "bodyUpper",
                start: .5,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "normal2Blend",
                type: "shader",
                slot: "bodyLower",
                start: .5,
                end: 1,
                min: 0,
                max: 1
            }],
            shortName: "m"
        }, g.bust = {
            val: .5,
            targets: [{
                name: "chestDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: .9
            }],
            shortName: "bu"
        }, g.waist = {
            val: .75,
            targets: [{
                name: "waistDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }],
            shortName: "wa"
        }, g.curves = {
            val: .3,
            targets: [{
                name: "curvesDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }],
            shortName: "c"
        }, g.booty = {
            val: 0,
            targets: [{
                name: "bootyDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: .9
            }],
            shortName: "bo"
        }, g.faceSoftness = {
            val: .5,
            targets: [{
                name: "male",
                type: "morph",
                slot: "eyebrows",
                start: 0,
                end: .5,
                min: 1,
                max: 0
            }, {
                name: "male",
                type: "morph",
                slot: "face",
                start: 0,
                end: .5,
                min: 1,
                max: 0
            }, {
                name: "female",
                type: "morph",
                slot: "eyebrows",
                start: .5,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "female",
                type: "morph",
                slot: "face",
                start: .5,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "female",
                type: "morph",
                slot: "beard",
                start: .5,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "male",
                type: "morph",
                slot: "beard",
                start: 0,
                end: .5,
                min: 1,
                max: 0
            }],
            shortName: "f"
        }, g.jaw = {
            val: 0,
            targets: [{
                name: "jawDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: .8
            }],
            shortName: "j"
        }, g.xprsn_smile = {
            val: 0,
            targets: [{
                name: "xprsn_smile",
                type: "morph",
                slot: "face",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "xprsn_smile",
                type: "morph",
                slot: "eyebrows",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "xprsn_smile",
                type: "morph",
                slot: "beard",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }],
            shortName: "xs"
        }, g.xprsn_cocky = {
            val: 0,
            targets: [{
                name: "xprsn_cocky",
                type: "morph",
                slot: "face",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "xprsn_cocky",
                type: "morph",
                slot: "eyebrows",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "xprsn_cocky",
                type: "morph",
                slot: "beard",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }],
            shortName: "xc"
        }, g.xprsn_snarl = {
            val: 0,
            targets: [{
                name: "xprsn_snarl",
                type: "morph",
                slot: "face",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "xprsn_snarl",
                type: "morph",
                slot: "eyebrows",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "xprsn_snarl",
                type: "morph",
                slot: "beard",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }],
            shortName: "xn"
        }, g.xprsn_confused = {
            val: 0,
            targets: [{
                name: "xprsn_confused",
                type: "morph",
                slot: "face",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "xprsn_confused",
                type: "morph",
                slot: "eyebrows",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "xprsn_confused",
                type: "morph",
                slot: "beard",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }],
            shortName: "xo"
        }, g.initiative_base_width = {
            val: .042735042735042736,
            targets: [{
                name: "widthDef",
                type: "joint",
                slot: "base",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "widthDef",
                type: "joint",
                slot: "baseCollision",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        }, g.belly = {
            val: 0,
            targets: [{
                name: "bellyDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }, {
                name: "bellyDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        }, g.lookH = {
            val: .5,
            targets: [{
                name: "lookHDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        }, g.lookV = {
            val: .5,
            targets: [{
                name: "lookVDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        }, g.upper = {
            val: 0,
            targets: [{
                name: "scaleUpperDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        }, g.armsR = {
            val: 0,
            targets: [{
                name: "stretchArmRDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        }, g.armsL = {
            val: 0,
            targets: [{
                name: "stretchArmLDef",
                type: "joint",
                start: 0,
                end: 1,
                min: 0,
                max: 1
            }]
        };
        var k = {
                sliders: g
            },
            S = r(91);

        function _(e, t) {
            var n = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }))), n.push.apply(n, r)
            }
            return n
        }

        function C(e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = null != arguments[t] ? arguments[t] : {};
                t % 2 ? _(Object(n), !0).forEach((function(t) {
                    R(e, t, n[t])
                })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : _(Object(n)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t))
                }))
            }
            return e
        }

        function R(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }
        var O = Math.PI,
            E = (Math.PI, Math.PI / 2),
            P = Math.PI / 4;

        function x(e, t) {
            for (var n = {}, r = {
                    cone: t
                }, o = e.length, a = 0; a < 2; ++a) r.cone.x[a] /= o, r.cone.y[a] /= o, r.cone.z[a] /= o;
            for (var i = 0; i < o; ++i) {
                n[e[i]] = r
            }
            return n
        }
        for (var j = {
                bodyUpper: C({
                    149: {
                        cone: {
                            x: [-E, E],
                            y: [-E, P],
                            z: [-E, E],
                            order: "twistswing",
                            orient: {
                                x: 0,
                                y: 0,
                                z: 1,
                                w: 0
                            }
                        },
                        left: 63
                    },
                    123: {
                        cone: {
                            x: [0, 0],
                            y: [-P, P],
                            z: [.1 * -O, P],
                            order: "swingtwist",
                            orient: {
                                x: 0,
                                y: 0,
                                z: 1,
                                w: 0
                            }
                        },
                        left: 36
                    },
                    99: {
                        cone: {
                            x: [-E, E],
                            y: [-P, .6 * O],
                            z: [-E, E],
                            order: "swingtwist",
                            orient: {
                                x: 0,
                                y: 0,
                                z: 1,
                                w: 0
                            }
                        },
                        left: 12
                    },
                    104: {
                        cone: {
                            x: [-1.3, .05],
                            y: [1, -1],
                            z: [1, -1],
                            order: "swingtwist",
                            orient: (new RK.Quaternion).setFromUnitVectors(new RK.Vec3(1, 0, 0), new RK.Vec3(0, 1, 0)).toSimple()
                        },
                        left: 17
                    },
                    1: {
                        rot: {
                            y: [-1, 1],
                            z: [-1.5, 1]
                        }
                    },
                    288: {
                        pos: {
                            x: [-1, 1],
                            y: [-1, 1],
                            z: [-1, 1]
                        }
                    }
                }, x([91, 93, 95], {
                    x: [-E, E],
                    y: [-E, E],
                    z: [-E, E],
                    order: "swingtwist"
                }), {}, x([177, 180, 184], {
                    x: [-E, E],
                    y: [1.3 * -E, 1.3 * E],
                    z: [1.3 * -E, 1.3 * E],
                    order: "swingtwist"
                })),
                shouldersR: {
                    201: {
                        cone: {
                            x: [-E, E],
                            y: [-E, E],
                            z: [-E, E],
                            order: "swingtwist",
                            orient: {
                                x: 0,
                                y: 0,
                                z: 1,
                                w: 0
                            },
                            mirrorsliders: "xz"
                        },
                        pos: {
                            x: [-.08, .1],
                            y: [-.05, .2],
                            z: [-.1, .1]
                        }
                    }
                },
                shouldersL: {
                    197: {
                        cone: {
                            x: [-E, E],
                            y: [-E, E],
                            z: [-E, E],
                            order: "swingtwist",
                            orient: {
                                x: 0,
                                y: 0,
                                z: 1,
                                w: 0
                            },
                            mirrorsliders: "xz"
                        },
                        pos: {
                            x: [-.1, .08],
                            y: [-.2, .05],
                            z: [-.1, .1]
                        }
                    }
                },
                itemR: {
                    198: {
                        rot: {
                            y: [-Math.PI, Math.PI]
                        },
                        pos: {
                            y: [-1, 1]
                        },
                        left: 194
                    }
                },
                itemD: {
                    501: {
                        rot: {
                            x: [-Math.PI, Math.PI]
                        }
                    }
                },
                tail: C({}, x([500, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 515, 516, 517, 518], {
                    x: [-4 * O, 4 * O],
                    y: [-4 * O, 4 * O],
                    z: [-4 * O, 4 * O],
                    order: "swingtwist"
                })),
                wingsR: {
                    500: {
                        cone: {
                            x: [-E, E],
                            y: [-E, E],
                            z: [-E, E],
                            order: "swingtwist",
                            orient: {
                                x: 0,
                                y: 0,
                                z: 1,
                                w: 0
                            }
                        },
                        left: 500
                    }
                },
                beard: C({}, x([501, 502, 503, 504, 505, 506, 507], {
                    x: [-2.5 * O, 2.5 * O],
                    y: [-2.5 * O, 2.5 * O],
                    z: [-2.5 * O, 2.5 * O],
                    order: "swingtwist"
                })),
                hair: C({}, x([533, 534, 535, 536, 537, 538, 539, 540, 541, 542, 543, 544], {
                    x: [-2.5 * O, 2.5 * O],
                    y: [-2.5 * O, 2.5 * O],
                    z: [-2.5 * O, 2.5 * O],
                    order: "swingtwist"
                }), {}, x([546, 547, 548, 549, 550, 551, 552, 553, 554, 555, 556, 557], {
                    x: [-2.5 * O, 2.5 * O],
                    y: [-2.5 * O, 2.5 * O],
                    z: [-2.5 * O, 2.5 * O],
                    order: "swingtwist"
                })),
                back: C({}, x([500, 501, 502, 503, 504, 505, 506, 507], {
                    x: [-.5 * O, .5 * O],
                    y: [-.5 * O, .5 * O],
                    z: [-2 * O, 2 * O],
                    order: "swingtwist"
                })),
                face: C({}, x([500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512], {
                    x: [-4.4 * O, 4.4 * O],
                    y: [-5.35 * O, 5.35 * O],
                    z: [-5.35 * O, 5.35 * O],
                    order: "swingtwist"
                }), {}, x([514, 515, 516], {
                    x: [-.28 * O, .28 * O],
                    y: [-1.34 * O, 1.34 * O],
                    z: [-1.34 * O, 1.34 * O],
                    order: "swingtwist"
                }), {}, x([517, 518, 519, 520, 521, 522, 523, 524, 525, 526], {
                    x: [-3.3 * O, 3.3 * O],
                    y: [-4.01 * O, 4.01 * O],
                    z: [-4.01 * O, 4.01 * O],
                    order: "swingtwist"
                }), {}, x([527, 528, 529], {
                    x: [-.28 * O, .28 * O],
                    y: [-1.34 * O, 1.34 * O],
                    z: [-1.34 * O, 1.34 * O],
                    order: "swingtwist"
                }), {}, x([530, 531, 532, 533, 534, 535, 536, 537, 538, 539], {
                    x: [-3.3 * O, 3.3 * O],
                    y: [-4.01 * O, 4.01 * O],
                    z: [-4.01 * O, 4.01 * O],
                    order: "swingtwist"
                }), {}, x([540, 541, 542], {
                    x: [-.28 * O, .28 * O],
                    y: [-1.34 * O, 1.34 * O],
                    z: [-1.34 * O, 1.34 * O],
                    order: "swingtwist"
                }), {}, x([543, 544, 545, 546, 547, 548, 549, 550, 551, 552], {
                    x: [-3.3 * O, 3.3 * O],
                    y: [-4.01 * O, 4.01 * O],
                    z: [-4.01 * O, 4.01 * O],
                    order: "swingtwist"
                })),
                sideR: {
                    500: {
                        cone: {
                            x: [-2, 2],
                            y: [0, 0],
                            z: [0, 0],
                            order: "swingtwist"
                        },
                        left: 500
                    }
                }
            }, T = Object.keys(j), M = 0; M < T.length; ++M) {
            var K = T[M],
                I = K.endsWith("R"),
                N = K;
            I && void 0 === j[N = K.slice(0, -1) + "L"] && (j[N] = {});
            for (var B = j[K], A = Object.keys(B), L = 0; L < A.length; ++L) {
                var U = A[L],
                    D = B[U],
                    F = D.left;
                if (void 0 !== F) {
                    var z = JSON.parse(JSON.stringify(D)),
                        V = z.cone;
                    V && S.a.MirrorCone(V), delete z.left, z.right = U, j[N][F] = z
                }
            }
        }
        j.bodyUpper0 = j.bodyUpper, j.bodyUpper1 = j.bodyUpper, j.itemR0 = j.itemR, j.itemR1 = j.itemR;
        var G = {
                limits: j
            },
            q = r(0);

        function H(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function W() {
            if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
            if (Reflect.construct.sham) return !1;
            if ("function" == typeof Proxy) return !0;
            try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}))), !0
            } catch (e) {
                return !1
            }
        }

        function Q(e, t, n) {
            return (Q = W() ? Reflect.construct : function(e, t, n) {
                var r = [null];
                r.push.apply(r, t);
                var o = new(Function.bind.apply(e, r));
                return n && te(o, n.prototype), o
            }).apply(null, arguments)
        }

        function X(e) {
            return (X = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Y(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function Z(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function J(e, t) {
            return !t || "object" !== X(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function $(e, t, n) {
            return ($ = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(e, t, n) {
                var r = function(e, t) {
                    for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = ee(e)););
                    return e
                }(e, t);
                if (r) {
                    var o = Object.getOwnPropertyDescriptor(r, t);
                    return o.get ? o.get.call(n) : o.value
                }
            })(e, t, n || e)
        }

        function ee(e) {
            return (ee = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function te(e, t) {
            return (te = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ne = [
                ["main_armR_02_101_bind_jnt", "main_armR_03_104_bind_jnt"],
                ["main_armL_02_014_bind_jnt", "main_armL_03_017_bind_jnt"]
            ],
            re = ["main_armR_02_elbowHold_102_bind_jnt", "main_armL_02_elbowHold_015_bind_jnt"],
            oe = {
                name: "neck",
                bones: ["main_neck_01_091_bind_jnt", "main_neck_02_093_bind_jnt", "main_neck_03_095_bind_jnt"],
                maxOffsets: [.4, .4, .4],
                minOffsets: [-.4, -.4, -.2]
            },
            ae = {
                name: "spine",
                bones: ["main_spine_01_177_bind_jnt", "main_spine_02_180_bind_jnt", "main_spine_03_184_bind_jnt"],
                maxOffsets: [.4, .4, .4],
                minOffsets: [-.4, -.4, -.4]
            },
            ie = {
                main_handR_01_offset_149_bind_jnt: ["main_armR_twist_04_113_bind_jnt", "main_armR_twist_03_111_bind_jnt", "main_armR_twist_02_109_bind_jnt", "main_armR_twist_01_107_bind_jnt"],
                main_handL_01_offset_063_bind_jnt: ["main_armL_twist_04_026_bind_jnt", "main_armL_twist_03_024_bind_jnt", "main_armL_twist_02_022_bind_jnt", "main_armL_twist_01_020_bind_jnt"]
            },
            se = [
                ["main_handR_01_offset_149_bind_jnt", ["gloveR_01_fat_500_bind_jnt", "gloveR_02_fat_501_bind_jnt", "gloveR_03_fat_502_bind_jnt"]],
                ["main_handL_01_offset_063_bind_jnt", ["gloveL_01_fat_500_bind_jnt", "gloveL_02_fat_501_bind_jnt", "gloveL_03_fat_502_bind_jnt"]]
            ],
            ce = {
                main_armR_02_101_bind_jnt: ["main_armR_upperTwist_01_114_bind_jnt", "main_armR_upperTwist_02_115_bind_jnt"],
                main_armL_02_014_bind_jnt: ["main_armL_upperTwist_01_027_bind_jnt", "main_armL_upperTwist_02_028_bind_jnt"]
            },
            le = ["bodyUpper", "bodyUpper0", "bodyUpper1"],
            ue = ["main_armR_01_099_bind_jnt", "main_armL_01_012_bind_jnt"],
            fe = ["back", "bodyMiscBack", "chest", "legs", "bodyLower", "bodyUpper"],
            he = {
                hornBack: [3.564, -1.395, -.004],
                hornTop: [4.074, .151, -.004],
                hornFront: [3.465, 1.832, -.004],
                hornBackL: [2.866, -.101, 1.808],
                hornSideL: [2.703, 1.172, 1.585],
                hornFrontL: [2.319, 2.133, 1.1],
                hornForehead: [2.209, 2.615, -.004],
                hornFrontR: [2.319, 2.133, -1.107],
                hornSideR: [2.703, 1.172, -1.592],
                hornBackR: [2.866, -.101, -1.816]
            };
        for (var pe in he) he[pe] = he[pe].map((function(e) {
            return e / 10
        }));
        var de = {};
        for (var me in fe) de[fe[me]] = me + 1;
        var ye = {
                bodyLower: {
                    thighR: 166,
                    thighL: 80,
                    shinR: 157,
                    shinL: 71
                },
                bodyUpper: {
                    forearmR: 105,
                    forearmL: 18,
                    shoulderR: 100,
                    shoulderL: 13
                },
                bodyUpper0: {
                    forearmR: 105,
                    forearmL: 18,
                    shoulderR: 100,
                    shoulderL: 13
                },
                bodyUpper1: {
                    forearmR: 105,
                    forearmL: 18,
                    shoulderR: 100,
                    shoulderL: 13
                }
            },
            ve = [
                ["centaur_spine_05_curves_544_bind_jnt", "centaur_upperbody_bend_curves_552_bind_jnt", "centaur_spine01_curves_554_bind_jnt", "centaur_pelvis_curves_556_bind_jnt", "centaur_ft_legL_clav_curves_545_bind_jnt", "centaur_ft_legL_shoulder_curves_546_bind_jnt", "centaur_ft_legR_clav_curves_548_bind_jnt", "centaur_ft_legR_shoulder_curves_549_bind_jnt", "centaur_bk_legL_hip_curves_558_bind_jnt", "centaur_bk_legR_hip_curves_560_bind_jnt"]
            ],
            be = [
                ["centaur_spine_01_fat_539_bind_jnt", "centaur_spine_02_fat_540_bind_jnt", "centaur_spine_03_fat_541_bind_jnt", "centaur_spine_04_fat_542_bind_jnt"],
                ["centaur_spine_05_fat_543_bind_jnt"],
                ["centaur_upperbody_bend_fat_551_bind_jnt", "centaur_spine01_fat_553_bind_jnt"],
                ["centaur_pelvis_fat_555_bind_jnt", "centaur_ft_legL_top_fat_547_bind_jnt", "centaur_ft_legR_top_fat_550_bind_jnt", "centaur_bk_legL_hip_fat_557_bind_jnt", "centaur_bk_legR_hip_fat_559_bind_jnt"]
            ],
            ge = [
                ["centaur_upperbody_bend_fatTOP_562_bind_jnt"],
                ["centaur_spine01_fatTOP_561_bind_jnt"]
            ],
            we = [
                ["centaur_spine01_belly_563_bind_jnt"],
                ["centaur_upperbody_bend_belly_564_bind_jnt"]
            ],
            ke = [
                ["centaur_spine01_waist_565_bind_jnt"],
                ["centaur_upperbody_bend_waist_566_bind_jnt"]
            ],
            Se = [500, 501, 502, 503, 504, 505, 506, 507, 508, 509],
            _e = ["baseItem_orig_500_bind_jnt", "baseItem_01_501_bind_jnt", "baseItem_02_502_bind_jnt", "baseItem_03_503_bind_jnt", "baseItem_04_504_bind_jnt", "baseItem_05_505_bind_jnt", "baseItem_06_506_bind_jnt", "baseItem_07_507_bind_jnt", "baseItem_08_508_bind_jnt", "baseItem_09_509_bind_jnt"],
            Ce = {
                bulkUpperDef: -.1,
                heightDef: 0,
                muscularityDef: 0,
                postureDef: 0,
                shoulderWidthDef: -.1
            },
            Re = {
                bodyLower: ["bodyUpper", "torsoBridge"],
                bodyUpper: ["face", "faceBridge", "torsoBridge"],
                face: ["faceBridge"]
            },
            Oe = {};
        for (var Ee in Re) {
            var Pe = Re[Ee];
            for (var xe in Pe) {
                var je = Pe[xe];
                je in Oe || (Oe[je] = []), Oe[je].push(Ee)
            }
        }
        var Te = {},
            Me = {
                humanMid: {
                    index: 0,
                    displayOrder: 1
                },
                cat: {
                    index: 1,
                    displayOrder: 3
                },
                goat: {
                    index: 2,
                    displayOrder: 6
                },
                humanMin: {
                    index: 3,
                    displayOrder: 0
                },
                humanMax: {
                    index: 4,
                    displayOrder: 2
                },
                dragon: {
                    index: 5,
                    displayOrder: 4
                },
                crescent: {
                    index: 6,
                    displayOrder: 7
                },
                w: {
                    index: 7,
                    displayOrder: 8
                },
                bead: {
                    index: 8,
                    displayOrder: 5
                }
            };
        var Ke = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = J(this, ee(t).call(this, e))).rivets = {}, n.rivetsObj = new RK.Object3D, n.rivetsObj.name = "rivets", n.add(n.rivetsObj), n.eyeTypes = Me, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && te(e, t)
            }(t, CK.Display), n = t, o = [{
                key: "IsDigitCharCode",
                value: function(e) {
                    return 48 <= e && e <= 57
                }
            }, {
                key: "SplitNumericPostfix",
                value: function(e) {
                    for (var n = e.length; n > 0 && t.IsDigitCharCode(e.charCodeAt(n - 1));) n--;
                    return [e.substr(0, n), e.substr(n)]
                }
            }, {
                key: "_snapGeometryBoundary",
                value: function(e, t, n) {
                    if (t.ckBoundaries && n.ckBoundaries) {
                        var r = null,
                            o = null;
                        for (var a in t.ckBoundaries) {
                            var i = t.ckBoundaries[a];
                            for (var s in n.ckBoundaries) {
                                var c = n.ckBoundaries[s],
                                    l = i.position.distanceTo(c.position);
                                i.edgeCount === c.edgeCount && l < .01 && (r = i, o = c)
                            }
                        }
                        if (null !== r) {
                            var u = r.triEdge,
                                f = o.triEdge,
                                h = t.attributes.position.array,
                                p = n.attributes.position.array,
                                d = t.ckSeamOriginalIndices,
                                m = n.ckSeamOriginalIndices,
                                y = t.ckSeamHalfEdge,
                                v = n.ckSeamHalfEdge,
                                b = t.index.array,
                                g = n.index.array,
                                w = -1,
                                k = 1e20,
                                S = u % 3,
                                _ = d[Math.floor(u / 3)],
                                C = b[3 * _ + S],
                                R = b[3 * _ + (S + 1) % 3],
                                O = new RK.Vec3(h[3 * C + 0], h[3 * C + 1], h[3 * C + 2]),
                                E = new RK.Vec3(h[3 * R + 0], h[3 * R + 1], h[3 * R + 2]),
                                P = 0,
                                x = function(e, t, n) {
                                    var r = e % 3;
                                    return e = t[e = 3 * Math.floor(e / 3) + (r = (r + n) % 3)]
                                },
                                j = function(e, t, n) {
                                    var r = Math.floor(e / 3),
                                        o = e % 3;
                                    for (e = 3 * r + (o = (o + n) % 3); 4294967295 !== t[e];)
                                        if (e = t[e], e = 3 * (r = Math.floor(e / 3)) + (o = ((o = e % 3) + n) % 3), P++ > 1e4) throw "Adjacency infinite loop.";
                                    return e
                                };
                            do {
                                var T = f % 3,
                                    M = m[Math.floor(f / 3)],
                                    K = g[3 * M + T],
                                    I = g[3 * M + (T + 1) % 3],
                                    N = new RK.Vec3(p[3 * K + 0], p[3 * K + 1], p[3 * K + 2]),
                                    B = new RK.Vec3(p[3 * I + 0], p[3 * I + 1], p[3 * I + 2]),
                                    A = O.distanceTo(B) + E.distanceTo(N);
                                A < k && (w = f, k = A), f = j(f, v, 1)
                            } while (f != o.triEdge);
                            f = w;
                            var L = t.ckbTotalInfluences,
                                U = n.ckbTotalInfluences,
                                D = Math.ceil(L / 4),
                                F = Math.ceil(U / 4),
                                z = Math.min(D, F),
                                V = Math.max(D, F),
                                G = ["position", "normal", "color,"],
                                q = [];
                            for (var H in G) {
                                var W = G[H];
                                if (W in t.attributes && W in n.attributes) {
                                    var Q = t.attributes[W],
                                        X = n.attributes[W];
                                    Q._needsBackup = !0, X._needsBackup = !0, Q.itemSize === X.itemSize && (e || (q.push({
                                        name: W,
                                        target: Q.array,
                                        source: n.getAttributeBackup(W).array,
                                        targetItemSize: Q.itemSize,
                                        sourceItemSize: Q.itemSize,
                                        sourceSide: 1,
                                        targetSide: 0
                                    }), Q.version++, q.push({
                                        name: W + " (reset " + n.name + ")",
                                        target: X.array,
                                        source: n.getAttributeBackup(W).array,
                                        targetItemSize: X.itemSize,
                                        sourceItemSize: X.itemSize,
                                        sourceSide: 1,
                                        targetSide: 1
                                    }), X.version++))
                                }
                            }
                            var Y = Object.assign({}, t.morphTargetDictionary);
                            Y = Object.assign(Y, n.morphTargetDictionary);
                            var Z = {
                                position: 0,
                                normal: 0
                            };
                            for (var J in Y)
                                for (var $ in Z) {
                                    var ee = null,
                                        te = null,
                                        ne = t.morphAttributes[$],
                                        re = n.morphAttributes[$];
                                    if (ne && J in t.morphTargetDictionary && (ee = ne[t.morphTargetDictionary[J]]), re && J in n.morphTargetDictionary && (te = re[n.morphTargetDictionary[J]]), ee && (ee._needsBackup = !0), te && (te._needsBackup = !0), ee && te) e || (q.push({
                                        name: J + ":" + $,
                                        target: ee.array,
                                        source: n.getAttributeBackup($, J).array,
                                        targetItemSize: ee.itemSize,
                                        sourceItemSize: ee.itemSize,
                                        sourceSide: 1,
                                        targetSide: 0
                                    }), ee.version++, q.push({
                                        name: J + ":" + $ + " (reset " + n.name + ")",
                                        target: te.array,
                                        source: n.getAttributeBackup($, J).array,
                                        targetItemSize: te.itemSize,
                                        sourceItemSize: te.itemSize,
                                        sourceSide: 1,
                                        targetSide: 1
                                    }), te.version++);
                                    else if (ee) {
                                        if (!e) {
                                            var oe = "position" === $,
                                                ae = oe ? null : n.getAttributeBackup($).array,
                                                ie = oe ? 0 : n.attributes[$].itemSize;
                                            q.push({
                                                name: J + ":" + $ + " (zero " + t.name + " side)",
                                                target: ee.array,
                                                source: ae,
                                                targetItemSize: ee.itemSize,
                                                sourceItemSize: ie,
                                                sourceSide: 1,
                                                targetSide: 0
                                            }), ee.version++
                                        }
                                    } else if (te && !e) {
                                        var se = "position" === $,
                                            ce = se ? null : n.getAttributeBackup($).array,
                                            le = se ? 0 : n.attributes[$].itemSize;
                                        q.push({
                                            name: J + ":" + $ + " (zero " + n.name + " side)",
                                            target: te.array,
                                            source: ce,
                                            targetItemSize: te.itemSize,
                                            sourceItemSize: le,
                                            sourceSide: 1,
                                            targetSide: 1
                                        }), te.version++
                                    }
                                }
                            if (["skinIndex", "skinWeight"].map((function(r) {
                                    for (var o = function(e) {
                                            var o = "".concat(r).concat(e);
                                            [t, n].map((function(e) {
                                                var t = e.attributes[o];
                                                t && (t._needsBackup = !0)
                                            }))
                                        }, a = 0; a < V; ++a) o(a);
                                    if (L >= U) {
                                        if (!e) {
                                            for (var i = 0; i < z; ++i) {
                                                var s = "".concat(r).concat(i);
                                                q.push({
                                                    name: s,
                                                    target: t.attributes[s].array,
                                                    source: n.getAttributeBackup(s).array,
                                                    targetItemSize: t.attributes[s].itemSize,
                                                    sourceItemSize: n.attributes[s].itemSize,
                                                    sourceSide: 1,
                                                    targetSide: 0
                                                }), t.attributes[s].version++, q.push({
                                                    name: s + " (reset " + n.name + ")",
                                                    target: n.attributes[s].array,
                                                    source: n.getAttributeBackup(s).array,
                                                    targetItemSize: n.attributes[s].itemSize,
                                                    sourceItemSize: n.attributes[s].itemSize,
                                                    sourceSide: 1,
                                                    targetSide: 1
                                                }), n.attributes[s].version++
                                            }
                                            for (var c = z; c < V; ++c) {
                                                var l = "".concat(r).concat(c);
                                                q.push({
                                                    name: l + " (zero " + t.name + " side)",
                                                    target: t.attributes[l].array,
                                                    source: null,
                                                    targetItemSize: t.attributes[l].itemSize,
                                                    sourceItemSize: 0,
                                                    sourceSide: 0,
                                                    targetSide: 0
                                                }), t.attributes[l].version++
                                            }
                                        }
                                    } else if (!e) {
                                        for (var u = 0; u < z; ++u) {
                                            var f = "".concat(r).concat(u);
                                            q.push({
                                                name: f,
                                                target: n.attributes[f].array,
                                                source: t.getAttributeBackup(f).array,
                                                targetItemSize: n.attributes[f].itemSize,
                                                sourceItemSize: t.attributes[f].itemSize,
                                                sourceSide: 0,
                                                targetSide: 1
                                            }), n.attributes[f].version++, q.push({
                                                name: f + " (reset " + t.name + ")",
                                                target: t.attributes[f].array,
                                                source: t.getAttributeBackup(f).array,
                                                targetItemSize: t.attributes[f].itemSize,
                                                sourceItemSize: t.attributes[f].itemSize,
                                                sourceSide: 0,
                                                targetSide: 0
                                            }), t.attributes[f].version++
                                        }
                                        for (var h = z; h < V; ++h) {
                                            var p = "".concat(r).concat(h);
                                            q.push({
                                                name: p + " (zero " + n.name + " side)",
                                                target: n.attributes[p].array,
                                                source: null,
                                                targetItemSize: n.attributes[p].itemSize,
                                                sourceItemSize: 0,
                                                sourceSide: 1,
                                                targetSide: 1
                                            }), n.attributes[p].version++
                                        }
                                    }
                                })), !e) {
                                var ue = function(e, t, n, r, o, a, i, s, c, l, u) {
                                        for (; 4294967295 !== n;) {
                                            for (var f = n % 3, h = a[3 * o[Math.floor(n / 3)] + (f + s) % 3], p = 0; p < u; ++p) e[h * t + p] = c[l + p];
                                            for (; p < t; ++p) e[h * t + p] = 0;
                                            n = x(n, r, i)
                                        }
                                    },
                                    fe = u;
                                do {
                                    var he = Math.floor(u / 3),
                                        pe = Math.floor(f / 3),
                                        de = u % 3,
                                        me = f % 3,
                                        ye = d[he],
                                        ve = m[pe],
                                        be = b[3 * ye + (de + 0) % 3],
                                        ge = g[3 * ve + (me + 1) % 3];
                                    for (var we in q) {
                                        var ke = q[we];
                                        ue(ke.target, ke.targetItemSize, 0 === ke.targetSide ? u : f, 0 === ke.targetSide ? y : v, 0 === ke.targetSide ? d : m, 0 === ke.targetSide ? b : g, 0 === ke.targetSide ? 2 : 1, ke.targetSide, ke.source, (0 === ke.sourceSide ? be : ge) * ke.sourceItemSize, ke.sourceItemSize)
                                    }
                                    u = j(u, y, 1), f = j(f, v, 2)
                                } while (u !== fe)
                            }
                        }
                    }
                }
            }], (r = [{
                key: "_customUpdateEnd",
                value: function() {
                    this._addRivets(), this._backHierarchy(), this._parentAttachParts(), this._horns(), this._modifyAttributes()
                }
            }, {
                key: "_collapseMultiArm",
                value: function(e) {
                    var t = this.meshes,
                        n = t.bodyUpper0,
                        r = t.bodyUpper1,
                        o = t.chest0,
                        a = t.chest1,
                        i = new RK.Vec3(-.3779, 2.3629, -.1365),
                        s = new RK.Vec3(.3779, 2.3629, -.1365),
                        c = !1;
                    return n && [n, o, r, a].map((function(t) {
                        if (t) {
                            c |= !t.multiArmCollapse;
                            var n = t.geometry,
                                r = n.attributes,
                                o = r.position,
                                a = r.skinWeight0,
                                l = r.skinIndex0,
                                u = r.skinWeight1;
                            if (o._needsBackup = !0, a._needsBackup = !0, l._needsBackup = !0, u && (u._needsBackup = !0), e) return;
                            t.multiArmCollapse = !0;
                            var f = r.position.count,
                                h = o.array,
                                p = a.array,
                                d = l.array,
                                m = u && u.array;
                            n.cullVerts = n.cullVerts && n.cullVerts.length === f && n.cullVerts || new Uint8Array(f);
                            for (var y = n.cullVerts, v = 0; v < f; v++) {
                                var b = h[3 * v] < s.x && h[3 * v] > i.x;
                                y[v] = b ? 1 : 0, b && (h[3 * v] = 0, h[3 * v + 1] = 2.58, h[3 * v + 2] = -.127, d[4 * v] = 186, p[4 * v] = 1, p[4 * v + 1] = 0, p[4 * v + 2] = 0, p[4 * v + 3] = 0, m && (m[4 * v] = 0, m[4 * v + 1] = 0, m[4 * v + 2] = 0, m[4 * v + 3] = 0))
                            }
                        }
                    })), c
                }
            }, {
                key: "_modifyAttributes",
                value: function() {
                    var e = !1;
                    if (e |= this._collapseMultiArm(!0), e |= this._faceFeatures(!0), e |= this._blendShapeSkinningFix(!0), e |= this._meshPairs(!0), e |= this._snapBoundaries(!0)) {
                        for (var t in this.meshes) {
                            var n = this.meshes[t];
                            if (n) {
                                var r = n.geometry;
                                if (r) {
                                    for (var o in r.attributes) r.attributes[o]._needsBackup && (r.prepareAttributeForEdit(o), r.attributes[o].needsUpdate = !0);
                                    for (var a in r.morphAttributes) {
                                        var i = r.morphAttributes[a];
                                        for (var s in r.morphTargetDictionary) {
                                            var c = r.morphTargetDictionary[s];
                                            i[c]._needsBackup && (r.prepareAttributeForEdit(a, s), i[c].needsUpdate = !0)
                                        }
                                    }
                                }
                            }
                        }
                        for (var l in this._collapseMultiArm(), this._faceFeatures(), this._blendShapeSkinningFix(), this._meshPairs(), this._snapBoundaries(), this.meshes) {
                            var u = this.meshes[l];
                            if (u) {
                                var f = u.geometry;
                                if (f)
                                    for (var h in f.attributes) {
                                        var p = f.attributes[h];
                                        p._needsBackup && (p._needsBackup = !1, p.needsUpdate = !0)
                                    }
                            }
                        }
                    }
                }
            }, {
                key: "_centaur",
                value: function() {
                    var e = this,
                        t = this.getBone("centaur_pelvis_end_510_bind_jnt", "bodyLower"),
                        n = this.getBone("tail_attach_500_bind_jnt", "tail"),
                        r = this.getBone("main_tail_snap_389_bind_jnt", "bodyUpper");
                    if (this.getBone("main_hips_holding_006_bind_jnt", "bodyUpper"), t) {
                        if (n) {
                            t ? this.reParent(n, t, "tail") : r ? r.add(n) : console.error("No tail parents found..");
                            var o = this.modded.custom.tails || 0;
                            if (o > 0)
                                for (var a = this.meshes.tail.geometry.mixerBones.findIndex((function(e) {
                                        return 500 === e.boneID
                                    })), i = 0; i < o; i++) {
                                    var s = this.meshes["tail" + i].geometry.mixerBones[a];
                                    t ? this.reParent(s, t, "tail" + i) : r && r.add(s)
                                }
                        }
                        var c = this.getBone("centaur_height_502_bind_jnt", "bodyLower"),
                            l = this.data.sliders.height;
                        if (l < .375) {
                            var u = this.rangeThis_rangeThat(l, 0, .375, .8, 1);
                            c.scale.set(u, u, u)
                        } else {
                            var f = this.rangeThis_rangeThat(l, .375, 1, 1, 1.45);
                            c.scale.set(f, f, f)
                        }
                        var h = this.data.sliders.curves;
                        if (h >= .5) {
                            var p = this.rangeThis_rangeThat(h, .5, 1, 1, 1.2);
                            ve[0].map((function(t) {
                                e.getBone(t, "bodyLower").scale.set(1, 1, p)
                            }))
                        }
                        var d = this.data.sliders.weightLower;
                        d >= .5 ? (be[0].map((function(t) {
                            var n = e.rangeThis_rangeThat(d, .5, 1, 1, 1.1);
                            e.getBone(t, "bodyLower").scale.set(1, n, n)
                        })), be[1].map((function(t) {
                            var n = e.rangeThis_rangeThat(d, .5, 1, 1, 1.2),
                                r = e.rangeThis_rangeThat(d, .5, 1, 1, 1.1);
                            e.getBone(t, "bodyLower").scale.set(1, r, n)
                        })), be[2].map((function(t) {
                            var n = e.rangeThis_rangeThat(d, .5, 1, 1, 1.1);
                            e.getBone(t, "bodyLower").scale.set(1, 1, n)
                        })), be[3].map((function(t) {
                            var n = e.rangeThis_rangeThat(d, .5, 1, 1, 1.2);
                            e.getBone(t, "bodyLower").scale.set(1, 1, n)
                        }))) : [0, 1, 3].map((function(t) {
                            be[t].map((function(t) {
                                var n = e.rangeThis_rangeThat(d, 0, .5, .9, 1);
                                e.getBone(t, "bodyLower").scale.set(1, 1, n)
                            }))
                        }));
                        var m = this.data.sliders.weighTorso;
                        m >= .5 && (ge[0].map((function(t) {
                            var n = e.rangeThis_rangeThat(m, .5, 1, 1, 1.3),
                                r = (e.rangeThis_rangeThat(m, .5, 1, 1, 1.3), e.rangeThis_rangeThat(m, .5, 1, 1, 1.2));
                            e.getBone(t, "bodyLower").scale.set(1, n, r)
                        })), ge[1].map((function(t) {
                            var n = e.rangeThis_rangeThat(m, .5, 1, 1, 1.1);
                            e.getBone(t, "bodyLower").scale.set(1, n, n)
                        })));
                        var y = this.data.sliders.belly || 0;
                        we[0].map((function(t) {
                            var n = e.rangeThis_rangeThat(y, 0, 1, 1, 1.2);
                            e.getBone(t, "bodyLower").scale.set(1, n, n)
                        })), we[1].map((function(t) {
                            var n = e.rangeThis_rangeThat(y, 0, 1, 1, 1.3);
                            e.getBone(t, "bodyLower").scale.set(1, n, 1)
                        }));
                        var v = this.data.sliders.waist;
                        v >= .5 ? [0, 1].map((function(t) {
                            ke[t].map((function(t) {
                                var n = e.rangeThis_rangeThat(v, .5, 1, 1, 1.1);
                                e.getBone(t, "bodyLower").scale.set(1, n, n)
                            }))
                        })) : ke[0].map((function(t) {
                            var n = e.rangeThis_rangeThat(v, 0, .5, .8, 1);
                            e.getBone(t, "bodyLower").scale.set(1, n, 1)
                        }))
                    }
                }
            }, {
                key: "rangeThis_rangeThat",
                value: function(e, t, n, r, o) {
                    return (o - r) / (n - t) * (e - t) + r
                }
            }, {
                key: "_familiar",
                value: function() {
                    var e = this.meshes.baseItem;
                    if (this.modded.poses.baseItem && e && e.skeleton) {
                        var t = {
                            cat: "cat_worldSnap_500_bind_jnt",
                            badger: "badger_worldSnap_500_bind_jnt",
                            squirrel: "baseItem_squirrel_worldSnap_518_bind_jnt",
                            babyPenguin: "penguin_worldSnap_500_bind_jnt"
                        }[this.meshes.baseItem.part.name];
                        if (t) {
                            var n = this.getBone(388) || console.error("main_baseItem_snap_388_bind_jnt not found for familiar snap"),
                                r = this.getBone(t, "baseItem") || console.error(t, " not found for familiar snap");
                            r && n && (r.position.copy(n.position), r.rotation.copy(n.rotation))
                        }
                    }
                }
            }, {
                key: "_updateBackScale",
                value: function() {
                    var e = this.rivets.backAttach;
                    if (e && !(CK.Settings.forge && this.data.userSaveVersion <= 1.6)) {
                        var t = e.children[0];
                        if (t) {
                            var n = this.extraXLScale() / e.scale.x;
                            t.scale.set(n, n, n)
                        }
                    }
                }
            }, {
                key: "_backHierarchy",
                value: function() {
                    var e = this,
                        t = this.rivets.backAttach;
                    if (!t) return this.meshes.backItemR && console.error("Must have centerBack rivet in scene for back item");
                    this._backAttachRivet = t;
                    var n = this.extraXLScale();
                    t.scale.set(n, n, n);
                    var r = this.getMeshLocator("backItemR", "attachLayer");
                    if (this.meshes.backItemR) {
                        if (!r) {
                            r = new RK.Object3D;
                            var o = this.getMeshLocator("backItemR", "attach_radius");
                            r.position.x = o ? o.position.xz.length() : .08, this.meshes.backItemR.locators || (this.meshes.backItemR.locators = {}), this.meshes.backItemR.add(r), this.meshes.backItemR.locators.attachLayer = r
                        }
                        r.origQuat || (r.origQuat = r.quaternion.clone());
                        var a = new RK.Quaternion(0, 0, 1, 0);
                        r.quaternion.multiplyQuaternions(r.origQuat, a)
                    }
                    for (; t.children.length;) t.remove(t.children[0]);
                    if (r)
                        for (; r.children.length;) r.remove(r.children[0]);
                    var i = new RK.Object3D;
                    t.add(i), this._updateBackScale(), ["R", "L"].map((function(t, n) {
                        var o = "backItem" + t,
                            a = e.meshes[o];
                        if (a) {
                            var s = !!n,
                                c = e.getLocator(o, "koozie"),
                                l = new RK.Object3D;
                            l.add(a), c && (a.position.copy(c.position.clone().negate()), l.quaternion.copy(c.quaternion.clone().inverse()));
                            var u = new RK.Bone,
                                f = e.getMeshLocator(o, "attach");
                            if (f && c && console.error("attach and koozie found for", o), !f) {
                                f = new RK.Bone;
                                var h = e.getMeshLocator(o, "attach_radius");
                                f.position.x = s ? h ? h.position.xz.length() : .08 : h ? -h.position.xz.length() : -.08
                            }
                            var p = new RK.Bone;
                            p.name = "backItem".concat(t, "_transform_jnt");
                            var d = f.clone();
                            s && !e.meshes.backItemR && d.rotateOnAxis(new RK.Vec3(0, 0, 1), Math.PI);
                            var m = -Math.PI / 6;
                            s && (m *= r ? 2 : -1);
                            var y = (new RK.Quaternion).setFromAxisAngle(new RK.Vec3(1, 0, 0), m);
                            d.quaternion.multiply(y), d.quaternion.inverse();
                            var v = new RK.Object3D;
                            v.position.copy(f.position.clone().negate());
                            var b = e.meshes["itemBind" + t];
                            if (b) {
                                "connect" !== b.part.name ? b.position.y = f.position.y : (b.position.copy(f.position), b.rotation.copy(f.rotation), b.scale.copy(f.scale)), v.add(b);
                                var g = e.getLocator(o, "attach_depth"),
                                    w = e.getLocator(o, "attach_width");
                                g && CK.Display.setMorph(b, "depth", g.position.xz.length() / .1 - 1), w && CK.Display.setMorph(b, "width", w.position.xz.length() / .1 - 1)
                            }
                            var k = e.meshes["backItemAttach" + t];
                            k && a.add(k), !s && r && v.add(r);
                            var S = s && r ? r : i;
                            v.add(u), p.add(v), u.add(l), S.add(p);
                            var _ = d.quaternion.clone();
                            u.poses = {
                                rot: u.quaternion.toArray(),
                                pos: u.position.toArray()
                            }, u.name = "backItem".concat(t, "_twist_transform_jnt"), p.poses = {
                                rot: _.toArray()
                            }, p.quaternion.copy(_)
                        }
                    }))
                }
            }, {
                key: "_parentAttachParts",
                value: function() {
                    for (var e in this.modded.attachParts) {
                        var t = this.meshes[e],
                            n = this.modded.attachParts[e],
                            r = (n.part, n.targetPart, n.slot),
                            o = n.rivetName;
                        if (t) {
                            var a = r + "_" + o,
                                i = this.rivets[a];
                            i ? i.add(t) : console.error("Rivet", a, "not found. Should not have gotten this far.")
                        } else console.error("What happened to mesh for", e)
                    }
                }
            }, {
                key: "_horns",
                value: function() {
                    var e = this;
                    for (var t in this.meshes)
                        if (t.startsWith("horn")) {
                            var n = this.meshes[t],
                                r = n.geometry;
                            if (r && r.locators && r.locators.pivot) {
                                var o = function() {
                                    var o = r.locators.pivot,
                                        a = e.rivets[t] || console.warn("Missing horn rivet", t);
                                    if (!a) {
                                        var i = e.getBone("main_head_01_001_bind_jnt");
                                        if (!i) return {
                                            v: console.error("Can not attach horns, missing main_head_01_001_bind_jnt")
                                        };
                                        var s = t + "_jnt";
                                        if (!(a = i.getObjectByName(s))) {
                                            (a = new RK.Bone).name = s;
                                            var c, l = he[t];
                                            if (!l) return {
                                                v: console.error("No default horn rivet", s)
                                            };
                                            (c = a.position).set.apply(c, Y(l)), a.rotation.y = Math.PI, a.rotation.x = Math.PI / 2, a.rotation.z = Math.PI / 2, i.add(a)
                                        }
                                    }
                                    a.children.map((function(e) {
                                        return a.remove(e)
                                    })), o.children.map((function(e) {
                                        return o.remove(e)
                                    })), a.add(o), o.add(n), "hornBack" === t && e.meshes.supportBackHorn && o.add(e.meshes.supportBackHorn), o.poses ? e.modded.transforms[t] || (o.position.fromArray(o.poses.pos), o.quaternion.fromArray(o.poses.rot), o.scale.set(1, 1, 1)) : (t.endsWith("L") && (o.rotation.x += Math.PI), o.poses = {
                                        rot: o.quaternion.toArray(),
                                        pos: o.position.toArray(),
                                        scl: [1, 1, 1]
                                    }, o.name = "".concat(t, "_pivot_jnt"))
                                }();
                                if ("object" === X(o)) return o.v
                            } else console.error("Missing horn pivot for", n.part.name)
                        }
                }
            }, {
                key: "_faceFeatures",
                value: function(e) {
                    var t = this.modded.custom.face,
                        n = this.meshes.face && "humanoid" === this.meshes.face.part.name && this.meshes.face.geometry;
                    if (t && n) {
                        var r = JSON.stringify(t),
                            o = n.attributes.position,
                            a = o.array;
                        if (e) return o._needsBackup = !0, !n.faceData || r !== n.faceData;
                        n.faceData = r;
                        var i = [],
                            s = [];
                        for (var c in t) {
                            var l = n.morphTargetDictionary[c + "_" + t[c]];
                            i.push(n.morphAttributes.position[l].array), s.push(n.morphAttributes.normal[l].array)
                        }
                        for (var u = n.getAttributeBackup("position").array, f = function(e) {
                                var t = u[e];
                                i.map((function(n) {
                                    return t += n[e]
                                })), a[e] = t
                            }, h = 0; h < a.length; h++) f(h)
                    }
                }
            }, {
                key: "_blendShapeSkinningFix",
                value: function(e) {
                    var t = !1;
                    for (var n in ye) {
                        var r = this.meshes[n];
                        if (r) {
                            var o = r.geometry,
                                a = r.skeleton;
                            if (o.morphTargetDictionary) {
                                var i = {};
                                for (var s in ye[n])
                                    if (s in o.morphTargetDictionary) {
                                        var c = o.morphTargetInfluences[o.morphTargetDictionary[s]];
                                        c > 0 && (i[s] = c)
                                    }
                                var l = Object.keys(i).length,
                                    u = l ? JSON.stringify(i) : void 0;
                                t |= u !== o.morphSkinFixKey;
                                for (var f = o.attributes, h = o.morphAttributes, p = o.skinInfluenceCount / 4, d = [], m = [], y = 0; y < p; y++) {
                                    var v = "skinIndex" + y,
                                        b = "skinWeight" + y,
                                        g = o.attributes[v],
                                        w = o.attributes[b];
                                    g._needsBackup = !0, w._needsBackup = !0, w.needsUpdate = !0, g.needsUpdate = !0, d.push(g.array), m.push(w.array)
                                }
                                if (!e && (o.morphSkinFixKey = u, l)) {
                                    var k = f.position.array.length / 3;
                                    for (var S in i)
                                        for (var _ = h.position[o.morphTargetDictionary[S]].array, C = ye[n][S], R = this.getBone(C, n) || console.error("Could not find bone needed for morph fix", C), O = a.bones.indexOf(R) || console.error("Could not find index of bone", C), E = 0; E < k; E++)
                                            if (Q(RK.Vec3, Y(_.slice(3 * E, 3 * E + 3))).length() > .005)
                                                for (var P = 0; P < p; P++) {
                                                    var x = d[P],
                                                        j = m[P];
                                                    j[4 * E] = 1 - P, x[4 * E] = O;
                                                    for (var T = 1; T < 4; T++) j[4 * E + T] = 0, x[4 * E + T] = O
                                                }
                                }
                            }
                        }
                    }
                    return t
                }
            }, {
                key: "_meshPairs",
                value: function(e) {
                    var t = {
                            bodyUpper: {
                                chest: {},
                                chestOuter: {},
                                glovesL: {},
                                glovesR: {}
                            },
                            bodyUpper0: {
                                chest0: {},
                                chestOuter0: {},
                                glovesL0: {},
                                glovesR0: {}
                            },
                            bodyUpper1: {
                                chest1: {},
                                chestOuter1: {},
                                glovesL1: {},
                                glovesR1: {}
                            },
                            bodyLower: {
                                legs: {}
                            },
                            chest: {
                                chestOuter: {}
                            }
                        },
                        n = !1;
                    for (var r in t) {
                        var o = t[r];
                        n |= this._hidePerVertex(e, r, o)
                    }
                    return n
                }
            }, {
                key: "_hidePerVertex",
                value: function(e, n, r) {
                    var o = this,
                        a = this.meshes[n];
                    if (!a) return !1;
                    var i = a.geometry;
                    if (!i) return !1;
                    var s = i.attributes.position;
                    s._needsBackup = !0;
                    var c = !!s._hidePerVertex,
                        l = i.morphTargetDictionary && i.morphTargetDictionary.hide,
                        u = void 0 !== l && i.morphAttributes.position[l],
                        f = u && u.array;
                    if (!f) {
                        var h = Object.keys(r).map((function(e) {
                            var r = o.meshes[e];
                            if (!r) return null;
                            if (!r || !r.geometry) return null;
                            var i = a.pairs && a.pairs[e];
                            if (!i) return null;
                            var s = H(t.SplitNumericPostfix(n), 1)[0],
                                c = i.slots[s].attributes.hideDeltas;
                            return c ? c.array : null
                        })).filter((function(e) {
                            return !!e
                        }));
                        h.length && (f = h[0])
                    }
                    if (!f) return c;
                    var p = Math.floor(f.length / 3);
                    e || (s._hidePerVertex = null);
                    var d = Object.keys(r).map((function(e) {
                            var r = o.meshes[e];
                            if (!r) return null;
                            var i = r && r.geometry;
                            if (!i) return null;
                            var s = a.pairs && a.pairs[e];
                            if (!s) return null;
                            var c = H(t.SplitNumericPostfix(n), 1)[0],
                                l = s.slots[c].attributes.hidePerVertex;
                            if (!l) return null;
                            var u = l.array;
                            return u.length !== p ? null : {
                                weights: u,
                                uuid: i.uuid
                            }
                        })).filter((function(e) {
                            return !!e
                        })),
                        m = d.reduce((function(e, t) {
                            return e + t.uuid
                        }), "");
                    if (e) return s._hidePerVertex = s._hidePerVertex || "", s._hidePerVertex !== m;
                    var y = s.array;
                    s._hidePerVertex = m;
                    var v = d.map((function(e) {
                            return e.weights
                        })),
                        b = v.length;
                    if (0 !== b)
                        for (var g = 0; g < p; ++g) {
                            for (var w = 0, k = 0; k < b; ++k) w += v[k][g];
                            w /= 255, w = Math.min(Math.max(w, 0), 1);
                            for (var S = 0; S < 3; ++S) {
                                var _ = 3 * g + S,
                                    C = f[_] * w;
                                y[_] += C
                            }
                        }
                }
            }, {
                key: "armHasIK",
                value: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                        t = e ? "main_armL_01_012_bind_jnt" : "main_armR_01_099_bind_jnt";
                    return !(!this.modded.ikChains.length || !this.modded.ikChains.find((function(e) {
                        return e.chain.find((function(e) {
                            return e === t
                        }))
                    })))
                }
            }, {
                key: "_customUpdateStart",
                value: function() {
                    for (var e = this.modded.custom.arms || 0, t = 0; t < 8; t++) {
                        var n = "main_" + t;
                        if (e > t) {
                            if (!this.skeletons[n]) {
                                this.skeletons[n] = new CK.MixerSkeleton, this.skeletons[n].skeletonSlot = n, this.add(this.skeletons[n].obj);
                                var r = CK.Resources.getNow(this.skeletonPath);
                                this.skeletons[n].addMainSkel(r.copyWithSharing(), "skeleton"), this.add(this.skeletons[n].obj)
                            }
                        } else this.skeletons[n] && (this.remove(this.skeletons[n].obj), delete this.skeletons[n])
                    }
                }
            }, {
                key: "_hasAdvancedPosing",
                value: function() {
                    var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0],
                        t = !1;
                    for (var n in this.data.transforms) {
                        t = !0;
                        break
                    }
                    if (e)
                        for (var r in this.data.modded.transforms) {
                            t = !0;
                            break
                        }
                    return t
                }
            }, {
                key: "_applyIk",
                value: function() {
                    $(ee(t.prototype), "_applyIk", this).call(this), this.BasePoseTweaks || (this.BasePoseTweaks = {});
                    var e = 18 === this.modded.poses.main.pose_id,
                        n = !this.data.parts.itemL,
                        r = this._hasAdvancedPosing();
                    if (e && n && !r) {
                        var o = ["main_armL_01_012_bind_jnt", "main_armL_03_017_bind_jnt", "main_handL_01_offset_063_bind_jnt"],
                            a = o[o.length - 1],
                            i = this.skeletons.main;
                        i.applyIk(o, a, (function(e, t) {
                            t.setFromMatrixPosition(e.matrixWorld), t.y = .2778
                        }), this.enableIkDebug);
                        var s = ["main_armL_02_014_bind_jnt", "main_armL_03_017_bind_jnt"].map((function(e) {
                            return i.obj.getObjectByName(e).quaternion
                        }));
                        s[0].slerp(s[1], .5), s[1].copy(s[0]);
                        for (var c = {
                                bodyUpper: {}
                            }, l = 0, u = ["main_armL_01_012_bind_jnt", "main_armL_02_014_bind_jnt", "main_armL_03_017_bind_jnt", "main_handL_01_offset_063_bind_jnt"]; l < u.length; l++) {
                            var f = u[l],
                                h = i.obj.getObjectByName(f);
                            c.bodyUpper[h.boneID] = {
                                qtn: h.quaternion.toSimple()
                            }
                        }
                        this.BasePoseTweaks.pose18IkLeftArm = c
                    } else this.BasePoseTweaks.pose18IkLeftArm && (this._hasAdvancedPosing(!1) || !n || !e) && delete this.BasePoseTweaks.pose18IkLeftArm
                }
            }, {
                key: "bakeCodePosingIntoTransforms",
                value: function(e) {
                    var t = this.BasePoseTweaks;
                    if (t) {
                        var n = e;
                        for (var r in t) {
                            var o = t[r];
                            for (var a in o) {
                                var i = o[a];
                                for (var s in i) {
                                    var c = i[s];
                                    for (var l in c) {
                                        n[a] || (n[a] = {});
                                        var u = n[a];
                                        u[s] || (u[s] = {});
                                        var f = u[s];
                                        f[l] || (f[l] = c[l])
                                    }
                                }
                            }
                        }
                    }
                }
            }, {
                key: "_applyJointWeights",
                value: function() {
                    $(ee(t.prototype), "_applyJointWeights", this).call(this), this._applyArmSliders(this.modded.jointWeights.default)
                }
            }, {
                key: "_applyJointWeight",
                value: function(e, n) {
                    $(ee(t.prototype), "_applyJointWeight", this).call(this, e, n), this._applyArmSliders(n)
                }
            }, {
                key: "_applyArmSliders",
                value: function(e) {
                    if (this.modded.custom.arms)
                        for (var t = 0; t < this.modded.custom.arms; t++) {
                            var n = "main_" + t,
                                r = this.skeletons[n];
                            for (var o in e) o in r.sliders && r.setSlider(o, o in Ce ? e[o] + Ce[o] : 0)
                        }
                }
            }, {
                key: "getWorldPos",
                value: function(e) {
                    var t = new RK.Vec3;
                    return t.setFromMatrixPosition(e.matrixWorld), t
                }
            }, {
                key: "_customSliders",
                value: function() {
                    this.skeletons.main.setSlider("bulkSkirtDef", .15 * this.data.sliders.weighTorso + .85 * this.data.sliders.weightLower)
                }
            }, {
                key: "_applyAnimationConstraints",
                value: function() {
                    this.allPoses(), this.modded.poses.main && this["pose".concat(this.modded.poses.main.pose_id)] && this["pose".concat(this.modded.poses.main.pose_id)]()
                }
            }, {
                key: "allPoses",
                value: function() {
                    this.skeletons.main.obj.position.set(0, 0, 0), this._baseItemB(), this._centaur(), this._familiar(), this.updateMatrixWorld(!0), this._arms(), this._tails(), this._ground(), this._characterGrounding(), this._elbow(), this._tag(), this._label(), this._neck(), this._items(), this._height(), this._shoulders(), this._hair(), this._motorbike(), this.updateMatrixWorld(!0), this._head()
                }
            }, {
                key: "_elbow",
                value: function() {
                    var e = this;
                    le.map((function(t) {
                        var n = e.meshes[t];
                        n && ne.map((function(t) {
                            var r = e.getBoneFromID(n, t[0]),
                                o = e.getBoneFromID(n, t[1]),
                                a = (r.rotation.y + o.rotation.y) / 2;
                            r.rotation.y = a, o.rotation.y = a
                        }))
                    }))
                }
            }, {
                key: "_arms",
                value: function() {
                    var e = this,
                        t = this.modded.custom.arms || 0,
                        n = function(t, n) {
                            var r = e.skeletons[t];
                            r && ue.map((function(t) {
                                var o = r.obj.getObjectByName(t),
                                    a = r.getRot(o);
                                o.rotation.z = a.z + n.z, 60 !== e.modded.poses.main.pose_id && (o.rotation.y = a.y + n.y)
                            }))
                        };
                    1 === t ? n("main_0", new RK.Vec3(0, .18, -.4)) : 2 === t && (n("main", new RK.Vec3(0, .2, .6)), n("main_1", new RK.Vec3(0, .18, -.4)));
                    for (var r = 0; r < t; r++) {
                        var o = r ? "main_" + r : "main",
                            a = this.skeletons[o];
                        this.meshes.bodyUpper && a.obj.position.copy(this.meshes.bodyUpper.skeleton.obj.position)
                    }[178, 181, 183, 227, 186, 187, 380, 34, 37, 39, 90, 121, 176, 124, 4].map((function(t) {
                        if (e.meshes.bodyUpper0) {
                            var n = e.getBone(t, "bodyUpper0");
                            n.scale.set(0, 0, 0), n.position.set(0, 0, 0)
                        }
                        if (e.meshes.bodyUpper1) {
                            var r = e.getBone(t, "bodyUpper1");
                            r.scale.set(0, 0, 0), r.position.set(0, 0, 0)
                        }
                    }))
                }
            }, {
                key: "_tails",
                value: function() {
                    var e = this,
                        t = this.modded.custom.tails || 0;
                    if (t) {
                        var n = function() {
                            var n = e.skeletons.main,
                                r = n.addons,
                                o = n.currentPoses.A1;
                            if (o)
                                for (var a = 0; a < t; a++) {
                                    var i = "tail" + a;
                                    r[i] && r[i].bones.map((function(e) {
                                        var t = o[e.name];
                                        t && n.refreshBone(!1, e, t)
                                    }))
                                }
                            var s = e.meshes.tail;
                            if (!t || !s) return {
                                v: void 0
                            };
                            var c = new RK.Vec2(.55, 0),
                                l = 2 * Math.PI / t,
                                u = e.getBone(500, "tail"),
                                f = s.geometry.mixerBones.findIndex((function(e) {
                                    return 500 === e.boneID
                                }));
                            if (!f) return console.error("Root bone not found in tail geo"), {
                                v: void 0
                            };
                            for (var h = 0; h < t; h++) {
                                var p = "tail" + h;
                                c.rotateAround(new RK.Vec2(0, 0), l);
                                var d = e.meshes[p].geometry.mixerBones[f];
                                d ? (d.rotation.x = u.rotation.x + c.x, d.rotation.z = u.rotation.z + c.y) : console.error("Where is tail root in", p), e.meshes.bodyUpper && n.obj.position.copy(e.meshes.bodyUpper.skeleton.obj.position)
                            }
                        }();
                        if ("object" === X(n)) return n.v
                    }
                }
            }, {
                key: "_characterGrounding",
                value: function() {
                    this.skeletons.main.obj.position.y = 0, this.isPose("corpse") || (this.meshes.feetR && !this.hasKey("feetR", "noSole") && (this.skeletons.main.obj.position.y += .01), this.meshes.feetL && !this.hasKey("feetL", "noSole") && (this.skeletons.main.obj.position.y += .01))
                }
            }, {
                key: "_ground",
                value: function() {
                    var e = this.meshes,
                        t = e.base,
                        n = e.baseRim,
                        r = e.baseCollision,
                        o = this.getBaseTopperOffset();
                    t && (t.position.y = -o), n && (n.position.y = -o), r && (r.position.y = -o), this.primary && (CK.environment.groundGroup.position.y = this.getGroundPositionY())
                }
            }, {
                key: "getGroundPositionY",
                value: function() {
                    var e = this.meshes,
                        t = e.base,
                        n = e.baseRim;
                    return t || n ? -this.getBaseTopperOffset() - .21 : 0
                }
            }, {
                key: "getBaseTopperOffset",
                value: function() {
                    var e = this.meshes.base;
                    return e && e.geometry.locators && e.geometry.locators.ground ? e.geometry.locators.ground.position.y : 0
                }
            }, {
                key: "getClip",
                value: function() {
                    return this.hasKey("base", ["slotBase", "initiative", "feetRotateBase"]) || !this.meshes.base && !this.meshes.baseRim ? -99 : this.getGroundPositionY()
                }
            }, {
                key: "_tag",
                value: function() {
                    var e = this.meshes.tagNumber;
                    if (e && (this.meshes.baseRim || this.meshes.base))
                        if (e.rotation.set(Math.PI / 2, 0, 0), this.hasKey("base", ["slotBase", "initiative"])) {
                            var t = this.hasKey("base", "slotBase") ? -.32 : -.12;
                            e.position.set(0, t, 0);
                            var n = this.getBone("initBase_anim_501_bind_jnt", "base") || console.error("initBase_anim_501_bind_jnt not found!");
                            n && n.add(e)
                        } else e.position.set(0, -this.getBaseTopperOffset() - .12, -.85);
                    var r = this.meshes.tag;
                    if (r && e)
                        if (r.add(e), e.rotation.set(Math.PI / 2, 0, Math.PI / 2), e.position.set(0, -.22, 0), this.meshes.bodyLower && this.meshes.bodyLower.part.keywords.digi) {
                            var o = this.getBone("main_dgLeg_R_toe_base_341_bind_jnt"),
                                a = this.getBone("main_dgLeg_L_toe_base_328_bind_jnt");
                            o && a ? this.getWorldPos(o).y < this.getWorldPos(a).y ? (r.position.set(0, .05, 0), r.rotation.set(0, Math.PI / 2, Math.PI), o.add(r)) : (r.position.set(0, -.05, 0), r.rotation.set(0, Math.PI / 2, 0), a.add(r)) : console.warn("Missing tag attach")
                        } else if (this.meshes.bodyLower && this.meshes.bodyLower.part.keywords.centaur) {
                        var i = this.getBone("centaur_ft_legR_toe_end_526_bind_jnt", "bodyLower") || console.error("Could not find centaur_ft_legR_toe_end_526_bind_jnt");
                        r.position.set(0, 0, 0), r.rotation.set(Math.PI / 2, 0, -Math.PI / 2), i.add(r)
                    } else {
                        var s = this.getBone("main_ankleR_01_height_098_bind_jnt"),
                            c = this.getBone("main_ankleL_01_height_011_bind_jnt");
                        s && c ? this.getWorldPos(s).y < this.getWorldPos(c).y ? (r.position.set(-.179, 0, -.0296), r.rotation.z = -Math.PI / 2, s.add(r)) : (r.position.set(.179, 0, .0296), r.rotation.z = Math.PI / 2, c.add(r)) : console.warn("Missing tag attach")
                    }
                }
            }, {
                key: "_label",
                value: function() {
                    var e = this.meshes.label;
                    e && ("solid" === e.part.baseName ? this.meshes.baseRim && (e.position.copy(this.meshes.baseRim.position), e.rotation.set(0, 0, 0)) : this.hasKey("base", "initiative") ? (this.getBone("initBase_clipFt_502_bind_jnt", "base").add(e), e.position.set(0, -1.2, .25), e.rotation.x = 0) : (e.position.set(0, -this.getBaseTopperOffset() - .12, this.hasKey("baseRim", "shiftLabel") ? 1.23 : 0), e.rotation.x = "solid" === e.part.baseName ? 0 : Math.PI / 2));
                    var t = this.meshes.initiativeBack;
                    if (t) {
                        t.position.set(0, -.8, -.25), t.rotation.y = Math.PI;
                        var n = this.getBone("initBase_clipBk_503_bind_jnt", "base");
                        n ? n.add(t) : console.error("Clip base back text target is missing?")
                    }
                }
            }, {
                key: "_neck",
                value: function() {
                    var e = this;
                    [ae, oe].map((function(t) {
                        t.bones.map((function(n) {
                            var r = e.getBone(n),
                                o = t.maxOffsets,
                                a = t.minOffsets,
                                i = t.name;
                            ["X", "Y", "Z"].map((function(t, n) {
                                var s = e.modded.poseSliders[i + t];
                                if (void 0 !== s) {
                                    var c = t.toLowerCase(),
                                        l = o[n],
                                        u = a[n];
                                    r.rotation[c] > l || r.rotation[c] < u || (r.rotation[c] = s > .5 ? RK.Math.lerp(r.rotation[c], l, 2 * (s - .5)) : RK.Math.lerp(u, r.rotation[c], 2 * s))
                                }
                            }))
                        }))
                    }))
                }
            }, {
                key: "_items",
                value: function() {}
            }, {
                key: "_applyPose",
                value: function() {
                    var e = this,
                        n = {};
                    le.map((function(t, r) {
                        if (e.meshes[t]) {
                            var o = r ? r - 1 : "";
                            ["R", "L", "D"].map((function(t) {
                                var r = "item".concat(o).concat(t),
                                    a = e.modded.parts[r];
                                if (e.meshes[r] && a && !a.keywords.disableThickOffset && (a.keywords.thick || e.hasForm(r, "thick") && e.modded.settings.hiRez) && a.poseModifier && a.poseModifier.find((function(e) {
                                        return "main" === e
                                    }))) {
                                    var i = "main" + o;
                                    i in n || (n[i] = []), n[i].push({
                                        priority: 5,
                                        modifierName: "mainThick" + t
                                    })
                                }
                            }))
                        }
                    })), $(ee(t.prototype), "_applyPose", this).call(this, n)
                }
            }, {
                key: "_height",
                value: function() {
                    var e = this,
                        t = this.data.sliders,
                        n = b.xlSliderThreshold,
                        r = t.height;
                    if (this.modded.jointWeights.default && r > n) {
                        var o = this.extraXLScale();
                        le.map((function(t) {
                            var n = e.getBone("main_transform_ref_190_bind_jnt", t);
                            n && n.scale.set(o, o, o)
                        }))
                    }
                }
            }, {
                key: "_shoulders",
                value: function() {
                    var e = this,
                        t = CK.Settings.forge && this.data.userSaveVersion <= 1.3,
                        n = this.modded.transforms,
                        r = n.shouldersR,
                        o = n.shouldersL;
                    if (r && (["main_shoulderAttachR_03_fat_213_bind_jnt", "main_shoulderAttachR_03_muscularity_214_bind_jnt"].map((function(t) {
                            var n = e.getBone(t);
                            n.rotation.set(0, 0, 0), n.position.set(0, 0, 0)
                        })), t && console.warn("Old shoulder hierarchy! Shoulder position will be wrong"), CK.Settings.forge && t)) {
                        var a = this.getBone(201),
                            i = this.getBone(175),
                            s = this.getBone(199);
                        i.add(a), a.position.copy(s.position), r.pos && (a.position.y = r.pos.y)
                    }
                    if (this.modded.transforms.shouldersL && (["main_shoulderAttachL_03_fat_207_bind_jnt", "main_shoulderAttachL_03_muscularity_208_bind_jnt"].map((function(t) {
                            var n = e.getBone(t);
                            n.rotation.set(0, 0, 0), n.position.set(0, 0, 0)
                        })), t && console.warn("Old shoulder hierarchy! Shoulder position will be wrong"), CK.Settings.forge && t)) {
                        var c = this.getBone(197),
                            l = this.getBone(89),
                            u = this.getBone(195);
                        l.add(c), c.position.copy(u.position), o.pos && (c.position.y = o.pos.y)
                    }
                }
            }, {
                key: "_hair",
                value: function() {
                    if (this.hasKey("hair", "braidJoints")) {
                        var e = this.getBone("hair_faceOffset_BK_M_522_bind_jnt");
                        e && (e.position.z -= (this.meshes.chest ? .35 : .15) * (this.extraXLScale() - 1) * (1 - this.data.sliders.headSize) * (this.data.sliders.weighTorso + 1))
                    }
                }
            }, {
                key: "extraXLScale",
                value: function() {
                    var e = b.xlSliderThreshold,
                        t = this.data.sliders.height;
                    return t < e ? 1 : 1 + (t - e) / (1 - e) * .3
                }
            }, {
                key: "_head",
                value: function() {
                    var e = this,
                        t = this.data.sliders,
                        n = t.height,
                        r = b.xlSliderThreshold,
                        o = 1 + (1.15 + (n > r ? (n - r) / (1 - r) * .2 : 0) - 1) * (t.headSize || 0),
                        a = this.getBone("main_headScale_381_bind_jnt");
                    if (a) {
                        var i = new RK.Vec3;
                        i.setFromMatrixScale(a.parent.matrixWorld);
                        var s = o / i.x,
                            c = Math.cbrt(s);
                        ["main_neck01_posture_382_bind_jnt", "main_neck02_posture_383_bind_jnt", "main_neck03_posture_384_bind_jnt"].map((function(t) {
                            var n = e.getBone(t);
                            n && n.scale.set(c, c, c)
                        }))
                    }
                }
            }, {
                key: "pose49",
                value: function() {
                    this.embiggenArrowForLongBoi()
                }
            }, {
                key: "pose50",
                value: function() {
                    this.embiggenArrowForLongBoi()
                }
            }, {
                key: "pose51",
                value: function() {
                    this.embiggenArrowForLongBoi()
                }
            }, {
                key: "embiggenArrowForLongBoi",
                value: function() {
                    var e = this.getBone("main_handL_attach_194_bind_jnt");
                    if (e) {
                        var t = this.modded.data.sliders,
                            n = t.upper,
                            r = t.armsL,
                            o = t.armsR,
                            a = t.height,
                            i = 1 + ((n || 0) + (r || 0) + (o || 0) + ((a = a > .5 ? .5 : a) && a > .3 ? 2 * (a - .3) : 0)) / 4 * .4;
                        e.scale.set(i, i, i)
                    } else e.scale.set(1, 1, 1)
                }
            }, {
                key: "pose20",
                value: function() {
                    var e = this.data.sliders.height || 0;
                    e > .6 && (this.skeletons.main.obj.position.z = (e - .6) / .4 * .2)
                }
            }, {
                key: "pose18",
                value: function() {
                    if (this.hasKey("bodyLower", "digi")) this.skeletons.main.obj.position.z = -.3, this.skeletons.main.obj.position.x = 0;
                    else {
                        var e = this.data.sliders.height || 0;
                        e > .6 && (this.skeletons.main.obj.position.z = (e - .6) / .4 * .2, this.skeletons.main.obj.position.x = (e - .6) / .4 * .2)
                    }
                }
            }, {
                key: "pose41",
                value: function() {
                    if (this.hasKey("base", "slotBase")) {
                        var e = this.data.sliders.height || 0;
                        e > .3 && (this.skeletons.main.obj.position.z = (e - .3) / .4 * .4, this.skeletons.main.obj.position.x = (e - .3) / .4 * .1)
                    }
                }
            }, {
                key: "pose56",
                value: function() {
                    var e = (this.data.sliders.height || 0) / .5;
                    this.meshes.mount.skeleton.getBoneByName("mount_500_bind_jnt").position.z = -1 * (.22 * e - .07)
                }
            }, {
                key: "pose58",
                value: function() {
                    var e = (this.data.sliders.height || 0) / .5;
                    this.meshes.mount.skeleton.getBoneByName("mount_500_bind_jnt").position.z = -1 * (.23 * e + .1)
                }
            }, {
                key: "_motorbike",
                value: function() {
                    if (this.meshes.mount && this.modded.poses.main.pose_id in {
                            56: !0,
                            57: !0,
                            58: !0,
                            25: !0,
                            26: !0,
                            27: !0
                        }) {
                        var e = this.skeletons.main.getBoneByName("main_rider_243_bind_jnt"),
                            t = this.meshes.mount.skeleton.getBoneByName("mount_500_bind_jnt");
                        e.quaternion.copy(t.quaternion)
                    }
                }
            }, {
                key: "_applyAnimationConstraintsPostTransforms",
                value: function() {
                    var e = this;
                    le.map((function(t, n) {
                        var r = e.meshes[t];
                        if (r) {
                            ne.map((function(t, n) {
                                var o = e.getBoneFromID(r, t[0]),
                                    a = e.getBoneFromID(r, t[1]);
                                o.rotation.y = a.rotation.y;
                                var i = e.getBoneFromID(r, re[n]),
                                    s = a.rotation.y,
                                    c = s / -.9;
                                c > 1 && (c = 1), c < 0 && (c = 0), s < -1 && (c += .2 * Math.abs(s + 1)), i.position.copy(new RK.Vec3(.1340173, 0, -.280197 / 10).multiplyScalar(n ? 1 : -1).lerp(new RK.Vec3(.3096673, 0, -.612764 / 10).multiplyScalar(n ? 1 : -1), c))
                            }));
                            var o = function(t) {
                                var n = e.getBoneFromID(r, t);
                                "XZY" !== n.rotation.order && n.rotation.reorder("XZY");
                                var o = (new RK.SwingTwist).setFromQuaternion(n.quaternion, "twistswing").twist,
                                    a = 2 * Math.asin(o.x);
                                a /= 2 * Math.PI, (a -= Math.floor(a)) > .5 && (a -= 1), a *= 2 * Math.PI;
                                var i = 1;
                                ie[t].map((function(t) {
                                    e.getBoneFromID(r, t).rotation.x = a * i, i -= .25
                                }))
                            };
                            for (var a in ie) o(a);
                            var i = function(t) {
                                var n = e.getBoneFromID(r, t).rotation.x;
                                ce[t].map((function(t) {
                                    e.getBoneFromID(r, t).rotation.x = n
                                }))
                            };
                            for (var s in ce) i(s);
                            ["R", "L"].map((function(t, o) {
                                var a = e.meshes["gloves".concat(n || "").concat(t)];
                                if (a) {
                                    var i = e.getBoneFromID(r, se[o][0]).rotation.x;
                                    se[o][1].map((function(t) {
                                        var n = e.getBoneFromID(a, t);
                                        n && (n.rotation.x = i)
                                    }))
                                }
                            }))
                        }
                    }))
                }
            }, {
                key: "updateCamera",
                value: function() {
                    if (this.primary) {
                        var e = {
                                mount: 1,
                                initiative: 1
                            },
                            t = this.getCamera(),
                            n = !this.firstRun && !(t in e) && !(CK.orbitCamera.prevCameraName in e);
                        CK.orbitCamera.change(t, n, this.data.clear)
                    }
                }
            }, {
                key: "getCamera",
                value: function(e) {
                    return this.modded && this.modded.settings.camera ? this.modded.settings.camera : this.meshes && this.meshes.mount ? "mount" : this.hasKey("bodyLower", "centaur") ? "centaur" : this.hasKey("base", "initiative") ? "initiative" : this.data && this.data.sliders.height >= b.xlSliderThreshold || this.hasKey("bodyLower", "wideCam") ? "xl" : "default"
                }
            }, {
                key: "_applyMaterialSims",
                value: function() {
                    $(ee(t.prototype), "_applyMaterialSims", this).call(this), this.updateEyeShaders()
                }
            }, {
                key: "updateEyeShaders",
                value: function() {
                    if (this.modded)
                        for (var e in this.modded.parts) {
                            var t = this.meshes[e];
                            if (t && CK.ColorManager.slotIsEyeMesh(e)) {
                                var n = CK.Options.slots[e],
                                    r = n && n.scheme_group,
                                    o = null;
                                if (r) {
                                    var a = this.colorBake.tempSchemes[r];
                                    if (a) {
                                        var i = a.eye;
                                        i && 1 === i.length && i[0].eye && (o = i[0])
                                    }
                                }
                                var s = this.colorBake._tempOverrideConfig && this.colorBake._tempOverrideConfig.paints[e] && this.colorBake._tempOverrideConfig.paints[e][0];
                                if (s) {
                                    var c = this.colorBake._tempOverrideConfig.shaders[s];
                                    c.eye && (o = c)
                                }
                                if (!o) {
                                    var l = this.data.paints[e];
                                    if (l)
                                        for (var u in l) {
                                            var f = l[u],
                                                h = this.data.shaders[f];
                                            h && h.eye && (o = h)
                                        }
                                    if (e in this.colorBake.tempShaders) {
                                        var p = this.colorBake.tempShaders[e];
                                        (o = p[Object.keys(p)[0]]).eye || (o = null)
                                    }
                                }
                                var d = t.material;
                                d.eye = !!o && this.sim.eyeShader, d.eye && o.updateMaterial(d)
                            }
                        }
                }
            }, {
                key: "getLocator",
                value: function(e, t) {
                    return this.meshes[e] && this.meshes[e].geometry.locators && this.meshes[e].geometry.locators[t]
                }
            }, {
                key: "getMeshLocator",
                value: function(e, t) {
                    return this.meshes[e] && this.meshes[e].locators && this.meshes[e].locators[t]
                }
            }, {
                key: "hasForm",
                value: function(e, t) {
                    return this.meshes[e] && this.meshes[e].morphTargetDictionary && void 0 !== this.meshes[e].morphTargetDictionary[t]
                }
            }, {
                key: "_baseItemB",
                value: function() {
                    var e = this.meshes,
                        t = e.baseItemB,
                        n = e.baseItem;
                    if (n && t) {
                        for (var r = CK.Resources.getNow(CK.Paths.getPose(this.modded.poses.main.name, "baseItemOrig")), o = function(e, t, n) {
                                var o = e.geometry.mixerBones.find((function(e) {
                                        return e.idFromName === t
                                    })),
                                    a = r.poses.A1[n];
                                if (o)
                                    if (a) {
                                        var i, s;
                                        (i = o.position).set.apply(i, Y(a.pos)), (s = o.quaternion).set.apply(s, Y(a.rot))
                                    } else console.error("Missing anim for", n);
                                else console.error("Missing source bone for", e, t)
                            }, a = "baseItemOrig" === n.part.poseGroup ? 5 : 1, i = 0; i < a; i++) o(n, Se[i], _e[i]);
                        for (var s = "baseItemOrig" === t.part.poseGroup ? 5 : 1, c = 0; c < s; c++) o(t, Se[c], _e[c + 5])
                    }
                }
            }, {
                key: "_addRivets",
                value: function() {
                    for (var e in this.rivets) this.rivets[e].priority = 1e3;
                    for (var t in this.meshes) {
                        var n = this.meshes[t],
                            r = n.geometry;
                        if (r.ckRivets)
                            for (var o in r.ckRivets) {
                                var a = o.startsWith("slot_") ? t + "_" + o : o,
                                    i = de[t] || fe.length + 1;
                                if (!(this.rivets[a] && i > this.rivets[a].priority)) {
                                    if (!this.rivets[a]) {
                                        var s = new RK.Object3D;
                                        s.meshPosition = new RK.Vec3, this.rivets[a] = s, this.rivetsObj.add(s)
                                    }
                                    var c = this.rivets[a];
                                    c.name = a, c.source = r.ckRivets[o], c.slot = t, c.priority = i, n.skeleton || (c.position.copy(r.ckRivets[o].position), c.quaternion.copy(r.ckRivets[o].quaternion), c.scale.copy(r.ckRivets[o].scale))
                                }
                            }
                    }
                    for (var l in this.rivets) 1e3 === this.rivets[l].priority && (this.rivetsObj.remove(this.rivets[l]), delete this.rivets[l])
                }
            }, {
                key: "updateRivets",
                value: function() {
                    var e = new RK.Matrix4;
                    e.getInverse(this.matrixWorld);
                    var t = new Set;
                    for (var n in this.rivets) {
                        var r = this.rivets[n],
                            o = r.slot,
                            a = this.meshes[o],
                            i = a.skeleton;
                        if (i && !t.has(i))
                            for (var s in t.add(i), i.bones)
                                for (var c = i.bones[s]; c;) c.matrixWorldNeedsUpdate = !0, c = c.parent && !1 === c.parent.matrixWorldNeedsUpdate ? c.parent : null;
                        else i || a.add(r)
                    }
                    var l = new RK.Matrix4,
                        u = new RK.Matrix4,
                        f = new RK.Matrix4,
                        h = new RK.Matrix4,
                        p = new RK.Vec3,
                        d = new RK.Vec3;
                    for (var m in this.rivets) {
                        var y = this.rivets[m],
                            v = y.source,
                            b = y.slot,
                            g = this.meshes[b],
                            w = g.geometry,
                            k = g.skeleton;
                        if (k) {
                            var S = v.triangle,
                                _ = w.attributes.position.array,
                                C = w.attributes.skinIndex0.array,
                                R = w.attributes.skinWeight0.array,
                                O = w.index.array;
                            l.multiplyScalar(0);
                            var E = 0;
                            p.set(0, 0, 0), d.set(0, 0, 0);
                            for (var P = 0; P < 3; ++P) {
                                for (var x = O[3 * S + P], j = v.barycentric[P], T = 0; T < 3; ++T) p.setComponent(T, p.getComponent(T) + _[3 * x + T] * j);
                                if (w.morphTargetInfluences)
                                    for (var M = 0; M < w.morphTargetInfluences.length; ++M)
                                        for (var K = w.morphTargetInfluences[M], I = w.morphAttributes.position[M].array, N = 0; N < 3; ++N) d.setComponent(N, d.getComponent(N) + I[3 * x + N] * K * j);
                                for (var B = 0; B < 4; ++B) {
                                    var A = 4 * x + B,
                                        L = C[A],
                                        U = R[A],
                                        D = k.bones[L];
                                    this._updateMatrixWorldRecursive(D), u.copy(D.matrixWorld), u.multiply(k.boneInverses[L]);
                                    var F = U * j;
                                    u.multiplyScalar(F), E += F;
                                    for (var z = 0; z < 16; ++z) l.elements[z] += u.elements[z]
                                }
                            }
                            l.multiplyScalar(1 / E), l.multiplyMatrices(e, l), p.applyMatrix4(l), h.identity(), h.setPosition(d), f.compose(v.position, v.quaternion, v.scale), f.multiplyMatrices(h, f), f.multiplyMatrices(l, f), f.decompose(y.position, y.quaternion, y.scale);
                            var V = (y.scale.x + y.scale.y + y.scale.z) / 3;
                            y.scale.x = V, y.scale.y = V, y.scale.z = V, y.meshPosition.copy(p)
                        }
                    }
                }
            }, {
                key: "getRivetSliderScale",
                value: function(e, t) {
                    var n = this.rivets[e];
                    if (!n) return 1;
                    var r = n.source,
                        o = n.slot,
                        a = this.meshes[o];
                    if (!a) return 1;
                    for (var i = a.geometry, s = a.skeleton, c = r.triangle, l = i.attributes.skinIndex0.array, u = i.attributes.skinWeight0.array, f = i.index.array, h = 0, p = 0, d = 0; d < 3; ++d)
                        for (var m = f[3 * c + d], y = r.barycentric[d], v = 0; v < 4; ++v) {
                            var b = 4 * m + v,
                                g = l[b],
                                w = u[b];
                            if (w > 0) {
                                var k = s.bones[g],
                                    S = s.sliders[t];
                                if (k && S) {
                                    for (var _ = S.jointAnims, C = k, R = 1; C;) {
                                        if (C.name in _) {
                                            var O = k.scale,
                                                E = _[C.name],
                                                P = CK.MixerSkeleton._lerpVec3Anim(E.scl, 1);
                                            R *= (O.x + O.y + O.z) / 3 / ((P[0] + P[1] + P[2]) / 3)
                                        }
                                        C = C.parent
                                    }
                                    var x = y * w;
                                    h += R * x, p += x
                                }
                            }
                        }
                    return p > 0 ? h /= p : h = 1, h
                }
            }, {
                key: "_updateMatrixWorldRecursive",
                value: function(e) {
                    e && e.matrixWorldNeedsUpdate && (this._updateMatrixWorldRecursive(e.parent), e.updateMatrixWorld())
                }
            }, {
                key: "_applyPostAnimationConstraints",
                value: function() {
                    $(ee(t.prototype), "_applyPostAnimationConstraints", this).call(this), this.updateRivets(), this._earrings(), this._trunkItems(), this._tailItems(), this._updateBackScale()
                }
            }, {
                key: "_earrings",
                value: function() {
                    var e = this,
                        t = function(t) {
                            var n = e.meshes["earrings" + t];
                            if (n) {
                                var r = e.rivets["piercing" + t] || console.error("Must have piercing rivet in scene for piercing" + t);
                                r && r.add(n)
                            }
                        };
                    ["R", "L"].map((function(e) {
                        ["", "1", "2", "3", "4", "Tragus", "Eyebrow", "Nose", "Monroe", "Dimple", "Lip"].map((function(n) {
                            return t(n + e)
                        }))
                    })), ["Bridge", "Septum", "Labret", "Belly"].map((function(e) {
                        return t(e)
                    }))
                }
            }, {
                key: "_trunkItems",
                value: function() {
                    var e = "trunk_itemSnap_513_bind_jnt",
                        t = this.getBone(e, "face"),
                        n = this.meshes.itemTrunk;
                    n && (t ? t.add(n) : console.warn("Elephant trunk bone not found", e))
                }
            }, {
                key: "_tailItems",
                value: function() {
                    var e = this.meshes.itemTail;
                    if (e) {
                        var t = this.getBone(523, "tail") || console.error("Tail bone ".concat(523, " for itemTail not found"));
                        t && t.add(e)
                    }
                }
            }, {
                key: "getBakedTransforms",
                value: function() {
                    var e = G.limits,
                        t = {};
                    for (var n in e)
                        for (var r in e[n]) {
                            var o = this.getBone(r, n);
                            if (o) {
                                n in t || (t[n] = {}), r in t[n] || (t[n][r] = {});
                                var a = o.quaternion.toSimple();
                                for (var i in a) a[i] = Math.round(1e4 * a[i]) / 1e4;
                                t[n][r].qtn = a
                            }
                        }
                    return t
                }
            }, {
                key: "_snapBoundaries",
                value: function(e) {
                    var n = !1;
                    if (q.a.snapBoundaries) {
                        for (var r in Re) {
                            var o = this.meshes[r] && this.meshes[r].uuid;
                            if (e ? n |= o != Te[r] : Te[r] = o, o) {
                                var a = Re[r];
                                for (var i in a) {
                                    var s = a[i];
                                    this.meshes[s] && t._snapGeometryBoundary(e, this.meshes[s].geometry, this.meshes[r].geometry)
                                }
                            }
                        }
                        for (var c in Oe) {
                            var l = this.meshes[c] && this.meshes[c].uuid;
                            if (e ? n |= l != Te[c] : Te[c] = l, l) {
                                var u = Oe[c];
                                for (var f in u) {
                                    var h = u[f];
                                    this.meshes[h] && t._snapGeometryBoundary(e, this.meshes[c].geometry, this.meshes[h].geometry)
                                }
                            }
                        }
                    }
                    return n
                }
            }, {
                key: "_getResources",
                value: function(e, n) {
                    var r = this,
                        o = $(ee(t.prototype), "_getResources", this).call(this, e, n);
                    return Object.keys(this.eyeTypes || {}).sort((function(e, t) {
                        return r.eyeTypes[e].index - r.eyeTypes[t].index
                    })).map((function(e) {
                        return "/static/textures/character/eye/iris_".concat(e, ".png")
                    })).map((function(e) {
                        return o.push(e)
                    })), o.push("/static/textures/character/eye/sclera.png"), e.parts.baseItemB && o.push(CK.Paths.getPose(e.poses.main.name, "baseItemOrig")), o
                }
            }]) && Z(n.prototype, r), o && Z(n, o), t
        }();

        function Ie(e) {
            return (Ie = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Ne(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Be(e, t) {
            return !t || "object" !== Ie(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Ae(e) {
            return (Ae = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Le(e, t) {
            return (Le = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Ue = {
                horns: "horn",
                ears: "ear"
            },
            De = {
                934: 10464,
                936: 127,
                937: 887,
                953: 572,
                954: 852,
                966: 757,
                1109: 10462,
                1300: 328,
                1307: 1296,
                1484: 1065,
                1562: 1309,
                1811: 10339,
                1812: 10336,
                2310: 10341,
                2493: 1141,
                2694: 10460,
                2695: 910,
                2697: 2597,
                2698: 2232,
                2699: 1453
            },
            Fe = {
                2333: 10340,
                933: 10335,
                1395: 10338
            },
            ze = {
                2863: [10348, 10347],
                2865: [10375, 10374],
                2870: [10373, 10372],
                2871: [10367, 10366],
                2878: [10379, 10378],
                2898: [10365, 10364],
                2900: [10371, 10370],
                2903: [10377, 10376],
                2905: [10381, 10380],
                2907: [10369, 10368]
            },
            Ve = {
                10348: 11097,
                10347: 11097,
                10375: 11095,
                10374: 11095,
                10373: 11094,
                10372: 11094,
                10367: 11090,
                10366: 11090,
                10379: 11092,
                10378: 11092,
                10365: 11089,
                10364: 11089,
                10371: 11093,
                10370: 11093,
                10377: 11096,
                10376: 11096,
                10381: 11098,
                10380: 11098,
                10369: 11091,
                10368: 11091
            },
            Ge = [
                ["hornFrontR", "hornSideR", "hornBackR"],
                ["hornBackL", "hornFrontL", "hornSideL"],
                ["hornForehead", "hornFront", "hornTop"]
            ],
            qe = function(e) {
                function t(e, n) {
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), Be(this, Ae(t).call(this, e, n))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Le(e, t)
                }(t, CK.Data), n = t, (r = [{
                    key: "_customUpdateStart",
                    value: function(e, t) {
                        if (!t && e.parts && e.parts.base) {
                            var n = CK.Options.parts[this.parts.base],
                                r = CK.Options.parts[e.parts.base];
                            n && r && n.name.slice(0, 3) === r.name.slice(0, 3) && n.subName === r.subName || delete this.transforms.baseItem
                        }
                    }
                }, {
                    key: "_convertOldFormats",
                    value: function(e) {
                        var t = this;
                        for (var n in Ue)
                            if (n in this.parts) {
                                var r = Ue[n],
                                    o = this.parts[n];
                                delete this.parts[n];
                                var a = CK.Options.getPart(o).name,
                                    i = CK.Options.getPartBySlotAndName(r + "R", a),
                                    s = CK.Options.getPartBySlotAndName(r + "L", a);
                                i ? (this.parts[r + "R"] = i.id, s && (this.parts[r + "L"] = s.id)) : console.error("Failed to find new part!")
                            }
                        if (void 0 !== this.parts.body && (16 == this.parts.body ? (this.parts.bodyUpper = 1963, this.parts.bodyLower = 1960) : 621 == this.parts.body ? (this.parts.bodyUpper = 1962, this.parts.bodyLower = 1961) : console.error("Unrecognized body part!", this.parts.body), delete this.parts.body), void 0 !== e.version) {
                            if (e.version <= 1.2 && (console.warn("Adding default side and back item arrows"), this.parts.sideAttachL || (this.parts.sideAttachL = 2862), this.parts.sideAttachR || (this.parts.sideAttachR = 2861), this.parts.backAttach || (this.parts.backAttach = 2863)), e.version < 1.2) {
                                var c = e.sliders ? e.sliders.height : void 0;
                                void 0 !== c && (this.sliders.height = c * b.xlSliderThreshold, this.sliders.weightUpper = this.sliders.weight || .5, this.sliders.weightLower = this.sliders.height || .5, this.sliders.weighTorso = this.sliders.height || .5, this.sliders.headSize = 0, console.warn("Converting height & head from old version"))
                            }
                            if (e.version <= 1.3 && !CK.Settings.forge && e.transforms && (console.warn("Removing old shoulder posing because hierarchy changed"), delete e.transforms.shouldersR, delete e.transforms.shouldersL), e.version <= 1 && (delete this.parts.eyes, this.parts.eyeR && this.parts.eyeL || !this.parts.face || ("robot" === CK.Options.getPart(this.parts.face).name ? (console.warn("Adding robot eyes because they are missing for some reason (probably old cart item)"), this.parts.eyeR = 1517, this.parts.eyeL = 1518) : (console.warn("Adding human eyes because they are missing for some reason (probably old cart item)"), this.parts.eyeR = 1512, this.parts.eyeL = 177))), !CK.Settings.forge) {
                                var l = this.parts,
                                    u = l.back,
                                    f = l.backAttach;
                                u in De && (this.parts.backItemL = De[u], delete this.parts.back), u in Fe && (this.parts.backItemR = Fe[u], delete this.parts.back), f in ze && (this.parts.backItemAttachL = ze[f][0], this.parts.backItemAttachR = ze[f][1], delete this.parts.backAttach), 1563 === u && (this.parts.backItemL = 1192, this.parts.backItemR = 153, delete this.parts.back)
                            }
                            if (e.version < 1.8) {
                                var h = this.parts,
                                    p = h.backItemAttachL,
                                    d = h.backItemAttachR;
                                if (p) {
                                    var m = Ve[p] || console.error("Could not upgrade part", p) || void 0;
                                    this.attachParts.backItemL = {
                                        slot_attach_0: m
                                    }, delete this.parts.backItemAttachL
                                }
                                if (d) {
                                    var y = Ve[d] || console.error("Could not upgrade part", d) || void 0;
                                    this.attachParts.backItemR = {
                                        slot_attach_0: y
                                    }, delete this.parts.backItemAttachR
                                }
                            }
                            e.version, !CK.Settings.forge && e.version < 1.8 && ["hornR", "hornL"].map((function(e, n) {
                                var r = t.parts[e];
                                r && function() {
                                    for (var o = CK.Options.getPart(r).name, a = Ge[n].concat(Ge[2]), i = 0; i < a.length; i++) {
                                        var s = a[i],
                                            c = CK.Options.partsBySlot[s].find((function(e) {
                                                return e.name === o
                                            }));
                                        if (c) {
                                            t.parts[c.slot] = c.id, delete t.parts[e];
                                            break
                                        }
                                    }
                                }(), t.parts[e] && console.error("Failed to convert to new horn system!")
                            }))
                        }
                        this.sliders.height > b.xlSliderThreshold && this.parts.base && CK.Options.getPart(this.parts.base).keywords.initiative && (this.parts.base = 215), this.parts.toggleGroup && (delete this.parts.toggleGroup, this.flags.hideRider = !0)
                    }
                }, {
                    key: "_customUpdateEnd",
                    value: function(e) {
                        var t = f.getSelectedProduct(this);
                        this.physical = t ? t.product_name : void 0;
                        var n = this.parts,
                            r = n.face,
                            o = n.eyeR,
                            a = n.eyeL;
                        if (CK.serverTime < 1581364397 && 2950 !== r && 617 !== r && (o && 3061 !== o || (this.parts.eyeR = 1512), a && 3060 !== a || (this.parts.eyeL = 177)), this.parts.mount && this.sliders.height >= b.xlSliderThreshold && (this.sliders.height = b.xlSliderThreshold - .001), !this.clear)
                            for (var i in e.parts) i.startsWith("horn") && delete this.transforms[i];
                        this.flags.hideRider && !this.parts.mount && delete this.flags.hideRider, this.clickedThisUpdate.face && delete this.transforms.face
                    }
                }, {
                    key: "_customGetJson",
                    value: function(e, t) {
                        t && Object.keys(e.transforms).length && (e.bakedTransforms = CK.display.getBakedTransforms())
                    }
                }, {
                    key: "isOutOfDate",
                    value: function(e) {
                        return !!(e && (!e.version || e.version < 1.7) && e.parts && e.parts.baseItem && e.parts.baseItem in {
                            2820: 1,
                            2284: 1,
                            3130: 1,
                            3094: 1,
                            1446: 1
                        } && e.transforms && e.transforms.baseItem && Object.keys(e.transforms.baseItem).length)
                    }
                }]) && Ne(n.prototype, r), o && Ne(n, o), t
            }();
        qe.allOldBackItems = Object.keys(De).concat(Object.keys(Fe), [1563]);
        var He = function e(t) {
            ! function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, e), this.thumb = t.thumb, this.mirrorThumb = t.mirrorThumb || !1, this.hoverThumb = t.hoverThumb || !1, this.name = t.name || "", this.label = t.label || "", this.description = t.description || "", this.onClick = t.onClick, this.onHover = t.onHover, this.onDelete = t.onDelete, this.selected = t.selected || !1, this.keywords = t.keywords || {}, this.thumbSize = t.thumbSize || [80, 80], this.grayedOut = t.grayedOut || !1, this.grayedOutReason = t.grayedOutReason || void 0, this.labelOptions = t.labelOptions || {
                label: !1
            }, this.swatchLayers = t.swatchLayers || [], this.originalData = t.originalData, this.packedPos = t.packedPos, this.packedSize = t.packedSize, this.paintType = t.paintType, this.missingThumb = t.missingThumb, this.tagLabel = t.tagLabel, this.tagColor = t.tagColor, this.showTooltip = void 0 !== t.showTooltip ? t.showTooltip : !(CK.ClientSpecs.touchEnabled() || window.UIState && UIState.compact), this.displayOrder = t.displayOrder || 1, this.onMouseEnter = t.onMouseEnter, this.widthOverride = t.widthOverride, this.heightOverride = t.heightOverride, this.bit = t.bit, this.extraClass = t.extraClass, this.onMouseOut = t.onMouseOut, this.overlay = t.overlay
        };

        function We(e) {
            return (We = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Qe(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Xe(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ye(e) {
            return (Ye = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Ze(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function Je(e, t) {
            return (Je = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var $e = VN.classNames,
            et = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = Ye(t).call(this, e)) || "object" !== We(o) && "function" != typeof o ? Ze(r) : o).clicked = n.clicked.bind(Ze(n)), n.onMouseEnter = n.onMouseEnter.bind(Ze(n)), n.onMouseOut = n.onMouseOut.bind(Ze(n)), n.error = n.error.bind(Ze(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Je(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "clicked",
                    value: function(e) {
                        window.CK && CK.userHasTouched && CK.Events.emit("tip", [this.props.option, e]), e.fastclick && (e.preventDefault(), e.stopPropagation()), this.props.option && this.props.option.onClick && (this.props.option.onClick(), Reporting.clickedThumbnailButton(this.props))
                    }
                }, {
                    key: "onMouseEnter",
                    value: function(e) {
                        this.props.option.onMouseEnter && this.props.option.onMouseEnter(), window.CK && !CK.userHasTouched && CK.Events.emit("tip", [this.props.option, e])
                    }
                }, {
                    key: "onMouseOut",
                    value: function() {
                        this.props.option.onMouseOut && this.props.option.onMouseOut(), window.CK && !CK.userHasTouched && CK.Events.emit("tip", void 0)
                    }
                }, {
                    key: "error",
                    value: function(e) {
                        var t = this.props.option.missingThumb || "/static/img/broken-link.png";
                        e.target.src.endsWith(t) || (e.target.src = t)
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e, t = this,
                            n = this.props.option;
                        if (!n) return null;
                        var r = n.tagLabel,
                            o = n.thumb,
                            a = n.tagColor,
                            i = n.extraClass,
                            s = n.thumbSize,
                            c = n.selected,
                            l = n.grayedOut,
                            u = (n.grayedOutReason, n.mirrorThumb),
                            f = n.overlay,
                            h = r ? React.createElement("span", {
                                className: "new-tag"
                            }, React.createElement("span", {
                                className: "tag-text",
                                style: {
                                    background: a
                                }
                            }, r), React.createElement("span", {
                                className: "arrow-down",
                                style: a ? {
                                    borderTop: "2px solid " + a
                                } : {}
                            })) : null,
                            p = $e(this.props.className, "thumbnail-button", i, (Qe(e = {
                                selected: c,
                                grayedOut: l,
                                "no-image": !o,
                                "no-onclick": !n.onClick
                            }, "w" + n.thumbSize[0] + "h" + n.thumbSize[1], n.thumbSize[0]), Qe(e, "w" + n.thumbSize[0], n.thumbSize[0]), Qe(e, "h" + n.thumbSize[1], n.thumbSize[1]), Qe(e, "labelType-" + n.labelOptions.labelType, n.label && "labelType" in n.labelOptions), e));
                        return n.label && "labelOnly" == n.labelOptions.labelType ? React.createElement("a", {
                            className: p,
                            onClick: this.clicked
                        }, n.bit, n.label, h, f) : n.labelOptions.label ? React.createElement("span", {
                            className: p,
                            onClick: this.clicked,
                            style: {
                                width: n.widthOverride,
                                height: n.heightOverride
                            }
                        }, React.createElement("img", {
                            src: n.thumb
                        }), h, f, React.createElement("span", {
                            className: "label"
                        }, n.label)) : React.createElement("span", {
                            onMouseEnter: function(e) {
                                return t.onMouseEnter(e)
                            },
                            onMouseOut: function() {
                                return t.onMouseOut()
                            },
                            className: p,
                            onClick: function(e) {
                                return t.clicked(e)
                            }
                        }, React.createElement("img", {
                            src: o,
                            width: s[0],
                            height: s[1],
                            onError: function(e) {
                                return t.error(e)
                            },
                            className: $e({
                                mirrored: u
                            })
                        }), h || null, f || null, this.props.overlay || null)
                    }
                }]) && Xe(n.prototype, r), o && Xe(n, o), t
            }();

        function tt(e) {
            return (tt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function nt(e, t) {
            var n = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }))), n.push.apply(n, r)
            }
            return n
        }

        function rt(e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = null != arguments[t] ? arguments[t] : {};
                t % 2 ? nt(Object(n), !0).forEach((function(t) {
                    ot(e, t, n[t])
                })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : nt(Object(n)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t))
                }))
            }
            return e
        }

        function ot(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function at(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function it(e) {
            return (it = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function st(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function ct(e, t) {
            return (ct = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var lt = VN.classNames,
            ut = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, o = it(t).call(this, e), (n = !o || "object" !== tt(o) && "function" != typeof o ? st(r) : o).state = {
                        showmores: 1
                    }, n.searchChanged = function() {
                        return n.forceUpdate()
                    }, n.reachedBottom = n.reachedBottom.bind(st(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && ct(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentDidMount",
                    value: function() {
                        CK.Events.on("searchChanged", this.searchChanged), CK.Events.on("reachedBottom", this.reachedBottom)
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        CK.Events.off("searchChanged", this.searchChanged), CK.Events.off("reachedBottom", this.reachedBottom), window.UIState && UIState.set({
                            searchFilter: ""
                        })
                    }
                }, {
                    key: "reachedBottom",
                    value: function() {
                        var e = React.Children.toArray(this.props.children);
                        this.props.limitResults && this.props.limitResults * this.state.showmores < e.length && this.showMore()
                    }
                }, {
                    key: "showMore",
                    value: function() {
                        this.setState({
                            showmores: this.state.showmores + 1
                        })
                    }
                }, {
                    key: "render",
                    value: function() {
                        if (this.props.hideUnfound && (!UIState.searchFilter || !UIState.searchFilter.length)) return null;
                        var e = React.Children.toArray(this.props.children),
                            t = void 0;
                        e && e[0] && e[0].props && e[0].props.option && e[0].props.option.thumbSize && (t = e[0].props.option.thumbSize[0]);
                        var n = this.getCompleteFilter();
                        (UIState.genreSearchFilter || n && n.length > 0) && e.length && (this.props.alwaysResults || e[0].props && e[0].props.option && e[0].props.option.originalData) && (e = this.reorder(e)), this.props.limitResults && (e = e.slice(0, this.props.limitResults * this.state.showmores));
                        var r = this.props.linked ? "" : lt("grid-layout", {
                            "specified-columns": this.props.columns
                        }, ot({}, "specified-columns-".concat(this.props.columns), this.props.columns), ot({}, "thumb-width-".concat(t), t));
                        return React.createElement("div", {
                            className: r
                        }, e)
                    }
                }, {
                    key: "getCompleteFilter",
                    value: function() {
                        return UIState.searchFilter && UIState.searchFilter.toLowerCase().replace(/\W+/g, " ").split(" ").map((function(e) {
                            return e.trim()
                        })) || []
                    }
                }, {
                    key: "reorder",
                    value: function(e) {
                        var t = this,
                            n = this.getCompleteFilter(),
                            r = !1,
                            o = [],
                            a = [],
                            i = !!UIState.genreSearchFilter && UIState.genreSearchFilter.replace(/\s/g, "");
                        "eastasian" === i && (i = "asian");
                        var s = "unknown";
                        return e.map((function(e) {
                            var c = e.props.option.originalData;
                            if (c) {
                                s = c.slotR;
                                var l = c.match(n),
                                    u = c.filter(n);
                                !l && t.props.hideUnfound || (l && (r = !0), (c.terms && i && i in c.terms ? o : a).push(rt({}, e, {
                                    match: l,
                                    filter: u,
                                    props: rt({}, e.props, {
                                        className: l ? "".concat(e.props.className || "", " filterable--isFiltered") : e.props.className
                                    })
                                })))
                            }
                        })), Reporting.sendSearch(UIState.searchFilter, r, s, i), n.length && [o, a].map((function(e) {
                            return e.sort((function(e, t) {
                                return e.match === t.match ? e.filter < t.filter ? -1 : e.filter > t.filter ? 1 : 0 : e.match ? -1 : 1
                            }))
                        })), i ? a.length ? o.concat([React.createElement("div", {
                            key: "Genre fold",
                            style: {
                                width: "100%",
                                paddingTop: 40,
                                opacity: .5
                            }
                        }, "Other Genres"), React.createElement("div", {
                            key: "genre line",
                            style: {
                                width: "100%",
                                height: 2,
                                background: "white",
                                marginBottom: 20,
                                opacity: .3
                            }
                        })], a) : o : o.concat(a)
                    }
                }]) && at(n.prototype, r), o && at(n, o), t
            }();

        function ft(e) {
            return (ft = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ht(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function pt(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function dt(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function mt(e, t) {
            return !t || "object" !== ft(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function yt(e) {
            return (yt = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function vt(e, t) {
            return (vt = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var bt = function(e) {
            function t() {
                return pt(this, t), mt(this, yt(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && vt(e, t)
            }(t, React.Component), n = t, o = [{
                key: "hasContent",
                value: function(e) {
                    return this.available(e) && this.available(e).length > 0
                }
            }, {
                key: "getThumbnails",
                value: function(e) {
                    return this.available(e).map((function(e) {
                        return UIState.alwaysCompact ? CK.Paths.getPartThumbSmall(e) : CK.Paths.getPartThumb(e)
                    }))
                }
            }, {
                key: "hasNew",
                value: function(e) {
                    var t = this.available(e);
                    return null != t && !!t.find((function(e) {
                        return e.new
                    }))
                }
            }, {
                key: "clearPartCache",
                value: function(e) {
                    e ? delete t.cache[e] : t.cache = {}
                }
            }, {
                key: "available",
                value: function(e) {
                    var n = e.label || e.slot,
                        r = e.slot || n.toLowerCase();
                    r in t.cache || (t.cache[r] = CK.Options.getSelectableParts(r));
                    var o = e.filter;
                    return o ? "new" === o ? t.cache[r].filter((function(e) {
                        return e.new
                    })) : "all" === o ? t.cache[r] : t.cache[r].filter((function(e) {
                        return o in e.keywords
                    })) : t.cache[r]
                }
            }, {
                key: "getOptions",
                value: function(e) {
                    var t = this,
                        n = e.slot || (e.label || e.slot).toLowerCase(),
                        r = CK.character.data.mirroredPose && CK.Settings.getSlotSetting(n, "allowMirror");
                    e.flip && (r = !r);
                    var o = CK.Options.getSlot(n) || console.error("Could not find slot", n),
                        a = n;
                    o.source && (n = o.source);
                    var i = this.available(e),
                        s = [],
                        c = CK.data.limitedParts[a],
                        l = CK.modded.disabledKeywords,
                        u = CK.modded.vanishIfNotKeyword[n] || CK.modded.vanishIfNotKeyword["*"],
                        f = CK.modded.vanishIfKeyword[n] || CK.modded.vanishIfKeyword["*"],
                        h = function(n) {
                            var o = i[n];
                            if (u && !o.keywords[u] || f && o.keywords[f] || e.test && !e.test(o)) return "continue";
                            var h = !1,
                                p = "";
                            for (var d in l) d in o.keywords && (h = !0, p = l[d] || "");
                            var m = UIState.alwaysCompact ? CK.Paths.getPartThumbSmall(o) : CK.Paths.getPartThumb(o),
                                y = CK.Options.getAttr(o, "displayname") || o.name,
                                v = CK.Options.getAttr(o, "description"),
                                b = new He({
                                    thumb: m,
                                    label: y,
                                    description: v,
                                    onClick: h ? void 0 : function(n) {
                                        t.partClicked(n, o, a, e.clearTransforms)
                                    },
                                    selected: o.id === c,
                                    mirrorThumb: r,
                                    thumbSize: o.thumbSize,
                                    tagLabel: o.tagLabel,
                                    tagColor: o.tagColor,
                                    originalData: o,
                                    displayOrder: o.display_order,
                                    grayedOut: h,
                                    grayedOutReason: p,
                                    overlay: o.debugPartOverlayColor && !1
                                });
                            s.push(b)
                        };
                    for (var p in i) h(p);
                    return s.length ? s : void 0
                }
            }, {
                key: "partClicked",
                value: function(e, t) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : t.slot,
                        r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
                        o = "L" === t.side ? CK.Options.getPart(t.link) : t,
                        a = t.link ? CK.Options.getPart(t.link) : void 0,
                        i = t.id === CK.data.limitedParts[n],
                        s = !!CK.Settings.getSlotSetting(n, "required");
                    if (!i || !s) {
                        var c = {};
                        if (e && a && (c[n.slice(0, -1) + a.side] = i ? void 0 : a.id), t.occupiesRandL && (c[t.unsidedSlot + "L"] = void 0), "L" === t.side && !e && !i) {
                            var l = CK.data.limitedParts[t.unsidedSlot + "R"];
                            l && CK.Options.getPart(l).occupiesRandL && (c[t.unsidedSlot + "R"] = void 0)
                        }
                        c[n] = i ? void 0 : t.id;
                        var u = {};
                        if (!i) {
                            var f = o && o.defaultPaints;
                            f && (u[t.slot] = f, e && a && (u[a.slot] = f))
                        }
                        this.makeTweak({
                            parts: c,
                            paints: u,
                            transforms: r ? ht({}, n, void 0) : {}
                        })
                    }
                }
            }, {
                key: "makeTweak",
                value: function(e) {
                    CK.tweakPart(e)
                }
            }], (r = [{
                key: "render",
                value: function(e) {
                    if (this.props.label.toLowerCase() in CK.data.disableMenus) return React.createElement("a", null, CK.data.disableMenus[this.props.label.toLowerCase()]);
                    var t = this.constructor.getOptions(this.props);
                    if ((!t || !t.length) && this.props.hideIfEmpty) return null;
                    var n = e || this.props.slot || (this.props.label || this.props.slot).toLowerCase();
                    return t && CK.Settings.clearParts && UIState.compact && !CK.Settings.getSlotSetting(n, "required") && t.push(new He({
                        label: "Empty",
                        description: "Remove anything currently selected",
                        selected: !CK.data.parts[n],
                        thumb: "/static/svg/empty.svg",
                        extraClass: "clearButton",
                        onClick: function() {
                            CK.clearSlot(n)
                        }
                    })), React.createElement(React.Fragment, null, this.props.header ? this.props.header : null, React.createElement("div", null, t ? React.createElement(ut, {
                        columns: this.props.columns
                    }, t.map((function(e, t) {
                        var n = e.originalData ? e.originalData.keywords.XXL ? "XXL" : e.originalData.keywords.XL ? "XL" : void 0 : void 0,
                            r = e.originalData ? e.originalData.id : t;
                        return React.createElement(et, {
                            option: e,
                            overlay: n && React.createElement("div", {
                                className: "XL"
                            }, n),
                            key: r
                        })
                    }))) : null))
                }
            }]) && dt(n.prototype, r), o && dt(n, o), t
        }();

        function gt(e) {
            return (gt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function wt(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function kt(e, t) {
            return !t || "object" !== gt(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function St(e) {
            return (St = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function _t(e, t) {
            return (_t = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }

        function Ct(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }
        bt.cache = {};
        var Rt, Ot = ["swordD", "staffD", "guitarD", "bowD", "rifleD"],
            Et = React.createElement(et, {
                option: new He({
                    thumb: "/static/img/twoHandedBlank_icon.png",
                    thumbSize: [30, 30]
                })
            });

        function Pt() {
            return Pt._dPosesByType || (Pt._dPosesByType = {}, Ot.map((function(e) {
                var t = CK.Options.posesByKeyword[e];
                t && (Pt._dPosesByType[e] = t.map((function(e) {
                    return e.pose_id
                })))
            }))), Pt._dPosesByType
        }

        function xt() {
            var e = CK.Options.posesByID[Rt];
            return e && e.keywords.standing ? Rt : 17
        }
        var jt = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = kt(this, St(t).call(this, e))).searchChanged = function() {
                    return n.forceUpdate()
                }, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && _t(e, t)
            }(t, React.Component), n = t, o = [{
                key: "getItem",
                value: function(e, t, n) {
                    return React.createElement("div", {
                        className: "linked-part",
                        option: {
                            originalData: e.originalData || n.originalData
                        },
                        key: e.originalData.id
                    }, React.createElement(et, {
                        option: e
                    }), t, React.createElement(et, {
                        option: n
                    }))
                }
            }, {
                key: "partClick",
                value: function(e, t, n, r) {
                    var o, a = e.originalData;
                    if (e.selected) o = {
                        parts: Ct({}, t, void 0),
                        transforms: Ct({}, t, void 0)
                    };
                    else if (r) {
                        var i;
                        o = {
                            parts: (i = {}, Ct(i, t, a.id), Ct(i, n, void 0), i),
                            poses: {
                                main: xt()
                            },
                            paints: Ct({}, t, CK.Helpers.deepCopy(CK.data.paints.itemD || CK.data.paints[t] || {}))
                        }
                    } else o = {
                        parts: Ct({}, t, a.id),
                        transforms: Ct({}, t, void 0)
                    };
                    o.transforms = Ct({}, t, void 0), o.custom = Ct({}, "flip" + t.charAt(0).toUpperCase() + t.slice(1), void 0), r ? CKUI.promptClearTransforms(o) : CK.tweakPart(o)
                }
            }, {
                key: "clearClick",
                value: function(e, t) {
                    var n, r;
                    CK.tweak({
                        parts: (n = {}, Ct(n, e, void 0), Ct(n, t, void 0), n),
                        custom: Ct({}, "flip" + e.charAt(0).toUpperCase() + e.slice(1), void 0),
                        transforms: (r = {}, Ct(r, e, void 0), Ct(r, t, void 0), r)
                    })
                }
            }], (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("slotFilterChanged", this.searchChanged)
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("slotFilterChanged", this.searchChanged)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.props.slot + "R",
                        t = UIState.filters[e];
                    return React.createElement(ut, {
                        linked: !0,
                        limitResults: t && "all" !== t ? void 0 : 50
                    }, this.getOptions())
                }
            }, {
                key: "getMiddleOption",
                value: function(e, t, n) {
                    var r = !!CK.data.parts.mount,
                        o = e.originalData,
                        a = r ? void 0 : t ? function() {
                            return function(e) {
                                var t;
                                CKUI.promptClearTransforms({
                                    poses: {
                                        main: xt()
                                    },
                                    parts: (t = {}, Ct(t, e + "R", void 0), Ct(t, e + "L", void 0), t)
                                })
                            }(n)
                        } : function() {
                            return function(e, t) {
                                var n, r = CK.data.limitedPoses.main;
                                Rt = r;
                                var o = Pt();
                                for (var a in e.keywords)
                                    if (a in o) {
                                        var i = o[a],
                                            s = !1;
                                        for (var c in i) i[c] == r && (s = !0);
                                        s || (r = i[0]);
                                        break
                                    }
                                CKUI.promptClearTransforms({
                                    parts: (n = {}, Ct(n, t + "R", e.id), Ct(n, t + "L", void 0), n),
                                    poses: {
                                        main: r
                                    },
                                    paints: {
                                        itemD: CK.Helpers.deepCopy(CK.data.paints.itemR || CK.data.paints.itemL || {})
                                    }
                                })
                            }(o, n)
                        };
                    return React.createElement(et, {
                        option: new He({
                            thumb: o && o.keywords.bowD ? "/static/svg/items/bow.svg" : "/static/svg/twohanded.svg",
                            label: r ? "Not available while mounted. " : e.label + " with Two Handed Pose",
                            description: r ? "Two handed not available while on mounted. " + e.description : e.description,
                            onClick: a,
                            selected: t,
                            thumbSize: [30, 30],
                            grayedOut: r
                        })
                    })
                }
            }, {
                key: "getOptions",
                value: function() {
                    var e = this,
                        n = this.props,
                        r = n.label,
                        o = n.flipThumb,
                        a = n.slot,
                        i = a || r.toLowerCase(),
                        s = i + "R",
                        c = i + "L",
                        l = this.props.itemD,
                        u = UIState.filters[s],
                        f = bt.getOptions(Object.assign({}, this.props, {
                            slot: s,
                            flipThumb: o,
                            filter: u,
                            test: function(e) {
                                return !e.keywords.handExclude
                            }
                        }));
                    if (!f || !f.length) return null;
                    var h = function() {
                            var e = CK.data.limitedPoses.main,
                                t = Pt();
                            for (var n in t)
                                for (var r in t[n])
                                    if (t[n][r] === e) return !0;
                            return !1
                        }(),
                        p = CK.data.mirroredPose,
                        d = !!CK.data.parts.mount;
                    return f.map((function(n, r) {
                        var o = n.originalData;
                        if (o.link) {
                            var i = CK.Options.getPart(o.link),
                                u = function(e) {
                                    var t, n = CK.data.limitedPoses.main,
                                        r = Pt();
                                    for (var o in e.keywords)
                                        if (o in r) {
                                            var a = r[o];
                                            for (var i in a)
                                                if (a[i] === n) return !0;
                                            t = !1
                                        }
                                    return t
                                }(o),
                                f = void 0 !== u && !d && l,
                                m = new He(Object.assign({}, n, {
                                    originalData: i
                                })),
                                y = o.id === CK.data.parts[s],
                                v = i.id === CK.data.parts[c],
                                b = h && f && u && (y || v) && !(!CK.data.parts[s] && !CK.data.parts[c]);
                            n.selected = !b && y, m.selected = !b && v, n.onClick = function() {
                                return t.partClick(n, s, c, h)
                            }, m.onClick = function() {
                                return t.partClick(m, c, s, h)
                            }, n.mirrorThumb = p, m.mirrorThumb = !p;
                            var g = f ? e.getMiddleOption(n, b, a) : Et;
                            return p ? t.getItem(m, g, n) : t.getItem(n, g, m)
                        }
                        console.error("No link for part", o)
                    })).filter((function(e) {
                        return e
                    }))
                }
            }]) && wt(n.prototype, r), o && wt(n, o), t
        }();

        function Tt(e) {
            return (Tt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Mt(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Kt(e) {
            return (Kt = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function It(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function Nt(e, t) {
            return (Nt = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Bt = VN.classNames,
            At = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, o = Kt(t).call(this, e), (n = !o || "object" !== Tt(o) && "function" != typeof o ? It(r) : o).onChange = n.onChange.bind(It(n)), n.mouseUp = function(e) {
                        return n.onMouseUpInWindow(e)
                    }, window.addEventListener("mouseup", n.mouseUp, !1), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Nt(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentWillUnmount",
                    value: function() {
                        window.removeEventListener("mouseup", this.mouseUp, !1)
                    }
                }, {
                    key: "onMouseUpInWindow",
                    value: function() {
                        void 0 !== this.changedValue && (this.props.onAfterChange && this.props.onAfterChange(this.changedValue), delete this.changedValue)
                    }
                }, {
                    key: "shouldComponentUpdate",
                    value: function(e) {
                        return e.value !== this.props.value && (this.inputRef.value = e.value), !0
                    }
                }, {
                    key: "onChange",
                    value: function(e) {
                        e.preventDefault();
                        var t = parseFloat(e.target.value);
                        this.props.onChange(t), this.changedValue = t
                    }
                }, {
                    key: "renderMark",
                    value: function(e) {
                        return React.createElement("div", {
                            className: "nativeSlider-mark",
                            style: {
                                left: "".concat(e, "%")
                            }
                        })
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e, t = this,
                            n = void 0 !== this.props.min ? this.props.min : 0,
                            r = void 0 !== this.props.max ? this.props.max : 1;
                        return void 0 !== this.props.mark && (e = 50 + 100 * this.props.mark / 2.2), React.createElement("div", {
                            className: Bt("nativeSlider", {
                                "nativeSlider--small": this.props.small
                            }),
                            "data-warning": this.props.warningXL
                        }, React.createElement("input", {
                            className: Bt("nativeSlider-input", {
                                "nativeSlider-input--small": this.props.small
                            }),
                            type: "range",
                            min: Math.round(100 * n) / 100,
                            max: Math.round(100 * r) / 100,
                            step: this.props.step || .01,
                            defaultValue: this.props.value,
                            onChange: function(e) {
                                return t.onChange(e)
                            },
                            onTouchEnd: function() {
                                return t.onMouseUpInWindow()
                            },
                            ref: function(e) {
                                return t.inputRef = e
                            }
                        }), e && this.renderMark(e))
                    }
                }]) && Mt(n.prototype, r), o && Mt(n, o), t
            }();

        function Lt(e) {
            return (Lt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Ut(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Dt(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function Ft(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function zt(e, t) {
            return !t || "object" !== Lt(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Vt(e) {
            return (Vt = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Gt(e, t) {
            return (Gt = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var qt = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = zt(this, Vt(t).call(this, e))).refresh = function() {
                    return n.forceUpdate()
                }, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Gt(e, t)
            }(t, React.Component), n = t, o = [{
                key: "hasChanged",
                value: function(e) {
                    var t = e.slot,
                        n = e.boneID,
                        r = e.axis,
                        o = CK.data.transforms[t],
                        a = (e.transform || "rotation").substring(0, 3);
                    return o && n in o && a in o[n] && r in o[n][a]
                }
            }, {
                key: "getClearData",
                value: function(e) {
                    var t = e.slot,
                        n = e.boneID,
                        r = e.axis;
                    return {
                        transforms: Ut({}, t, Ut({}, n, Ut({}, (e.transform || "rotation").substring(0, 3), Ut({}, r, void 0))))
                    }
                }
            }, {
                key: "getBone",
                value: function(e, t) {
                    var n = CK.display.meshes[e];
                    return n && CK.display.getBoneFromID(n, t)
                }
            }], (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("characterFinishedChanging", this.refresh)
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("characterFinishedChanging", this.refresh)
                }
            }, {
                key: "render",
                value: function() {
                    var e, n, r = this,
                        o = this.props,
                        a = o.slot,
                        i = o.label,
                        s = o.boneID,
                        c = o.axis,
                        l = o.limit,
                        u = this.props.transform || "rotation",
                        f = u.substring(0, 3),
                        h = HF.JointLimits.limits;
                    if (l) {
                        var p = Dt(l(), 2);
                        e = p[0], n = p[1]
                    } else a in h && s in h[a] && f in h[a][s] && h[a][s][f][c] ? (e = h[a][s][f][c][0], n = h[a][s][f][c][1]) : (e = -Math.PI, n = Math.PI, "rot" !== f && console.warn("No defined limits for", {
                        slot: a,
                        boneID: s,
                        transformShort: f,
                        axis: c
                    }, "in", h));
                    var d = CK.data.transforms[a],
                        m = t.hasChanged(this.props),
                        y = CK.display.meshes[a];
                    if (!y) return null;
                    var v = CK.display.getBoneFromID(y, s);
                    if (!v) return React.createElement("div", null, a, " does not have bone ", s);
                    var b = m ? d[s][f][c] : v[u][c],
                        g = function(e) {
                            return Ut({}, a, Ut({}, s, Ut({}, f, Ut({}, c, e))))
                        },
                        w = y.skeleton ? y.skeleton.getJointTransform(v, f) : (new RK.Vec3).fromArray(v.poses.pos);
                    "rot" === f && v.rotation.order !== w.order && w.reorder(v.rotation.order);
                    var k = this.props.originalValue ? this.props.originalValue(y) : w[c],
                        S = this.props.disableMark ? void 0 : k;
                    return void 0 !== e && void 0 !== n && void 0 !== b && void 0 !== k || console.error("Undefined value for slider", e, n, b, marks, i), React.createElement("div", {
                        className: "slider-wrapper"
                    }, !this.props.hideLabel && React.createElement("a", {
                        className: "label"
                    }, i), React.createElement(At, {
                        min: e,
                        max: n,
                        value: b,
                        onChange: function(t) {
                            t >= e && t <= n ? CK.character.previewTransforms(g(t)) : console.warn("Setting slider ", i, "to out of bounds value", t), r.refresh()
                        },
                        onAfterChange: function(e, n) {
                            n ? CK.tweak(t.getClearData(r.props)) : CK.tweak({
                                transforms: g(e)
                            })
                        },
                        mark: S
                    }))
                }
            }]) && Ft(n.prototype, r), o && Ft(n, o), t
        }();

        function Ht(e) {
            return (Ht = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Wt(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Qt(e, t) {
            return !t || "object" !== Ht(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Xt(e) {
            return (Xt = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Yt(e, t) {
            return (Yt = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Zt = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = Qt(this, Xt(t).call(this, e)))._refresh = function() {
                    n.forceUpdate()
                }, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Yt(e, t)
            }(t, React.Component), n = t, o = [{
                key: "clearManipulate",
                value: function() {
                    t.on = !1, EX.Kit.deselect()
                }
            }], (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("kit-selection-changed", this._refresh), EX.Kit.enable(), EX.Kit.hotkeys = !1, this._setConeLimitIfSelected()
                }
            }, {
                key: "componentDidUpdate",
                value: function() {
                    this._setConeLimitIfSelected()
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("kit-selection-changed", this._refresh), EX.Kit.disable()
                }
            }, {
                key: "manipulate",
                value: function() {
                    t.on = !0;
                    var e = this.props,
                        n = e.boneID,
                        r = e.slot,
                        o = e.coneLimit,
                        a = e.gizmoScale;
                    EX.Kit.enableSelection = !1, EX.Kit.setMode("swingTwist"), EX.Kit.select(r, n), EX.Kit.setConeLimit(o), EX.Kit.setGizmoScale(a)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this,
                        n = this.props.boneID === EX.Kit.boneID;
                    return React.createElement("img", {
                        src: "/static/svg/tools/posing-rotate.svg",
                        className: "expert-posing-transformer-toggle" + (n ? " selected" : "") + (this.props.floating ? " floating" : ""),
                        onClick: function() {
                            return n ? t.clearManipulate() : e.manipulate()
                        }
                    })
                }
            }, {
                key: "_setConeLimitIfSelected",
                value: function() {
                    var e = this.props,
                        t = e.boneID,
                        n = e.coneLimit,
                        r = e.gizmoScale;
                    t === EX.Kit.boneID && (EX.Kit.setConeLimit(n), EX.Kit.setGizmoScale(r))
                }
            }]) && Wt(n.prototype, r), o && Wt(n, o), t
        }();

        function Jt(e) {
            return (Jt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function $t(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function en(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function tn(e, t) {
            return !t || "object" !== Jt(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function nn(e) {
            return (nn = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function rn(e, t) {
            return (rn = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var on = function(e) {
            function t() {
                return $t(this, t), tn(this, nn(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && rn(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "render",
                value: function() {
                    return React.createElement("div", {
                        className: VN.classNames({
                            "expertPosing-group": !0,
                            borderless: this.props.borderless
                        })
                    }, React.createElement("div", {
                        className: "transform-group-label"
                    }, this.props.label || React.createElement("div", null), this.props.disableTransformer ? React.createElement("div", null) : React.createElement(Zt, {
                        slot: this.props.slot,
                        boneID: this.props.boneID,
                        coneLimit: this.props.coneLimit,
                        gizmoScale: this.props.gizmoScale
                    })), this.props.children)
                }
            }]) && en(n.prototype, r), o && en(n, o), t
        }();

        function an(e) {
            return (an = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function sn(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function cn(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ln(e, t) {
            return !t || "object" !== an(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function un(e) {
            return (un = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function fn(e, t) {
            return (fn = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        Math.PI;
        var hn = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = ln(this, un(t).call(this, e))).refresh = function() {
                    if (!n.editing) {
                        var e = n._initialize();
                        n.setState(e)
                    }
                }, n.state = n._initialize(), n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && fn(e, t)
            }(t, React.Component), n = t, o = [{
                key: "hasChanged",
                value: function(e) {
                    var t = e.slot,
                        n = e.boneID,
                        r = CK.data.transforms[t],
                        o = !1;
                    if (r) {
                        var a = r[n];
                        if (a) {
                            var i = a.qtn;
                            i && (o = "x" in i || "y" in i || "z" in i)
                        }
                    }
                    return o
                }
            }, {
                key: "getClearData",
                value: function(e) {
                    return {
                        transforms: sn({}, e.slot, sn({}, e.boneID, {
                            qtn: {
                                x: void 0,
                                y: void 0,
                                z: void 0,
                                w: void 0
                            }
                        }))
                    }
                }
            }], (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("CharacterFinishedChanging", this.refresh)
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("CharacterFinishedChanging", this.refresh)
                }
            }, {
                key: "_getTransformObj",
                value: function() {
                    var e = (this.state.x * this.sliderScale.x + 1) / 2,
                        n = this.swingTwistLimits.x[0] * (1 - e) + this.swingTwistLimits.x[1] * e,
                        r = new RK.Quaternion;
                    r.setFromAxisAngle(new RK.Vec3(1, 0, 0), n);
                    var o = this.swingTwistLimits.y[0],
                        a = this.swingTwistLimits.y[1],
                        i = this.swingTwistLimits.z[0],
                        s = this.swingTwistLimits.z[1],
                        c = Math.sin(o / 2),
                        l = Math.sin(a / 2),
                        u = Math.sin(i / 2),
                        f = Math.sin(s / 2),
                        h = this.state.y * this.sliderScale.y,
                        p = this.state.z * this.sliderScale.z,
                        d = h * Math.sqrt(1 - p * p / 2),
                        m = p * Math.sqrt(1 - h * h / 2);
                    h = d, p = m;
                    var y = Math.sqrt(h * h + p * p);
                    y > 1 && (h /= y, p /= y);
                    var v = 0,
                        b = 0;
                    h *= v = h >= 0 ? Math.abs(l) : Math.abs(c), p *= b = p >= 0 ? Math.abs(f) : Math.abs(u);
                    var g = Math.atan2(p, h),
                        w = v * Math.cos(g),
                        k = b * Math.sin(g),
                        S = Math.sqrt(w * w + k * k),
                        _ = Math.sqrt(h * h + p * p);
                    if (_ > S) {
                        var C = S / _;
                        h *= C, p *= C, _ = S
                    }
                    var R = new RK.Quaternion(0, h, p, Math.sqrt(Math.max(1 - h * h - p * p, 0))),
                        O = new RK.SwingTwist(R, r, this.swingTwistLimits.order),
                        E = new RK.Quaternion;
                    E.multiply(this.bindQuaternion), E.multiply(this.orient), E.multiply(O.toQuaternion()), E.multiply(this.orient.clone().inverse()), E.multiply(this.preRotate);
                    var P = this._getTwistLocked(),
                        x = this._getSwingLocked(),
                        j = P ? 0 : this._origP.x - this.state.x,
                        T = x ? 0 : this._origP.y - this.state.y,
                        M = x ? 0 : this._origP.z - this.state.z,
                        K = Math.sqrt(j * j + T * T + M * M),
                        I = this.props.getCanClear,
                        N = !I || I(),
                        B = null;
                    return B = K < .01 && N ? t.getClearData(this.props).transforms : sn({}, this.slot, sn({}, this.boneID, {
                        qtn: {
                            x: E.x,
                            y: E.y,
                            z: E.z,
                            w: E.w
                        }
                    })), CK.display.bakeCodePosingIntoTransforms(B), B
                }
            }, {
                key: "render",
                value: function() {
                    var e = this;
                    if (!this.mesh) return null;
                    var t = function() {
                            var t = e.editing;
                            e.editing = !0;
                            try {
                                CK.character.previewTransforms(e._getTransformObj())
                            } finally {
                                e.editing = t
                            }
                            e.props.onChange && e.props.onChange()
                        },
                        n = function(t, n) {
                            var r = e.editing;
                            e.editing = !0;
                            try {
                                CK.display.sunOcclusion && (CK.display.sunOcclusion.ignoreNeedsRefreshCount = 3), CK.tweak({
                                    transforms: e._getTransformObj()
                                }), e.props.afterChange && e.props.afterChange()
                            } finally {
                                e.editing = r
                            }
                        },
                        r = void 0 !== this.props.getOrig ? this.props.getOrig(this.mesh, this.bone) : this.mesh.skeleton ? this.mesh.skeleton.getQtn(this.bone) : (new RK.Quaternion).fromArray(this.bone.poses.rot);
                    if (void 0 === r) return null;
                    var o = this._fromQuaternion(r),
                        a = o.x,
                        i = o.y,
                        s = o.z;
                    o.constrained, this._origP = {
                        x: a,
                        y: i,
                        z: s
                    };
                    var c = this.props.disableMark ? void 0 : a,
                        l = this.props.disableMark ? void 0 : i,
                        u = this.props.disableMark ? void 0 : s,
                        f = this._getTwistLocked(),
                        h = this._getSwingLocked();
                    return React.createElement(on, {
                        slot: this.props.slot,
                        boneID: this.props.boneID,
                        label: this.props.label,
                        coneLimit: this.props.coneLimit,
                        gizmoScale: this.props.gizmoScale,
                        disableTransformer: this.props.disableTransformer,
                        borderless: this.props.borderless
                    }, !f && React.createElement("div", {
                        className: "slider-wrapper"
                    }, !this.props.hideLabel && React.createElement("a", {
                        className: "label"
                    }, "Twist"), React.createElement(At, {
                        min: -1,
                        max: 1,
                        step: .01,
                        value: this.state.x,
                        onChange: function(n, r) {
                            e.setState({
                                x: n
                            }, (function() {
                                return t()
                            }))
                        },
                        onAfterChange: function(t, r) {
                            e.setState({
                                x: t
                            }, (function() {
                                return n()
                            }))
                        },
                        mark: c
                    })), !h && React.createElement("div", {
                        className: "slider-wrapper"
                    }, !this.props.hideLabel && React.createElement("a", {
                        className: "label"
                    }, "Bend"), React.createElement(At, {
                        min: -1,
                        max: 1,
                        step: .01,
                        value: this.state.y,
                        onChange: function(n, r) {
                            e.setState({
                                y: n
                            }, (function() {
                                return t()
                            }))
                        },
                        onAfterChange: function(t, r) {
                            e.setState({
                                y: t
                            }, (function() {
                                return n()
                            }))
                        },
                        mark: l
                    })), !h && React.createElement("div", {
                        className: "slider-wrapper"
                    }, !this.props.hideLabel && React.createElement("a", {
                        className: "label"
                    }, "Tilt"), React.createElement(At, {
                        min: -1,
                        max: 1,
                        step: .01,
                        value: this.state.z,
                        onChange: function(n, r) {
                            e.setState({
                                z: n
                            }, (function() {
                                return t()
                            }))
                        },
                        onAfterChange: function(t, r) {
                            e.setState({
                                z: t
                            }, (function() {
                                return n()
                            }))
                        },
                        mark: u
                    })))
                }
            }, {
                key: "_getTwistLocked",
                value: function() {
                    return this.swingTwistLimits.x[1] <= this.swingTwistLimits.x[0]
                }
            }, {
                key: "_getSwingLocked",
                value: function() {
                    return this.swingTwistLimits.y[1] <= this.swingTwistLimits.y[0] && this.swingTwistLimits.z[1] <= this.swingTwistLimits.z[0]
                }
            }, {
                key: "_fromQuaternion",
                value: function(e) {
                    var t = new RK.Quaternion;
                    t.multiply(this.orient.clone().inverse()), t.multiply(this.bindQuaternionInverse), t.multiply(e), t.multiply(this.preRotate.clone().inverse()), t.multiply(this.orient);
                    var n = this.swingTwistLimits.x[0],
                        r = this.swingTwistLimits.x[1],
                        o = this.swingTwistLimits.y[0],
                        a = this.swingTwistLimits.y[1],
                        i = this.swingTwistLimits.z[0],
                        s = this.swingTwistLimits.z[1],
                        c = Math.sin(o / 2),
                        l = Math.sin(a / 2),
                        u = Math.sin(i / 2),
                        f = Math.sin(s / 2),
                        h = (new RK.SwingTwist).setFromQuaternion(t, this.swingTwistLimits.order),
                        p = h.swing,
                        d = p.y,
                        m = p.z,
                        y = !1,
                        v = 0,
                        b = 0;
                    v = d >= 0 ? Math.abs(l) : Math.abs(c), b = m >= 0 ? Math.abs(f) : Math.abs(u);
                    var g = Math.atan2(m, d),
                        w = v * Math.cos(g),
                        k = b * Math.sin(g),
                        S = Math.sqrt(w * w + k * k),
                        _ = Math.sqrt(d * d + m * m);
                    if (_ > S) {
                        var C = S / _;
                        d *= C, m *= C, _ = S, y = !0
                    }
                    d /= v, m /= b;
                    var R = Math.sqrt(d * d + m * m);
                    R > 1 && (d /= R, m /= R, y = !0);
                    var O = d,
                        E = m;
                    d = .5 * Math.sqrt(2 + O * O - E * E + 2 * Math.sqrt(2) * O) - .5 * Math.sqrt(2 + O * O - E * E - 2 * Math.sqrt(2) * O), m = .5 * Math.sqrt(2 - O * O + E * E + 2 * Math.sqrt(2) * E) - .5 * Math.sqrt(2 - O * O + E * E - 2 * Math.sqrt(2) * E);
                    var P, x, j, T = 0,
                        M = h.twist,
                        K = (P = 2 * Math.asin(M.x), x = (n + r) / 2 - Math.PI, j = Math.floor((P - x) / (2 * Math.PI)), P - 2 * j * Math.PI);
                    return r > n && (T = (K - n) / (r - n) * 2 - 1), isNaN(T) && (T = 0), isNaN(d) && (d = 0), isNaN(m) && (m = 0), {
                        x: T *= this.sliderScale.x,
                        y: d *= this.sliderScale.y,
                        z: m *= this.sliderScale.z,
                        constrained: y
                    }
                }
            }, {
                key: "_initialize",
                value: function() {
                    this.boneID = this.props.boneID, this.slot = this.props.slot;
                    var e = CK.data.transforms[this.slot];
                    if (this.mesh = CK.display.meshes[this.slot], this.mesh) {
                        if (this.bone = CK.display.getBoneFromID(this.mesh, this.boneID), !this.bone) return console.error("Could not find bone", this.boneID, "with mesh", this.mesh);
                        this.bindQuaternion = (new RK.Quaternion).fromArray(this.bone.poses.rot), this.bindQuaternionInverse = this.bindQuaternion.clone().inverse();
                        var t = HF.JointLimits.limits,
                            n = "";
                        if (this.orient = new RK.Quaternion, this.preRotate = new RK.Quaternion, t) {
                            var r = t[this.slot];
                            if (r) {
                                var o = r[this.boneID];
                                o && (this.swingTwistLimits = o.cone, this.swingTwistLimits && this.swingTwistLimits.orient && this.orient.copy(this.swingTwistLimits.orient), void 0 !== o.right && (n = o.cone && o.cone.mirrorsliders || "xy"))
                            }
                        }
                        this.swingTwistLimits = this.props.coneLimit || this.swingTwistLimits, this.swingTwistLimits = this.swingTwistLimits || {
                            x: [-Math.PI, Math.PI],
                            y: [-Math.PI, Math.PI],
                            z: [-Math.PI, Math.PI],
                            order: "swingtwist"
                        }, this.swingTwistLimits.orient && this.orient.copy(this.swingTwistLimits.orient), this.swingTwistLimits.preRotate ? this.preRotate.copy(this.swingTwistLimits.preRotate) : EX.Kit.orient && this.orient.copy(EX.Kit.orient), this.sliderScale = {
                            x: 1,
                            y: 1,
                            z: 1
                        };
                        for (var a = 0; a < n.length; ++a) this.sliderScale[n.charAt(a)] = -1;
                        var i = null;
                        if (e) {
                            var s = e[this.boneID];
                            s && (i = s.qtn)
                        }
                        var c = this.bone.quaternion.x,
                            l = this.bone.quaternion.y,
                            u = this.bone.quaternion.z,
                            f = this.bone.quaternion.w;
                        i && (void 0 !== i.x && (c = i.x), void 0 !== i.y && (l = i.y), void 0 !== i.z && (u = i.z), void 0 !== i.w && (f = i.w));
                        var h = new RK.Quaternion(c, l, u, f).normalize();
                        return this._fromQuaternion(h)
                    }
                }
            }]) && cn(n.prototype, r), o && cn(n, o), t
        }();

        function pn(e) {
            return (pn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function dn(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function mn(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function yn(e, t) {
            return !t || "object" !== pn(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function vn(e) {
            return (vn = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function bn(e, t) {
            return (bn = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var gn = function(e) {
                function t() {
                    return dn(this, t), yn(this, vn(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && bn(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "clear",
                    value: function() {
                        var e = {};
                        React.Children.toArray(this.props.children).map((function(t) {
                            t.type.getClearData && CK.Helpers.deepMerge(e, t.type.getClearData(t.props)), t.props.children && React.Children.toArray(t.props.children).map((function(t) {
                                t.type.getClearData && CK.Helpers.deepMerge(e, t.type.getClearData(t.props))
                            }))
                        })), CK.tweak(e), this.props.onClear && this.props.onClear(e), Zt.clearManipulate()
                    }
                }, {
                    key: "clearActive",
                    value: function() {
                        return !!React.Children.toArray(this.props.children).find((function(e) {
                            return e.type.hasChanged && e.type.hasChanged(e.props) || e.props.children && React.Children.toArray(e.props.children).find((function(e) {
                                return e.type && e.type.hasChanged && e.type.hasChanged(e.props)
                            }))
                        }))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this;
                        return React.createElement("div", null, React.createElement("div", {
                            className: "expert-posing-title-line"
                        }, React.createElement("div", {
                            className: "expert-posing-grid-label"
                        }, this.props.label || ""), this.clearActive() ? React.createElement("div", {
                            className: "expert-posing-reset",
                            onClick: function() {
                                return e.clear()
                            }
                        }, "clear") : React.createElement("div", null)), this.props.children)
                    }
                }]) && mn(n.prototype, r), o && mn(n, o), t
            }(),
            wn = [-.97, .97];

        function kn() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "baseItem",
                t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "Base Items",
                n = CK.display.meshes[e],
                r = CK.modded.parts.baseRim;
            if (!n || !r) return null;
            var o = r.name.endsWith("_square") || r.name.endsWith("_squarelong"),
                a = r.name.endsWith("long"),
                i = n.skeleton,
                s = i.obj.children.filter((function(e) {
                    return e.isBone
                })).map((function(t, n) {
                    var r = function(n) {
                            if (a) return "x" === n ? [-.8, .8] : [-1.7, 1.7];
                            if (o) return wn;
                            var r = CK.display.getTransform(e, t.name, "pos");
                            if (!r) return console.error("No transform"), wn;
                            var i = r.x,
                                s = r.z;
                            if ("x" === n) {
                                var c = Math.sqrt(.9409 - s * s);
                                return isNaN(c) && (c = .97), [-c, c]
                            }
                            var l = Math.sqrt(.9409 - i * i);
                            return isNaN(l) && (l = .97), [-l, l]
                        },
                        i = t.name,
                        s = CK.display.meshes[e].skeleton.getQtn(t),
                        c = new RK.Vec3(0, 1, 0).applyQuaternion(s.clone().inverse()),
                        l = (new RK.Quaternion).setFromUnitVectors(new RK.Vec3(1, 0, 0), c),
                        u = .999 * Math.PI,
                        f = {
                            x: [-u, u],
                            y: [Math.PI, -Math.PI],
                            z: [Math.PI, -Math.PI],
                            order: "swingtwist",
                            orient: l.toSimple()
                        };
                    return n || i, React.createElement("div", {
                        className: "expertPosing-group",
                        key: n
                    }, React.createElement("div", {
                        className: "expertPosing-group-label"
                    }, "Item " + (n + 1)), React.createElement(qt, {
                        slot: e,
                        label: "Forwards",
                        transform: "position",
                        boneID: i,
                        axis: "z",
                        limit: function() {
                            return r("z")
                        },
                        disableMark: !0
                    }), React.createElement(qt, {
                        slot: e,
                        label: "Sideways",
                        transform: "position",
                        boneID: i,
                        axis: "x",
                        limit: function() {
                            return r("x")
                        },
                        disableMark: !0
                    }), React.createElement(hn, {
                        slot: e,
                        boneID: i,
                        coneLimit: f,
                        gizmoScale: 2,
                        label: "Twist",
                        hideLabel: !0,
                        borderless: !0
                    }))
                }));
            return React.createElement(gn, {
                label: t,
                slot: e
            }, s)
        }

        function Sn(e) {
            return (Sn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function _n() {
            if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
            if (Reflect.construct.sham) return !1;
            if ("function" == typeof Proxy) return !0;
            try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}))), !0
            } catch (e) {
                return !1
            }
        }

        function Cn(e, t, n) {
            return (Cn = _n() ? Reflect.construct : function(e, t, n) {
                var r = [null];
                r.push.apply(r, t);
                var o = new(Function.bind.apply(e, r));
                return n && Tn(o, n.prototype), o
            }).apply(null, arguments)
        }

        function Rn(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function On(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function En(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Pn(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function xn(e, t) {
            return !t || "object" !== Sn(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function jn(e) {
            return (jn = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Tn(e, t) {
            return (Tn = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        kn.baseRadius = .97;
        var Mn = {
                finger5R: [
                    [-3.14, -1.57, 0],
                    [-.07, .006, -.006]
                ],
                finger4R: [
                    [-3.14, -1.57, 0],
                    [-.06, 0, 0]
                ],
                finger3R: [
                    [-3.14, -1.57, 0],
                    [-.06, 0, 0]
                ],
                finger2R: [
                    [-3.14, -1.57, 0],
                    [-.05, 0, 0]
                ],
                finger1R: [
                    [-3.14, -1.57, 0],
                    [-.05, 0, 0]
                ],
                finger1L: [
                    [0, -1.57, 0],
                    [.08, -.005, .006]
                ],
                finger2L: [
                    [0, -1.57, 0],
                    [.06, 0, 0]
                ],
                finger3L: [
                    [0, -1.57, 0],
                    [.06, 0, 0]
                ],
                finger4L: [
                    [0, -1.57, 0],
                    [.05, 0, 0]
                ],
                finger5L: [
                    [0, -1.57, 0],
                    [.05, 0, 0]
                ]
            },
            Kn = function(e) {
                function t() {
                    return En(this, t), xn(this, jn(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Tn(e, t)
                }(t, CK.Modded), n = t, (r = [{
                    key: "_customUpdateStart",
                    value: function() {
                        this.poseModifiers.main || (this.poseModifiers.main = []), this._hideRider(), this._extraArms(), this._extraTails(), this._twoHanded(), this._back(), this._trunk(), this._tailItem(), this._heels(), this._hands(), this._rings(), this._environment()
                    }
                }, {
                    key: "_customUpdateEnd",
                    value: function() {
                        this._eyebrowsBeardConform(), this._baseItemTransforms(), this._base(), this._raySnap()
                    }
                }, {
                    key: "_twoHanded",
                    value: function() {
                        if (!(this.parts.mount || this.parts.itemR && this.parts.itemL)) {
                            var e = this.parts.itemR || this.parts.itemL;
                            if (e) {
                                var t = this.poses.main;
                                if (Ot.find((function(n) {
                                        return n in e.keywords && n in t.keywords
                                    }))) {
                                    var n = CK.Options.getPartBySlotAndName("itemD", e.name);
                                    n && (delete this.parts.itemR, delete this.parts.itemL, this.parts.itemD = n, e.keywords.bowD && !this.parts.itemAttachT && (this.parts.itemAttachT = CK.Options.getPartBySlotAndName("itemAttachT", "arrow" + e.name.slice(3)) || CK.Options.getPartBySlotAndName("itemAttachT", "arrowStandard")))
                                }
                            }
                        }
                    }
                }, {
                    key: "_extraArms",
                    value: function() {
                        for (var e = this.data.custom.arms || 0, t = 0; t < e; t++) this.parts.chest && !this.parts.chest.keywords.sleeveless && (this.parts["chest".concat(t)] = this.parts.chest), this.parts.bodyUpper && (this.parts["bodyUpper".concat(t)] = this.parts.bodyUpper)
                    }
                }, {
                    key: "_extraTails",
                    value: function() {
                        for (var e = this.data.custom.tails || 0, t = 0; t < e; t++) this.parts.tail && (this.parts["tail".concat(t)] = this.parts.tail)
                    }
                }, {
                    key: "_back",
                    value: function() {
                        var e = this;
                        ["R", "L"].map((function(t) {
                            var n = e.parts["backItem" + t];
                            if (n) {
                                var r = CK.Options.partsBySlot.itemBindR.map((function(e) {
                                    return e.name
                                })).find((function(e) {
                                    return n.keywords["attach_" + e]
                                }));
                                if (r) {
                                    var o = CK.Options.getPartBySlotAndName("itemBind" + t, r) || console.error("Failed to find itemBind", r);
                                    o && (e.parts["itemBind" + t] = o)
                                } else console.error("Back item ".concat(n.name, " does not have an attach_**** keyword. How will it attach to the back?"))
                            }
                        })), (this.parts.backItemR || this.parts.backItemL) && this.parts.back && this.parts.back.keywords.cape && this.poseModifiers.main.push({
                            priority: 1,
                            modifierName: "backCapeHeavy"
                        })
                    }
                }, {
                    key: "_trunk",
                    value: function() {
                        var e = this.parts.itemTrunk,
                            t = this.parts.face && 10246 === this.parts.face.id,
                            n = this.parts.face && 10795 === this.parts.face.id;
                        if ((t || n) && e) {
                            var r = t ? "trunk" : "octo",
                                o = {
                                    book: "face_".concat(r, "_cube"),
                                    shield: "face_".concat(r, "_shield")
                                }[e.poseModifier[0]] || "face_".concat(r, "_item");
                            this.poseModifiers.main.push({
                                priority: 20,
                                modifierName: o
                            })
                        } else delete this.parts.itemTrunk
                    }
                }, {
                    key: "_tailItem",
                    value: function() {
                        var e = this.parts,
                            t = e.itemTail,
                            n = e.tail;
                        if (n && t && n.keywords.prehensile) {
                            var r = {
                                book: "tail_item_cube",
                                shield: "tail_item_shield"
                            }[t.poseModifier[0]] || "tail_item";
                            this.poseModifiers.main.push({
                                priority: 20,
                                modifierName: r
                            })
                        } else delete this.parts.itemTail
                    }
                }, {
                    key: "getMaterial",
                    value: function() {
                        return this.physical && this.physical.length && CK.Options.productsByName[this.physical] && CK.Options.productsByName[this.physical].material || "unknown"
                    }
                }, {
                    key: "_base",
                    value: function() {
                        var e = this,
                            t = this.parts,
                            n = t.base,
                            r = t.label,
                            o = !0,
                            a = this.getMaterial();
                        if (n && !n.keywords.feetRotateBase) {
                            var i = (this.parts.baseRim || CK.Options.getPartBySlotAndName("baseRim", "straight")).baseName,
                                s = "";
                            n.keywords.square ? s += "square" : n.keywords.hex && (s += "hex"), (this.parts.mount || this.parts.bodyLower && "centaur" === this.parts.bodyLower.name) && (s += "long"), s.length && (i += "_" + s), this.parts.baseRim = CK.Options.getPartBySlotAndName("baseRim", i)
                        } else n ? (this.hideGround = !0, o = !1) : a.startsWith("steel_polished_bronze") || "polished_bronze" === a || this.parts.bodyLower && this.parts.bodyLower.keywords.noTagWithoutBase ? o = !1 : this.parts.tag = CK.Options.getPartBySlotAndName("tag", "tagAttach");
                        if ("digital" !== a && "plastic_color" !== a || (o = !1), o && this.settings.hiRez && this.parts.tagNumber || (delete this.parts.tagNumber, delete this.parts.tag), r && "solid" === r.baseName)
                            if (n.keywords.feetRotateBase) delete this.parts.label;
                            else {
                                var c = n.keywords.square ? "square" : n.keywords.hex ? "hex" : "round";
                                (this.parts.mount || this.parts.bodyLower && "centaur" === this.parts.bodyLower.name) && (c += "long"), this.parts.tagNumber && (c += "Alt");
                                var l = CK.Options.getPartBySlotAndName("label", "solid_" + c);
                                l ? this.parts.label = l : console.error("missing label", "solid_" + c)
                            }
                        n && n.useMesh && (this.paintMatch.baseRim = {
                            0: ["baseRim", 1]
                        }), this.data.flags.baseOnly && (CK.Settings.slotGroups.characterGroup.map((function(t) {
                            return delete e.parts[t]
                        })), delete this.parts.mount)
                    }
                }, {
                    key: "_raySnap",
                    value: function() {
                        this.raySnaps = [], this.parts.base && !this.parts.mount && (this.poses.main && 60 === this.poses.main.pose_id && this.raySnaps.push({
                            slots: CK.Settings.slotGroups.characterGroup,
                            target: "base",
                            direction: new RK.Vec3(0, 1, 0)
                        }), this.raySnaps.push({
                            slots: ["itemL", "itemR", "itemD", "beard", "legs"],
                            target: "baseCollision",
                            direction: new RK.Vec3(0, 1, 0)
                        }))
                    }
                }, {
                    key: "_hideRider",
                    value: function() {
                        if (this.data.flags.hideRider)
                            for (var e in this.parts) e in {
                                mount: 1,
                                base: 1,
                                baseRim: 1,
                                baseItem: 1,
                                label: 1,
                                baseLabel: 1
                            } || delete this.parts[e]
                    }
                }, {
                    key: "_rings",
                    value: function() {
                        for (var e in Mn)
                            if (e in this.parts) {
                                var t = {};
                                this.transforms[e] = {
                                    root: t
                                };
                                var n = On(Mn[e], 2),
                                    r = n[0],
                                    o = n[1],
                                    a = Cn(RK.Euler, Rn(r));
                                a.order = "ZYX", t.qtn = (new RK.Quaternion).setFromEuler(a).toSimple(), t.pos = Cn(RK.Vec3, Rn(o)).toSimple()
                            }
                    }
                }, {
                    key: "_environment",
                    value: function() {}
                }, {
                    key: "_heels",
                    value: function() {
                        var e = this,
                            t = this.parts,
                            n = t.feetL,
                            r = t.feetR;
                        ["heelMed", "heelHi"].map((function(t) {
                            !r || !r.keywords[t] || n && n.keywords[t] || (e.parts.feetL = CK.Options.getPart(r.link)), !n || !n.keywords[t] || r && r.keywords[t] || (e.parts.feetR = CK.Options.getPart(n.link))
                        }))
                    }
                }, {
                    key: "_hands",
                    value: function() {
                        var e = this.custom.handPoses;
                        if (!this.parts.itemD && e)
                            for (var t in e) {
                                this.poseModifiers[t] || (this.poseModifiers[t] = []);
                                var n = e[t];
                                for (var r in n) {
                                    var o = n[r];
                                    if (o) {
                                        var a = "fingers_" + o + r,
                                            i = this.parts["item" + r];
                                        (!i && o in CK.Options.configsByName.hand_pose || i && i.poseModifier.length && i.poseModifier[i.poseModifier.length - 1] + "_pose" in CK.Options.configsByName && o in CK.Options.configsByName[i.poseModifier[i.poseModifier.length - 1] + "_pose"]) && this.poseModifiers[t].push({
                                            modifierName: a,
                                            priority: 10
                                        })
                                    }
                                }
                            }
                    }
                }, {
                    key: "_eyebrowsBeardConform",
                    value: function() {
                        var e = this.parts.face;
                        if (e) {
                            if (this.parts.eyebrows) {
                                var t = e.keywords.standardFeatures || e.keywords.standardEyebrows ? "human" : this.parts.face.name;
                                this._forceFormOnSlot("eyebrows", t, !0)
                            }
                            if (this.parts.beard) {
                                var n = e.keywords.standardFeatures || e.keywords.standardBeard ? "human" : this.parts.face.name;
                                this._forceFormOnSlot("beard", n, !0)
                            }
                        }
                    }
                }, {
                    key: "_baseItemTransforms",
                    value: function() {
                        var e = this.transforms.baseItem,
                            t = this.parts.baseRim;
                        if (e && t) {
                            var n = t.name.endsWith("_square") || t.name.endsWith("_squarelong"),
                                r = t.name.endsWith("long");
                            for (var o in e) {
                                var a = e[o],
                                    i = a.pos;
                                i && (void 0 !== i.x && Math.abs(i.x) > .9 || void 0 !== i.z && Math.abs(i.z) > 1.7 ? (delete a.pos, console.warn("Re adjusting base item advanced posing because it is out of bounds")) : r || n || void 0 === i.x || void 0 === i.z || new RK.Vec2(i.x, i.z).length() > kn.baseRadius + .3 && (delete a.pos, console.warn("Re adjusting base item advanced posing because it is out of bounds")))
                            }
                        }
                    }
                }]) && Pn(n.prototype, r), o && Pn(n, o), t
            }(),
            In = {
                useNextVariants: !0,
                breakpoints: {
                    values: {
                        md: CK.Settings.compactWidth
                    }
                },
                palette: {
                    primary: {
                        lightest: "#B1B2B3",
                        light: "#989898",
                        main: "#555963",
                        dark: "#333333"
                    },
                    secondary: {
                        main: "#ab0007",
                        dark: "#6f0b0d",
                        contrastText: "white"
                    },
                    background: {
                        lightest: "#FFFFFF",
                        lighter: "#FCFCFC",
                        light: "#F6F7F8",
                        main: "#E9EAEB",
                        dark: "#D6DDE5",
                        card: "linear-gradient(to right bottom, #f1f1f1, #333)"
                    },
                    border: {
                        light: "#CCC",
                        main: "#EAEAEA",
                        dark: "#B1B2B3"
                    }
                },
                typography: {
                    fontSize: 12,
                    htmlFontSize: 16,
                    fontFamily: ["Roboto", "-apple-system", '"Helvetica Neue"', "Arial", "sans-serif", '"Apple Color Emoji"', '"Segoe UI Emoji"', '"Segoe UI Symbol"'].join(","),
                    bold: {
                        fontFamily: "RobotoBold"
                    }
                },
                overrides: {
                    MuiExpansionPanel: {
                        expanded: {
                            margin: "0 0 8px 0",
                            boxShadow: "none",
                            border: "1px solid #E6E6E6"
                        }
                    },
                    MuiAppBar: {
                        root: {
                            boxShadow: "none"
                        }
                    },
                    MuiFormLabel: {
                        asterisk: {
                            color: "#F0286B"
                        },
                        root: {
                            letterSpacing: "0.5px",
                            textTransform: "capitalize",
                            lineHeight: ".2"
                        }
                    },
                    MuiSelect: {
                        icon: {
                            right: "8px"
                        },
                        select: {
                            padding: void 0,
                            height: void 0
                        },
                        selectMenu: {
                            lineHeight: void 0
                        }
                    },
                    MuiOutlinedInput: {
                        input: {
                            padding: "12px 14px"
                        }
                    },
                    MuiPrivateNotchedOutline: {
                        root: {
                            margin: "-1px"
                        }
                    },
                    MuiTypography: {
                        root: {
                            letterSpacing: "0.2px"
                        }
                    },
                    MuiCardMedia: {
                        root: {
                            marginTop: "12px",
                            marginBottom: "12px"
                        }
                    },
                    MuiFormHelperText: {
                        root: {
                            lineHeight: "1.2em"
                        }
                    }
                }
            },
            Nn = r(35),
            Bn = {
                skeleton: {
                    human: ["hand_familiar", "hand_fist", "hand_open", "hand_book", "hand_pistol", "hand_fireball", "hand_lantern", "hand_main", "hand_shield", "hand_rifle", "hand_orb", "jaw_underbite", "hair_cape", "hand_ratStand", "hand_pseudodragon", "hand_casting", "hand_summon", "sideItem_skirt", "hand_harp", "hand_bow"]
                },
                slotGroups: {
                    characterGroup: ["face", "body", "ears", "hair", "beard", "horns", "wingsL", "tail", "helm", "mask", "chest", "shouldersL", "wrist", "glovesL", "back", "legs", "feetR", "itemR", "itemL", "sideL", "familiarR", "eyeL", "teeth", "shouldersR", "glovesR", "sideR", "feetL", "eyebrows", "torso", "wingsR", "familiarL", "itemD", "eyeR", "supportL", "supportR", "twoHanded", "bodyUpper", "bodyLower", "faceUpper", "faceLower", "earR", "earL", "hornR", "hornL", "bodyMiscHead", "bodyMiscLegsR", "bodyMiscLegsL", "faceBridge", "itemAttachT", "sideAttachR", "sideAttachL", "backAttach", "handSlugR", "handSlugL", "torsoBridge"]
                },
                slots: {
                    bodyUpper: {
                        groundOffset: .01,
                        required: !0,
                        normalMap2: !0
                    },
                    bodyLower: {
                        groundOffset: .01,
                        required: !0,
                        normalMap2: !0
                    },
                    face: {
                        required: !0
                    },
                    mount: {
                        bounds: [2, 0, 2, 2, 4.7, 2]
                    },
                    base: {
                        groundOffset: -.22
                    },
                    material: {
                        required: !0
                    },
                    scale: {
                        required: !0
                    },
                    label: {
                        allowMirror: !1,
                        defaultLabel: "Your Text",
                        subdivide: !1
                    },
                    tagNumber: {
                        allowMirror: !1,
                        subdivide: !1
                    },
                    initiativeBack: {
                        allowMirror: !1
                    },
                    itemAttachT: {
                        required: !0
                    },
                    supportR: {
                        subdivide: !1
                    },
                    supportL: {
                        subdivide: !1
                    },
                    support: {
                        subdivide: !1
                    }
                },
                mobileThumbs: !0,
                characterRotation: {
                    x: 0,
                    y: 2.05,
                    z: 0
                },
                defaultCharacterName: "Hero"
            };
        Bn.sliders = k.sliders, Bn.projectName = "HeroForge", Bn.projectLabel = "Hero Forge", Bn.theme = In, Bn.rc = "hero", Bn.groundColor = !0, Bn.clearParts = !0, Bn.hideBackgroundForScreenshots = !0, Bn.hiRez = !1, Bn.searchable = !0, Bn.forceNormalMaps = !0, Bn.color = Nn.a.colorPermissions(), Bn.colorTextureSizeHigh = 2048, Bn.hiRezNormalMaps = Bn.color, Bn.subsurface = Bn.color ? CK.Settings.SubsurfaceMode.AmbientTint : CK.Settings.SubsurfaceMode.None, Bn.shaderballs = Bn.color, Bn.seamFin = !1, Bn.extras = !0, Bn.CustomDisplay = Ke, Bn.CustomData = qe, Bn.CustomModded = Kn, Bn.groundPlane = !0, Bn.newBreadcrumbs = !0, Bn.userMontageThumbs = !0, Bn.cameras = {
            default: {
                position: [5.714810461041111, 1.78373404465485, -2.591628691827192],
                rotation: [-3.0454367613489515, 1.1509922608613183, 3.053741177111526, "XYZ"],
                target: [0, 1.5381865337936858, 0],
                controls: {
                    fitToScreen: !0
                }
            },
            config: {
                position: [5.171456336975098, 1.7597931623458862, -2.2975525856018066],
                rotation: [-3.0454367613489515, 1.1509922608613183, 3.053741177111526, "XYZ"],
                target: [0, 1.5381865337936858, 0]
            },
            xl: {
                position: [6.656201047875249, 2.3380135078339666, -2.980862474460352],
                rotation: [-3.0454367613489515, 1.1509922608613175, 3.0537411771115264, "XYZ"],
                target: [-.027158655561600773, 2.0516189770147055, -.0116079034897251],
                controls: {
                    fitToScreen: !0
                }
            },
            mount: {
                position: [7.815384864807129, 1.389518141746521, 2.480351448059082],
                rotation: [.3095619788523651, 1.208695456640952, -.2906347419610845, "XYZ"],
                target: [-.1685520473121323, 2.310857791814972, -.400233889598574]
            },
            centaur: {
                position: [10.292946217431133, 1.5, 3.803274059350213],
                rotation: [.05844524625614127, 1.216297722773439, -.05481867542449756, "XYZ"],
                target: [-.1685520473121323, 1.910857791814972, -.400233889598574],
                controls: {
                    fitToScreen: !0
                }
            },
            initiative: {
                position: [7.5639895404591435, 4.795841648212197, .6450987853158294],
                rotation: [-1.3418104464049418, 1.0336478979467834, 1.3058941122274084, "XYZ"],
                target: [-.1685520473121323, .310857791814972, -.400233889598574]
            },
            label: {
                position: [2.153991481231397, -4.241152141453415, -1.3805187059667179],
                rotation: [1.8487440780525282, .452112464426454, -2.1493734464450625, "XYZ"],
                target: [-.5877357796106629, 1.1875106396111297, .1684616719908375],
                controls: {
                    enabled: !1,
                    zoomScale: 1.5
                }
            },
            labelMount: {
                position: [5.293248230777339, -4, -2.5740943415315054],
                rotation: [3.0016118083270142, 1.1039936416198415, -3.016423009571841, "XYZ"],
                target: [-.606165449755801, .5, .36983571662546744],
                controls: {
                    enabled: !1
                }
            },
            face: {
                position: [5.137748893490751, 3.860026800927182, -2.266741724576156],
                rotation: [3.1183884955308585, 1.1629110737848531, -3.1202915230351036, "XYZ"],
                target: function() {
                    return (new RK.Vec3).setFromMatrixPosition(CK.display.skeletons.main.obj.getObjectByName("main_neck_03_095_bind_jnt").matrixWorld).toArray()
                },
                controls: {
                    zoomScale: 4
                }
            }
        }, Bn.montageCameras = {
            default: [Bn.cameras.default, {
                position: [3.3764192973203637, -2.0389472887904603, -1.282661023297193],
                rotation: [1.950690421398093, .8074476520143782, -2.0756574939824395, "XYZ"],
                target: [-.31694859823213145, 1.2430762545204426, .0278179147927242]
            }, {
                position: [6.930705919911269, 5.022418555401691, -4.619764695162525],
                rotation: [-2.612103139931966, .9289263261626659, 2.7032501022556135, "XYZ"],
                target: [-.26760195453006574, 2.304813260127002, .023876973531785917]
            }, {
                position: [-5.565347454624194, 1.6208315732263123, 1.1447225914739456],
                rotation: [-.06729706491863621, -1.352073389883858, -.0656984012802916, "XYZ"],
                target: [-.03629984586379363, 1.5381865337936858, -.08148598507517447]
            }],
            mount: [Bn.cameras.mount, {
                position: [1.5958554601716017, 4.301264563066741, -5.356707734647334],
                rotation: [-2.9235214661290962, .25445809782295115, 3.0858702771855944, "XYZ"],
                target: [.17011026238802057, 3.1153355418836526, -.004922402287120043]
            }, {
                position: [-3.9257077993960405, 6.567550092217099, .22511508950839995],
                rotation: [-1.5064476908776727, -.8302754401553978, -1.4837171431944445, "XYZ"],
                target: [.04594641822168567, 2.944792222996215, -.00832673445460774]
            }, {
                position: [1.6870397747203891, -4.52500659330245, -3.224338377104235],
                rotation: [2.1445484900645266, .23774117676083087, -2.7921401025657815, "XYZ"],
                target: [-.22308967397663226, 2.095309267724868, 1.0542065434385806]
            }],
            xl: [Bn.cameras.xl, {
                position: [3.3764192973203637, -2.0389472887904603, -1.282661023297193],
                rotation: [1.950690421398093, .8074476520143782, -2.0756574939824395, "XYZ"],
                target: [-.31694859823213145, 1.2430762545204426, .0278179147927242]
            }, {
                position: [6.930705919911269, 5.022418555401691, -4.619764695162525],
                rotation: [-2.612103139931966, .9289263261626659, 2.7032501022556135, "XYZ"],
                target: [-.26760195453006574, 2.304813260127002, .023876973531785917]
            }, {
                position: [-7.846944566961999, 2.221452498678966, 2.130084069452909],
                rotation: [-.07913316819176604, -1.3026709918672674, -.07631684729845688, "XYZ"],
                target: [-.027158655561600773, 2.0516189770147055, -.0116079034897251]
            }],
            initiative: [Bn.cameras.initiative, {
                position: [11.335983261028913, 1.9014990894612744, -5.986803257379833],
                rotation: [-2.8642069727854294, 1.103238791926028, 2.8926961323360265, "XYZ"],
                target: [-.1685520473121323, .310857791814972, -.400233889598574]
            }, {
                position: [-10.550557705536367, -.3482641510499561, -1.8037374624537168],
                rotation: [2.702538040251366, -1.4225405925323116, 2.706767195647038, "XYZ"],
                target: [-.1685520473121323, .310857791814972, -.400233889598574]
            }, {
                position: [5.019098830506665, 7.123813292680744, 2.3695884355854675],
                rotation: [-1.1846542592970901, .6143232675171204, .9565067174080135, "XYZ"],
                target: [-.1685520473121323, .310857791814972, -.400233889598574]
            }]
        }, Bn.tokenCameras = {
            topDown: {
                position: [3.718112893099479, 11.240878228972797, -1.9540453309923091],
                rotation: [-1.7429102882573522, .31502762945133284, 2.0820752677132375, "XYZ"],
                target: [0, 0, 0],
                controls: {
                    min: 5,
                    mid: 12,
                    max: 40,
                    fitToScreen: !1,
                    maxPolarAngle: Math.PI / 4,
                    enableZoom: !1,
                    enablePan: !1,
                    freeCamera: !0
                }
            },
            isometric1: {
                position: [9.424516546665375, 6.562109894433297, 2.9250001585801426],
                rotation: [1.0290467645545833, 1.0289815579523987, .9584519750126903, "XYZ"],
                target: [0, 0, 0],
                controls: {
                    min: 11,
                    mid: 11,
                    max: 11,
                    enableZoom: !1,
                    enablePan: !1,
                    freeCamera: !0
                }
            },
            isometric2: {
                position: [2.848324726020879, 6.091064665877572, -8.705514200277651],
                rotation: [-2.53108221995473, .2619231740505579, 2.962362903957876, "XYZ"],
                target: [0, 0, 0],
                controls: {
                    min: 11,
                    mid: 11,
                    max: 11,
                    enableZoom: !1,
                    enablePan: !1,
                    freeCamera: !0
                }
            },
            isometric3: {
                position: [-8.715499308853458, 6.091064665877573, -2.817623650076897],
                rotation: [-2.0040649598392557, -.9145991997161045, -2.0992450535541116, "XYZ"],
                target: [0, 0, 0],
                controls: {
                    min: 11,
                    mid: 11,
                    max: 11,
                    enableZoom: !1,
                    enablePan: !1,
                    freeCamera: !0
                }
            },
            isometric4: {
                position: [-2.745852344470104, 6.091064665877572, 8.73837663061428],
                rotation: [-.6087417542810662, -.25229084923471257, -.1722743215097438, "XYZ"],
                target: [0, 0, 0],
                controls: {
                    min: 11,
                    mid: 11,
                    max: 11,
                    enableZoom: !1,
                    enablePan: !1,
                    freeCamera: !0
                }
            },
            portrait: {
                position: function() {
                    return [5.714810461041111, CK.orbitCamera.trackedObj.getWorldPosition().y, -2.591628691827192]
                },
                rotation: [-2.725929790835766, 1.1246202901810798, 2.762663976539221, "XYZ"],
                target: function() {
                    return (new RK.Vec3).setFromMatrixPosition(CK.display.skeletons.main.obj.getObjectByName("main_neck_03_095_bind_jnt").matrixWorld).toArray()
                },
                controls: {
                    zoomScale: 4
                }
            }
        }, Bn.cameraControls = {
            damping: .2,
            minPolarAngle: .1,
            maxPolarAngle: 1.58,
            pushMinRadius: 4,
            pushUpMin: 0,
            pushUpMax: 1,
            trackMinRadius: 4,
            trackMaxRadius: 8,
            trackLeftMax: -.5,
            trackLeftMin: -1.5,
            minDistance: 4,
            maxDistance: 11,
            maxZoom: 4,
            minPanY: -.4,
            maxPanY: 7,
            cameraMinY: 1.5,
            enableZoom: !0,
            enablePan: !0,
            enableRotate: !0,
            zoomOnCursor: !1
        }, Bn.addonKeywords = {
            fantasy: ["all"],
            western: ["all"],
            scifi: ["all"],
            modern: ["all"],
            asian: ["all"]
        }, Bn.skinInfluenceMax = 8, Bn.sunOcclusion = !0, Bn.hidePerVertex = !0, Bn.refraction = Bn.color, Bn.detectWebglCrash = !0;
        var An = Bn,
            Ln = r(14);

        function Un(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var Dn = VN.axios,
            Fn = function() {
                function e() {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e)
                }
                var t, n, r;
                return t = e, r = [{
                    key: "set",
                    value: function(t) {
                        Object.assign(e, t), CK.Events.emit("menuChanged", this)
                    }
                }, {
                    key: "parsePromoURL",
                    value: function() {
                        if (!e.promo && !e._promoStatus) {
                            var t = CK.Helpers.getUrlParameter("promo");
                            t && e.set({
                                promo: t,
                                _promoStatus: "stored"
                            })
                        }
                    }
                }, {
                    key: "consumeStoredPromo",
                    value: function() {
                        e.set({
                            promo: "",
                            _promoStatus: "consumed"
                        })
                    }
                }, {
                    key: "parseGiftURL",
                    value: function() {
                        "#gifts" == window.location.hash && (window.location.hash = "", e.showOverlay = "giftCard", e.set({
                            mainSelection: "Extras",
                            collapsed: !1
                        }), e.changeSubSelection("Gift cards"))
                    }
                }, {
                    key: "changeSubSelection",
                    value: function(t) {
                        e._subSelection[e.mainSelection] = t, CK.Events.emit("menuChanged", this)
                    }
                }, {
                    key: "basketQuantityPromise",
                    value: function() {
                        var t = e.getRequest("cartCount");
                        if (t && t.isPending()) return t;
                        var n = e.QueryablePromise(Dn({
                            method: "get",
                            url: "/cart_items/"
                        }));
                        return e.addRequest("cartCount", n), e.updateBasketQuantity(), e.getRequest("cartCount")
                    }
                }, {
                    key: "updateBasketQuantity",
                    value: function() {
                        CK.User.isLoggedIn() && Promise.resolve(e.basketQuantityPromise()).then((function(t) {
                            e.cartQuantity = t.data, e.contentSummary && e.contentSummary.items && e.contentSummary.items.length === e.cartQuantity || e.updateBasket()
                        })).catch((function(e) {
                            return console.error(e)
                        }))
                    }
                }, {
                    key: "updateBasketPromise",
                    value: function() {
                        var t = this,
                            n = e.getRequest("requestCartContents");
                        if (n && n.isPending()) return n;
                        var r = e.QueryablePromise(Dn({
                            method: "get",
                            url: "/basket/json/"
                        }));
                        return e.addRequest("requestCartContents", r), Promise.resolve(r).then((function() {
                            return CK.Events.emit("menuChanged", t)
                        })), e.updateBasket(), e.getRequest("requestCartContents")
                    }
                }, {
                    key: "updateBasket",
                    value: function() {
                        CK.User.isLoggedIn() && Promise.resolve(e.updateBasketPromise()).then((function(t) {
                            var n = t.data.items && Object.keys(t.data.items).map((function(e) {
                                var n = t.data.items[e];
                                return n.hidden = !1, n.removalID = Number(e), n
                            }));
                            e.cartQuantity = n.length, e.contentSummary = {
                                items: n,
                                shipping: t.data.shipping_charge,
                                creditBalance: t.data.credit_balance,
                                voucher_discounts: t.data.voucher_discounts,
                                offer: t.data.offer_name
                            }
                        }))
                    }
                }, {
                    key: "addRequest",
                    value: function(t, n) {
                        e._requests[t] = n
                    }
                }, {
                    key: "getRequest",
                    value: function(t) {
                        return e._requests[t]
                    }
                }, {
                    key: "clearOverlays",
                    value: function() {
                        e.showOverlay = !1
                    }
                }, {
                    key: "debounced",
                    value: function(e, t) {
                        var n, r = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                        return function() {
                            var o = this,
                                a = arguments,
                                i = function() {
                                    n = null, r || t.apply(o, a)
                                },
                                s = r && !n;
                            clearTimeout(n), n = setTimeout(i, e), s && t.apply(o, a)
                        }
                    }
                }, {
                    key: "QueryablePromise",
                    value: function(e) {
                        if (e.isResolved) return e;
                        var t = !0,
                            n = !1,
                            r = !1,
                            o = e.then((function(e) {
                                return r = !0, t = !1, e
                            }), (function(e) {
                                throw n = !0, t = !1, e
                            }));
                        return o.isFulfilled = function() {
                            return r
                        }, o.isPending = function() {
                            return t
                        }, o.isRejected = function() {
                            return n
                        }, o
                    }
                }, {
                    key: "subSelection",
                    get: function() {
                        return e._subSelection[e.mainSelection]
                    }
                }, {
                    key: "cartQuantity",
                    get: function() {
                        return e._cartQuantity
                    },
                    set: function(t) {
                        e._cartQuantity !== t && (e._cartQuantity = t > 0 ? t : 0, CK.Events.emit("menuChanged", this))
                    }
                }, {
                    key: "cartTotal",
                    get: function() {
                        return e._cartTotal
                    },
                    set: function(t) {
                        e._cartTotal != t && (e._cartTotal = t > 0 ? t : 0, CK.Events.emit("menuChanged", this))
                    }
                }, {
                    key: "contentSummary",
                    get: function() {
                        return e._contentSummary
                    },
                    set: function(t) {
                        e._contentSummary = t
                    }
                }, {
                    key: "serverRequestPending",
                    get: function() {
                        return e._requests && Object.keys(e._requests).reduce((function(t, n) {
                            return e._requests[n].isPending() ? ++t : t
                        }), 0)
                    }
                }, {
                    key: "initialRoute",
                    get: function() {
                        return e._initialRoute
                    },
                    set: function(t) {
                        e._initialRoute || (e._initialRoute = t)
                    }
                }, {
                    key: "compact",
                    get: function() {
                        return e._compact
                    },
                    set: function(t) {
                        t && -1 === document.body.className.indexOf("compact") && (document.body.className += " compact"), t || document.body.classList.remove("compact"), e._compact = t
                    }
                }, {
                    key: "landscape",
                    get: function() {
                        return e._landscape
                    },
                    set: function(t) {
                        t !== e._landscape && (e._landscape = t, e.compact && CK.Events.emit("menuChanged", this))
                    }
                }, {
                    key: "showOverlay",
                    get: function() {
                        return e._showOverlay
                    },
                    set: function(t) {
                        e._showOverlay = t, CK.Events.emit("menuChanged", this)
                    }
                }, {
                    key: "characterSaved",
                    get: function() {
                        return e._characterSaved
                    },
                    set: function(t) {
                        t !== e._characterSaved && (e._characterSaved = t, CK.Events.emit("menuChanged", this))
                    }
                }, {
                    key: "scrollPosition",
                    set: function(t) {
                        var n = this;
                        (t = e._scrollPosition) || (e._scrollPosition = t, e.debounced(100, (function() {
                            return CK.Events.emit("menuChanged", n)
                        })))
                    },
                    get: function() {
                        return e._scrollPosition
                    }
                }, {
                    key: "closeHeaderBanner",
                    get: function() {
                        return e._closeHeaderBanner
                    },
                    set: function(t) {
                        e._closeHeaderBanner = t
                    }
                }], (n = null) && Un(t.prototype, n), r && Un(t, r), e
            }();
        Fn.compact = !1, Fn.landscape = !1, Fn.collapsed = !0, Fn.mainSelection = "", Fn._subSelection = {}, Fn._showOverlay = !1, Fn.searchFilter = "", Fn.filters = {}, Fn._requests = {}, Fn._scrollPosition = 0, Fn._closeHeaderBanner = !1, Fn._cartQuantity = 0, Fn._characterSaved = !1;
        var zn = r(34);

        function Vn(e) {
            return (Vn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Gn(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function qn(e, t) {
            return !t || "object" !== Vn(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Hn(e) {
            return (Hn = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Wn(e, t) {
            return (Wn = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Qn = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = qn(this, Hn(t).call(this, e))).state = {
                    image: void 0,
                    transparent: !1,
                    canvas: void 0,
                    blobUrl: void 0
                }, n.capture(!1), n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Wn(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "freeBlobUrl",
                value: function() {
                    void 0 !== this.state.blobUrl && (console.log("free ".concat(this.state.blobUrl)), window.URL.revokeObjectURL(this.state.blobUrl))
                }
            }, {
                key: "capture",
                value: function(e) {
                    var t = this;
                    CK.Capture.downloadScreenshot(e).then((function(n) {
                        var r = n.toDataURL("image/png"),
                            o = t;
                        try {
                            n.toBlob((function(e) {
                                var t = window.URL.createObjectURL(e);
                                o.freeBlobUrl(), o.setState({
                                    blobUrl: t
                                })
                            }))
                        } catch (e) {
                            console.error("Downloading screenshots not supported")
                        }
                        CK.User.actionOnLogin = void 0, t.setState({
                            image: r,
                            transparent: e,
                            canvas: n
                        })
                    }))
                }
            }, {
                key: "renderCutout",
                value: function() {
                    var e = this,
                        t = this.state.transparent;
                    return React.createElement("div", {
                        className: "screenshot-cutout"
                    }, "Cutout ", React.createElement("input", {
                        type: "checkbox",
                        checked: t,
                        onChange: function() {
                            return e.capture(!t)
                        }
                    }))
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.state.image;
                    return e ? React.createElement(zn.a, {
                        title: "Here's your Character's image. Save it anywhere!",
                        onClose: function() {
                            return Overlay.hideOverlay()
                        },
                        buttons: CK.ClientSpecs.ios ? [{
                            label: "Close",
                            onClick: function() {
                                return Overlay.hideOverlay()
                            }
                        }] : [{
                            label: "Download",
                            icon: "static/img/account/icon-digital_downloads.svg",
                            href: this.state.blobUrl,
                            download: "Screenshot.png"
                        }],
                        footer: this.renderCutout()
                    }, React.createElement("div", {
                        className: "screenshotContainer"
                    }, React.createElement("img", {
                        src: e
                    }))) : null
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    this.freeBlobUrl()
                }
            }]) && Gn(n.prototype, r), o && Gn(n, o), t
        }();

        function Xn(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function Yn(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        window.UIState = Fn;
        var Zn = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, r;
            return t = e, r = [{
                key: "init",
                value: function() {
                    var e = this;
                    "CK" in window || console.error("CreationKit missing! Can not start UI"), this.createRoot(), (document.attachEvent ? "complete" === document.readyState : "loading" !== document.readyState) ? this.setupWindowMessaging() : document.addEventListener("DOMContentLoaded", this.setupWindowMessaging), CK.Events.on("alert", (function(e) {
                        Ln.a.alert.apply(Ln.a, Xn(e))
                    })), CK.Events.on("characterChanged", (function() {
                        bt.clearPartCache(), Reporting.characterChanged(), e.requestEditorRefresh()
                    })), CK.Events.on("menuChanged", (function() {
                        e.requestEditorRefresh()
                    })), CK.Events.on("finishedLoggingIn", (function() {
                        Ln.a.hideOverlay(), bt.clearPartCache(), e.requestEditorRefresh()
                    })), CK.GameLoop.register((function() {
                        e.creationRendered()
                    }), "end", "UI"), window.onresize = function() {
                        return e.checkSizing()
                    }, window.addEventListener("orientationchange", this.checkSizing), this.checkSizing(), this.requestEditorRefresh(), window.location.href.indexOf("load_purchased_config") > 0 && window.alert("Changes made to this copy will not impact your order.")
                }
            }, {
                key: "setupWindowMessaging",
                value: function() {
                    var e = this;
                    window.addEventListener("message", (function(e) {
                        if (event.origin === location.origin) switch (e.data) {
                            case "makeanothermini":
                                CK.saves.new(), Ln.a.hideOverlay();
                                break;
                            case "closemodal":
                                Ln.a.hideOverlay();
                                break;
                            case "updateBasketQuantity":
                                Fn.updateBasketQuantity()
                        }
                    }), !1), Fn.updateBasketQuantity(), "standalone" in window.navigator && window.navigator.standalone && document.querySelectorAll("a").forEach((function(t) {
                        return t.addEventListener("click", e.preventFromOpeningInNewWindow)
                    }))
                }
            }, {
                key: "preventFromOpeningInNewWindow",
                value: function(e) {
                    var t = e.target || e.srcElement,
                        n = t.getAttribute("href");
                    n && "#" !== n.substr(0, 1) && !t.getAttribute("data-method") && (e.preventDefault(), window.location = n)
                }
            }, {
                key: "requestEditorRefresh",
                value: function() {
                    this.refreshRequested = !0
                }
            }, {
                key: "creationRendered",
                value: function() {
                    this.refreshRequested && (this.refreshRequested = !1, this.refresh(), Fn.compacting = !1)
                }
            }, {
                key: "createRoot",
                value: function() {
                    var e = document.getElementById("CKUI");
                    e || ((e = document.createElement("div")).setAttribute("id", "CKUI"), document.body.appendChild(e)), this.root = e.appendChild(document.createElement("div"))
                }
            }, {
                key: "refresh",
                value: function() {
                    console.warn("Please override CKUI refresh")
                }
            }, {
                key: "checkSizing",
                value: function() {
                    var e = CK.sizing.landscape(),
                        t = CK.sizing.compact();
                    e === Fn.landscape && t === Fn.compact || (Fn.compacting = !Fn.compact && t, Fn.landscape = e, Fn.compact = t, Fn.alwaysCompact = (void 0 === Fn.alwaysCompact || Fn.alwaysCompact) && Fn.compact, CK.Events.emit("resize"), this.requestEditorRefresh())
                }
            }, {
                key: "promptSave",
                value: function() {
                    return new Promise((function(e, t) {
                        CK.character.savedChanges ? (Ln.a.hideOverlay(), e(!0)) : CK.User.loggedIn ? Ln.a.prompt("Save changes to the current character?", [{
                            label: "Save",
                            onClick: function() {
                                Ln.a.hideOverlay(), CK.saves.save().then((function() {
                                    return e(!0)
                                }))
                            }
                        }, {
                            label: "Don't Save",
                            onClick: function() {
                                Ln.a.hideOverlay(), e(!0)
                            }
                        }, {
                            label: "Cancel",
                            cancel: !0,
                            onClick: function() {
                                Ln.a.hidePrompt(), e(!1)
                            }
                        }], "Character Not Saved") : Ln.a.prompt("Unsaved changes will be lost", [{
                            label: "Continue",
                            onClick: function() {
                                Ln.a.hideOverlay(), e(!0)
                            }
                        }, {
                            label: "Cancel",
                            cancel: !0,
                            onClick: function() {
                                Ln.a.hidePrompt(), e(!1)
                            }
                        }], "Character Not Saved")
                    }))
                }
            }, {
                key: "promptLogout",
                value: function() {
                    this.promptSave().then((function(e) {
                        e && CK.User.logOut(!0)
                    }))
                }
            }, {
                key: "setDebugView",
                value: function(e) {
                    Fn.set({
                        debugView: e
                    })
                }
            }, {
                key: "promptClearTransforms",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [];
                    CK.hasTransforms(t) ? Ln.a.prompt("Your custom posing will be cleared. Are you sure?", [{
                        label: "Accept",
                        onClick: function() {
                            CK.tweak(Object.assign(e, CK.getClearTransformObj(t))), Ln.a.hidePrompt()
                        }
                    }, {
                        label: "Cancel",
                        cancel: !0,
                        onClick: function() {
                            return Ln.a.hidePrompt()
                        }
                    }]) : CK.tweak(e)
                }
            }, {
                key: "screenshotClick",
                value: function() {
                    Reporting.characterScreenshot(), Fn.set({
                        showOverlay: React.createElement(Qn, null)
                    })
                }
            }], (n = null) && Yn(t.prototype, n), r && Yn(t, r), e
        }();

        function Jn(e) {
            return (Jn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function $n(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function er(e) {
            return (er = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function tr(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function nr(e, t) {
            return (nr = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var rr = VN.classNames,
            or = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = er(t).call(this, e)) || "object" !== Jn(o) && "function" != typeof o ? tr(r) : o).state = {
                        isOpen: !1
                    }, n.show = n.show.bind(tr(n)), n.hide = n.hide.bind(tr(n)), n.toggle = n.toggle.bind(tr(n)), n.persist = n.persist.bind(tr(n)), n.toggleOpen = n.toggleOpen.bind(tr(n)), n.ignoreHover = n.ignoreHover.bind(tr(n)), n.togglePersist = n.togglePersist.bind(tr(n)), n.handleMouseEnter = n.handleMouseEnter.bind(tr(n)), n.handleMouseLeave = n.handleMouseLeave.bind(tr(n)), n.renderNav = n.renderNav.bind(tr(n)), n.renderIcon = n.renderIcon.bind(tr(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && nr(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "ignoreHover",
                    value: function() {
                        return UIState.compact || "cart" == UIState.showOverlay
                    }
                }, {
                    key: "handleMouseEnter",
                    value: function(e) {
                        if (!this.ignoreHover()) {
                            this.state.delayTimer && clearTimeout(this.state.delayTimer);
                            var t = setTimeout(this.show, 300);
                            this.setState({
                                delayTimer: t
                            })
                        }
                    }
                }, {
                    key: "handleMouseLeave",
                    value: function() {
                        if (!this.ignoreHover()) {
                            this.state.delayTimer && clearTimeout(this.state.delayTimer);
                            var e = setTimeout(this.hide, 300);
                            this.setState({
                                delayTimer: e
                            })
                        }
                    }
                }, {
                    key: "show",
                    value: function() {
                        this.setState({
                            isOpen: !0
                        })
                    }
                }, {
                    key: "hide",
                    value: function() {
                        this.setState({
                            isOpen: !1
                        })
                    }
                }, {
                    key: "persist",
                    value: function() {
                        UIState.showOverlay = "cart"
                    }
                }, {
                    key: "toggle",
                    value: function() {
                        UIState.compact ? this.togglePersist() : this.toggleOpen()
                    }
                }, {
                    key: "toggleOpen",
                    value: function() {
                        "cart" == UIState.showOverlay ? (UIState.showOverlay = "", this.hide()) : this.show()
                    }
                }, {
                    key: "togglePersist",
                    value: function() {
                        "cart" == UIState.showOverlay ? (UIState.showOverlay = "", this.state.delayTimer && clearTimeout(this.state.delayTimer), this.hide()) : (this.state.delayTimer && clearTimeout(this.state.delayTimer), this.persist())
                    }
                }, {
                    key: "renderIcon",
                    value: function() {
                        var e = this.props.suppressCartQuantity || !UIState.cartQuantity || UIState.cartQuantity <= 0;
                        return React.createElement("a", {
                            className: "cart-link",
                            id: "open-cart",
                            onClick: this.toggle
                        }, React.createElement("img", {
                            src: "/static/svg/cart-full.svg",
                            className: rr("cart-icon", {
                                hidden: e
                            }),
                            id: "cart-full"
                        }), React.createElement("img", {
                            src: "/static/svg/cart-empty.svg",
                            className: rr("cart-icon", {
                                hidden: !e
                            }),
                            id: "cart-empty"
                        }), !UIState.compact && React.createElement("div", {
                            className: "cart-text"
                        }, "Cart"), React.createElement("div", {
                            className: rr("cart-quantity", {
                                hidden: e
                            }),
                            id: "cart-quantity"
                        }, UIState.cartQuantity))
                    }
                }, {
                    key: "renderNav",
                    value: function() {
                        if (!this.props.suppressCartQuantity) {
                            var e = "cart" == UIState.showOverlay || this.state.isOpen;
                            if (e) {
                                var t = this.props.align || "center",
                                    n = CK.Settings.theme,
                                    r = React.createElement(window.Cart.CartPreviewContainer, {
                                        theme: n,
                                        toggle: this.togglePersist
                                    });
                                return React.createElement("nav", {
                                    className: rr("headerMenu-nav", "headerMenu-nav--align" + t, {
                                        isVisible: e
                                    })
                                }, React.createElement("div", {
                                    className: "headerMenu-nav-scroll"
                                }, r), UIState.compact && React.createElement("div", {
                                    className: "headerMenu-nav-gradient"
                                }))
                            }
                        }
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = "cart" == UIState.showOverlay || this.state.isOpen;
                        return React.createElement(React.Fragment, null, UIState.compact && React.createElement("div", {
                            className: rr("headerMenu-overlay", {
                                isVisible: e
                            }),
                            onClick: this.togglePersist
                        }), React.createElement("div", {
                            className: "headerMenu-container"
                        }, React.createElement("div", {
                            className: "headerMenu",
                            onMouseEnter: this.handleMouseEnter,
                            onMouseLeave: this.handleMouseLeave
                        }, React.createElement("div", {
                            className: rr("headerMenu-trigger", {
                                isActive: e
                            })
                        }, this.renderIcon()), this.renderNav()), this.props.extra))
                    }
                }]) && $n(n.prototype, r), o && $n(n, o), t
            }();

        function ar(e) {
            return (ar = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ir(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function sr(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function cr(e) {
            return (cr = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function lr(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function ur(e, t) {
            return (ur = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var fr = MU.withStyles,
            hr = VN.ReactRouter.withRouter,
            pr = VN.classNames,
            dr = {
                account: {
                    position: "relative",
                    display: "flex",
                    alignItems: "center"
                },
                accountNav: {
                    backgroundColor: "white",
                    boxShadow: "0 10px 16px 0 rgba(194, 198, 202, 0.4)",
                    width: "200px",
                    top: "100%",
                    right: 0,
                    opacity: 0,
                    pointerEvents: "none",
                    transition: "all 0.3s ease",
                    zIndex: 101,
                    position: "absolute",
                    transform: "translate3d(0, -10px, 0)",
                    maxHeight: "60vh",
                    overflow: "auto"
                },
                accountNavDesktop: {
                    position: "absolute",
                    transform: "none",
                    width: 215,
                    left: "inherit"
                },
                accountNavVisible: {
                    pointerEvents: "initial",
                    transform: "translate3d(0, 0, 0)",
                    opacity: 1
                },
                accountIcon: {
                    height: 22
                },
                accountText: {
                    marginLeft: 8
                },
                buttonCTA: {
                    fontFamily: "RobotoBold",
                    cursor: "pointer",
                    backgroundColor: "transparent",
                    border: "none",
                    color: "white",
                    transition: "all 0.3s ease",
                    "&:hover": {
                        backgroundColor: "#6f0b0d"
                    }
                },
                dropdownDesktop: {
                    cursor: "pointer",
                    display: "flex",
                    alignItems: "center",
                    fontSize: 16,
                    fontFamily: "Roboto",
                    letterSpacing: "1px",
                    color: "#F1F1F1",
                    margin: 0,
                    width: "auto",
                    height: 40,
                    "& svg": {
                        display: "none"
                    },
                    "&:hover svg": {
                        fill: "#ab007"
                    }
                },
                buttonLogin: {
                    textTransform: "capitalize",
                    display: "flex",
                    height: 30,
                    margin: "auto",
                    alignItems: "center",
                    justifyContent: "center",
                    fontSize: "1em",
                    width: 50
                },
                buttonLoginDesktop: {
                    width: 70
                },
                accountOverlayMobile: {
                    position: "fixed",
                    zIndex: 100,
                    right: 0,
                    left: 0,
                    bottom: 0,
                    top: 0,
                    opacity: 0,
                    transition: "all 0.3s ease",
                    pointerEvents: "none"
                },
                accountOverlayMobileVisible: {
                    pointerEvents: "all",
                    opacity: 1
                },
                user: {
                    display: "flex",
                    alignItems: "center",
                    padding: "0 10px",
                    position: "relative"
                },
                userOpen: {
                    background: "rgba(0,0,0,0.2)"
                }
            },
            mr = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = cr(t).call(this, e)) || "object" !== ar(o) && "function" != typeof o ? lr(r) : o).state = {
                        isVisible: !1
                    }, n.handleOverlayClick = n.handleOverlayClick.bind(lr(n)), n.handleClick = n.handleClick.bind(lr(n)), n.handleMouseEnter = n.handleMouseEnter.bind(lr(n)), n.handleMouseLeave = n.handleMouseLeave.bind(lr(n)), n.showMenu = n.showMenu.bind(lr(n)), n.closeMenu = n.closeMenu.bind(lr(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && ur(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "showMenu",
                    value: function() {
                        this.setState({
                            isVisible: !0
                        })
                    }
                }, {
                    key: "closeMenu",
                    value: function() {
                        this.setState({
                            isVisible: !1
                        })
                    }
                }, {
                    key: "handleOverlayClick",
                    value: function() {
                        this.closeMenu()
                    }
                }, {
                    key: "handleClick",
                    value: function(e) {
                        UIState.compact || "touchstart" == e.type || "touchend" == e.type ? (e.preventDefault(), e.stopPropagation(), this.setState({
                            isVisible: !this.state.isVisible
                        })) : (UIState.updateBasketQuantity(), this.props.history.push("/account/profile"))
                    }
                }, {
                    key: "handleMouseEnter",
                    value: function() {
                        if (!UIState.compact) {
                            this.state.delayTimer && clearTimeout(this.state.delayTimer);
                            var e = setTimeout(this.showMenu, 300);
                            this.setState({
                                delayTimer: e
                            })
                        }
                    }
                }, {
                    key: "handleMouseLeave",
                    value: function() {
                        if (!UIState.compact) {
                            this.state.delayTimer && clearTimeout(this.state.delayTimer);
                            var e = setTimeout(this.closeMenu, 300);
                            this.setState({
                                delayTimer: e
                            })
                        }
                    }
                }, {
                    key: "renderLoggedOutNav",
                    value: function() {
                        var e = this.props.classes;
                        return React.createElement("a", {
                            onClick: function() {
                                return Ln.a.showLogin()
                            },
                            className: pr(e.buttonCTA, e.buttonLogin, ir({}, e.buttonLoginDesktop, !UIState.compact))
                        }, "Log In")
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this.props.classes;
                        return CK.User.loggedIn ? React.createElement("div", {
                            id: "user",
                            className: pr(e.user, ir({}, e.userOpen, this.state.isVisible)),
                            onMouseEnter: this.handleMouseEnter,
                            onMouseLeave: this.handleMouseLeave
                        }, UIState.compact && React.createElement("div", {
                            className: pr(e.accountOverlayMobile, ir({}, e.accountOverlayMobileVisible, this.state.isVisible)),
                            onTouchStart: this.handleOverlayClick
                        }), React.createElement("div", {
                            className: e.account
                        }, React.createElement("div", {
                            onTouchStart: this.handleClick,
                            className: pr(e.dropdown, ir({}, e.dropdownDesktop, !UIState.compact))
                        }, this.props.userIcon && React.createElement("img", {
                            className: e.accountIcon,
                            src: this.props.userIcon
                        }), !UIState.compact && React.createElement("div", {
                            className: e.accountText
                        }, "Account"))), React.createElement("nav", {
                            onClick: this.closeMenu,
                            className: pr(e.accountNav, ir({}, e.accountNavVisible, this.state.isVisible), ir({}, e.accountNavDesktop, !UIState.compact))
                        }, this.props.children)) : this.renderLoggedOutNav()
                    }
                }]) && sr(n.prototype, r), o && sr(n, o), t
            }(),
            yr = fr(dr)(hr(mr));

        function vr(e) {
            return (vr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function br(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function gr(e) {
            return (gr = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function wr(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function kr(e, t) {
            return (kr = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Sr = VN.classNames,
            _r = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = gr(t).call(this, e)) || "object" !== vr(o) && "function" != typeof o ? wr(r) : o).state = {
                        isOpen: !1
                    }, n.show = n.show.bind(wr(n)), n.hide = n.hide.bind(wr(n)), n.toggle = n.toggle.bind(wr(n)), n.handleMouseEnter = n.handleMouseEnter.bind(wr(n)), n.handleMouseLeave = n.handleMouseLeave.bind(wr(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && kr(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "handleMouseEnter",
                    value: function(e) {
                        if (!UIState.compact) {
                            this.state.delayTimer && clearTimeout(this.state.delayTimer);
                            var t = setTimeout(this.show, 300);
                            this.setState({
                                delayTimer: t
                            })
                        }
                    }
                }, {
                    key: "handleMouseLeave",
                    value: function() {
                        if (!UIState.compact) {
                            this.state.delayTimer && clearTimeout(this.state.delayTimer);
                            var e = setTimeout(this.hide, 300);
                            this.setState({
                                delayTimer: e
                            })
                        }
                    }
                }, {
                    key: "show",
                    value: function() {
                        this.setState({
                            isOpen: !0
                        })
                    }
                }, {
                    key: "hide",
                    value: function() {
                        this.setState({
                            isOpen: !1
                        })
                    }
                }, {
                    key: "toggle",
                    value: function() {
                        UIState.compact && this.setState({
                            isOpen: !this.state.isOpen
                        })
                    }
                }, {
                    key: "renderArrayRow",
                    value: function(e, t) {
                        var n = this;
                        return React.createElement("div", {
                            className: "headerMenu-nav-itemsRow",
                            key: t
                        }, e.map((function(e, r) {
                            return n.renderRow(e, "".concat(t, "-").concat(r))
                        })))
                    }
                }, {
                    key: "renderRow",
                    value: function(e, t) {
                        if (e) return Array.isArray(e) ? this.renderArrayRow(e, t) : React.createElement("a", {
                            className: "headerMenu-nav-item",
                            href: e.href,
                            target: "#" === e.href ? "_self" : "_blank",
                            key: e.label || "navItem".concat(t),
                            onClick: e.onClick
                        }, e.iconSrc && React.createElement("div", {
                            className: "headerMenu-nav-item-img"
                        }, React.createElement("img", {
                            src: e.iconSrc,
                            width: e.iconWidth || 30
                        })), e.label && React.createElement("div", {
                            className: "headerMenu-nav-item-text"
                        }, e.label))
                    }
                }, {
                    key: "renderNav",
                    value: function() {
                        var e = this,
                            t = this.props.align || "center";
                        return React.createElement("nav", {
                            className: Sr("headerMenu-nav", "headerMenu-nav--align".concat(t), {
                                isVisible: this.state.isOpen
                            })
                        }, React.createElement("div", {
                            className: "headerMenu-nav-scroll"
                        }, this.props.items.map((function(t, n) {
                            return e.renderRow(t, n)
                        })), this.props.children))
                    }
                }, {
                    key: "renderLoadingNav",
                    value: function() {
                        var e = this.props.align || "center";
                        return React.createElement("nav", {
                            className: Sr("headerMenu-nav", "headerMenu-nav--loading", "headerMenu-nav--align".concat(e), {
                                isVisible: this.state.isOpen
                            })
                        }, React.createElement("img", {
                            src: "/static/svg/spinner.svg",
                            className: "svg-spinner"
                        }))
                    }
                }, {
                    key: "render",
                    value: function() {
                        return React.createElement(React.Fragment, null, UIState.compact && React.createElement("div", {
                            className: Sr("headerMenu-overlay", {
                                isVisible: this.state.isOpen
                            }),
                            onClick: this.hide
                        }), React.createElement("div", {
                            className: "headerMenu-container"
                        }, React.createElement("div", {
                            className: "headerMenu",
                            onClick: this.toggle,
                            onMouseEnter: this.handleMouseEnter,
                            onMouseLeave: this.handleMouseLeave
                        }, React.createElement("div", {
                            className: Sr("headerMenu-trigger", this.props.triggerClass, {
                                isActive: this.state.isOpen
                            })
                        }, this.props.iconSrc && React.createElement("img", {
                            className: "headerMenu-icon",
                            src: this.props.iconSrc,
                            width: this.props.iconWidth || 22
                        }), (!UIState.compact || this.props.forceText) && React.createElement("div", {
                            className: "headerMenu-trigger-label"
                        }, this.props.label), this.props.isLoading && React.createElement("img", {
                            src: "/static/svg/spinner-white.svg",
                            className: "svg-spinner"
                        })), !this.props.isLoading && this.renderNav(), this.props.isLoading && this.renderLoadingNav()), this.props.extra), UIState.compact && React.createElement("div", {
                            className: Sr("headerMenu-overlay", {
                                isVisible: this.state.isOpen
                            }),
                            onClick: this.hide
                        }))
                    }
                }]) && br(n.prototype, r), o && br(n, o), t
            }();

        function Cr(e) {
            return (Cr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Rr(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function Or(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Er(e, t) {
            return !t || "object" !== Cr(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Pr(e) {
            return (Pr = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function xr(e, t) {
            return (xr = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var jr = function(e) {
            function t(e) {
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), Er(this, Pr(t).call(this, e))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && xr(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "screenshot",
                value: function(e) {
                    e.preventDefault(), CKUI.screenshotClick()
                }
            }, {
                key: "render",
                value: function() {
                    var e = [];
                    return e = UIState.compact ? [
                        [{
                            href: "#",
                            onClick: function(e) {
                                e.preventDefault(), CKUI.showSupportEmail()
                            },
                            iconSrc: "/static/svg/social/mail.svg",
                            iconWidth: 22
                        }, {
                            href: "https://www.facebook.com/HeroForgeMinis/",
                            iconSrc: "/static/svg/social/facebook.svg",
                            iconWidth: 22
                        }, {
                            href: "https://twitter.com/heroforgeminis",
                            iconSrc: "/static/svg/social/twitter.svg",
                            iconWidth: 22
                        }, {
                            href: "https://www.instagram.com/heroforgeminis/",
                            iconSrc: "/static/svg/social/instagram.svg",
                            iconWidth: 22
                        }]
                    ] : [{
                        href: "#",
                        label: "Contact",
                        onClick: function(e) {
                            e.preventDefault(), CKUI.showSupportEmail()
                        },
                        iconSrc: "/static/svg/info/contact.svg",
                        iconWidth: 22
                    }], e = [].concat(Rr(e), [{
                        href: "/about/",
                        label: "About",
                        iconSrc: "/static/svg/info/about.svg",
                        iconWidth: 22
                    }, {
                        href: "/support/",
                        label: "Submit a Ticket",
                        iconSrc: "/static/svg/info/faq.svg",
                        iconWidth: 22
                    }, {
                        href: "/ShippingandReturn/",
                        label: "Shipping and Return",
                        iconSrc: "/static/svg/info/shipping.svg",
                        iconWidth: 22
                    }, {
                        href: "/Materials/",
                        label: "Materials & Pricing",
                        iconSrc: "/static/svg/info/materials.svg",
                        iconWidth: 22
                    }, {
                        href: "/ToS/",
                        label: "Terms & Conditions",
                        iconSrc: "/static/svg/info/tos.svg",
                        iconWidth: 22
                    }, {
                        href: "/Privacy/",
                        label: "Privacy Policy",
                        iconSrc: "/static/svg/info/privacy.svg",
                        iconWidth: 22
                    }, {
                        href: "/CookiePolicy/",
                        label: "Cookie Policy",
                        iconSrc: "/static/svg/info/cookie.svg",
                        iconWidth: 22
                    }, {
                        href: "#",
                        label: "Options",
                        onClick: function(e) {
                            e.preventDefault(), UIState.showOverlay = "settings"
                        },
                        iconSrc: "/static/svg/options.svg",
                        iconWidth: 22
                    }, {
                        href: "#",
                        label: "Gift Cards",
                        onClick: function(e) {
                            e.preventDefault(), UIState.showOverlay = "giftCard"
                        },
                        iconSrc: "/static/svg/gift.svg",
                        iconWidth: 22
                    }]), React.createElement(_r, {
                        label: "Info",
                        iconSrc: "/static/svg/burger.svg",
                        items: e,
                        align: this.props.align
                    })
                }
            }]) && Or(n.prototype, r), o && Or(n, o), t
        }();

        function Tr(e) {
            return (Tr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Mr(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Kr(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ir(e) {
            return (Ir = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Nr(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function Br(e, t) {
            return (Br = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        VN.axios;
        var Ar = VN.classNames,
            Lr = MU.withStyles,
            Ur = VN.ReactRouter.withRouter,
            Dr = {
                item: {
                    display: "flex",
                    alignItems: "center",
                    minHeight: 44,
                    maxHeight: 56,
                    height: "11vh",
                    color: "#333",
                    cursor: "pointer",
                    position: "relative",
                    "&:hover": {
                        color: "#ab0007"
                    },
                    "&:not(:last-child)::after": {
                        content: "''",
                        height: 1,
                        display: "block",
                        backgroundColor: "#EFEFEF",
                        position: "absolute",
                        bottom: 1,
                        right: 0,
                        left: 58
                    }
                },
                itemActive: {
                    color: "#ab0007"
                },
                itemImg: {
                    flexShrink: 0,
                    display: "flex",
                    justifyContent: "center",
                    alignItems: "center",
                    width: 58,
                    "& img": {
                        width: 30,
                        height: 30
                    }
                },
                itemText: {
                    fontSize: 15,
                    paddingLeft: 0,
                    flex: 1
                }
            },
            Fr = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = Ir(t).call(this, e)) || "object" !== Tr(o) && "function" != typeof o ? Nr(r) : o).logout = n.logout.bind(Nr(n)), n.goTo = n.goTo.bind(Nr(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Br(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "logout",
                    value: function(e) {
                        e.preventDefault(), CKUI.promptLogout()
                    }
                }, {
                    key: "goTo",
                    value: function(e) {
                        this.props.onClick && this.props.onClick(), this.props.history.push(e)
                    }
                }, {
                    key: "renderLoggedOutNav",
                    value: function() {
                        var e = this.props.classes;
                        return React.createElement("a", {
                            onClick: function() {
                                return Overlay.showLogin()
                            },
                            className: e.item
                        }, React.createElement("div", {
                            className: e.itemImg
                        }, React.createElement("img", {
                            src: "/static/img/account/icon-my_profile.svg"
                        })), React.createElement("div", {
                            className: e.itemText
                        }, "Login"))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.location.pathname,
                            n = this.props.classes;
                        return CK.User.loggedIn ? React.createElement(React.Fragment, null, React.createElement("a", {
                            onClick: function() {
                                return e.goTo("/account/profile")
                            },
                            className: Ar(n.item, Mr({}, n.itemActive, -1 != t.indexOf("profile")))
                        }, React.createElement("div", {
                            className: n.itemImg
                        }, React.createElement("img", {
                            src: "/static/img/account/icon-my_profile.svg"
                        })), React.createElement("div", {
                            className: n.itemText
                        }, "Profile")), React.createElement("a", {
                            onClick: function() {
                                return e.goTo("/account/orders")
                            },
                            className: Ar(n.item, Mr({}, n.itemActive, -1 != t.indexOf("order")))
                        }, React.createElement("div", {
                            className: n.itemImg
                        }, React.createElement("img", {
                            src: "/static/img/account/icon-order_history.svg"
                        })), React.createElement("div", {
                            className: n.itemText
                        }, "Order History")), React.createElement("a", {
                            onClick: function() {
                                return e.goTo("/account/addresses")
                            },
                            className: Ar(n.item, Mr({}, n.itemActive, -1 != t.indexOf("address")))
                        }, React.createElement("div", {
                            className: n.itemImg
                        }, React.createElement("img", {
                            src: "/static/img/account/icon-address_book.svg"
                        })), React.createElement("div", {
                            className: n.itemText
                        }, "Address Book")), React.createElement("a", {
                            onClick: function() {
                                return e.goTo("/account/gift-cards")
                            },
                            className: Ar(n.item, Mr({}, n.itemActive, -1 != t.indexOf("gift-card")))
                        }, React.createElement("div", {
                            className: n.itemImg
                        }, React.createElement("img", {
                            src: "/static/img/account/icon-gift_cards.svg"
                        })), React.createElement("div", {
                            className: n.itemText
                        }, "Account Credit")), React.createElement("a", {
                            onClick: function() {
                                return e.goTo("/account/downloads")
                            },
                            className: Ar(n.item, Mr({}, n.itemActive, -1 != t.indexOf("downloads")))
                        }, React.createElement("div", {
                            className: n.itemImg
                        }, React.createElement("img", {
                            src: "/static/img/account/icon-digital_downloads.svg"
                        })), React.createElement("div", {
                            className: n.itemText
                        }, "Digital Downloads")), React.createElement("a", {
                            onClick: function() {
                                return e.goTo("/account/kickstarter")
                            },
                            className: Ar(n.item, Mr({}, n.itemActive, -1 != t.indexOf("kickstarter")))
                        }, React.createElement("div", {
                            className: n.itemImg
                        }, React.createElement("img", {
                            src: "/static/img/account/icon-kickstarter.svg"
                        })), React.createElement("div", {
                            className: n.itemText
                        }, "Kickstarter Rewards")), React.createElement("a", {
                            onClick: function(t) {
                                e.logout(t)
                            },
                            className: n.item
                        }, React.createElement("div", {
                            className: n.itemImg
                        }, React.createElement("img", {
                            src: "/static/img/account/icon-logout.svg"
                        })), React.createElement("div", {
                            className: n.itemText
                        }, "Logout"))) : this.renderLoggedOutNav()
                    }
                }]) && Kr(n.prototype, r), o && Kr(n, o), t
            }(),
            zr = Lr(Dr)(Ur(Fr));

        function Vr(e) {
            return (Vr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Gr(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function qr(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Hr(e, t) {
            return !t || "object" !== Vr(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Wr(e) {
            return (Wr = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Qr(e, t) {
            return (Qr = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Xr = VN.classNames,
            Yr = function(e) {
                function t() {
                    return Gr(this, t), Hr(this, Wr(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Qr(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        var e = CK.timeTraveler,
                            t = {};
                        return e && (t = {
                            backgroundRepeat: "repeat",
                            backgroundImage: 'url("/static/img/mode-'.concat(e ? "timetravel" : "internal", '.png")')
                        }), this.props.position && (t.position = this.props.position), React.createElement("div", {
                            className: Xr("header", {
                                "header--halfScreen": UIState.landscape && !UIState.collapsed
                            }),
                            style: t
                        }, React.createElement("div", {
                            className: "content-side"
                        }, React.createElement("h1", {
                            className: "logo",
                            onClick: this.props.onClick,
                            style: this.props.onClick && {
                                cursor: "pointer"
                            }
                        }, React.createElement("img", {
                            className: "logo-banner",
                            src: "/static/svg/logo.svg",
                            title: CK.Settings.projectLabel
                        }), !UIState.compact && React.createElement("img", {
                            className: "logo-text",
                            src: "/static/svg/logo-text.svg"
                        }), CK.Options.partner && CK.Options.partner.static_path && React.createElement("img", {
                            className: "logo-affiliate",
                            src: CK.Options.partner.static_path + "affiliate-logo.png",
                            onError: function(e) {
                                e.target.style.display = "none"
                            }
                        })), UIState.compact && this.props.showExtraMenu && React.createElement(jr, {
                            align: "left"
                        })), this.props.children, React.createElement("div", {
                            className: "content-side"
                        }, CK.criticalErrorMessage && React.createElement("div", {
                            style: {
                                color: "red",
                                fontSize: "larger"
                            }
                        }, CK.criticalErrorMessage), React.createElement(yr, {
                            userIcon: "/static/svg/account.svg"
                        }, React.createElement(zr, null)), CK.User.loggedIn && React.createElement(or, {
                            suppressCartQuantity: this.props.suppressCartQuantity
                        }), !1, !UIState.compact && this.props.showExtraMenu && React.createElement(jr, {
                            align: "right"
                        })))
                    }
                }]) && qr(n.prototype, r), o && qr(n, o), t
            }();

        function Zr(e) {
            return (Zr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Jr(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function $r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function eo(e, t) {
            return !t || "object" !== Zr(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function to(e) {
            return (to = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function no(e, t) {
            return (no = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ro = function(e) {
            function t() {
                return Jr(this, t), eo(this, to(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && no(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "render",
                value: function() {
                    return React.createElement("footer", {
                        className: "footer"
                    }, React.createElement("nav", {
                        className: "social"
                    }, React.createElement("ul", null, React.createElement("li", null, React.createElement("a", {
                        href: "https://www.facebook.com/HeroForgeMinis/",
                        target: "_blank"
                    }, React.createElement("img", {
                        src: "/static/svg/social/facebook.svg"
                    }))), React.createElement("li", null, React.createElement("a", {
                        href: "https://twitter.com/heroforgeminis",
                        target: "_blank"
                    }, React.createElement("img", {
                        src: "/static/svg/social/twitter.svg"
                    }))), React.createElement("li", null, React.createElement("a", {
                        href: "https://www.instagram.com/heroforgeminis/",
                        target: "_blank"
                    }, React.createElement("img", {
                        src: "/static/svg/social/instagram.svg"
                    }))), React.createElement("li", null, React.createElement("a", {
                        href: "#",
                        onClick: function(e) {
                            e.preventDefault(), CKUI.showSupportEmail()
                        }
                    }, React.createElement("img", {
                        src: "/static/svg/mail.svg"
                    }))))), React.createElement("nav", {
                        className: "gift-tos"
                    }, React.createElement("ul", null, React.createElement("li", null, React.createElement("a", {
                        href: "/ToS/",
                        className: "link",
                        target: "_blank"
                    }, "Terms & Conditions")), React.createElement("li", null, React.createElement("a", {
                        href: "/Privacy/",
                        className: "link",
                        target: "_blank"
                    }, "Privacy Policy")), React.createElement("li", null, React.createElement("span", {
                        className: "link screenshot",
                        onClick: function() {
                            return CKUI.screenshotClick()
                        }
                    }, React.createElement("img", {
                        src: "/static/svg/photo.svg"
                    }), "Screenshot")), React.createElement("li", null, React.createElement("a", {
                        href: "#",
                        className: "link voucher",
                        onClick: function(e) {
                            e.preventDefault(), UIState.showOverlay = "giftCard"
                        }
                    }, React.createElement("img", {
                        className: "gifticon",
                        src: "/static/svg/gift.svg"
                    }), "Gifts")))))
                }
            }]) && $r(n.prototype, r), o && $r(n, o), t
        }();

        function oo(e) {
            return (oo = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ao(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function io(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function so(e, t) {
            return !t || "object" !== oo(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function co(e) {
            return (co = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function lo(e, t) {
            return (lo = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }

        function uo(e) {
            return e && e.type && (!e.type.hasContent || e.type.hasContent(e.props))
        }
        var fo = function(e) {
            function t() {
                return ao(this, t), so(this, co(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && lo(e, t)
            }(t, React.Component), n = t, o = [{
                key: "getContent",
                value: function(e) {
                    return React.Children.toArray(e.children).filter((function(e) {
                        return uo(e)
                    }))
                }
            }, {
                key: "hasContent",
                value: function(e) {
                    return !!React.Children.toArray(e.children).find((function(e) {
                        return uo(e)
                    }))
                }
            }, {
                key: "hasNew",
                value: function(e) {
                    return !!React.Children.toArray(e.children).find((function(e) {
                        return function(e) {
                            return e && e.type && e.type.hasNew && e.type.hasNew(e.props)
                        }(e)
                    }))
                }
            }], (r = null) && io(n.prototype, r), o && io(n, o), t
        }();

        function ho(e) {
            return (ho = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function po(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function mo(e) {
            return (mo = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function yo(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function vo(e, t) {
            return (vo = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var bo = function(e) {
            function t() {
                var e, n, r;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), n = this, (e = !(r = mo(t).call(this)) || "object" !== ho(r) && "function" != typeof r ? yo(n) : r).state = {
                    genre: UIState.genreSearchFilter || ""
                }, e.updateGenre = e.updateGenre.bind(yo(e)), e.updateFilter = e.updateFilter.bind(yo(e)), e.onBlur = e.onBlur.bind(yo(e)), e
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && vo(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "componentDidMount",
                value: function() {
                    this.props.focus && this.input.focus()
                }
            }, {
                key: "onBlur",
                value: function() {
                    var e = this;
                    this.focus = null, setTimeout((function() {
                        e.focus || (CK.Events.emit("isFiltering", !1), e.props.onBlur && e.props.onBlur())
                    }), 100)
                }
            }, {
                key: "updateFilter",
                value: function(e) {
                    UIState.searchFilter = e.target.value, this.forceUpdate(), CK.Events.emit("searchChanged"), this.props.onSearch && this.props.onSearch()
                }
            }, {
                key: "updateGenre",
                value: function(e) {
                    UIState.genreSearchFilter = e.target.value, this.setState({
                        genre: e.target.value
                    }), Reporting.genreSelected(e.target.value), CK.Events.emit("searchChanged"), this.props.onSearch && this.props.onSearch(), this.input.focus()
                }
            }, {
                key: "render",
                value: function() {
                    var e = this;
                    return CK.Settings.searchable ? React.createElement(React.Fragment, null, React.createElement("select", {
                        value: this.state.genre,
                        name: "genre",
                        onChange: this.updateGenre,
                        onFocus: function() {
                            e.focus = "select", CK.Events.emit("isFiltering", !0)
                        },
                        onBlur: this.onBlur
                    }, React.createElement("option", {
                        value: ""
                    }, "All"), React.createElement("option", {
                        value: "scifi"
                    }, "Scifi"), React.createElement("option", {
                        value: "western"
                    }, "Western"), React.createElement("option", {
                        value: "fantasy"
                    }, "Fantasy"), React.createElement("option", {
                        value: "modern"
                    }, "Modern"), React.createElement("option", {
                        value: "east asian"
                    }, "East Asian")), React.createElement("input", {
                        key: "search",
                        type: "text",
                        value: UIState.searchFilter,
                        placeholder: "Filter",
                        onChange: this.updateFilter,
                        onFocus: function() {
                            e.focus = "input", CK.Events.emit("isFiltering", !0)
                        },
                        onBlur: this.onBlur,
                        ref: function(t) {
                            return e.input = t
                        }
                    })) : null
                }
            }]) && po(n.prototype, r), o && po(n, o), t
        }();

        function go(e) {
            return (go = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function wo(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ko(e) {
            return (ko = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function So(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function _o(e, t) {
            return (_o = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Co = VN.classNames,
            Ro = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = ko(t).call(this, e)) || "object" !== go(o) && "function" != typeof o ? So(r) : o).state = {
                        activeMenu: e.activeMenu || e.nav && e.nav[0].slug
                    }, n.onItemClick = n.onItemClick.bind(So(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && _o(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "onItemClick",
                    value: function(e) {
                        this.props.onItemClick(e), this.setState({
                            activeMenu: e
                        })
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.nav;
                        return React.createElement("div", {
                            className: "ViewNav-navContainer"
                        }, React.createElement("div", {
                            className: "ViewNav-nav"
                        }, t.map((function(t) {
                            return React.createElement("div", {
                                className: Co("ViewNav-navItem", {
                                    "ViewNav-navItemSelected": e.state.activeMenu === t.slug
                                }),
                                onClick: function() {
                                    return e.onItemClick(t.slug)
                                },
                                key: t.slug
                            }, t.label)
                        }))))
                    }
                }]) && wo(n.prototype, r), o && wo(n, o), t
            }();

        function Oo(e) {
            return (Oo = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Eo(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Po(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function xo(e) {
            return (xo = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function jo(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function To(e, t) {
            return (To = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Mo = VN.classNames,
            Ko = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = xo(t).call(this, e)) || "object" !== Oo(o) && "function" != typeof o ? jo(r) : o).state = {
                        searchVisible: !!UIState.genreSearchFilter,
                        autoFocus: !1,
                        activeMenu: e.navAuto && e.children[0] ? e.children[0].props.label : null
                    }, n.handleScroll = n.handleScroll.bind(jo(n)), n.scrollTop = n.scrollTop.bind(jo(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && To(e, t)
                }(t, e), n = t, (r = [{
                    key: "componentDidMount",
                    value: function() {
                        this.props.onOpen && this.props.onOpen()
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        this.props.onClose && this.props.onClose()
                    }
                }, {
                    key: "handleScroll",
                    value: function() {
                        var e = ReactDOM.findDOMNode(this.scrollRef).scrollHeight,
                            t = ReactDOM.findDOMNode(this.scrollRef).scrollTop,
                            n = ReactDOM.findDOMNode(this.scrollRef).offsetHeight;
                        e - n - t < 2 * n && CK.Events.emit("reachedBottom", this)
                    }
                }, {
                    key: "scrollTop",
                    value: function() {
                        ReactDOM.findDOMNode(this.scrollRef).scrollTop = 0
                    }
                }, {
                    key: "renderNavAuto",
                    value: function() {
                        var e = this;
                        if (!this.props.navAuto) return null;
                        var t = this.props.children.filter((function(e) {
                            return !e.type.hasContent || e.type.hasContent(e.props)
                        })).map((function(e) {
                            return {
                                slug: e.props.label,
                                label: e.props.label
                            }
                        }));
                        return !t || t.length <= 1 ? null : React.createElement(Ro, {
                            nav: t,
                            onItemClick: function(t) {
                                return e.setState({
                                    activeMenu: t
                                })
                            },
                            activeMenu: this.state.activeMenu
                        })
                    }
                }, {
                    key: "renderSearch",
                    value: function() {
                        var e = this;
                        if (!this.props.hasFilter) return null;
                        var t = React.Children.toArray(this.props.children),
                            n = t[0] ? t[0].props.label || t[0].props.slot : this.props.label;
                        return n && n.toLowerCase() in CK.data.disableMenus ? null : React.createElement("div", {
                            className: Mo("View-searchContainer", {
                                isVisible: this.state.searchVisible
                            })
                        }, React.createElement("div", {
                            className: "View-searchTrigger",
                            onClick: function(t) {
                                t.stopPropagation(), e.toggleSearch()
                            }
                        }, (!UIState.compact || !this.state.searchVisible) && React.createElement("img", {
                            className: "View-searchTrigger-img",
                            src: "/static/svg/search.svg"
                        }), UIState.compact && this.state.searchVisible && React.createElement("img", {
                            className: "View-searchTrigger-img View-searchTrigger-arrow",
                            src: "/static/svg/arrow-down.svg"
                        })), this.state.searchVisible && React.createElement("div", {
                            className: "View-search"
                        }, React.createElement(bo, {
                            focus: this.state.autoFocus,
                            onBlur: function() {
                                return UIState.compact && e.setState({
                                    searchVisible: !1
                                })
                            },
                            onSearch: function() {
                                return e.scrollTop()
                            }
                        })))
                    }
                }, {
                    key: "renderPinnedContent",
                    value: function() {
                        return this.props.pinned ? React.createElement("div", {
                            className: "View-pinned-content"
                        }, this.props.pinned) : null
                    }
                }, {
                    key: "renderPinned",
                    value: function() {
                        return this.props.pinned || this.props.navAuto ? React.createElement("div", {
                            className: Mo("View-pinned", {
                                "View-padding": !this.props.pinnedNoPadding
                            })
                        }, this.renderNavAuto(), this.renderPinnedContent()) : null
                    }
                }, {
                    key: "toggleSearch",
                    value: function() {
                        window.UIState && UIState.set({
                            searchFilter: ""
                        }), this.setState({
                            searchVisible: !this.state.searchVisible,
                            autoFocus: !0
                        })
                    }
                }, {
                    key: "renderMenu",
                    value: function() {
                        var e = this;
                        return this.state.activeMenu ? this.props.children.find((function(t) {
                            return t.props.label === e.state.activeMenu
                        })) : null
                    }
                }, {
                    key: "renderScrollableArea",
                    value: function() {
                        var e = this,
                            t = React.Children.toArray(this.props.children);
                        return React.createElement("div", {
                            className: "View-scrollable-space"
                        }, React.createElement("div", {
                            className: Mo("View-scrollable", {
                                "View-padding": !this.props.noPadding,
                                "View-hasSearch": this.state.searchVisible
                            }),
                            onScroll: this.handleScroll,
                            ref: function(t) {
                                return e.scrollRef = t
                            }
                        }, this.state.activeMenu ? this.renderMenu() : t))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e;
                        return React.createElement("div", {
                            className: Mo("View-container", (e = {}, Eo(e, "View-".concat(this.props.extraClass), !!this.props.extraClass), Eo(e, "hasFilter", this.props.hasFilter), e))
                        }, this.renderPinned(), this.renderSearch(), this.renderScrollableArea())
                    }
                }]) && Po(n.prototype, r), o && Po(n, o), t
            }(fo);

        function Io(e) {
            return (Io = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function No(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Bo(e) {
            return (Bo = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Ao(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function Lo(e, t) {
            return (Lo = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Uo = VN.axios,
            Do = VN.ReactRouter,
            Fo = (Do.withRouter, Do.Redirect),
            zo = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = Bo(t).call(this, e)) || "object" !== Io(o) && "function" != typeof o ? Ao(r) : o).state = {
                        adding: !1,
                        productError: !1,
                        redirect: !1,
                        url: ""
                    }, n.noProductSelectedMessage = e.noProductSelectedMessage || "Please Select a Material", n.productMainSelection = n.props.productMainSelection || "Material", n.addToCart = n.addToCart.bind(Ao(n)), n.addFailed = n.addFailed.bind(Ao(n)), n.addSucceeded = n.addSucceeded.bind(Ao(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Lo(e, t)
                }(t, React.Component), n = t, r = [{
                    key: "addSucceeded",
                    value: function(e, t) {
                        this.setState({
                            adding: !1
                        }), Promise.resolve(UIState.basketQuantityPromise()).then(UIState.showOverlay = "cart")
                    }
                }, {
                    key: "addFailed",
                    value: function(e, t) {
                        e && e.response && 302 == e.response.status ? this.setState({
                            redirect: !0,
                            url: e.response.data.url,
                            adding: !1
                        }) : (Ln.a.prompt("Failed to add to cart. Try logging in or refreshing the page.", [{
                            label: "OK",
                            onClick: function() {
                                Ln.a.hideOverlay()
                            }
                        }]), this.setState({
                            adding: !1
                        }))
                    }
                }, {
                    key: "addToCart",
                    value: function() {
                        var e = this;
                        this.state.adding || (this.constructor.getSelectedProduct() ? CK.User.loggedIn ? (this.setState({
                            adding: !0
                        }), this.constructor.addCharacterToBasket(this.addSucceeded, this.addFailed)) : (Reporting.addedToCartNotLoggedIn(), Ln.a.showLogin((function() {
                            return e.addToCart()
                        }))) : (UIState.set({
                            mainSelection: this.productMainSelection
                        }), UIState.set({
                            showOverlay: !1
                        }), this.setState({
                            productError: !0
                        }), Ln.a.prompt("Please select a material", [{
                            label: "OK",
                            onClick: function() {
                                Ln.a.hideOverlay()
                            }
                        }]), UIState.compact && (UIState.collapsed = !1)))
                    }
                }, {
                    key: "isPending",
                    value: function() {
                        return UIState.getRequest("addCharacterToBasket") && UIState.getRequest("addCharacterToBasket").isPending()
                    }
                }, {
                    key: "componentDidMount",
                    value: function() {
                        var e = this;
                        this.isPending() && (this.setState({
                            adding: !0,
                            messages: ""
                        }), Promise.resolve(UIState.getRequest("addCharacterToBasket")).then((function(t) {
                            e.cancelled || e.setState({
                                adding: !1,
                                messages: ""
                            })
                        })))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.constructor.getSelectedProduct(),
                            n = "",
                            r = "",
                            o = !1,
                            a = 1;
                        CK.data.parameters && CK.data.parameters.quantity && CK.data.parameters.quantity > 1 && (a = CK.data.parameters.quantity), t && !this.state.adding && (o = !0, n = "$" + (t.price * a).toFixed(2), r = t.old_price ? "$" + (t.old_price * a).toFixed(2) + " " : "");
                        var i = this.state.adding ? "Adding..." : "Add to Cart ",
                            s = !this.constructor.getSelectedProduct() && this.state.productError ? React.createElement("p", {
                                className: "error"
                            }, "* ", this.noProductSelectedMessage) : "";
                        return this.state.redirect ? React.createElement(Fo, {
                            to: {
                                pathname: this.state.url
                            }
                        }) : React.createElement("a", {
                            href: "#",
                            className: "shop-button clickable",
                            id: "add",
                            onClick: function(t) {
                                t.preventDefault(), e.addToCart()
                            }
                        }, i, React.createElement("span", {
                            id: "display-price"
                        }, o ? "(" : "", React.createElement("del", null, r), n, o ? ")" : ""), s)
                    }
                }], o = [{
                    key: "getSelectedProduct",
                    value: function() {
                        if (void 0 !== CK.modded.physical) return CK.Options.productsByName[CK.modded.physical]
                    }
                }, {
                    key: "addCharacterToBasket",
                    value: function(e) {
                        function t(t, n) {
                            return e.apply(this, arguments)
                        }
                        return t.toString = function() {
                            return e.toString()
                        }, t
                    }((function(e, t) {
                        var n = this;
                        CK.User.loggedIn ? CK.saves.packageForCart().then((function(r) {
                            if (!UIState.getRequest("addCharacterToBasket") || !UIState.getRequest("addCharacterToBasket").isPending()) {
                                var o = n.getSelectedProduct().p_id,
                                    a = 1;
                                CK.data.parameters && CK.data.parameters.quantity && CK.data.parameters.quantity > 1 && (a = CK.data.parameters.quantity);
                                var i = new FormData;
                                i.append("quantity", a), i.append("mini_id", 1), i.append("pk", o), i.append("character", JSON.stringify(r));
                                var s = UIState.QueryablePromise(Uo({
                                    method: "post",
                                    url: "/basket/add/" + o + "/json/",
                                    data: i
                                }));
                                UIState.addRequest("addCharacterToBasket", s)
                            }
                            Promise.resolve(UIState.getRequest("addCharacterToBasket")).then((function() {
                                e()
                            })).catch((function(e) {
                                t(e)
                            }))
                        })).catch((function(e) {
                            console.log("basket add error"), console.log(e), t(e, "basket add error"), window.alert("Failed to add to cart. Try logging in or refreshing the page.")
                        })) : (t({}, "not logged in"), Ln.a.showLogin((function() {
                            return addCharacterToBasket(e, t)
                        })))
                    }))
                }], r && No(n.prototype, r), o && No(n, o), t
            }();

        function Vo(e) {
            return (Vo = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Go(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function qo(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ho(e, t) {
            return !t || "object" !== Vo(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Wo(e) {
            return (Wo = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Qo(e, t) {
            return (Qo = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Xo = function(e) {
            function t() {
                return Go(this, t), Ho(this, Wo(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Qo(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "render",
                value: function() {
                    return React.createElement("div", {
                        className: "thumbnail-button-info"
                    }, React.createElement("div", {
                        className: "left"
                    }, React.createElement("h3", null, this.props.label), React.createElement("p", null, this.props.description)), React.createElement("div", {
                        className: "right"
                    }, React.createElement("img", {
                        className: this.props.mirrored ? "mirrored" : void 0,
                        src: this.props.image
                    })))
                }
            }]) && qo(n.prototype, r), o && qo(n, o), t
        }();

        function Yo(e) {
            return (Yo = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Zo(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Jo(e) {
            return (Jo = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function $o(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function ea(e, t) {
            return (ea = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ta = VN.classNames,
            na = function(e) {
                function t() {
                    var e, n, r;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), n = this, (e = !(r = Jo(t).call(this)) || "object" !== Yo(r) && "function" != typeof r ? $o(n) : r).clicked = e.clicked.bind($o(e)), e
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && ea(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "clicked",
                    value: function(e) {
                        var t = void 0 !== this.props.option.linked && this.props.option.linked;
                        e.fastclick && (e.preventDefault(), e.stopPropagation()), this.props.option.onClick && (this.props.option.onClick(t), Reporting.clickedThumbnailButton(this.props))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.option;
                        if (void 0 === t) return null;
                        var n = t.labelOptions || {},
                            r = "" !== t.label && "labelOnly" === n.labelType,
                            o = t.tagLabel,
                            a = o && "" !== o ? React.createElement("span", {
                                className: "new-tag" + (r ? " label-only" : "")
                            }, React.createElement("span", {
                                className: "tag-text",
                                style: {
                                    background: t.tagColor
                                }
                            }, o), React.createElement("span", {
                                className: "arrow-down",
                                style: t.tagColor ? {
                                    borderTop: "2px solid " + t.tagColor
                                } : {}
                            })) : "",
                            i = this.props.overlay || null,
                            s = "";
                        "parts" == this.props.type || "linkedParts" == this.props.type ? s = "part" : "presets" == this.props.type && (s = "preset");
                        var c = ta(s, this.props.className, "thumbnail-button", t.extraClass, this.props.noThumbSize ? "" : "w".concat(t.thumbSize[0], "h").concat(t.thumbSize[1]), function(e, t, n) {
                                return t in e ? Object.defineProperty(e, t, {
                                    value: n,
                                    enumerable: !0,
                                    configurable: !0,
                                    writable: !0
                                }) : e[t] = n, e
                            }({
                                selected: t.selected,
                                grayedOut: t.grayedOut,
                                "no-image": !t.thumb,
                                "no-onclick": !t.onClick
                            }, "labelType-".concat(n.labelType), n.label && "labelType" in n)),
                            l = ta({
                                mirrored: t.mirrorThumb
                            });
                        if (t.thumb instanceof HTMLCanvasElement) return React.createElement("span", {
                            className: this.props.imageClasses,
                            onClick: this.props.clicked
                        }, this.props.image);
                        var u, f = t.thumb;
                        "" != t.label && "" != t.description && "" != t.thumb ? React.createElement(Xo, {
                            label: t.label,
                            description: t.description,
                            mirrored: t.mirrorThumb,
                            image: f
                        }) : "" != t.label && "" != t.description && React.createElement("span", null, t.description), r && React.createElement("span", null, t.description), u = function(e) {
                            var n = t.missingThumb || "/static/img/broken-link.png";
                            e.target.src.endsWith(n) || (e.target.src = n)
                        };
                        var h = "";
                        if (!t.paintType || "palette" != t.paintType && "swatch" != t.paintType) h = n.label ? "labelOnly" === n.labelType ? React.createElement("a", {
                            className: c,
                            onClick: this.clicked
                        }, t.bit, t.label, a, i) : React.createElement("span", {
                            className: c,
                            onClick: this.clicked,
                            style: {
                                width: t.widthOverride,
                                height: t.heightOverride
                            }
                        }, React.createElement("img", {
                            src: f,
                            onError: u,
                            className: l
                        }), a, i, React.createElement("span", {
                            className: "label"
                        }, t.label)) : React.createElement("span", {
                            onMouseEnter: function(e) {
                                t.onMouseEnter && t.onMouseEnter(), window.CK && !CK.userHasTouched && CK.Events.emit("tip", [t, e])
                            },
                            onMouseLeave: function() {
                                window.CK && !CK.userHasTouched && CK.Events.emit("tip", void 0)
                            },
                            className: c,
                            onClick: function(n) {
                                window.CK && CK.userHasTouched && CK.Events.emit("tip", [t, n]), e.clicked(n)
                            },
                            style: {
                                width: t.widthOverride,
                                height: t.heightOverride
                            }
                        }, React.createElement("img", {
                            src: f,
                            onError: u,
                            className: l
                        }), a, i);
                        else {
                            var p = [],
                                d = !1;
                            if (t.swatchLayers.length > 0)
                                for (var m = 0; m < t.swatchLayers.length; m++)
                                    if (t.swatchLayers[m]) {
                                        var y = Math.floor((t.swatchLayers[m].length - 1) / 2),
                                            v = {
                                                backgroundColor: "rgba(" + t.swatchLayers[m][y] + ")",
                                                color: "rgba(0,0,0,0)"
                                            },
                                            b = t.label + "_palette_swatch_" + m;
                                        t.swatchLayers[m][y].length >= 4 && !t.swatchLayers[m][y][3] ? p.push(React.createElement("img", {
                                            key: b,
                                            src: t.thumb || "/static/svg/none.svg",
                                            style: {
                                                minWidth: 0,
                                                minHeight: 0
                                            }
                                        })) : p.push(React.createElement("span", {
                                            style: v,
                                            key: b
                                        }, "O"))
                                    } else console.error("Invalid swatch layers", t.swatchLayers);
                            else {
                                d = !0;
                                var g = t.label + "_palette_swatch_error";
                                p.push(React.createElement("span", {
                                    key: g,
                                    title: t.label
                                }, "theres no swatches for this one???"))
                            }
                            c = ta(c, "paint-preconf", "paint-" + t.paintType, {
                                "missing-swatches": d
                            }), h = React.createElement("a", {
                                className: c,
                                key: t.label + "_palette",
                                onClick: this.clicked,
                                title: t.label
                            }, p)
                        }
                        return h
                    }
                }]) && Zo(n.prototype, r), o && Zo(n, o), t
            }();

        function ra(e) {
            return (ra = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function oa(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function aa(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ia(e, t, n) {
            return t && aa(e.prototype, t), n && aa(e, n), e
        }

        function sa(e, t) {
            return !t || "object" !== ra(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function ca(e) {
            return (ca = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function la(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    writable: !0,
                    configurable: !0
                }
            }), t && ua(e, t)
        }

        function ua(e, t) {
            return (ua = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var fa = !1,
            ha = {
                label: !0,
                labelType: "labelOnly"
            },
            pa = function(e) {
                function t() {
                    return oa(this, t), sa(this, ca(t).apply(this, arguments))
                }
                return la(t, React.Component), ia(t, [{
                    key: "renderGrid",
                    value: function(e, t) {
                        return React.createElement("div", {
                            className: "grid-layout",
                            key: t || "material-layout"
                        }, e.map((function(e, t) {
                            return React.createElement(na, {
                                option: e,
                                key: t
                            })
                        })))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = f.getAvailable(),
                            t = [],
                            n = [],
                            r = f.getSelectedProduct(),
                            o = fa;
                        e.sort((function(e, t) {
                            return e.display_order < t.display_order ? -1 : 1
                        })).map((function(e) {
                            var a = r && r.product_name === e.product_name,
                                i = new He({
                                    labelOptions: ha,
                                    onClick: function() {
                                        CK.tweak({
                                            physical: e.product_name
                                        })
                                    },
                                    selected: a,
                                    label: e.display_name_bitless,
                                    grayedOut: !!e.unavailable,
                                    grayedOutReason: !!e.unavailable && "This material is temporarily unavailable",
                                    description: e.description,
                                    tagLabel: e.unavailable && a ? "UNAVAILABLE" : !!e.new && "NEW",
                                    showTooltip: !1,
                                    bit: e.tag && React.createElement("span", {
                                        className: "xl-tag"
                                    }, e.tag)
                                });
                            "extra" === e.visibility || "urlextra" === e.visibility ? (a && (o = !0), n.push(i)) : t.push(i)
                        }));
                        var a = [this.renderGrid(t)];
                        return n.length > 0 && a.push(React.createElement("p", {
                            key: "extraButton",
                            style: {
                                cursor: "pointer"
                            },
                            className: "description",
                            onClick: function() {
                                fa = !o, CKUI.requestEditorRefresh()
                            }
                        }, o ? "- less" : "+ more")), o && n.length > 0 && a.push(this.renderGrid(n, "extraOptions")), a
                    }
                }]), t
            }(),
            da = function(e) {
                function t() {
                    return oa(this, t), sa(this, ca(t).apply(this, arguments))
                }
                return la(t, React.Component), ia(t, [{
                    key: "render",
                    value: function() {
                        var e = zo.getSelectedProduct();
                        if (void 0 !== e) {
                            for (var t = e.image_count || 1, n = [], r = 0; r < t; r++) n.push("/static/img/photos/" + (e.thumb_name || e.product_name) + "_large_" + (r + 1) + ".png");
                            return React.createElement("div", {
                                id: "materialScale-wrapper",
                                className: "non-accordion",
                                key: "material-scale-panel"
                            }, React.createElement("div", {
                                id: "material-wrapper",
                                className: "subsection"
                            }, React.createElement("div", {
                                className: "subsection-content"
                            }, React.createElement("hr", null), React.createElement("p", {
                                className: "description"
                            }, React.createElement("span", {
                                className: "material-desc",
                                dangerouslySetInnerHTML: {
                                    __html: e.description
                                }
                            })), React.createElement("p", null, React.createElement("a", {
                                href: "/Materials/",
                                target: "_blank"
                            }, "Learn more about our materials")), React.createElement("p", {
                                className: "display-none",
                                id: "product-preview",
                                style: {
                                    position: "relative",
                                    top: 0,
                                    left: 0
                                },
                                onClick: function() {
                                    return Ln.a.showSlideshow(n, "".concat(e.display_name.replace(" Mounted", ""), " Gallery"))
                                }
                            }, React.createElement("img", {
                                src: "/static/svg/zoom.svg",
                                style: {
                                    width: 28,
                                    height: 28,
                                    zIndex: 2,
                                    bottom: 0,
                                    right: 0,
                                    position: "absolute"
                                }
                            }), React.createElement("img", {
                                style: {
                                    top: 0,
                                    left: 0,
                                    position: "relative",
                                    maxWidth: "100%"
                                },
                                src: "/static/img/photos/" + (e.thumb_name || e.product_name) + ".png"
                            })))))
                        }
                        return React.createElement("p", {
                            className: "description"
                        }, React.createElement("span", {
                            id: "scale-desc"
                        }, "Please select a material"))
                    }
                }]), t
            }(),
            ma = function(e) {
                function t() {
                    return oa(this, t), sa(this, ca(t).apply(this, arguments))
                }
                return la(t, React.Component), ia(t, [{
                    key: "render",
                    value: function() {
                        return React.createElement("div", {
                            className: "giftCardInsentive"
                        }, React.createElement("img", {
                            src: "/static/img/giftcard/giftcard.png",
                            className: "giftCardInsentive-img"
                        }), React.createElement("div", {
                            className: "giftCardInsentive-content"
                        }, React.createElement("div", {
                            className: "giftCardInsentive-title"
                        }, "Share The Loot"), React.createElement("div", {
                            className: "giftCardInsentive-action"
                        }, React.createElement("span", {
                            className: "giftCardInsentive-text"
                        }, "Check out our"), React.createElement("a", {
                            href: "#",
                            className: "giftCardInsentive-button",
                            onClick: function(e) {
                                e.preventDefault(), UIState.showOverlay = "giftCard"
                            }
                        }, "Gift Cards"))))
                    }
                }]), t
            }(),
            ya = function(e) {
                function t() {
                    return oa(this, t), sa(this, ca(t).apply(this, arguments))
                }
                return la(t, React.Component), ia(t, [{
                    key: "render",
                    value: function() {
                        return React.createElement(Ko, {
                            label: "Material",
                            onOpen: function() {
                                CK.enableMaterialSim()
                            },
                            onClose: function() {
                                CK.disableMaterialSim()
                            }
                        }, React.createElement(pa, null), React.createElement(da, null), React.createElement(ma, null))
                    }
                }]), t
            }();

        function va(e) {
            return (va = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ba(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function ga(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function wa(e, t) {
            return !t || "object" !== va(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function ka(e) {
            return (ka = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Sa(e, t) {
            return (Sa = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var _a = VN.classNames,
            Ca = function(e) {
                function t() {
                    return ba(this, t), wa(this, ka(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Sa(e, t)
                }(t, React.Component), n = t, o = [{
                    key: "hasNew",
                    value: function(e) {
                        return bt.hasNew(e)
                    }
                }], (r = [{
                    key: "renderToggleEars",
                    value: function() {
                        var e = CK.modded.parts.helm && (CK.modded.parts.helm.keywords.coversEars || CK.modded.parts.helm.keywords.coversFace),
                            t = !(CK.data.parts.earR || CK.data.parts.earL) || !CK.modded.parts.helm || !e,
                            n = !!CK.data.flags.earHoles;
                        return React.createElement("label", {
                            className: _a("layout-toggle", {
                                disabled: t
                            })
                        }, React.createElement("input", {
                            name: "isGoing",
                            disabled: t,
                            type: "checkbox",
                            checked: !n,
                            onChange: function() {
                                return CK.tweak({
                                    flags: {
                                        earHoles: !n
                                    }
                                })
                            }
                        }), "Hide Ears")
                    }
                }, {
                    key: "renderToggleHorns",
                    value: function() {
                        var e = CK.modded.parts.helm && (CK.modded.parts.helm.keywords.coversEars || CK.modded.parts.helm.keywords.coversFace),
                            t = !(CK.data.parts.hornR || CK.data.parts.hornL) || !CK.modded.parts.helm || !e,
                            n = !!CK.data.flags.hornHoles;
                        return React.createElement("label", {
                            className: _a("layout-toggle", {
                                disabled: t
                            })
                        }, React.createElement("input", {
                            name: "hideHorns",
                            disabled: t,
                            type: "checkbox",
                            checked: !n,
                            onChange: function() {
                                return CK.tweak({
                                    flags: {
                                        hornHoles: !n
                                    }
                                })
                            }
                        }), "Hide Horns")
                    }
                }, {
                    key: "renderPinned",
                    value: function() {
                        var e = CK.data.parts.earR || CK.data.parts.earL,
                            t = CK.data.parts.hornR || CK.data.parts.hornL;
                        return e || t ? React.createElement(React.Fragment, null, e && this.renderToggleEars(), t && !1) : null
                    }
                }, {
                    key: "render",
                    value: function() {
                        return React.createElement(Ko, {
                            pinned: this.renderPinned(),
                            hasFilter: !0
                        }, React.createElement(bt, {
                            label: "Headwear",
                            slot: "helm"
                        }))
                    }
                }]) && ga(n.prototype, r), o && ga(n, o), t
            }();

        function Ra(e) {
            return (Ra = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Oa(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ea(e, t) {
            return !t || "object" !== Ra(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Pa(e) {
            return (Pa = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function xa(e, t) {
            return (xa = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ja = VN.classNames,
            Ta = function(e) {
                function t(e) {
                    var n;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), (n = Ea(this, Pa(t).call(this, e))).state = {
                        maxOffset: 0,
                        currentOffset: 0,
                        carouselWidth: 0
                    }, n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && xa(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props,
                            n = t.options,
                            r = t.selected;
                        return React.createElement("div", {
                            className: ja("slotFilter", {
                                "slotFilter--big": this.props.big
                            })
                        }, React.createElement("div", {
                            className: "slotFilter-items"
                        }, React.createElement("nav", {
                            className: "slotFilter-items-list"
                        }, n.map((function(t) {
                            return React.createElement("div", {
                                className: ja("slotFilter-item", {
                                    isActive: r === t
                                }, {
                                    mirrored: t.mirrorThumb
                                }),
                                key: t.thumb,
                                onClick: t.onClick,
                                onMouseOut: function() {
                                    return CK.Events.emit("labeltip")
                                },
                                onMouseOver: function(e) {
                                    return CK.Events.emit("labeltip", {
                                        target: e.target,
                                        label: t.label
                                    })
                                }
                            }, React.createElement("img", {
                                src: t.thumb,
                                className: ja("slotFilter-item-img", {
                                    "slotFilter-item-img--big": e.props.big
                                })
                            }))
                        })))))
                    }
                }]) && Oa(n.prototype, r), o && Oa(n, o), t
            }();

        function Ma(e) {
            return (Ma = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Ka(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Ia(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Na(e, t) {
            return !t || "object" !== Ma(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Ba(e) {
            return (Ba = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Aa(e, t) {
            return (Aa = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var La = function(e) {
            function t() {
                return Ka(this, t), Na(this, Ba(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Aa(e, t)
            }(t, React.Component), n = t, o = [{
                key: "getSelectedFilter",
                value: function(e) {
                    var t = UIState.filters[e.targetSlot || e.slot] || e.initial;
                    return "none" === t ? "none" : t && e.filters.find((function(e) {
                        return e.slug === t
                    })) ? t : e.filters[0].slug
                }
            }], (r = [{
                key: "render",
                value: function() {
                    var e, n = this,
                        r = this.props.slot,
                        o = this.props.targetSlot || r,
                        a = t.getSelectedFilter(this.props),
                        i = this.props.filters.map((function(t) {
                            var r = new He({
                                label: t.label,
                                onClick: function() {
                                    return n.updateFilter(o, t.slug)
                                },
                                thumb: "/static/svg/items/".concat(t.slug, ".svg")
                            });
                            return t.slug === a && (e = r), r
                        }));
                    return React.createElement(Ta, {
                        options: i,
                        selected: e
                    })
                }
            }, {
                key: "updateFilter",
                value: function(e, t) {
                    UIState.filters[e] === t ? UIState.filters[e] = void 0 : UIState.filters[e] = t, this.forceUpdate(), CKUI.requestEditorRefresh(), CK.Events.emit("slotFilterChanged")
                }
            }]) && Ia(n.prototype, r), o && Ia(n, o), t
        }();

        function Ua(e) {
            return (Ua = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Da(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Fa(e, t) {
            return !t || "object" !== Ua(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function za(e) {
            return (za = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Va(e, t) {
            return (Va = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Ga = function(e) {
            function t(e, n) {
                var r;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (r = Fa(this, za(t).call(this, e))).defaultMenu = n, r.state = {
                    activeMenu: n
                }, r
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Va(e, t)
            }(t, React.Component), n = t, o = [{
                key: "hasNew",
                value: function(e) {
                    return bt.hasNew({
                        slot: (e.slot || e.label.toLowerCase()) + "R"
                    })
                }
            }], (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("clearSlot", this.resetActiveMenu.bind(this))
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("clearSlot", this.resetActiveMenu.bind(this))
                }
            }, {
                key: "resetActiveMenu",
                value: function() {
                    this.setState({
                        activeMenu: this.defaultMenu
                    })
                }
            }]) && Da(n.prototype, r), o && Da(n, o), t
        }();

        function qa(e) {
            return (qa = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Ha(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Wa(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Qa(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Xa(e, t) {
            return !t || "object" !== qa(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Ya(e) {
            return (Ya = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Za(e, t) {
            return (Za = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Ja = function(e) {
            function t() {
                return Wa(this, t), Xa(this, Ya(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Za(e, t)
            }(t, e), n = t, o = [{
                key: "available",
                value: function(e) {
                    var t = e.rivet,
                        n = [];
                    if (t.availableParts)
                        for (var r in t.availableParts) n.push(t.availableParts[r]);
                    return n
                }
            }, {
                key: "getOptions",
                value: function(e) {
                    var t = this,
                        n = e.slot || e.label.toLowerCase(),
                        r = e.rivet.name,
                        o = this.available(e),
                        a = CK.data.attachParts[n] && CK.data.attachParts[n][r],
                        i = o.map((function(e) {
                            return new He({
                                thumb: UIState.alwaysCompact ? CK.Paths.getPartThumbSmall(e) : CK.Paths.getPartThumb(e),
                                label: e.displayName,
                                description: e.description,
                                onClick: function() {
                                    t.partClicked(e.id, r, n)
                                },
                                selected: e.id === a,
                                thumbSize: e.thumbSize,
                                tagLabel: e.tagLabel,
                                tagColor: e.tagColor,
                                originalData: e,
                                displayOrder: e.display_order
                            })
                        }));
                    return i.length ? i : void 0
                }
            }, {
                key: "partClicked",
                value: function(e, t, n) {
                    var r = n in CK.data.attachParts && t in CK.data.attachParts[n] && e === CK.data.attachParts[n][t];
                    CK.tweakPart({
                        attachParts: Ha({}, n, Ha({}, t, r ? void 0 : e))
                    })
                }
            }], (r = null) && Qa(n.prototype, r), o && Qa(n, o), t
        }(bt);

        function $a(e) {
            return ($a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ei(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function ti(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function ni(e, t) {
            return !t || "object" !== $a(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function ri(e) {
            return (ri = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function oi(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ai(e, t, n) {
            return t && oi(e.prototype, t), n && oi(e, n), e
        }

        function ii(e, t) {
            return (ii = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var si = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = ni(this, ri(t).call(this, e))).state = {}, n
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && ii(e, t)
            }(t, React.Component), ai(t, null, [{
                key: "getNavItems",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",
                        n = CK.modded.parts[e + t],
                        r = [];
                    return n && n.rivets && n.rivets.map((function(e) {
                        var n = e.source,
                            o = e.name,
                            a = e.label,
                            i = e.availableParts,
                            s = CK.Options.slots[n] || {};
                        n && i && r.push({
                            slug: o + "-" + t,
                            label: (a || s.display_name || o) + " " + t
                        })
                    })), r
                }
            }, {
                key: "renderContent",
                value: function(e, t) {
                    var n = ti(t.split("-"), 2),
                        r = n[0],
                        o = n[1],
                        a = CK.modded.parts[e + o];
                    if (a && a.rivets) {
                        var i = a.rivets.find((function(e) {
                            return e.source && e.name === r
                        }));
                        if (i) {
                            var s = i.source,
                                c = i.label;
                            return React.createElement(Ja, {
                                slot: e + o,
                                part: a,
                                rivet: i,
                                source: s,
                                label: c || r
                            })
                        }
                    }
                    return console.error("No items available for", e, t) || null
                }
            }]), ai(t, [{
                key: "render",
                value: function() {
                    var e = this,
                        n = this.props.slot || this.props.label.toLowerCase(),
                        r = this.state.activeMenu,
                        o = [{
                            slug: "mainPart",
                            label: n
                        }].concat(ei(t.getNavItems(n)));
                    return React.createElement(Ko, {
                        pinned: o.length > 1 && React.createElement(Ro, {
                            nav: o,
                            onItemClick: function(t) {
                                return e.setState({
                                    activeMenu: t
                                })
                            }
                        }),
                        pinnedNoPadding: !!UIState.compact
                    }, t.renderContent(n, r))
                }
            }]), t
        }();

        function ci(e) {
            return (ci = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function li(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function ui(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function fi(e, t) {
            return !t || "object" !== ci(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function hi(e) {
            return (hi = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function pi(e, t) {
            return (pi = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var di = [{
                slug: "all",
                label: "All"
            }, {
                slug: "new",
                label: "New"
            }, {
                slug: "familiar",
                label: "Animals"
            }, {
                slug: "foodDrink",
                label: "Food & Drink"
            }, {
                slug: "handpose",
                label: "Hand Poses"
            }, {
                slug: "instrument",
                label: "Instruments"
            }, {
                slug: "light",
                label: "Light Sources"
            }, {
                slug: "shortblade",
                label: "Short Blades"
            }, {
                slug: "sword",
                label: "Long Blades"
            }, {
                slug: "axe",
                label: "Axes"
            }, {
                slug: "blunt",
                label: "Blunt Weapons"
            }, {
                slug: "chain",
                label: "Chain Weapons"
            }, {
                slug: "polearm",
                label: "Polearms"
            }, {
                slug: "staff",
                label: "Staffs"
            }, {
                slug: "shield",
                label: "Shields"
            }, {
                slug: "bow",
                label: "Bows"
            }, {
                slug: "crossbow",
                label: "Crossbows"
            }, {
                slug: "pistol",
                label: "Pistols"
            }, {
                slug: "rifle",
                label: "Long Guns"
            }, {
                slug: "spell",
                label: "Spell Effects"
            }, {
                slug: "miscellaneous",
                label: "Other"
            }],
            mi = function(e) {
                function t(e) {
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), fi(this, hi(t).call(this, e, "handheld"))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && pi(e, t)
                }(t, e), n = t, o = [{
                    key: "hasNew",
                    value: function(e) {
                        var n = (e.slot || e.label.toLowerCase()) + "R",
                            r = n + "_" + UIState.genreFilter;
                        if (!(r in t.newCache)) {
                            t.newCache[r] = !1;
                            var o = bt.available({
                                slot: n
                            });
                            for (var a in o)
                                if (o[a].new) {
                                    t.newCache[r] = !0;
                                    break
                                }
                        }
                        return t.newCache[r]
                    }
                }], (r = [{
                    key: "getSelectedFilter",
                    value: function() {
                        var e = this.getSlotFilter();
                        return La.getSelectedFilter(e.props)
                    }
                }, {
                    key: "getSlotFilter",
                    value: function() {
                        var e = this.props.slot + "R",
                            t = di;
                        return React.createElement(La, {
                            key: "slotFilter",
                            slot: "itemR",
                            targetSlot: e,
                            filters: t,
                            initial: "all"
                        })
                    }
                }, {
                    key: "getNavItems",
                    value: function() {
                        var e = this.getSelectedFilter(),
                            t = [{
                                slug: "handheld",
                                label: "none" === e ? "" : di.find((function(t) {
                                    return t.slug === e
                                })).label
                            }].concat(li(si.getNavItems(this.props.slot, "R")), li(si.getNavItems(this.props.slot, "L")));
                        return this.hasVisibleArrow() ? t.push({
                            slug: "extra",
                            label: "Arrows"
                        }) : this.hasItemRAttach() && t.push({
                            slug: "extra",
                            label: "Extra"
                        }), t
                    }
                }, {
                    key: "renderNav",
                    value: function() {
                        var e = this;
                        return React.createElement(Ro, {
                            nav: this.getNavItems(),
                            onItemClick: function(t) {
                                return e.setState({
                                    activeMenu: t
                                })
                            }
                        })
                    }
                }, {
                    key: "hasVisibleArrow",
                    value: function() {
                        return bt.hasContent({
                            slot: "itemAttachT"
                        }) && [49, 50, 51].indexOf(CK.data.limitedPoses.main) > -1
                    }
                }, {
                    key: "hasItemRAttach",
                    value: function() {
                        return bt.hasContent({
                            slot: "itemAttachR"
                        })
                    }
                }, {
                    key: "renderItemAttach",
                    value: function() {
                        return this.hasVisibleArrow() ? React.createElement(bt, {
                            hideIfEmpty: !0,
                            label: "Extra",
                            key: "itemAttachT",
                            slot: "itemAttachT"
                        }) : this.hasItemRAttach() ? React.createElement(bt, {
                            hideIfEmpty: !0,
                            label: "Extra",
                            key: "itemAttachR",
                            slot: "itemAttachR"
                        }) : null
                    }
                }, {
                    key: "renderPinned",
                    value: function() {
                        return React.createElement(React.Fragment, null, this.renderNav(), "handheld" === this.activeMenu && this.getSlotFilter())
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this.props,
                            t = e.slot,
                            n = e.label,
                            r = e.itemD,
                            o = this.getSelectedFilter(),
                            a = this.activeMenu;
                        return React.createElement(Ko, {
                            pinned: this.renderPinned(),
                            pinnedNoPadding: !!UIState.compact,
                            hasFilter: !0
                        }, "extra" === a ? this.renderItemAttach() : "handheld" === a ? React.createElement(jt, {
                            label: n,
                            slot: t,
                            filter: o,
                            key: t + "filter",
                            itemD: r
                        }) : si.renderContent(t, a))
                    }
                }, {
                    key: "activeMenu",
                    get: function() {
                        var e = this.state.activeMenu;
                        return this.getNavItems().find((function(t) {
                            return t.slug === e
                        })) ? e : "handheld"
                    }
                }]) && ui(n.prototype, r), o && ui(n, o), t
            }(Ga);

        function yi(e) {
            return (yi = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function vi(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function bi(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function gi(e, t) {
            return !t || "object" !== yi(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function wi(e) {
            return (wi = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function ki(e, t) {
            return (ki = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        mi.newCache = {};
        var Si = VN.classNames,
            _i = function(e) {
                function t() {
                    return vi(this, t), gi(this, wi(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && ki(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "switchLink",
                    value: function() {
                        this.props.forceLink || (!this.props.linked && (this.props.partL.selected && !this.props.partR.selected ? this.props.partR.onClick(!1) : this.props.partR.selected && !this.props.partL.selected && this.props.partL.onClick(!1)), this.props.switchLink())
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.partL,
                            n = this.props.partR,
                            r = Si("sprite-creationkit-ui-sprites", "link-button", {
                                "creationkit-ui-sprites-icon-linkedpart-linked": this.props.linked
                            }, {
                                "creationkit-ui-sprites-icon-linkedpart-unlinked": !this.props.linked
                            });
                        if (n && t) {
                            var o = n.onClick,
                                a = t.onClick,
                                i = this.props.forceLink;
                            n.onClick = function() {
                                return o(e.props.linked || i)
                            }, t.onClick = function() {
                                return a(e.props.linked || i)
                            };
                            var s = i ? {
                                opacity: .2,
                                cursor: "default"
                            } : {};
                            return React.createElement("div", {
                                className: Si("linked-part", this.props.className, {
                                    linked: this.props.linked
                                })
                            }, React.createElement(et, {
                                option: t,
                                key: t.thumb + "L"
                            }), React.createElement("a", {
                                className: r,
                                style: s,
                                onClick: this.switchLink.bind(this)
                            }), React.createElement(et, {
                                option: n,
                                key: n.thumb + "R"
                            }))
                        }
                        var c = t || n || console.error("L AND R parts are *both* null.");
                        return c ? React.createElement("div", {
                            className: "linked-part"
                        }, React.createElement(et, {
                            option: c,
                            key: c.thumb
                        })) : null
                    }
                }]) && bi(n.prototype, r), o && bi(n, o), t
            }();

        function Ci(e) {
            return (Ci = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Ri(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Oi(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ei(e, t) {
            return !t || "object" !== Ci(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Pi(e) {
            return (Pi = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function xi(e, t) {
            return (xi = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ji = function(e) {
            function t() {
                return Ri(this, t), Ei(this, Pi(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && xi(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "switchLink",
                value: function() {
                    t.linkedState[this.props.label] = !this.linked, this.forceUpdate()
                }
            }, {
                key: "render",
                value: function() {
                    var e, t = this,
                        n = [];
                    for (var r in this.props.leftOptions) {
                        var o = this.props.leftOptions[r] || this.props.rightOptions[r] || {},
                            a = this.props.leftOptions[r],
                            i = this.props.rightOptions[r],
                            s = this.props.forceLink || a && a.originalData && a.originalData.settings && a.originalData.settings.forceLink || i && i.originalData && i.originalData.settings && i.originalData.settings.forceLink;
                        n.push(React.createElement(_i, {
                            partL: a,
                            partR: i,
                            option: {
                                originalData: o.originalData
                            },
                            linked: this.linked || s || this.forceLink,
                            forceLink: this.forceLink || s,
                            switchLink: function() {
                                t.switchLink()
                            },
                            key: (o.thumb || o.label) + r,
                            className: (e = o.label, e.toString().toLowerCase().replace(/\s+/g, "-").replace(/[^\w\-]+/g, "").replace(/\-\-+/g, "-").replace(/^-+/, "").replace(/-+$/, ""))
                        }))
                    }
                    return React.createElement(ut, {
                        linked: !0
                    }, n)
                }
            }, {
                key: "linked",
                get: function() {
                    return this.forceLink || this.props.forceLink || void 0 !== t.linkedState[this.props.label] ? t.linkedState[this.props.label] : this.props.linkedDefault
                }
            }]) && Oi(n.prototype, r), o && Oi(n, o), t
        }();

        function Ti(e) {
            return (Ti = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Mi(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Ki(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ii(e, t) {
            return !t || "object" !== Ti(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Ni(e) {
            return (Ni = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Bi(e, t) {
            return (Bi = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }

        function Ai(e) {
            return (Ai = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Li(e, t) {
            var n = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }))), n.push.apply(n, r)
            }
            return n
        }

        function Ui(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Di(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Fi(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function zi(e, t) {
            return !t || "object" !== Ai(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Vi(e) {
            return (Vi = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Gi(e, t) {
            return (Gi = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        ji.linkedState = {};
        var qi = function(e) {
            function t() {
                return Di(this, t), zi(this, Vi(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Gi(e, t)
            }(t, e), n = t, o = [{
                key: "forceLink",
                value: function(e) {
                    var t = e.slot || e.label.toLowerCase(),
                        n = t + "R",
                        r = t + "L",
                        o = CK.data.parts[n],
                        a = CK.data.parts[r];
                    return o && CK.Options.parts[o].settings.forceLink || a && CK.Options.parts[a].settings.forceLink
                }
            }, {
                key: "getOptions",
                value: function(e) {
                    var t = e.slot || e.label.toLowerCase(),
                        n = t + "R",
                        r = t + "L",
                        o = this.forceLink(e),
                        a = bt.getOptions(Object.assign({}, e, {
                            slot: n,
                            flipThumb: e.flipThumb
                        }));
                    if (a) {
                        var i = [];
                        for (var s in a) {
                            var c = a[s],
                                l = c.originalData;
                            l.link ? function() {
                                var t = CK.Options.getPart(l.link);
                                i.push(new He(Object.assign({}, c, {
                                    onClick: c.onClick ? function(n) {
                                        bt.partClicked(n || o, t, r, e.clearTransforms)
                                    } : void 0,
                                    selected: t.id === CK.data.parts[r],
                                    mirrorThumb: !c.mirrorThumb,
                                    originalData: t
                                })))
                            }() : i.push(null)
                        }
                        if (CK.Settings.clearParts && !CK.Settings.getSlotSetting(n, "required") && UIState.compact) {
                            var u = [t + "R", t + "L"];
                            u.map((function(e, t) {
                                (t ? i : a).push(new He({
                                    label: "Empty",
                                    description: "Remove anything currently selected",
                                    selected: !CK.data.parts[e],
                                    thumb: "/static/svg/empty.svg",
                                    extraClass: "clearButton",
                                    onClick: function(t) {
                                        t ? CK.clearSlots(u) : CK.clearSlot(e)
                                    }
                                }))
                            }))
                        }
                        return CK.data.mirroredPose ? [i, a] : [a, i]
                    }
                }
            }, {
                key: "getThumbnails",
                value: function(e) {
                    var t = (e.slot || e.label.toLowerCase()) + "R";
                    return bt.getThumbnails(function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var n = null != arguments[t] ? arguments[t] : {};
                            t % 2 ? Li(Object(n), !0).forEach((function(t) {
                                Ui(e, t, n[t])
                            })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : Li(Object(n)).forEach((function(t) {
                                Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t))
                            }))
                        }
                        return e
                    }({}, e, {
                        slot: t
                    }))
                }
            }, {
                key: "hasNew",
                value: function(e) {
                    var n = (e.slot || e.label.toLowerCase()) + "R",
                        r = n + "_" + UIState.genreFilter;
                    if (!(r in t.newCache)) {
                        t.newCache[r] = !1;
                        var o = bt.available({
                            slot: n
                        });
                        for (var a in o)
                            if (o[a].new) {
                                t.newCache[r] = !0;
                                break
                            }
                    }
                    return t.newCache[r]
                }
            }], (r = [{
                key: "getOptions",
                value: function(e) {
                    return t.getOptions(e)
                }
            }]) && Fi(n.prototype, r), o && Fi(n, o), t
        }(function(e) {
            function t() {
                return Mi(this, t), Ii(this, Ni(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Bi(e, t)
            }(t, React.Component), n = t, o = [{
                key: "forceLink",
                value: function(e) {
                    return !1
                }
            }], (r = [{
                key: "render",
                value: function() {
                    if (this.props.label.toLowerCase() in CK.data.disableMenus) return React.createElement("div", null, React.createElement("a", null, CK.data.disableMenus[this.props.label.toLowerCase()]));
                    var e = this.getOptions(this.props);
                    return !e && this.props.hideIfEmpty ? null : React.createElement(React.Fragment, null, this.props.header ? this.props.header : null, React.createElement("div", null, e ? React.createElement(ji, {
                        label: this.props.label,
                        leftOptions: e[0],
                        rightOptions: e[1],
                        forceLink: this.constructor.forceLink(this.props),
                        linkedDefault: this.props.linkedDefault
                    }) : null))
                }
            }, {
                key: "getOptions",
                value: function() {
                    console.log("get options needs overwriting")
                }
            }]) && Ki(n.prototype, r), o && Ki(n, o), t
        }());

        function Hi(e) {
            return (Hi = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Wi(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Qi(e, t) {
            return !t || "object" !== Hi(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Xi(e) {
            return (Xi = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Yi(e, t) {
            return (Yi = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        qi.newCache = {};
        var Zi = function(e) {
            function t(e) {
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), Qi(this, Xi(t).call(this, e, "items"))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Yi(e, t)
            }(t, e), n = t, (r = [{
                key: "renderNav",
                value: function() {
                    var e = this;
                    if (!bt.hasContent({
                            slot: "sideAttachL"
                        }) && !bt.hasContent({
                            slot: "sideAttachR"
                        })) return null;
                    var t = [{
                        slug: "items",
                        label: "Items"
                    }];
                    return bt.hasContent({
                        slot: "sideAttachL"
                    }) && t.unshift({
                        slug: "left",
                        label: "Left side"
                    }), bt.hasContent({
                        slot: "sideAttachR"
                    }) && t.push({
                        slug: "right",
                        label: "Right side"
                    }), React.createElement(Ro, {
                        nav: t,
                        onItemClick: function(t) {
                            return e.setState({
                                activeMenu: t
                            })
                        },
                        activeMenu: this.state.activeMenu
                    })
                }
            }, {
                key: "renderItemAttachL",
                value: function() {
                    return React.createElement(bt, {
                        hideIfEmpty: !0,
                        label: "L",
                        slot: "sideAttachL"
                    })
                }
            }, {
                key: "renderItemAttachR",
                value: function() {
                    return React.createElement(bt, {
                        hideIfEmpty: !0,
                        label: "R",
                        slot: "sideAttachR"
                    })
                }
            }, {
                key: "renderPinned",
                value: function() {
                    return this.renderNav()
                }
            }, {
                key: "render",
                value: function() {
                    return React.createElement(Ko, {
                        pinned: this.renderPinned(),
                        hasFilter: !0
                    }, "items" === this.state.activeMenu && React.createElement(qi, {
                        label: "Side"
                    }), "left" === this.state.activeMenu && this.renderItemAttachL(), "right" === this.state.activeMenu && this.renderItemAttachR())
                }
            }]) && Wi(n.prototype, r), o && Wi(n, o), t
        }(Ga);

        function Ji(e) {
            return (Ji = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function $i(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function es(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ts(e, t) {
            return !t || "object" !== Ji(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function ns(e) {
            return (ns = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function rs(e, t) {
            return (rs = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var os = function(e) {
            function t() {
                return $i(this, t), ts(this, ns(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && rs(e, t)
            }(t, e), n = t, o = [{
                key: "makeTweak",
                value: function(e) {
                    CKUI.promptClearTransforms(e)
                }
            }], (r = null) && es(n.prototype, r), o && es(n, o), t
        }(bt);

        function as(e) {
            return (as = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function is(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function ss(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function cs(e, t) {
            return !t || "object" !== as(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function ls(e) {
            return (ls = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function us(e, t) {
            return (us = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var fs = VN.classNames,
            hs = function(e) {
                function t() {
                    return is(this, t), cs(this, ls(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && us(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "renderExtraTall",
                    value: function() {
                        return React.createElement(Ko, {
                            label: "Mount"
                        }, "Mounts unavailable because ", CK.character.getName() || "your character", " is ", React.createElement("span", {
                            className: "xl-tag"
                        }, "XL"), ".", React.createElement("br", null), "The mount would be squished underneath your mighty stature!")
                    }
                }, {
                    key: "renderPinned",
                    value: function() {
                        if (CK.data.disableMenus.mount) return null;
                        var e = void 0 === CK.data.parts.mount,
                            t = !(e || !CK.data.flags.hideRider);
                        return React.createElement("label", {
                            className: fs("layout-toggle", {
                                disabled: e
                            })
                        }, React.createElement("input", {
                            type: "checkbox",
                            name: "isGoing",
                            disabled: e,
                            checked: t,
                            onChange: function() {
                                e || (t ? CK.tweak({
                                    flags: {
                                        hideRider: void 0
                                    }
                                }) : CK.tweak({
                                    flags: {
                                        hideRider: !0
                                    }
                                }))
                            }
                        }), "Hide Rider")
                    }
                }, {
                    key: "render",
                    value: function() {
                        if (f.isExtraTall()) return this.renderExtraTall();
                        var e = !!CK.data.disableMenus.mount;
                        return React.createElement(Ko, {
                            label: "Mount",
                            hasFilter: !e,
                            pinned: this.renderPinned()
                        }, React.createElement(os, {
                            label: "Mount"
                        }))
                    }
                }]) && ss(n.prototype, r), o && ss(n, o), t
            }();

        function ps(e) {
            return (ps = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ds(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function ms(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ys(e, t) {
            return !t || "object" !== ps(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function vs(e, t, n) {
            return (vs = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(e, t, n) {
                var r = function(e, t) {
                    for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = bs(e)););
                    return e
                }(e, t);
                if (r) {
                    var o = Object.getOwnPropertyDescriptor(r, t);
                    return o.get ? o.get.call(n) : o.value
                }
            })(e, t, n || e)
        }

        function bs(e) {
            return (bs = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function gs(e, t) {
            return (gs = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ws = ["finger1R", "finger2R", "finger3R", "finger4R", "finger5R", "finger1L", "finger2L", "finger3L", "finger4L", "finger5L"],
            ks = [
                [13, 56],
                [29, 63],
                [46, 66],
                [64, 62],
                [78, 42],
                [120, 42],
                [136, 63],
                [154, 66],
                [171, 62],
                [187, 56]
            ],
            Ss = function(e) {
                function t() {
                    return ds(this, t), ys(this, bs(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && gs(e, t)
                }(t, e), n = t, o = [{
                    key: "getOptions",
                    value: function(e) {
                        return vs(bs(t), "getOptions", this).call(this, Object.assign({}, e, {
                            slot: t.selectedRingSlot
                        }), t.selectedRingSlot)
                    }
                }, {
                    key: "getClear",
                    value: function() {
                        return function() {
                            CK.clearSlots(ws)
                        }
                    }
                }, {
                    key: "hasNew",
                    value: function() {
                        return void 0 === t.hasNew && (t._hasNew = !!CK.Options.partsBySlot.ring.find((function(e) {
                            return e.new
                        }))), t._hasNew
                    }
                }], (r = [{
                    key: "render",
                    value: function() {
                        var e = vs(bs(t.prototype), "render", this).call(this, t.selectedRingSlot),
                            n = ws.map((function(e, n) {
                                var r = CK.data.mirroredPose ? ks[9 - n] : ks[n],
                                    o = CK.data.parts[e];
                                return React.createElement("div", {
                                    key: e,
                                    onClick: function() {
                                        t.selectedRingSlot = e, CKUI.requestEditorRefresh()
                                    },
                                    style: {
                                        backgroundColor: t.selectedRingSlot === e ? "#565656" : o ? "#C18287" : "white",
                                        border: "none",
                                        width: 16,
                                        height: 16,
                                        borderRadius: "50%",
                                        position: "absolute",
                                        top: r[1] - 8,
                                        left: r[0] - 8,
                                        cursor: "pointer"
                                    }
                                })
                            }));
                        return React.createElement("div", null, React.createElement("div", {
                            style: {
                                display: "inline-block",
                                position: "relative",
                                width: 200,
                                height: 125,
                                backgroundImage: 'url("/static/img/hands.png")'
                            }
                        }, n), e)
                    }
                }]) && ms(n.prototype, r), o && ms(n, o), t
            }(bt);

        function _s(e) {
            return (_s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Cs(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Rs(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Os(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Es(e, t) {
            return !t || "object" !== _s(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Ps(e) {
            return (Ps = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function xs(e, t) {
            return (xs = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        Ss.selectedRingSlot = "finger3R";
        var js = VN.classNames,
            Ts = function(e) {
                function t() {
                    return Rs(this, t), Es(this, Ps(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && xs(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        if (!this.props.options || !this.props.options.length || this.props.options.length && void 0 === this.props.options[0]) return React.createElement("div", null, "NO OPTIONS GIVEN");
                        var e = this.props.options,
                            t = [];
                        for (var n in e) {
                            var r = e[n];
                            t.push(React.createElement(et, {
                                option: r,
                                key: (e.thumb || r.label) + n
                            }))
                        }
                        var o = js("grid-layout", {
                            "specified-columns": this.props.columns
                        }, Cs({}, "specified-columns-".concat(this.props.columns), this.props.columns), Cs({}, "thumb-width-".concat(e[0].thumbSize[0]), e.length && e[0].thumbSize));
                        return React.createElement("div", {
                            className: o
                        }, t)
                    }
                }]) && Os(n.prototype, r), o && Os(n, o), t
            }();

        function Ms(e) {
            return (Ms = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Ks(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Is(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ns(e, t) {
            return !t || "object" !== Ms(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Bs(e) {
            return (Bs = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function As(e, t) {
            return (As = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Ls = function(e) {
            function t() {
                return Ks(this, t), Ns(this, Bs(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && As(e, t)
            }(t, React.Component), n = t, o = [{
                key: "getAvailable",
                value: function(e) {
                    var t = e.label,
                        n = e.category || t.toLowerCase();
                    return (e.configs || CK.Options.configs[n] || []).filter((function(e) {
                        return !e.hide
                    }))
                }
            }, {
                key: "getOptions",
                value: function(e) {
                    var t = e.showSelected,
                        n = e.selectedTest,
                        r = e.paintType,
                        o = e.swatchesFromSlot,
                        a = CK.data.mirrorPose,
                        i = this.getAvailable(e),
                        s = [],
                        c = function(c) {
                            var l = i[c],
                                u = e.pallet ? CK.Paths.getPalletThumb(l) : CK.Paths.getConfigThumb(l.name),
                                f = [];
                            if (o && "paints" in l && !e.pallet) {
                                var h = l.paints[o];
                                for (var p in h) f.push(CK.Options.surfaces[h[p]].gradient);
                                u = void 0
                            }
                            var d = l.desc,
                                m = CK.Options.getAttr(l, "config_desc"),
                                y = t && CK.data.matchesConfig(l) || n && n(l),
                                v = l.thumb_x || 120,
                                b = l.thumb_y || 120,
                                g = new He({
                                    thumb: u,
                                    label: d,
                                    description: m,
                                    onClick: function() {
                                        CK.tweak(l), Reporting.preconfigSelected(l)
                                    },
                                    selected: y,
                                    mirrorThumb: a,
                                    thumbSize: [v, b],
                                    tagLabel: l.tagLabel,
                                    tagColor: l.tagColor,
                                    swatchLayers: f,
                                    paintType: r,
                                    displayOrder: l.display_order,
                                    originalData: l
                                });
                            s.push(g)
                        };
                    for (var l in i) c(l);
                    return s.sort((function(e, t) {
                        return e.displayOrder < t.displayOrder ? -1 : 1
                    })), s.length ? s : void 0
                }
            }, {
                key: "hasNew",
                value: function(e) {
                    var n = e.category || e.label.toLowerCase(),
                        r = n + "_" + UIState.genreFilter;
                    if (!(r in t.newCache)) {
                        t.newCache[r] = !1;
                        var o = e.configs || CK.Options.configs[n];
                        for (var a in o)
                            if (o[a].new) {
                                t.newCache[r] = !0;
                                break
                            }
                    }
                    return t.newCache[r]
                }
            }], (r = [{
                key: "render",
                value: function() {
                    var e = t.getOptions(this.props);
                    return React.createElement("div", null, e ? React.createElement(Ts, {
                        options: e,
                        columns: this.props.columns,
                        key: this.props.label
                    }) : React.createElement("a", null, "Nothing Found In Current Genre"))
                }
            }]) && Is(n.prototype, r), o && Is(n, o), t
        }();

        function Us(e) {
            return (Us = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Ds(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Fs(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function zs(e, t) {
            return !t || "object" !== Us(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Vs(e) {
            return (Vs = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Gs(e, t) {
            return (Gs = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        Ls.newCache = {};
        var qs = function(e) {
            function t() {
                return Ds(this, t), zs(this, Vs(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Gs(e, t)
            }(t, e), n = t, (r = [{
                key: "random",
                value: function(e) {
                    if (!e) {
                        var t = Ls.getAvailable(this.props);
                        e = t[Math.floor(Math.random() * t.length)].name.replace("Female", "").replace("Male", "")
                    }
                    console.log(e);
                    var n = CK.Options.configsByName,
                        r = [n.racegenders[e + "Male"] || console.error("Could not find ", e + "Male"), n.racegenders[e + "Female"] || console.error("Could not find ", e + "Female")];
                    for (var o in n.racerandom) o.startsWith(e) && r.push(n.racerandom[o]);
                    var a = Object.assign({}, r[Math.floor(Math.random() * r.length)]);
                    a.parts = Object.assign({}, a.parts), a.sliders = Object.assign({}, a.sliders);
                    var i = e.toLowerCase();
                    for (var s in a.parts) {
                        var c = a.parts[s];
                        if (c) {
                            var l = CK.Options.getPart(c);
                            if ("CLEAR" !== l.name && "R" !== l.side) {
                                var u = CK.Options.getSelectableParts(s).filter((function(e) {
                                    return e.keywords[i] || e.terms[i]
                                }));
                                if (u.length) {
                                    var f = u[Math.floor(Math.random() * u.length)];
                                    a.parts[s] = f.id, "L" === f.side && (a.parts[f.slotR] = f.link)
                                }
                            }
                        }
                    }
                    var h = a.sliders.height > b.xlSliderThreshold,
                        p = {
                            belly: .15,
                            booty: .1,
                            build: .1,
                            curves: .1,
                            faceSoftness: .4,
                            headSize: .2,
                            height: .075,
                            muscularity: .3,
                            posture: .04,
                            waist: .1,
                            weightTorso: .1,
                            weightLower: .1,
                            weightUpper: .1
                        };
                    for (var d in p) {
                        var m = p[d];
                        a.sliders[d] += (Math.random() - .5) * m, a.sliders[d] < 0 && (a.sliders[d] = 0), a.sliders[d] > 1 && (a.sliders[d] = 1)
                    }
                    var y = 1.5 * Math.random(),
                        v = 0;
                    (function(e) {
                        for (var t = e.length - 1; t > 0; t--) {
                            var n = Math.floor(Math.random() * (t + 1)),
                                r = [e[n], e[t]];
                            e[t] = r[0], e[n] = r[1]
                        }
                        return e
                    })(["xprsn_cocky", "xprsn_confused", "xprsn_smile", "xprsn_snarl"]).map((function(e) {
                        var t = Math.random();
                        t + v > y && (t = y - v), v += t, a.sliders[e] = t
                    })), h && a.sliders.height < b.xlSliderThreshold && (a.sliders.height = b.xlSliderThreshold + .01), !h && a.sliders.height >= b.xlSliderThreshold && (a.sliders.height = b.xlSliderThreshold - .01), Reporting.preconfigRandomized(a), CK.tweak(a)
                }
            }, {
                key: "render",
                value: function() {
                    for (var e = this, t = Ls.getOptions(this.props), n = [], r = function(r) {
                            var o = t[2 * r],
                                a = t[2 * r + 1];
                            if (!o || !a) return console.error("Missmatched male and female"), "break";
                            var i = o.originalData,
                                s = o.label.substr((o.label.indexOf(" ") || 0) + 1),
                                c = (i.sliders.height > .6 || !!i.keywords.XL) && React.createElement("div", {
                                    className: "XL"
                                }, "XL");
                            n.push(React.createElement("div", {
                                key: s + r + "text",
                                className: "race",
                                option: {
                                    originalData: i
                                }
                            }, React.createElement("div", {
                                style: {
                                    display: "flex",
                                    flexDireciton: "row",
                                    justifyContent: "center"
                                },
                                className: "race-genders"
                            }, React.createElement(et, {
                                option: o,
                                overlay: c
                            }), React.createElement(et, {
                                option: a,
                                overlay: c
                            })), React.createElement("div", {
                                className: "race-label",
                                onClick: function() {
                                    return e.random(o.originalData.name.replace("Male", ""))
                                }
                            }, React.createElement("img", {
                                src: "/static/svg/dice.svg",
                                className: "random-icon left"
                            }), React.createElement("a", null, s), React.createElement("img", {
                                src: "/static/svg/dice.svg",
                                className: "random-icon"
                            }))))
                        }, o = 0; o < t.length / 2 && "break" !== r(o); o++);
                    return React.createElement(Ko, {
                        hasFilter: !0
                    }, React.createElement("div", {
                        key: "Random",
                        className: "random"
                    }, React.createElement("div", {
                        style: {
                            display: "flex",
                            flexDireciton: "row",
                            justifyContent: "center"
                        }
                    }, React.createElement(et, {
                        option: new He({
                            thumb: "/static/herobundles/config/dice-square.png",
                            onClick: function() {
                                return e.random()
                            },
                            label: "Random",
                            description: "A randomized race."
                        })
                    })), React.createElement("div", {
                        className: "race-label",
                        onClick: function() {
                            return e.random()
                        }
                    }, React.createElement("a", null, "Random"))), React.createElement(ut, null, n))
                }
            }]) && Fs(n.prototype, r), o && Fs(n, o), t
        }(Ls);

        function Hs() {
            return CK.modded.parts.base && CK.modded.parts.base.keywords.initiative
        }
        var Ws = {
            clipSettingsActive: Hs,
            clipSize: function() {
                if (!Hs()) return null;
                for (var e = [], t = 2; t < 26; t++) e.push(React.createElement("option", {
                    key: t,
                    value: t
                }, 3 === t ? t + " mm (Standard GM Screen)" : t + " mm"));
                return React.createElement("div", null, React.createElement("select", {
                    value: void 0 !== CK.data.sliders.initiative_base_width ? Math.round(23.4 * CK.data.sliders.initiative_base_width + 2) : 3,
                    onChange: function(e) {
                        CK.tweak({
                            sliders: {
                                initiative_base_width: (e.target.value - 2) / 23.4
                            }
                        })
                    }
                }, e))
            }
        };

        function Qs(e) {
            return (Qs = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Xs(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ys(e, t) {
            return !t || "object" !== Qs(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Zs(e) {
            return (Zs = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Js(e, t) {
            return (Js = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var $s = VN.classNames,
            ec = function(e) {
                function t(e) {
                    var n;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), (n = Ys(this, Zs(t).call(this, e))).state = {
                        paintMode: null
                    }, CK.Events.on("paintModeChanged", (function() {
                        n.setState({
                            paintMode: CK.PaintTool.enabled ? 1 : void 0
                        })
                    })), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Js(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "handleSubmit",
                    value: function(e) {
                        e.preventDefault()
                    }
                }, {
                    key: "componentDidMount",
                    value: function() {
                        var e = this.placeholder,
                            t = document.getElementById(this.props.canvasElement || "character-canvas");
                        e.appendChild(t), t.oncontextmenu = function(e) {
                            return e.preventDefault(), e.stopPropagation(), !1
                        }
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        var e = document.getElementById(this.props.canvasElement || "character-canvas");
                        e.oncontextmenu = void 0, e.parentNode === this.placeholder && document.body.appendChild(e)
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = window.UIState && UIState.mainSelection && $s("main-menu-" + UIState.mainSelection, function(e, t, n) {
                                return t in e ? Object.defineProperty(e, t, {
                                    value: n,
                                    enumerable: !0,
                                    configurable: !0,
                                    writable: !0
                                }) : e[t] = n, e
                            }({}, "sub-menu-" + UIState.subSelection, !!UIState.subSelection), {
                                "no-sub-menu": !UIState.subSelection
                            }),
                            n = this.state.paintMode ? "mode--1" : null,
                            r = $s("placeholder-canvas", t, n);
                        return React.createElement("div", {
                            id: "placeholder-canvas",
                            className: r,
                            ref: function(t) {
                                return e.placeholder = t
                            },
                            style: Object.assign(this.props.hidden ? {
                                width: 1,
                                height: 1,
                                position: "absolute",
                                opacity: 0
                            } : {}, window.CK && CK.Settings.forge ? {
                                width: "100%",
                                height: "100%"
                            } : {})
                        }, this.props.children)
                    }
                }]) && Xs(n.prototype, r), o && Xs(n, o), t
            }(),
            tc = r(36);

        function nc(e) {
            return (nc = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function rc(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function oc(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ac(e, t) {
            return !t || "object" !== nc(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function ic(e) {
            return (ic = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function sc(e, t) {
            return (sc = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var cc = VN.classNames,
            lc = function(e) {
                function t() {
                    return rc(this, t), ac(this, ic(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && sc(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        return React.createElement("div", {
                            className: cc("newTag", this.props.down ? "newTag--down" : "newTag--right")
                        }, this.props.label)
                    }
                }]) && oc(n.prototype, r), o && oc(n, o), t
            }();

        function uc(e) {
            return (uc = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function fc(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function hc(e) {
            return (hc = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function pc(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function dc(e, t) {
            return (dc = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var mc = VN.classNames,
            yc = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = hc(t).call(this, e)) || "object" !== uc(o) && "function" != typeof o ? pc(r) : o).state = {
                        canScrollLeft: !1,
                        canScrollRight: !0
                    }, n.handleScroll = n.handleScroll.bind(pc(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && dc(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentDidMount",
                    value: function() {
                        this.scrollRef.scrollLeft = UIState.scrollLeft, this.scrollRef.addEventListener("scroll", this.handleScroll), this.handleScroll()
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        UIState.scrollLeft = ReactDOM.findDOMNode(this.scrollRef).scrollLeft
                    }
                }, {
                    key: "onButtonClick",
                    value: function(e, t) {
                        e.selected || e.onClick(), t.forEach((function(e) {
                            return e()
                        }))
                    }
                }, {
                    key: "handleScroll",
                    value: function() {
                        this.setState({
                            canScrollLeft: this.scrollRef.scrollLeft > 10,
                            canScrollRight: this.scrollRef.scrollLeft + this.scrollRef.offsetWidth < this.scrollRef.scrollWidth - 10
                        })
                    }
                }, {
                    key: "renderButton",
                    value: function(e, t, n) {
                        var r = this,
                            o = !!e.tagLabel,
                            a = mc("tab", "tab-".concat(t), "tab-".concat(e.label), {
                                active: e.selected,
                                isNew: o
                            });
                        return React.createElement("li", {
                            key: "".concat(t, "-menu"),
                            className: a,
                            onClick: function() {
                                return r.onButtonClick(e, n)
                            },
                            title: e.label
                        }, o && React.createElement(lc, {
                            label: e.tagLabel
                        }), e.thumb && React.createElement("img", {
                            className: "menuThumb",
                            src: e.thumb.replace(/ /g, "-"),
                            alt: e.label
                        }), React.createElement("span", null, e.label))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.buttons,
                            n = t.filter((function(e) {
                                return e.selected && e.onClose
                            })).map((function(e) {
                                return e.onClose
                            }));
                        return React.createElement("div", {
                            className: mc("tabs-container", {
                                canScrollLeft: this.state.canScrollLeft,
                                canScrollRight: this.state.canScrollRight
                            })
                        }, React.createElement("div", {
                            className: "tabs",
                            ref: function(t) {
                                return e.scrollRef = t
                            }
                        }, React.createElement("ul", null, t.map((function(t, r) {
                            return e.renderButton(t, r, n)
                        })))))
                    }
                }]) && fc(n.prototype, r), o && fc(n, o), t
            }();

        function vc(e) {
            return (vc = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function bc(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function gc(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function wc(e, t) {
            return !t || "object" !== vc(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function kc(e) {
            return (kc = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Sc(e, t) {
            return (Sc = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var _c = function(e) {
            function t() {
                return bc(this, t), wc(this, kc(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Sc(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "render",
                value: function() {
                    return React.createElement("div", {
                        id: "editor",
                        className: "main-menu-" + UIState.mainSelection + " sub-menu-" + UIState.subSelection
                    }, React.createElement("div", {
                        id: "editor-backing"
                    }, React.createElement("div", null)), React.createElement("div", {
                        className: "editor-main"
                    }, React.createElement(yc, {
                        buttons: this.props.menu
                    }), React.createElement("div", {
                        id: "sections-wrapper"
                    }, React.createElement("div", {
                        id: "sections-content"
                    }, this.props.content), this.props.footer)))
                }
            }]) && gc(n.prototype, r), o && gc(n, o), t
        }();

        function Cc(e) {
            return (Cc = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Rc(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Oc(e) {
            return (Oc = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Ec(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function Pc(e, t) {
            return (Pc = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var xc = VN.classNames,
            jc = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, o = Oc(t).call(this, e), (n = !o || "object" !== Cc(o) && "function" != typeof o ? Ec(r) : o).state = {
                        isFiltering: !1
                    }, CK.Events.on("isFiltering", (function(e) {
                        n.setState({
                            isFiltering: e
                        })
                    })), n.renderBackButton = n.renderBackButton.bind(Ec(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Pc(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentDidMount",
                    value: function() {
                        this.editorRef && this.editorRef.addEventListener("touchmove", (function(e) {
                            (e = e.originalEvent || e).scale > 1 && e.preventDefault()
                        }), {
                            passive: !1
                        })
                    }
                }, {
                    key: "renderBackButton",
                    value: function() {
                        var e = this.props.content;
                        return React.createElement("a", {
                            href: "#",
                            className: "compact-editor-tab",
                            onClick: function(t) {
                                t.preventDefault(), UIState.set({
                                    collapsed: !0
                                }), e && e.props.onClose && e.props.onClose()
                            }
                        }, "Close")
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this;
                        if (UIState.collapsed) return React.createElement("div", {
                            id: "editor",
                            className: "main-menu-Tabs sub-menu-undefined",
                            style: {
                                minHeight: this.props.landscape ? window.innerHeight : null
                            },
                            ref: function(t) {
                                return e.editorRef = t
                            }
                        }, this.props.footer, React.createElement("div", {
                            className: "editor-main editor-main-compact"
                        }, React.createElement("div", {
                            id: "sections-wrapper"
                        }, React.createElement("div", {
                            id: "sections-content"
                        }, React.createElement(yc, {
                            buttons: this.props.menu
                        })))));
                        this.mainSelection = UIState.mainSelection;
                        var t = this.props.content,
                            n = "main-menu-" + UIState.mainSelection.replace(" ", "-"),
                            r = function(e, t, n) {
                                return t in e ? Object.defineProperty(e, t, {
                                    value: n,
                                    enumerable: !0,
                                    configurable: !0,
                                    writable: !0
                                }) : e[t] = n, e
                            }({}, "sub-menu-" + UIState.subSelection, !!UIState.subSelection);
                        return React.createElement("div", {
                            id: "editor",
                            className: xc(n, r, {
                                isFiltering: this.state.isFiltering
                            })
                        }, this.props.footer, React.createElement("div", {
                            className: "editor-main editor-main-compact"
                        }, React.createElement("div", {
                            id: "sections-wrapper"
                        }, React.createElement("div", {
                            id: "sections-content"
                        }, this.renderBackButton(), t))))
                    }
                }]) && Rc(n.prototype, r), o && Rc(n, o), t
            }();

        function Tc(e) {
            return (Tc = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Mc(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Kc(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ic(e, t) {
            return !t || "object" !== Tc(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Nc(e) {
            return (Nc = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Bc(e, t) {
            return (Bc = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Ac = function(e) {
            function t() {
                return Mc(this, t), Ic(this, Nc(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Bc(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "render",
                value: function() {
                    var e = React.Children.toArray(this.props.children),
                        t = {},
                        n = [];
                    for (var r in e) {
                        var o = e[r];
                        void 0 !== o && (t[o.props.label || console.error("Must provide a label for Editor children!") || "unlabeled"] = o, n.push(o))
                    }
                    var a = UIState.collapsed;
                    UIState.compactingMainSelection && (console.log(UIState.compactingMainSelection), UIState.compacting && (console.log(UIState.compactingMainSelection), UIState.mainSelection = UIState.compactingMainSelection, a = !1), UIState.compactingMainSelection = void 0), UIState.mainSelection in t || (UIState.mainSelection = this.props.defaultSelection || n[0].props.label);
                    var i = t[UIState.mainSelection];
                    i.props.children || i.props.noView || (i = React.createElement(Ko, {
                        pinned: i.props.pinned
                    }, i));
                    for (var s = [], c = function(e) {
                            var t = n[e],
                                r = t.props.label || "unlabeled",
                                o = !(r !== UIState.mainSelection || a && UIState.compact);
                            UIState.mainSelection !== UIState.prevMainSelection && (o && UIState.subSelection && t.props.children && React.Children.toArray(t.props.children).map((function(e) {
                                e.props && e.props.label === UIState.subSelection && e.props.onOpen && e.props.onOpen()
                            })), o && t.props.onOpen ? t.props.onOpen() : r === UIState.prevMainSelection && t.props.onClose && t.props.onClose()), s.push({
                                label: r,
                                onClick: function() {
                                    UIState.set({
                                        mainSelection: r,
                                        collapsed: !1
                                    })
                                },
                                thumb: t.props.thumb || "/static/svg/".concat(r.toLowerCase(), ".svg"),
                                selected: o,
                                tagLabel: CK.Settings.newBreadcrumbs && !UIState.compact && t.type.hasNew && t.type.hasNew(t.props) ? "NEW" : void 0
                            })
                        }, l = 0; l < n.length; l++) c(l);
                    return UIState.prevMainSelection = UIState.mainSelection, UIState.compact ? React.createElement(jc, {
                        content: i,
                        menu: s,
                        footer: this.props.footer,
                        landscape: CK.sizing.landscape()
                    }) : React.createElement(_c, {
                        content: i,
                        menu: s,
                        footer: this.props.footer
                    })
                }
            }]) && Kc(n.prototype, r), o && Kc(n, o), t
        }();

        function Lc(e) {
            return (Lc = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Uc(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Dc(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Fc(e, t, n) {
            return t && Dc(e.prototype, t), n && Dc(e, n), e
        }

        function zc(e, t) {
            return !t || "object" !== Lc(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Vc(e) {
            return (Vc = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Gc(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    writable: !0,
                    configurable: !0
                }
            }), t && qc(e, t)
        }

        function qc(e, t) {
            return (qc = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Hc = VN.classNames,
            Wc = function(e) {
                function t() {
                    return Uc(this, t), zc(this, Vc(t).apply(this, arguments))
                }
                return Gc(t, React.Component), Fc(t, [{
                    key: "render",
                    value: function() {
                        var e = this,
                            t = React.Children.toArray(this.props.children),
                            n = [],
                            r = function(r) {
                                var o = t[r],
                                    a = o.props.label,
                                    i = a === e.props.selection || 1 === t.length,
                                    s = CK.Settings.newBreadcrumbs && o.type.hasNew && o.type.hasNew(o.props) ? "NEW" : void 0;
                                n.push(React.createElement(Qc, {
                                    hasFilter: i && o.props.hasFilter,
                                    newTag: s,
                                    hideArrow: 1 === t.length,
                                    label: a,
                                    key: a + "-header",
                                    onOpen: function() {
                                        return e.props.onClicks[r]()
                                    },
                                    onClose: function() {
                                        return e.props.onClose()
                                    },
                                    selected: i,
                                    hasClear: o.props.hasClear,
                                    clear: o.props.clear,
                                    slot: o.props.slot
                                })), i && n.push(React.createElement(Xc, {
                                    key: a,
                                    selected: i
                                }, o))
                            };
                        for (var o in t) r(o);
                        return React.createElement("div", {
                            className: "accordion"
                        }, n)
                    }
                }]), t
            }(),
            Qc = function(e) {
                function t(e) {
                    var n;
                    return Uc(this, t), (n = zc(this, Vc(t).call(this, e))).state = {
                        searchVisible: !1
                    }, n
                }
                return Gc(t, React.Component), Fc(t, [{
                    key: "toggle",
                    value: function() {
                        this.props.selected ? (this.props.onClose(), this.setState({
                            searchVisible: !1
                        })) : this.props.onOpen()
                    }
                }, {
                    key: "renderClear",
                    value: function() {
                        var e = this.getClearSlot();
                        return e ? React.createElement("div", {
                            key: "headerButton",
                            className: "clear-button"
                        }, React.createElement("a", {
                            onClick: function(t) {
                                t.stopPropagation(), e()
                            }
                        }, "clear")) : null
                    }
                }, {
                    key: "getClearSlot",
                    value: function() {
                        var e = this;
                        if (this.props.clear) return this.props.clear;
                        var t = this.props.slot || this.props.label.toLowerCase(),
                            n = [],
                            r = (n = !(t in CK.Options.slots) && t + "R" in CK.Options.slots ? [t + "R", t + "L"] : [t])[0] in CK.Settings.slots && CK.Settings.slots[[n[0]]].required,
                            o = !1;
                        for (var a in n) o = o || CK.data.parts[n[a]];
                        return !r && o ? function() {
                            CK.clearSlots(n), CK.Events.emit("clearSlot", e)
                        } : null
                    }
                }, {
                    key: "renderFilter",
                    value: function() {
                        var e = this;
                        return React.createElement("div", {
                            className: "accordion-header-searchTrigger",
                            onClick: function(t) {
                                t.stopPropagation(), e.toggleSearch()
                            }
                        }, React.createElement("img", {
                            src: "/static/svg/search.svg"
                        }))
                    }
                }, {
                    key: "toggleSearch",
                    value: function() {
                        window.UIState && UIState.set({
                            searchFilter: ""
                        }), this.setState({
                            searchVisible: !this.state.searchVisible
                        })
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.newTag ? React.createElement(lc, {
                                down: this.props.selected,
                                label: this.props.newTag
                            }) : React.createElement("div", {
                                className: "arrow"
                            }),
                            n = Hc("accordion-header", "clickable", {
                                open: this.props.selected
                            });
                        return React.createElement("div", {
                            className: n
                        }, React.createElement("div", {
                            className: "accordion-header-labels",
                            onClick: function() {
                                e.toggle()
                            }
                        }, React.createElement("div", {
                            className: "accordion-header-label"
                        }, this.props.label), React.createElement("div", {
                            className: "accordion-header-right"
                        }, this.props.hasFilter && this.renderFilter(), this.props.hasClear && this.renderClear())), React.createElement("div", {
                            className: Hc("accordion-header-search", {
                                isVisible: this.state.searchVisible
                            })
                        }, React.createElement(bo, {
                            focus: !!this.state.searchVisible
                        })), this.props.hideArrow ? null : t)
                    }
                }]), t
            }(),
            Xc = function(e) {
                function t(e) {
                    var n;
                    return Uc(this, t), (n = zc(this, Vc(t).call(this, e))).state = {
                        height: 0,
                        hideOverflow: !1
                    }, n
                }
                return Gc(t, React.Component), Fc(t, [{
                    key: "render",
                    value: function() {
                        var e = Hc("accordion-content", "clickable", {
                            open: this.props.selected
                        });
                        return React.createElement("div", {
                            className: e
                        }, this.props.children)
                    }
                }]), t
            }();

        function Yc(e) {
            return (Yc = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Zc() {
            return (Zc = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }).apply(this, arguments)
        }

        function Jc(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function $c(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function el(e, t, n) {
            return t && $c(e.prototype, t), n && $c(e, n), e
        }

        function tl(e, t) {
            return !t || "object" !== Yc(t) && "function" != typeof t ? rl(e) : t
        }

        function nl(e) {
            return (nl = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function rl(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function ol(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    writable: !0,
                    configurable: !0
                }
            }), t && al(e, t)
        }

        function al(e, t) {
            return (al = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var il = VN.classNames;

        function sl(e) {
            return e ? e.toString().replace(/\s+/g, "-").replace(/[^\w\-]+/g, "").replace(/\-\-+/g, "-").replace(/^-+/, "").replace(/-+$/, "").toLowerCase() : ""
        }
        var cl = function(e) {
                function t(e) {
                    var n;
                    return Jc(this, t), (n = tl(this, nl(t).call(this, e))).state = {
                        maxOffset: 0,
                        currentOffset: 0,
                        carouselWidth: 0,
                        paginateOverflow: !1,
                        canScrollLeft: !1,
                        canScrollRight: !0
                    }, n.handleScroll = n.handleScroll.bind(rl(n)), n._updateOverflow = function() {
                        return n.updateOverflow()
                    }, n
                }
                return ol(t, React.Component), el(t, [{
                    key: "componentDidUpdate",
                    value: function() {
                        this.updateOverflow()
                    }
                }, {
                    key: "componentDidMount",
                    value: function() {
                        var e = this;
                        this.updateOverflow(), window.addEventListener("resize", this._updateOverflow);
                        var t = ReactDOM.findDOMNode(this.container);
                        if (this.carousel && (this.carousel.addEventListener("scroll", this.handleScroll), this.handleScroll()), t) {
                            var n = 0,
                                r = Math.round(Math.max(80, screen.height / 100 * 20));
                            t.addEventListener("touchstart", (function(e) {
                                n = e.changedTouches[0].screenY
                            }), !1), t.addEventListener("touchend", (function(t) {
                                t.changedTouches[0].screenY - n > r && (UIState.set({
                                    collapsed: !0
                                }), e.props.onClose && e.props.onClose()), n = 0, 0
                            }), !1)
                        }
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        window.removeEventListener("resize", this._updateOverflow)
                    }
                }, {
                    key: "handleScroll",
                    value: function() {
                        this.setState({
                            canScrollLeft: this.carousel.scrollLeft > 10,
                            canScrollRight: this.carousel.scrollLeft + this.carousel.offsetWidth < this.carousel.scrollWidth - 10
                        })
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = React.Children.toArray(this.props.children),
                            n = [],
                            r = React.createElement("div", null),
                            o = function(o) {
                                var a = t[o],
                                    i = a.props.name || a.props.label,
                                    s = e.props.selection === i,
                                    c = CK.Settings.newBreadcrumbs && a.type.hasNew && a.type.hasNew(a.props) ? "NEW" : void 0,
                                    l = null;
                                if (e.props.iconNav) {
                                    var u = sl(i).replace("-dev", ""),
                                        f = sl(UIState.mainSelection);
                                    l = "/static/svg/nav-items/".concat(f, "-").concat(u, ".svg")
                                }
                                t.length > 1 && n.push(React.createElement(ll, Zc({}, a.props, {
                                    label: i,
                                    key: i + "-header",
                                    thumb: l,
                                    onOpen: function() {
                                        return e.props.onClicks[o]()
                                    },
                                    onClose: a.onClose,
                                    selected: s,
                                    hasNew: c,
                                    overflowTabWidths: e.state.paginateOverflow && e.props.overflowTabWidths
                                }))), s && (r = React.createElement(ul, {
                                    key: r.key,
                                    selected: s
                                }, a))
                            };
                        for (var a in t) o(a);
                        var i = il("tab-carousel-group", {
                            overflowing: this.state.paginateOverflow,
                            "no-overflow": !this.state.paginateOverflow
                        });
                        return React.createElement("div", {
                            className: i
                        }, this.renderHeader(n), r)
                    }
                }, {
                    key: "renderHeader",
                    value: function(e) {
                        var t = this;
                        if (!e || 0 === e.length) return null;
                        var n = il("tab-carousel-btn", "btn-left", {
                                disabled: 0 == this.state.currentOffset
                            }),
                            r = this.state.paginateOverflow && !UIState.compact ? React.createElement("a", {
                                className: n,
                                onClick: function() {
                                    t.paginateLeft()
                                }
                            }, React.createElement("div", {
                                className: "arrow arrow-left"
                            }, "<")) : "",
                            o = il("tab-carousel-btn", "btn-right", {
                                disabled: this.state.currentOffset == this.state.maxOffset
                            }),
                            a = this.state.paginateOverflow && !UIState.compact ? React.createElement("a", {
                                className: o,
                                onClick: function() {
                                    return t.paginateRight()
                                }
                            }, React.createElement("div", {
                                className: "arrow arrow-right"
                            }, ">")) : "",
                            i = {
                                left: this.state.currentOffset
                            };
                        return React.createElement("div", {
                            className: il("tab-carousel-wrapper", {
                                canScrollLeft: this.state.canScrollLeft,
                                canScrollRight: this.state.canScrollRight
                            }),
                            ref: function(e) {
                                t.container = e
                            }
                        }, r, React.createElement("div", {
                            className: "tab-carousel"
                        }, React.createElement("div", {
                            className: il("tabs-list", "tabs-list--" + e.length),
                            style: i,
                            ref: function(e) {
                                t.carousel = e
                            }
                        }, e)), a)
                    }
                }, {
                    key: "updateOverflow",
                    value: function() {
                        var e = this.state && this.state.paginateOverflow,
                            t = document.querySelector(".tab-carousel-wrapper");
                        if (t) {
                            var n = t.offsetWidth,
                                r = document.querySelector(".tabs-list").scrollWidth - 4;
                            n < r && !e ? this.setState({
                                paginateOverflow: !0
                            }) : n >= r && e && this.setState({
                                paginateOverflow: !1
                            });
                            var o = document.querySelector(".tab-carousel").offsetWidth,
                                a = o - document.querySelector(".tabs-list").scrollWidth;
                            this.state.maxOffset != a && this.setState({
                                maxOffset: a
                            }), this.state.currentOffset < this.state.maxOffset && this.setState({
                                currentOffset: a
                            }), this.state.carouselWidth !== o && this.setState({
                                carouselWidth: o
                            })
                        }
                    }
                }, {
                    key: "paginateLeft",
                    value: function() {
                        var e = this.state.currentOffset + .75 * this.state.carouselWidth;
                        e > 0 && (e = 0), this.setState({
                            currentOffset: e
                        })
                    }
                }, {
                    key: "paginateRight",
                    value: function() {
                        var e = this.state.currentOffset - .75 * this.state.carouselWidth;
                        e < this.state.maxOffset && (e = this.state.maxOffset), this.setState({
                            currentOffset: e
                        })
                    }
                }]), t
            }(),
            ll = function(e) {
                function t() {
                    return Jc(this, t), tl(this, nl(t).apply(this, arguments))
                }
                return ol(t, React.Component), el(t, [{
                    key: "toggleOpen",
                    value: function() {
                        !this.props.selected && this.props.onOpen && this.props.onOpen()
                    }
                }, {
                    key: "enforceHalfVisibleTabs",
                    value: function(e) {
                        var t = window.innerWidth,
                            n = document.getElementsByClassName("tab-carousel")[0].offsetWidth;
                        n < t && (t = n);
                        var r = Math.floor(t / e),
                            o = t % e - (10 + e / 2);
                        o <= 0 && r == document.getElementsByClassName("tab-carousel-header").length && (o += e);
                        var a = o / (r + .5);
                        return Math.round(e + a)
                    }
                }, {
                    key: "renderClear",
                    value: function() {
                        var e = this.getClearSlot();
                        return e ? React.createElement("div", {
                            className: "tab-carousel-header-clear",
                            onClick: function(t) {
                                t.stopPropagation(), e()
                            }
                        }, React.createElement("img", {
                            className: "tab-carousel-header-clearImg",
                            src: "/static/svg/empty.svg"
                        })) : null
                    }
                }, {
                    key: "getClearSlot",
                    value: function() {
                        var e = this;
                        if (this.props.clear) return this.props.clear;
                        for (var t = this.props.slot || this.props.label.toLowerCase(), n = [], r = ((n = !(t in CK.Options.slots) && t + "R" in CK.Options.slots ? [t + "R", t + "L"] : [t])[0] in CK.Settings.slots && CK.Settings.slots[[n[0]]].required), o = !1, a = 0, i = n; a < i.length; a++) {
                            var s = i[a];
                            o = o || CK.data.parts[s]
                        }
                        return !r && o ? function() {
                            CK.clearSlots(n), CK.Events.emit("clearSlot", e)
                        } : null
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e, t = this;
                        this.props.injectedClass && (e = this.props.injectedClass.replace(" ", "-").replace(/ *\([^)]*\) */g, "").toLowerCase()), this.props.label || console.error("Must have label");
                        var n, r = il("tab-carousel-header", {
                                open: this.props.selected
                            }, {
                                "tab-carousel-header-thumb": this.props.thumb
                            }, {
                                isNew: this.props.hasNew
                            }, "sprite-" + this.props.label.replace(" ", "-"), e),
                            o = il({
                                open: this.props.selected
                            }, "sprite-" + this.props.label.replace(" ", "-"), e),
                            a = this.props.overflowTabWidths ? this.enforceHalfVisibleTabs(this.props.overflowTabWidths) : "";
                        if (this.props.useSVG) {
                            var i = e ? e.replace("-", "_") : "icon_" + this.props.label.replace(/ *\([^)]*\) */g, "").replace(" ", "_").toLowerCase();
                            n = React.createElement("svg", {
                                className: o,
                                "aria-labelledby": "title desc",
                                role: "Tab"
                            }, React.createElement("use", {
                                xlinkHref: "#" + i
                            }))
                        } else n = this.props.thumb ? React.createElement(React.Fragment, null, this.props.hasClear && this.renderClear(), React.createElement("img", {
                            className: "tab-carousel-header-thumb-img",
                            width: this.props.thumbSize ? this.props.thumbSize[0] : "",
                            src: this.props.thumb
                        }), React.createElement("div", {
                            className: "tab-carousel-header-thumb-text"
                        }, this.props.label)) : React.createElement("span", {
                            className: o
                        }, this.props.label);
                        return React.createElement("div", {
                            className: r,
                            style: {
                                width: a
                            },
                            onClick: function() {
                                return t.toggleOpen()
                            },
                            title: this.props.label
                        }, n, this.props.hasNew && !UIState.compact && React.createElement(lc, {
                            down: !0,
                            label: "New"
                        }))
                    }
                }]), t
            }(),
            ul = function(e) {
                function t(e) {
                    var n;
                    return Jc(this, t), (n = tl(this, nl(t).call(this, e))).state = {
                        height: 0,
                        hideOverflow: !1
                    }, n.updateMaxHeight = n.updateMaxHeight.bind(rl(n)), n
                }
                return ol(t, React.Component), el(t, [{
                    key: "render",
                    value: function() {
                        var e = this,
                            t = il("tabbed-content", {
                                open: this.props.selected
                            });
                        return React.createElement("div", {
                            className: t,
                            ref: function(t) {
                                return e._el = t
                            }
                        }, this.props.children)
                    }
                }, {
                    key: "componentDidUpdate",
                    value: function() {
                        this.updateMaxHeight()
                    }
                }, {
                    key: "updateMaxHeight",
                    value: function() {
                        var e = this.state.height,
                            t = this._el.firstElementChild.offsetHeight;
                        t !== e && this.setState({
                            height: t
                        })
                    }
                }]), t
            }();

        function fl(e) {
            return (fl = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function hl(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function pl(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function dl(e, t) {
            return !t || "object" !== fl(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function ml(e) {
            return (ml = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function yl(e, t) {
            return (yl = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var vl = function(e) {
            function t() {
                return hl(this, t), dl(this, ml(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && yl(e, t)
            }(t, e), n = t, o = [{
                key: "hasNew",
                value: function(e) {
                    var n = e.label + "_" + UIState.genreFilter;
                    if (!(n in t.newCache)) {
                        t.newCache[n] = !1;
                        var r = e.children;
                        for (var o in r) {
                            var a = r[o];
                            if (a && a.type && a.type.hasNew && a.type.hasNew(a.props)) {
                                t.newCache[n] = !0;
                                break
                            }
                        }
                    }
                    return t.newCache[n]
                }
            }], (r = [{
                key: "componentDidMount",
                value: function() {
                    this.props.onOpen && this.props.onOpen()
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    this.props.onClose && this.props.onClose()
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.props.tabbed || UIState.compact,
                        t = this.constructor.getContent(this.props);
                    CK.LazyImageLoader.loadThumbnails(this.getChildThumbnails(t));
                    var n = e ? UIState.subSelection || t[0].props.label : UIState.subSelection || this.props.defaultSelection,
                        r = t.map((function(e) {
                            return function() {
                                return UIState.changeSubSelection(e.props.label)
                            }
                        }));
                    return e ? React.createElement(cl, {
                        selection: n,
                        onClicks: r,
                        onClose: this.props.onClose,
                        iconNav: this.props.iconNav
                    }, t) : React.createElement(Wc, {
                        selection: n,
                        onClicks: r,
                        onClose: function() {
                            return UIState.changeSubSelection()
                        }
                    }, t)
                }
            }, {
                key: "getChildThumbnails",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    for (var n in e) {
                        var r = e[n];
                        r.type.getThumbnails && (t[r.props.label] = r.type.getThumbnails(r.props)), r.children && this.getChildThumbnails(r.children, t)
                    }
                    return t
                }
            }]) && pl(n.prototype, r), o && pl(n, o), t
        }(fo);

        function bl(e) {
            return (bl = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function gl(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function wl(e, t) {
            return !t || "object" !== bl(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function kl(e) {
            return (kl = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Sl(e, t) {
            return (Sl = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        vl.hasLoadedCache = {}, vl.newCache = {};
        var _l = VN.classNames,
            Cl = function(e) {
                function t(e) {
                    var n;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), (n = wl(this, kl(t).call(this, e))).sliderName = e.name || e.label.toLowerCase(), n.label = e.label || n.sliderName, n.subLabel = e.subLabel || (e.valueLabels ? e.valueLabels.find((function(t, n) {
                        return n % 2 == 0 && e.valueLabels[n + 1] > value
                    })) : void 0), n.name = n.sliderName || n.label.toLowerCase(), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Sl(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "onChange",
                    value: function(e) {
                        this.props.limit && (e = Math.min(e, this.props.limit)), CK.previewSlider(this.name, e), this.props.onSliderUpdate && this.props.onSliderUpdate(this.name, e)
                    }
                }, {
                    key: "onAfterChange",
                    value: function() {
                        CK.display.requestOcclusionRefresh(), CK.addUndoPoint(), this.forceUpdate()
                    }
                }, {
                    key: "renderMarks",
                    value: function() {
                        var e = this;
                        return React.createElement("div", {
                            className: "slider-marks"
                        }, this.props.marks.map((function(t) {
                            return React.createElement("div", {
                                className: _l("slider-marks-mark", {
                                    "slider-marks-mark--red": t.isRed
                                }),
                                key: t.label,
                                onClick: function() {
                                    return e.onChange(t.value)
                                }
                            }, t.label)
                        })))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this;
                        if (CK.modded.hideSliders[this.name]) return null;
                        var t = CK.getSlider(this.name) || 0;
                        return React.createElement("div", {
                            className: _l("slider-wrapper", "slider-container", {
                                "slider-container--small": this.props.small
                            })
                        }, React.createElement("a", {
                            className: "label"
                        }, this.label), this.subLabel && React.createElement("a", {
                            className: "sub-label"
                        }, this.subLabel), React.createElement("div", {
                            className: "slider-row"
                        }, React.createElement(At, {
                            value: t,
                            max: this.props.max,
                            onChange: function(t) {
                                return e.onChange(t)
                            },
                            onAfterChange: function(t) {
                                return e.onAfterChange(t)
                            },
                            small: this.props.small,
                            warningXL: !this.props.limit && this.props.limitText
                        }), this.props.limit && React.createElement("div", {
                            className: "slider-limitArea",
                            style: {
                                width: 100 * (1 - this.props.limit) + "%"
                            }
                        }, this.props.limitText)), this.props.marks && this.renderMarks())
                    }
                }]) && gl(n.prototype, r), o && gl(n, o), t
            }();

        function Rl(e) {
            return (Rl = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Ol(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function El(e) {
            return (El = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Pl(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function xl(e, t) {
            return (xl = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var jl = function(e) {
            function t(e) {
                var n, r, o;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), r = this, (n = !(o = El(t).call(this, e)) || "object" !== Rl(o) && "function" != typeof o ? Pl(r) : o).state = {
                    latestUpdatedSlider: null
                }, n.update = n.update.bind(Pl(n)), n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && xl(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "update",
                value: function(e, t) {
                    this.setState({
                        latestUpdatedSlider: {
                            name: e,
                            value: t
                        }
                    })
                }
            }, {
                key: "render",
                value: function() {
                    var e = this;
                    if (this.state.latestUpdatedSlider) {
                        var t = this.props.sliders.reduce((function(e, t) {
                            return e + (CK.getSlider(t[1]) || 0)
                        }), 0) - this.props.maxCombinedValue;
                        if (t > 0) {
                            var n = this.props.sliders.filter((function(t) {
                                    return t[1] !== e.state.latestUpdatedSlider.name
                                })).filter((function(e) {
                                    return CK.getSlider(e[1]) > 0
                                })),
                                r = t / n.length,
                                o = Math.round(100 * r) / 100;
                            n.forEach((function(e) {
                                var n, r = e[1],
                                    a = CK.getSlider(r);
                                a >= o ? (n = a - o, t -= o) : (n = 0, t -= a), CK.previewSlider(r, n)
                            })), t > 0 && n.forEach((function(e) {
                                var n = e[1],
                                    r = CK.getSlider(n);
                                r >= t && (CK.previewSlider(n, r - t), t = 0)
                            }))
                        }
                    }
                    return this.props.sliders.map((function(t) {
                        return React.createElement(Cl, {
                            key: t[1],
                            label: t[0],
                            name: t[1],
                            onSliderUpdate: function(t, n) {
                                return e.update(t, n)
                            }
                        })
                    }))
                }
            }]) && Ol(n.prototype, r), o && Ol(n, o), t
        }();

        function Tl(e) {
            return (Tl = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Ml(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Kl(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Il(e, t) {
            return !t || "object" !== Tl(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Nl(e) {
            return (Nl = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Bl(e, t) {
            return (Bl = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Al = function(e) {
            function t() {
                return Ml(this, t), Il(this, Nl(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Bl(e, t)
            }(t, e), n = t, (r = [{
                key: "render",
                value: function() {
                    var e = this,
                        t = CK.data.getAvailablePoses(),
                        n = [];
                    for (var r in t) n.push(t[r]);
                    n.sort((function(e, t) {
                        return e.display_order < t.display_order ? -1 : 1
                    }));
                    var o = Ls.getOptions({
                        configs: n,
                        label: "Pose",
                        ignoreGenre: !0,
                        showSelected: !0
                    });
                    return CK.hasTransforms() ? o.map((function(t) {
                        t.onClick = function() {
                            CKUI.promptClearTransforms({
                                poses: t.originalData.poses
                            }, e.props.transformNoClear)
                        }
                    })) : o.map((function(e) {
                        e.onClick = function() {
                            CK.tweak({
                                poses: e.originalData.poses
                            })
                        }
                    })), React.createElement(Ts, {
                        options: o,
                        key: "Poses"
                    })
                }
            }]) && Kl(n.prototype, r), o && Kl(n, o), t
        }(Ls);

        function Ll(e) {
            return (Ll = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Ul(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Dl(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Fl(e, t) {
            return !t || "object" !== Ll(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function zl(e) {
            return (zl = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Vl(e, t) {
            return (Vl = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Gl = function(e) {
                function t() {
                    return Ul(this, t), Fl(this, zl(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Vl(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        return 2 != CK.Settings.characterCount ? null : React.createElement("div", {
                            style: {
                                position: "absolute",
                                left: "35%",
                                top: 5
                            }
                        }, React.createElement("img", {
                            src: "/static/img/couple.png",
                            style: {
                                background: 0 === CK.characterID ? "#33c8c8" : "none"
                            },
                            onClick: function() {
                                return CK.setCharacter(0)
                            }
                        }), React.createElement("img", {
                            src: "/static/img/couple.png",
                            style: {
                                background: 1 === CK.characterID ? "#33c8c8" : "none"
                            },
                            onClick: function() {
                                return CK.setCharacter(1)
                            }
                        }))
                    }
                }]) && Dl(n.prototype, r), o && Dl(n, o), t
            }(),
            ql = r(44);

        function Hl(e) {
            return (Hl = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Wl(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Ql(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Xl(e, t) {
            return !t || "object" !== Hl(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Yl(e) {
            return (Yl = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Zl(e, t) {
            return (Zl = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Jl = VN.classNames,
            $l = function(e) {
                function t() {
                    return Wl(this, t), Xl(this, Yl(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Zl(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.config,
                            n = this.props.selected,
                            r = t.meta.character_name || CK.Settings.defaultCharacterName;
                        return React.createElement("div", {
                            className: Jl("characterThumb", {
                                selected: n
                            }),
                            onClick: this.props.onClick,
                            onDoubleClick: this.props.onDoubleClick
                        }, this.props.onRemove ? React.createElement("div", {
                            className: "characterThumb-remove",
                            onClick: this.props.onRemove
                        }, React.createElement("img", {
                            src: "/static/svg/trash.svg",
                            alt: ""
                        })) : null, React.createElement("img", {
                            className: "characterThumb-img",
                            src: t.meta.snapshot,
                            onError: function(e) {
                                e.target.src = "/static/img/load_character_notfound.png"
                            }
                        }), React.createElement("div", {
                            className: "characterThumb-name",
                            onClick: this.props.onRename ? function() {
                                n && e.props.onRename()
                            } : void 0
                        }, r, this.props.onRename ? React.createElement("div", {
                            className: "characterThumb-rename"
                        }, React.createElement("img", {
                            src: "/static/svg/pencil-white.svg",
                            alt: ""
                        })) : null))
                    }
                }]) && Ql(n.prototype, r), o && Ql(n, o), t
            }();

        function eu(e) {
            return (eu = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function tu(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function nu(e, t) {
            return !t || "object" !== eu(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function ru(e) {
            return (ru = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function ou(e, t) {
            return (ou = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var au = VN.classNames,
            iu = function(e) {
                function t(e) {
                    var n;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), (n = nu(this, ru(t).call(this, e))).state = {
                        sortBy: CK.UserSaves.SORTING.alphabetical,
                        selected: void 0,
                        searchString: "",
                        sortVisible: !1,
                        searchVisible: !1,
                        group: "saves"
                    }, n.refresh = function() {
                        n.forceUpdate()
                    }, n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && ou(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentDidMount",
                    value: function() {
                        CK.Events.on("myCharactersChanged", this.refresh)
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        CK.Events.off("myCharactersChanged", this.refresh)
                    }
                }, {
                    key: "open",
                    value: function() {
                        var e = this.state.selected;
                        e && ("purchases" === this.state.group || e.old ? CKUI.promptSave().then((function(t) {
                            t && CK.saves.openCopy(e)
                        })) : CKUI.promptSave().then((function(t) {
                            t && CK.saves.open(e)
                        })))
                    }
                }, {
                    key: "copy",
                    value: function() {
                        var e = this,
                            t = this.state.selected,
                            n = window.prompt("Name character copy", t.meta.character_name + " Copy");
                        n && "" !== n && CK.saves.copy(this.state.selected, n).then((function(t) {
                            e.setState({
                                selected: t
                            })
                        }))
                    }
                }, {
                    key: "openCopy",
                    value: function() {
                        var e = this.state.selected;
                        e && CKUI.promptSave().then((function(t) {
                            t && CK.saves.openCopy(e)
                        }))
                    }
                }, {
                    key: "rename",
                    value: function() {
                        var e = this;
                        if (this.state.selected) {
                            var t = this.state.selected,
                                n = CK.sanitizeName(t.meta.character_name),
                                r = void 0;
                            n === CK.Settings.defaultCharacterName && (n = void 0, r = CK.Settings.defaultCharacterName), Overlay.promptTextInput("Character Name", n, r, CK.sanitizeName).then((function(n) {
                                n && n !== t.meta.character_name && (CK.saves.rename(t, n).catch((function(e) {
                                    "not_logged_in" === e ? Overlay.alert("You're not logged in anymore!", "Could not rename", (function() {
                                        return CK.User.logOutSilent()
                                    })) : Overlay.alert("Something went wrong renaming character")
                                })), e.setState({
                                    selected: null
                                }))
                            }))
                        }
                    }
                }, {
                    key: "remove",
                    value: function() {
                        var e = this;
                        this.state.selected && Overlay.prompt("Are you sure you want to delete " + this.state.selected.meta.character_name + "?", [{
                            label: "Delete",
                            onClick: function() {
                                Overlay.hidePrompt(), CK.saves.remove(e.state.selected).catch((function(e) {
                                    "not_logged_in" === e ? Overlay.alert("You're not logged in anymore!", "Could not delete", (function() {
                                        return CK.User.logOutSilent()
                                    })) : Overlay.alert("Something went wrong deleting character")
                                })), e.setState({
                                    selected: null
                                })
                            }
                        }, {
                            label: "Cancel",
                            cancel: !0,
                            onClick: function() {
                                return Overlay.hidePrompt()
                            }
                        }], "Delete?")
                    }
                }, {
                    key: "toggleSort",
                    value: function() {
                        this.setState({
                            sortVisible: !this.state.sortVisible
                        })
                    }
                }, {
                    key: "toggleSearch",
                    value: function() {
                        this.setState({
                            searchVisible: !this.state.searchVisible
                        }), !this.state.searchVisible && this.inputRef && this.inputRef.focus()
                    }
                }, {
                    key: "sortBy",
                    value: function(e) {
                        this.setState({
                            sortVisible: !1,
                            sortBy: e
                        })
                    }
                }, {
                    key: "renderSort",
                    value: function() {
                        var e = this;
                        return React.createElement("div", {
                            className: au("characterBrowser-header-sort-popup", {
                                isVisible: this.state.sortVisible
                            })
                        }, React.createElement("div", {
                            className: au("characterBrowser-header-sort-item", {
                                isActive: this.state.sortBy === CK.UserSaves.SORTING.saveDate
                            }),
                            onClick: function() {
                                return e.sortBy(CK.UserSaves.SORTING.saveDate)
                            }
                        }, "Modified", React.createElement("img", {
                            src: "/static/svg/check.svg"
                        })), React.createElement("div", {
                            className: au("characterBrowser-header-sort-item", {
                                isActive: this.state.sortBy === CK.UserSaves.SORTING.createdDate
                            }),
                            onClick: function() {
                                return e.sortBy(CK.UserSaves.SORTING.createdDate)
                            }
                        }, "Created", React.createElement("img", {
                            src: "/static/svg/check.svg"
                        })), React.createElement("div", {
                            className: au("characterBrowser-header-sort-item", {
                                isActive: this.state.sortBy === CK.UserSaves.SORTING.alphabetical
                            }),
                            onClick: function() {
                                return e.sortBy(CK.UserSaves.SORTING.alphabetical)
                            }
                        }, "Name", React.createElement("img", {
                            src: "/static/svg/check.svg"
                        })))
                    }
                }, {
                    key: "renderHeader",
                    value: function() {
                        var e = this;
                        return React.createElement(React.Fragment, null, React.createElement("input", {
                            type: "text",
                            value: this.state.searchString,
                            placeholder: "Filter",
                            ref: function(t) {
                                return e.inputRef = t
                            },
                            onChange: function(t) {
                                return e.setState({
                                    searchString: t.target.value
                                })
                            },
                            className: au("characterBrowser-header-searchInput", {
                                isVisible: this.state.searchVisible
                            })
                        }), React.createElement("div", {
                            className: "characterBrowser-header-icon characterBrowser-header-search",
                            onClick: function() {
                                return e.toggleSearch()
                            }
                        }, React.createElement("img", {
                            src: "/static/svg/search.svg"
                        })), React.createElement("div", {
                            className: "characterBrowser-header-icon characterBrowser-header-sort",
                            onClick: function() {
                                return e.toggleSort()
                            }
                        }, React.createElement("img", {
                            src: "/static/svg/sort-az.svg"
                        })), this.renderSort())
                    }
                }, {
                    key: "renderFooter",
                    value: function() {
                        var e = this,
                            t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0],
                            n = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
                        return React.createElement(React.Fragment, null, React.createElement(ql.a, {
                            label: "Open",
                            onClick: function() {
                                return e.open()
                            },
                            disabled: !t
                        }), React.createElement(ql.a, {
                            label: "Open Copy",
                            onClick: function() {
                                return e.openCopy()
                            },
                            disabled: !n
                        }), React.createElement(ql.a, {
                            className: "button-grey",
                            label: "Cancel",
                            onClick: function() {
                                return Overlay.hideOverlay()
                            }
                        }))
                    }
                }, {
                    key: "selectGroup",
                    value: function(e) {
                        this.setState({
                            group: e,
                            selected: void 0
                        })
                    }
                }, {
                    key: "renderTitle",
                    value: function() {
                        var e = this;
                        return React.createElement("div", {
                            className: "characterBrowser-tabs"
                        }, React.createElement("div", {
                            className: au("characterBrowser-tabs-tab", {
                                isActive: "saves" === this.state.group
                            }),
                            onClick: function() {
                                return e.selectGroup("saves")
                            }
                        }, "Saves"), React.createElement("div", {
                            className: au("characterBrowser-tabs-tab", {
                                isActive: "purchases" === this.state.group
                            }),
                            onClick: function() {
                                return e.selectGroup("purchases")
                            }
                        }, "Purchases"))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e, t = this,
                            n = CK.saves.getOrderedConfigs(this.state.sortBy, this.state.searchString, this.state.group),
                            r = "saves" === this.state.group,
                            o = !0,
                            a = !1;
                        return CK.saves.isLoading(this.state.group) ? e = React.createElement("img", {
                            src: "/static/svg/spinner.svg",
                            className: "svg-spinner"
                        }) : n ? 0 === n.length && this.state.searchString.length > 0 ? e = React.createElement("div", null, "No search results") : (o = !this.state.selected, a = this.state.selected && (this.state.selected.old || !this.state.selected.config_id), e = n.map((function(e, n) {
                            return React.createElement($l, {
                                key: t.state.group + "_" + n + "_" + e.config_id,
                                selected: e === t.state.selected,
                                config: e,
                                onClick: function() {
                                    return t.setState({
                                        selected: e
                                    })
                                },
                                onDoubleClick: function() {
                                    t.setState({
                                        selected: e
                                    }), t.open()
                                },
                                onRemove: r ? function() {
                                    return t.remove()
                                } : void 0,
                                onRename: !a && r ? function() {
                                    return t.rename()
                                } : void 0
                            })
                        }))) : e = React.createElement("div", null, r ? "No saved characters found." : "No Purchased Characters found."), Overlay.getModal(React.createElement("div", {
                            className: "characterBrowser-thumbnails"
                        }, e), this.renderTitle(), this.renderHeader(), this.renderFooter(!a && r && !o, !o), "characterBrowser")
                    }
                }]) && tu(n.prototype, r), o && tu(n, o), t
            }();

        function su(e) {
            return (su = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function cu(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function lu(e) {
            return (lu = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function uu(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function fu(e, t) {
            return (fu = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var hu = VN.classNames,
            pu = "/static/svg/spinner.svg";

        function du(e) {
            return (du = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function mu(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function yu(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function vu(e, t) {
            return !t || "object" !== du(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function bu(e) {
            return (bu = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function gu(e, t) {
            return (gu = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var wu = function(e) {
                function t() {
                    return mu(this, t), vu(this, bu(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && gu(e, t)
                }(t, e), n = t, (r = [{
                    key: "screenshot",
                    value: function(e) {
                        e.preventDefault(), CKUI.screenshotClick()
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.configsLoading(),
                            n = CK.saves.activeSaving(),
                            r = n && !CK.saves.sharing && !CK.saves.savingAs,
                            o = n && !CK.saves.sharing && CK.saves.savingAs,
                            a = CK.character.savedChanges && !r,
                            i = CK.character.getName() || CK.Settings.defaultCharacterName,
                            s = !!CK.saves.activeConfig,
                            c = [{
                                href: "#",
                                label: "Rename",
                                onClick: function(t) {
                                    return t.preventDefault(), e.promptName(), !1
                                },
                                iconSrc: "/static/svg/character-menu/pencil.svg",
                                iconWidth: 20
                            }, {
                                href: "#",
                                label: "Save".concat(a ? "" : " *"),
                                onClick: function(t) {
                                    return t.preventDefault(), e.saveClicked(), !1
                                },
                                iconSrc: r ? "/static/svg/spinner.svg" : "/static/svg/character-menu/save.svg",
                                iconWidth: 20
                            }, s ? {
                                href: "#",
                                label: "Save As",
                                onClick: function(t) {
                                    return t.preventDefault(), e.saveAsClicked(), !1
                                },
                                iconSrc: o ? "/static/svg/spinner.svg" : "/static/svg/character-menu/saveas.svg",
                                iconWidth: 20
                            } : null, {
                                href: "#",
                                label: "New",
                                onClick: function(t) {
                                    return t.preventDefault(), e.newClicked(), !1
                                },
                                iconSrc: "/static/svg/character-menu/plus.svg",
                                iconWidth: 20
                            }, {
                                href: "#",
                                label: "Share",
                                onClick: function(t) {
                                    return t.preventDefault(), e.shareClicked(), !1
                                },
                                iconSrc: "/static/svg/character-menu/share.svg",
                                iconWidth: 20
                            }, {
                                href: "#",
                                label: "Screenshot",
                                onClick: function(t) {
                                    return t.preventDefault(), e.screenshot(t), !1
                                },
                                iconSrc: "/static/svg/photo.svg",
                                iconWidth: 20
                            }, {
                                href: "#",
                                label: CK.Settings.characterPlural,
                                onClick: function(t) {
                                    return t.preventDefault(), e.browseClicked(), !1
                                },
                                iconSrc: "/static/svg/character-menu/folder.svg",
                                iconWidth: 20
                            }];
                        return React.createElement(_r, {
                            label: "\n                    ".concat(a || r ? "" : " *", "\n                    ").concat(i, "\n                "),
                            iconSrc: "/static/svg/character-menu/hero.svg",
                            isLoading: t || r,
                            forceText: !0,
                            triggerClass: "characterMenu",
                            items: c
                        })
                    }
                }]) && yu(n.prototype, r), o && yu(n, o), t
            }(function(t) {
                function n(e) {
                    var t, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, n), r = this, o = lu(n).call(this, e), (t = !o || "object" !== su(o) && "function" != typeof o ? uu(r) : o).state = {
                        isMenuVisible: !1
                    }, t.closeMenu = function() {
                        t.setState({
                            isMenuVisible: !1
                        })
                    }, t.refresh = function() {
                        t.forceUpdate()
                    }, t.share = t.share.bind(uu(t)), t
                }
                var r, o, a;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && fu(e, t)
                }(n, React.Component), r = n, a = [{
                    key: "showBrowser",
                    value: function() {
                        UIState.set({
                            showOverlay: React.createElement(iu, null)
                        })
                    }
                }], (o = [{
                    key: "componentDidMount",
                    value: function() {
                        CK.Events.on("myCharactersChanged", this.refresh), CK.Events.on("finishedLoggingIn", this.closeMenu)
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        CK.Events.off("myCharactersChanged", this.refresh), CK.Events.off("finishedLoggingIn", this.closeMenu)
                    }
                }, {
                    key: "promptName",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = CK.character.getName(),
                            n = void 0;
                        return t === CK.Settings.defaultCharacterName ? (t = void 0, n = CK.Settings.defaultCharacterName) : e && (t += " Copy"), Ln.a.promptTextInput("Character Name", t, n, CK.sanitizeName).then((function(e) {
                            return e && CK.tweak({
                                meta: {
                                    character_name: e
                                }
                            }), e
                        }))
                    }
                }, {
                    key: "saveAsClicked",
                    value: function() {
                        var e = this;
                        !CK.saves.activeSaving() && CK.saves.activeConfig && this.promptName(!0).then((function(t) {
                            t && (CK.saves.saveAs().catch((function(t) {
                                return e.handleSaveError(t)
                            })), e.forceUpdate())
                        }))
                    }
                }, {
                    key: "saveClicked",
                    value: function() {
                        var e = this;
                        if (!CK.saves.activeSaving()) {
                            var t = function() {
                                return CK.saves.save().catch((function(t) {
                                    return e.handleSaveError(t)
                                }))
                            };
                            CK.User.loggedIn ? t() : Ln.a.showLogin(t), this.forceUpdate()
                        }
                    }
                }, {
                    key: "handleSaveError",
                    value: function(e) {
                        "not_logged_in" === e ? this.notLoggedIn() : Ln.a.alert("Something went wrong trying to save ".concat(CK.character.getName() || CK.Settings.defaultCharacterName, ". Try refreshing the page."))
                    }
                }, {
                    key: "notLoggedIn",
                    value: function() {
                        Ln.a.alert("You're not logged in anymore!", "Error", (function() {
                            return CK.User.logOutSilent()
                        }))
                    }
                }, {
                    key: "copyLink",
                    value: function(e) {
                        VN.clipboard.writeText(e)
                    }
                }, {
                    key: "showShareOverlay",
                    value: function(e) {
                        var t = this;
                        Ln.a.prompt(React.createElement("span", {
                            className: "selectable"
                        }, e), [{
                            label: "Copy",
                            onClick: function() {
                                return t.copyLink(e)
                            },
                            clickFeedbackText: "Copied!"
                        }, {
                            label: "Cancel",
                            cancel: !0,
                            onClick: function() {
                                return Ln.a.hideOverlay()
                            }
                        }], "Share link")
                    }
                }, {
                    key: "share",
                    value: function() {
                        var t = this,
                            n = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                        Ln.a.hideOverlay(), Ln.a.showLoadingModal("Your link is almost ready..."), (n ? CK.saves.shareAnonymous() : CK.saves.share()).then((function(e) {
                            Ln.a.hideOverlay(), t.showShareOverlay(e)
                        })).catch((function() {
                            Ln.a.hideOverlay(), "not_logged_in" === e ? t.notLoggedIn() : Ln.a.alert("Sharing failed.")
                        }))
                    }
                }, {
                    key: "shareClicked",
                    value: function() {
                        var e = this;
                        if (!CK.saves.activeSaving()) return CK.User.loggedIn ? this.share() : !CK.Settings.requireLoginToShare && window.confirmTosPrivacy ? this.share(!0) : void(CK.Settings.requireLoginToShare ? Ln.a.showLogin() : Ln.a.prompt(React.createElement("div", null, "By creating a sharing link to your design, you indicate that you are at least 16 years old ", React.createElement("br", null), " and have read and accepted our ", React.createElement("a", {
                            href: "/Privacy/",
                            target: "_blank",
                            className: "share-link"
                        }, "Privacy Policy"), ", and ", React.createElement("a", {
                            href: "/ToS/",
                            target: "_blank",
                            className: "share-link"
                        }, "Terms & Conditions")), [{
                            label: "Accept",
                            onClick: function() {
                                window.confirmTosPrivacy = !0, e.share(!0)
                            }
                        }, {
                            label: "Cancel",
                            cancel: !0,
                            onClick: function() {
                                return Ln.a.hideOverlay()
                            }
                        }], "Confirm"))
                    }
                }, {
                    key: "newClicked",
                    value: function() {
                        CKUI.promptSave().then((function(e) {
                            e && CK.saves.new()
                        }))
                    }
                }, {
                    key: "browseClicked",
                    value: function() {
                        CK.User.loggedIn ? n.showBrowser() : Ln.a.showLogin((function() {
                            return n.showBrowser()
                        }))
                    }
                }, {
                    key: "configsLoading",
                    value: function() {
                        return CK.User.loggedIn && !CK.saves.hasLoaded()
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = hu("expandable-menu", "generated", {
                                open: this.state.sharePopup
                            }),
                            n = !!CK.saves.activeSaving() && !CK.saves.sharing,
                            r = this.configsLoading(),
                            o = CK.character.savedChanges && !n,
                            a = CK.character.getName() || CK.Settings.defaultCharacterName,
                            i = "nav-btn" + (r ? " disabled" : "");
                        return React.createElement("div", {
                            id: "character-area"
                        }, React.createElement("div", {
                            className: "namecard-name",
                            onClick: function() {
                                e.promptName()
                            }
                        }, a), React.createElement("div", {
                            className: "nav"
                        }, React.createElement("div", {
                            className: i,
                            onClick: function() {
                                return e.saveClicked()
                            }
                        }, n ? React.createElement("img", {
                            src: pu,
                            className: "svg-spinner"
                        }) : React.createElement("img", {
                            src: "/static/svg/save.svg"
                        }), "Save".concat(o ? "" : " *")), React.createElement("div", {
                            className: i,
                            onClick: function() {
                                e.promptName()
                            }
                        }, React.createElement("img", {
                            src: "/static/svg/pencil.svg"
                        }), "Rename"), React.createElement("div", {
                            id: "share",
                            className: t
                        }, React.createElement("div", {
                            className: i + " share-btn",
                            onClick: function() {
                                return e.shareClicked()
                            }
                        }, React.createElement("img", {
                            src: "/static/svg/share.svg"
                        }), "Share")), React.createElement("div", {
                            className: i,
                            onClick: function() {
                                return e.newClicked()
                            }
                        }, React.createElement("img", {
                            src: "/static/svg/plus-round.svg"
                        }), "New"), React.createElement("div", {
                            id: "my-characters"
                        }, React.createElement("div", {
                            className: "nav-btn",
                            onClick: function() {
                                return e.browseClicked()
                            }
                        }, r ? React.createElement("img", {
                            src: pu,
                            className: "svg-spinner"
                        }) : React.createElement("img", {
                            src: "/static/svg/characters.svg"
                        }), "Heroes"))))
                    }
                }]) && cu(r.prototype, o), a && cu(r, a), n
            }()),
            ku = r(66);

        function Su(e) {
            return (Su = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function _u(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Cu(e) {
            return (Cu = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Ru(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function Ou(e, t) {
            return (Ou = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Eu = VN.classNames,
            Pu = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, o = Cu(t).call(this, e), (n = !o || "object" !== Su(o) && "function" != typeof o ? Ru(r) : o).shaderChanged = function(e) {
                        e === n.props.shader && (e.changed(), n.forceUpdate())
                    }, n.update = n.update.bind(Ru(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Ou(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentDidMount",
                    value: function() {
                        this.mounted = !0, CK.Events.on("shaderBallChanged", this.shaderChanged)
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        this.mounted = !1, CK.Events.off("shaderBallChanged", this.shaderChanged)
                    }
                }, {
                    key: "update",
                    value: function() {
                        this.mounted && this.forceUpdate()
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this.props.size || Math.floor(CK.Shaderballs.size / 3),
                            t = this.props,
                            n = t.shader,
                            r = t.label,
                            o = t.onClick,
                            a = t.selected,
                            i = t.onMouseEnter,
                            s = t.onMouseOut,
                            c = t.showHoverOver,
                            l = t.unused;
                        if (!n) return React.createElement("img", {
                            width: e,
                            height: e,
                            src: "/static/img/missingball.png"
                        });
                        var u = CK.Shaderballs.getBallNow(n);
                        return u ? React.createElement("div", {
                            className: "shaderBrowser-ball-container"
                        }, React.createElement("img", {
                            className: Eu("shaderBrowser-ball", {
                                isActive: a,
                                hasHover: c,
                                isUsed: !l
                            }),
                            draggable: "false",
                            src: u,
                            width: e,
                            height: e,
                            onMouseDown: o,
                            onTouchStart: o,
                            onMouseOut: function() {
                                return CK.Events.emit("labeltip")
                            },
                            onClick: function() {
                                return CK.Events.emit("labeltip")
                            },
                            onMouseOver: function(e) {
                                return CK.Events.emit("labeltip", {
                                    target: e.target,
                                    label: r
                                })
                            },
                            onMouseEnter: function(e) {
                                i && i(e)
                            },
                            onMouseLeave: function(e) {
                                s && s(e)
                            }
                        })) : (CK.Shaderballs.requestBall(n, this.update), React.createElement("div", {
                            className: "shaderBrowser-ball-container"
                        }, React.createElement("img", {
                            width: e,
                            height: e,
                            src: "/static/svg/shaderball-load.svg"
                        })))
                    }
                }]) && _u(n.prototype, r), o && _u(n, o), t
            }();

        function xu(e) {
            return (xu = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ju(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Tu(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Mu(e, t) {
            return !t || "object" !== xu(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Ku(e) {
            return (Ku = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Iu(e, t) {
            return (Iu = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Nu = [{
                slug: "cloth",
                label: "Cloth"
            }, {
                slug: "leather",
                label: "Leather"
            }, {
                slug: "paint",
                label: "Paint"
            }, {
                slug: "plastic",
                label: "Plastic"
            }, {
                slug: "metal",
                label: "Metal"
            }, {
                slug: "bone",
                label: "Bone"
            }, {
                slug: "skin",
                label: "Skin"
            }, {
                slug: "hair",
                label: "Hair"
            }, {
                slug: "plant",
                label: "Plant"
            }, {
                slug: "stone",
                label: "Stone"
            }, {
                slug: "wood",
                label: "Wood"
            }, {
                slug: "flame",
                label: "Flame"
            }, {
                slug: "gem",
                label: "Gem"
            }, {
                slug: "glass",
                label: "Glass"
            }, {
                slug: "eye",
                label: "Eye"
            }],
            Bu = function(e) {
                function t(e) {
                    var n;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), (n = Mu(this, Ku(t).call(this, e))).componentDidMount(), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Iu(e, t)
                }(t, React.Component), n = t, o = [{
                    key: "onApply",
                    value: function(e) {
                        var n, r = {},
                            o = t.getSelectedShader(),
                            a = CK.ColorManager.findIdentical(t._selectedID, o);
                        void 0 === a ? (r = CK.ColorManager.addShaders([t._selectedID]), n = Object.keys(r)[0]) : n = a;
                        var i = e.layer,
                            s = e.subLayer,
                            c = e.slot;
                        if (void 0 === n) console.error("Trying to apply undefined shader");
                        else if (void 0 !== i) {
                            var l = CK.display.modded.orderedDecals[c][i].mapping + "_" + s;
                            CK.tweak({
                                shaders: r,
                                paints: ju({}, c, ju({}, l, parseInt(n)))
                            })
                        } else {
                            var u = {};
                            CK.ColorManager.redirectHit(e, o).map((function(e) {
                                return u[e.slot] = ju({}, e.patch, parseInt(n))
                            })), CK.tweak({
                                shaders: r,
                                paints: u
                            })
                        }
                    }
                }, {
                    key: "onHover",
                    value: function(e) {
                        var n = t.getSelectedShader(),
                            r = CK.ColorManager.redirectHit(e, n);
                        r.length && CK.display.colorBake.applyTempShader(n, r.map((function(e) {
                            return e.slot
                        })), r[0].mapping)
                    }
                }, {
                    key: "getSelectedShader",
                    value: function() {
                        return void 0 === t._selectedID && (t._selectedID = 29, CK.PaintTool.select(CK.Options.shaders[29])), CK.Options.shaders[t._selectedID] || CK.Options.shaders[29]
                    }
                }], (r = [{
                    key: "componentDidMount",
                    value: function() {
                        CK.PaintTool.enable(t.getSelectedShader(), (function(e) {
                            return t.onApply(e)
                        }), (function(e) {
                            return t.onHover(e)
                        }))
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        CK.PaintTool.disable()
                    }
                }, {
                    key: "select",
                    value: function(e) {
                        t._selectedID = e, CK.PaintTool.select(t.getSelectedShader()), this.forceUpdate()
                    }
                }, {
                    key: "selectFilter",
                    value: function(e) {
                        ku.a.clearQueue();
                        var t = CK.Options.shadersByTexture[e][0] || console.error(e, "does not exist");
                        this.select(t.presetID, !0)
                    }
                }, {
                    key: "renderFilter",
                    value: function() {
                        var e, n = this,
                            r = t.getSelectedShader().surface,
                            o = Nu.map((function(t) {
                                var o = new He({
                                    label: t.label,
                                    onMouseDown: function() {
                                        return n.selectFilter(t.slug)
                                    },
                                    onTouchStart: function() {
                                        return n.selectFilter(t.slug)
                                    },
                                    onClick: function() {
                                        return n.selectFilter(t.slug)
                                    },
                                    thumb: t.thumb || "/static/herobundles/shaderball/".concat(t.slug, "/hf_shaderball_hiRez_").concat(t.slug, "_thumb.png")
                                });
                                return t.slug === r && (e = o), o
                            }));
                        return React.createElement(Ta, {
                            options: o,
                            selected: e,
                            big: !0
                        })
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this;
                        CK.PaintTool.updateCursor();
                        var n = t.getSelectedShader(),
                            r = CK.Options.surfaces[n.surfaceID].name,
                            o = CK.Options.shadersByTexture[r] || console.error(r, "not found in shaders."),
                            a = {};
                        o.map((function(e) {
                            var t = e.group || r;
                            a[t] || (a[t] = []), a[t].push(e)
                        }));
                        var i = [];
                        for (var s in a) i.push(React.createElement("div", {
                            className: "shaderBrowser-group",
                            key: s
                        }, React.createElement("div", {
                            className: "shaderBrowser-group-label"
                        }, s), React.createElement("div", {
                            className: "shaderBrowser-group-balls"
                        }, a[s].map((function(t) {
                            return React.createElement(Pu, {
                                shader: t,
                                selected: t === n,
                                label: t.name,
                                showHoverOver: !0,
                                onClick: function() {
                                    e.select(t.presetID), CK.PaintTool.dragged = !0
                                },
                                key: t.presetID,
                                shaderSource: "presets"
                            })
                        })))));
                        return React.createElement(Ko, {
                            pinned: this.renderFilter(),
                            pinnedNoPadding: !!UIState.compact
                        }, i, null)
                    }
                }]) && Tu(n.prototype, r), o && Tu(n, o), t
            }();

        function Au(e) {
            return (Au = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Lu(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Uu(e, t) {
            return !t || "object" !== Au(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Du(e) {
            return (Du = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Fu(e, t) {
            return (Fu = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var zu = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), n = Uu(this, Du(t).call(this, e)), CK.renderManager.initSchemeThumbs(), n.state = {
                    thumb: void 0
                }, n.thumbReady = function(e) {
                    n.setState({
                        thumb: e
                    })
                }, n.refresh = function() {
                    var e = n.props,
                        t = e.scheme,
                        r = e.schemeGroup;
                    CK.renderManager.schemeThumbs.request(t, r, n.thumbReady), n.setState({
                        thumb: void 0
                    })
                }, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Fu(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "componentDidMount",
                value: function() {
                    this.refresh(), CK.Events.on("CharacterFinishedSwitching", this.refresh)
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("CharacterFinishedSwitching", this.refresh), CK.renderManager.schemeThumbs.cancelRequest(this.thumbReady)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.props,
                        t = e.selected,
                        n = e.onClick,
                        r = e.onMouseEnter,
                        o = e.onMouseOut,
                        a = e.label,
                        i = e.description,
                        s = CK.SchemeThumbs.size / 2;
                    return this.state.thumb ? React.createElement(et, {
                        option: new He({
                            thumb: this.state.thumb,
                            thumbSize: [s, s],
                            selected: t,
                            onClick: n,
                            onMouseEnter: r,
                            onMouseOut: o,
                            label: a,
                            description: i
                        })
                    }) : React.createElement(et, {
                        option: new He({
                            thumb: "/static/img/trans.png",
                            thumbSize: [s, s],
                            selected: t,
                            onClick: n
                        })
                    })
                }
            }]) && Lu(n.prototype, r), o && Lu(n, o), t
        }();

        function Vu() {
            if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
            if (Reflect.construct.sham) return !1;
            if ("function" == typeof Proxy) return !0;
            try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}))), !0
            } catch (e) {
                return !1
            }
        }

        function Gu(e, t, n) {
            return (Gu = Vu() ? Reflect.construct : function(e, t, n) {
                var r = [null];
                r.push.apply(r, t);
                var o = new(Function.bind.apply(e, r));
                return n && qu(o, n.prototype), o
            }).apply(null, arguments)
        }

        function qu(e, t) {
            return (qu = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }

        function Hu(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }
        var Wu = [
            [
                [.57, .41, .76], "Air Superiority Blue"
            ],
            [
                [.98, .77, .64], "Alabama Crimson"
            ],
            [
                [.58, .06, 1], "Alice Blue"
            ],
            [
                [.99, .83, .89], "Alizarin Crimson"
            ],
            [
                [.08, .92, .77], "Alloy Orange"
            ],
            [
                [.08, .14, .94], "Almond"
            ],
            [
                [.97, .81, .9], "Amaranth"
            ],
            [
                [.08, 1, 1], "Amber"
            ],
            [
                [.96, .99, 1], "American Rose"
            ],
            [
                [.21, .71, .78], "Android Green"
            ],
            [
                [.58, .01, .96], "Anti Flash White"
            ],
            [
                [.06, .43, .8], "Antique Brass"
            ],
            [
                [.88, .37, .57], "Antique Fuchsia"
            ],
            [
                [.97, .8, .52], "Antique Ruby"
            ],
            [
                [.1, .14, .98], "Antique White"
            ],
            [
                [.2, 1, .71], "Apple Green"
            ],
            [
                [.07, .29, .98], "Apricot"
            ],
            [
                [.44, .5, 1], "Aquamarine"
            ],
            [
                [.19, .61, .33], "Army Green"
            ],
            [
                [.57, .21, .29], "Arsenic"
            ],
            [
                [.14, .54, .91], "Arylide Yellow"
            ],
            [
                [.38, .06, .75], "Ash Grey"
            ],
            [
                [.26, .37, .66], "Asparagus"
            ],
            [
                [0, .75, .65], "Auburn"
            ],
            [
                [.16, 1, .99], "Aureolin"
            ],
            [
                [.51, .14, .5], "Aurometalsaurus"
            ],
            [
                [.22, .98, .51], "Avocado"
            ],
            [
                [.58, 1, 1], "Azure"
            ],
            [
                [.5, .06, 1], "Azure Mist"
            ],
            [
                [.55, .43, .94], "Baby Blue"
            ],
            [
                [.58, .33, .95], "Baby Blue Eyes"
            ],
            [
                [0, .2, .96], "Baby Pink"
            ],
            [
                [.53, .84, .8], "Ball Blue"
            ],
            [
                [.12, .28, .98], "Banana Mania"
            ],
            [
                [.14, .79, 1], "Banana Yellow"
            ],
            [
                [.01, .98, .49], "Barn Red"
            ],
            [
                [.17, .02, .52], "Battleship Grey"
            ],
            [
                [.98, .22, .6], "Bazaar"
            ],
            [
                [.57, .18, .9], "Beau Blue"
            ],
            [
                [.06, .3, .62], "Beaver"
            ],
            [
                [.17, .1, .96], "Beige"
            ],
            [
                [.96, .76, .61], "Big Dip Ruby"
            ],
            [
                [.09, .23, 1], "Bisque"
            ],
            [
                [.07, .49, .24], "Bistro"
            ],
            [
                [.02, .63, 1], "Bittersweet"
            ],
            [
                [1, .59, .75], "Bittersweet Shimmer"
            ],
            [
                [0, 0, 0], "Black"
            ],
            [
                [.03, .97, .24], "Black Bean"
            ],
            [
                [.38, .3, .21], "Black Leather Jacket"
            ],
            [
                [.19, .1, .24], "Black Olive"
            ],
            [
                [.1, .2, 1], "Blanched Almond"
            ],
            [
                [.03, .39, .65], "Blast Off Bronze"
            ],
            [
                [.58, .79, .91], "Bleu De France"
            ],
            [
                [.52, .28, .93], "Blizzard Blue"
            ],
            [
                [.14, .24, .98], "Blond"
            ],
            [
                [.67, .22, .82], "Blue Bell"
            ],
            [
                [.6, .88, 1], "Blue"
            ],
            [
                [.66, 1, .61], "Blue Gray"
            ],
            [
                [.53, .93, .73], "Blue Green"
            ],
            [
                [.55, .86, .5], "Blue Sapphire"
            ],
            [
                [.75, .81, .89], "Blue Violet"
            ],
            [
                [.95, .58, .87], "Blush"
            ],
            [
                [.02, .51, .47], "Bole"
            ],
            [
                [.53, 1, .71], "Bondi Blue"
            ],
            [
                [.11, .11, .89], "Bone"
            ],
            [
                [.46, 1, .42], "Bottle Green"
            ],
            [
                [.91, .63, .53], "Boysenberry"
            ],
            [
                [.59, 1, 1], "Brandeis Blue"
            ],
            [
                [.14, .64, .71], "Brass"
            ],
            [
                [.98, .68, .8], "Brick Red"
            ],
            [
                [.54, .86, .84], "Bright Cerulean"
            ],
            [
                [.76, .35, .89], "Bright Lavender"
            ],
            [
                [.96, .83, .76], "Bright Maroon"
            ],
            [
                [.92, 1, 1], "Bright Pink"
            ],
            [
                [.49, .97, .91], "Bright Turquoise"
            ],
            [
                [.78, .31, .91], "Bright Ube"
            ],
            [
                [.81, .27, 1], "Brilliant Lavender"
            ],
            [
                [.92, .67, 1], "Brilliant Rose"
            ],
            [
                [.97, .62, .98], "Brink Pink"
            ],
            [
                [.08, .76, .8], "Bronze"
            ],
            [
                [.08, 1, .59], "Brown"
            ],
            [
                [.97, .24, 1], "Bubble Gum"
            ],
            [
                [.51, .09, 1], "Bubbles"
            ],
            [
                [.14, .46, .94], "Buff"
            ],
            [
                [1, .92, .28], "Bulgarian Rose"
            ],
            [
                [.96, 1, .5], "Burgundy"
            ],
            [
                [.09, .39, .87], "Burlywood"
            ],
            [
                [.04, .65, .91], "Burnt Sienna"
            ],
            [
                [.02, .74, .54], "Burnt Umber"
            ],
            [
                [.86, .73, .74], "Byzantine"
            ],
            [
                [.86, .63, .44], "Byzantium"
            ],
            [
                [.55, .27, .45], "Cadet"
            ],
            [
                [.51, .41, .63], "Cadet Blue"
            ],
            [
                [.57, .18, .69], "Cadet Grey"
            ],
            [
                [.43, 1, .42], "Cadmium Green"
            ],
            [
                [.08, .81, .93], "Cadmium Orange"
            ],
            [
                [.98, 1, .89], "Cadmium Red"
            ],
            [
                [.16, 1, 1], "Cadmium Yellow"
            ],
            [
                [.07, .45, .65], "Cafe Au Lait"
            ],
            [
                [.08, .56, .29], "Cafe Noir"
            ],
            [
                [.38, .61, .3], "Greenish"
            ],
            [
                [.39, .16, .76], "Sky Field Blue"
            ],
            [
                [.09, .45, .76], "Camel"
            ],
            [
                [.95, .22, .94], "Cameo Pink"
            ],
            [
                [.25, .2, .53], "Camouflage Green"
            ],
            [
                [.16, 1, 1], "Canary Yellow"
            ],
            [
                [.01, 1, 1], "Candy Apple Red"
            ],
            [
                [.99, .5, .89], "Candy Pink"
            ],
            [
                [.54, 1, 1], "Capri"
            ],
            [
                [.97, .85, .77], "Cardinal"
            ],
            [
                [.97, 1, .59], "Carmine"
            ],
            [
                [.01, .72, .92], "Carmine Pink"
            ],
            [
                [.96, 1, 1], "Carmine Red"
            ],
            [
                [.93, .35, 1], "Carnation Pink"
            ],
            [
                [0, .85, .7], "Carnelian"
            ],
            [
                [.59, .31, .87], "Carolina Blue"
            ],
            [
                [.09, .86, .93], "Carrot Orange"
            ],
            [
                [.61, .95, .47], "Catalina Blue"
            ],
            [
                [.63, .29, .81], "Ceil"
            ],
            [
                [.34, .24, .88], "Celadon"
            ],
            [
                [.54, 1, .65], "Celadon Blue"
            ],
            [
                [.48, .64, .52], "Celadon Green"
            ],
            [
                [.5, .3, 1], "Celeste"
            ],
            [
                [.57, .65, .82], "Celestial Blue"
            ],
            [
                [.95, .78, .87], "Cerise"
            ],
            [
                [.93, .75, .93], "Cerise Pink"
            ],
            [
                [.54, 1, .65], "Cerulean"
            ],
            [
                [.62, .78, .75], "Cerulean Blue"
            ],
            [
                [.58, .44, .76], "Cerulean Frost"
            ],
            [
                [.1, .34, .98], "Champagne"
            ],
            [
                [.57, .32, .31], "Charcoal"
            ],
            [
                [.94, .38, .9], "Charm Pink"
            ],
            [
                [.19, 1, 1], "Chartreuse"
            ],
            [
                [.95, .78, .87], "Cherry"
            ],
            [
                [.97, .28, 1], "Cherry Blossom Pink"
            ],
            [
                [0, .55, .8], "Chestnut"
            ],
            [
                [.92, .5, .87], "China Pink"
            ],
            [
                [.94, .52, .66], "China Rose"
            ],
            [
                [.03, .82, .67], "Chinese Red"
            ],
            [
                [.09, 1, .48], "Chocolate"
            ],
            [
                [.11, 1, 1], "Chrome Yellow"
            ],
            [
                [.01, .77, .89], "Cinnabar"
            ],
            [
                [.07, .86, .82], "Cinnamon"
            ],
            [
                [.15, .96, .89], "Citrine"
            ],
            [
                [.9, .19, .98], "Classic Rose"
            ],
            [
                [.6, 1, .67], "Cobalt"
            ],
            [
                [.07, .86, .82], "Cocoa Brown"
            ],
            [
                [.07, .5, .44], "Coffee"
            ],
            [
                [.56, .39, 1], "Columbia Blue"
            ],
            [
                [.01, .51, .97], "Congo Pink"
            ],
            [
                [.64, .19, .67], "Cool Grey"
            ],
            [
                [.08, .72, .72], "Copper"
            ],
            [
                [.01, .39, .68], "Copper Penny"
            ],
            [
                [.04, .6, .8], "Copper Red"
            ],
            [
                [.04, .69, 1], "Coral"
            ],
            [
                [.01, .51, .97], "Coral Pink"
            ],
            [
                [0, .75, 1], "Coral Red"
            ],
            [
                [.99, .54, .54], "Cordovan"
            ],
            [
                [.15, .63, .98], "Corn"
            ],
            [
                [0, .85, .7], "Cornell Red"
            ],
            [
                [.61, .58, .93], "Cornflower Blue"
            ],
            [
                [.13, .14, 1], "Cornsilk"
            ],
            [
                [.12, .09, 1], "Cosmic Latte"
            ],
            [
                [.93, .26, 1], "Cotton Candy"
            ],
            [
                [.16, .18, 1], "Cream"
            ],
            [
                [.97, .91, .86], "Crimson"
            ],
            [
                [.96, 1, .75], "Crimson Glory"
            ],
            [
                [.54, 1, .92], "Cyan"
            ],
            [
                [.17, .81, 1], "Daffodil"
            ],
            [
                [.15, .8, .94], "Dandelion"
            ],
            [
                [.67, 1, .55], "Dark Blue"
            ],
            [
                [.08, .67, .4], "Dark Brown"
            ],
            [
                [.88, .39, .36], "Dark Byzantium"
            ],
            [
                [0, 1, .64], "Dark Candy Apple Red"
            ],
            [
                [.58, .94, .49], "Dark Cerulean"
            ],
            [
                [.03, .37, .6], "Dark Chestnut"
            ],
            [
                [.03, .66, .8], "Dark Coral"
            ],
            [
                [.5, 1, .55], "Dark Cyan"
            ],
            [
                [.57, .31, .47], "Dark Electric Blue"
            ],
            [
                [.12, .94, .72], "Dark Goldenrod"
            ],
            [
                [0, 0, .66], "Dark Gray"
            ],
            [
                [.56, 1, .42], "Dark Imperial Blue"
            ],
            [
                [.45, .28, .14], "Dark Jungle Green"
            ],
            [
                [.15, .43, .74], "Dark Khaki"
            ],
            [
                [.08, .31, .28], "Dark Lava"
            ],
            [
                [.75, .47, .59], "Dark Lavender"
            ],
            [
                [.83, 1, .55], "Dark Magenta"
            ],
            [
                [.23, .56, .42], "Dark Olive Green"
            ],
            [
                [.09, 1, 1], "Dark Orange"
            ],
            [
                [.78, .75, .8], "Dark Orchid"
            ],
            [
                [.59, .41, .8], "Dark Pastel Blue"
            ],
            [
                [.38, .98, .75], "Dark Pastel Green"
            ],
            [
                [.73, .48, .84], "Dark Pastel Purple"
            ],
            [
                [.03, .82, .76], "Dark Pastel Red"
            ],
            [
                [.95, .64, .91], "Dark Pink"
            ],
            [
                [.92, .72, .53], "Dark Raspberry"
            ],
            [
                [0, 1, .55], "Dark Red"
            ],
            [
                [.04, .48, .91], "Dark Salmon"
            ],
            [
                [.96, .97, .34], "Dark Scarlet"
            ],
            [
                [.33, .24, .74], "Dark Sea Green"
            ],
            [
                [0, .67, .24], "Dark Sienna"
            ],
            [
                [.69, .56, .55], "Dark Slate Blue"
            ],
            [
                [.5, .41, .31], "Dark Slate Gray"
            ],
            [
                [.42, .8, .45], "Dark Spring Green"
            ],
            [
                [.13, .44, .57], "Dark Tan"
            ],
            [
                [.11, .93, 1], "Dark Tangerine"
            ],
            [
                [.08, .31, .28], "Dark Taupe"
            ],
            [
                [.98, .62, .8], "Dark Terra Cotta"
            ],
            [
                [.5, 1, .82], "Dark Turquoise"
            ],
            [
                [.78, 1, .83], "Dark Violet"
            ],
            [
                [.14, .92, .61], "Dark Yellow"
            ],
            [
                [.96, .81, .66], "Deep Carmine"
            ],
            [
                [.99, .8, .94], "Deep Carmine Pink"
            ],
            [
                [.05, .81, .91], "Deep Carrot Orange"
            ],
            [
                [.92, .77, .85], "Deep Cerise"
            ],
            [
                [.1, .34, .98], "Deep Champagne"
            ],
            [
                [.01, .61, .73], "Deep Chestnut"
            ],
            [
                [0, .42, .44], "Deep Coffee"
            ],
            [
                [.83, .56, .76], "Deep Fuchsia"
            ],
            [
                [.5, 1, .29], "Deep Jungle Green"
            ],
            [
                [.07, .36, 1], "Deep Peach"
            ],
            [
                [.91, .92, 1], "Deep Pink"
            ],
            [
                [.93, .52, .52], "Deep Ruby"
            ],
            [
                [.54, 1, 1], "Deep Sky Blue"
            ],
            [
                [.95, .35, .4], "Deep Tuscan Red"
            ],
            [
                [.59, .89, .74], "Denim"
            ],
            [
                [.09, .45, .76], "Desert"
            ],
            [
                [.07, .26, .93], "Desert Sand"
            ],
            [
                [0, 0, .41], "Dim Gray"
            ],
            [
                [.93, .89, .84], "Dogwood Rose"
            ],
            [
                [.27, .46, .73], "Dollar Bill"
            ],
            [
                [.12, .85, .59], "Drab"
            ],
            [
                [.67, 1, .61], "Duke Blue"
            ],
            [
                [.09, .58, .88], "Earth Yellow"
            ],
            [
                [.27, .14, .36], "Ebony"
            ],
            [
                [.13, .34, .76], "Ecru"
            ],
            [
                [.91, .34, .38], "Eggplant"
            ],
            [
                [.13, .11, .94], "Eggshell"
            ],
            [
                [.63, .9, .65], "Egyptian Blue"
            ],
            [
                [.51, .51, 1], "Electric Blue"
            ],
            [
                [.96, 1, 1], "Electric Crimson"
            ],
            [
                [.74, 1, 1], "Electric Indigo"
            ],
            [
                [.81, .27, 1], "Electric Lavender"
            ],
            [
                [.79, 1, 1], "Electric Purple"
            ],
            [
                [.71, 1, 1], "Electric Ultramarine"
            ],
            [
                [.76, 1, 1], "Electric Violet"
            ],
            [
                [.39, .6, .78], "Emerald"
            ],
            [
                [.94, .27, .71], "English Lavender"
            ],
            [
                [.09, .45, .76], "Fallow"
            ],
            [
                [.89, 1, .96], "Fashion Fuchsia"
            ],
            [
                [.08, .51, .9], "Fawn"
            ],
            [
                [.29, .45, .47], "Fern Green"
            ],
            [
                [.12, .72, .42], "Field Drab"
            ],
            [
                [.99, .84, .81], "Fire Engine Red"
            ],
            [
                [0, .81, .7], "Firebrick"
            ],
            [
                [.05, .85, .89], "Flame"
            ],
            [
                [.95, .44, .99], "Flamingo Pink"
            ],
            [
                [.14, .45, .93], "Flax"
            ],
            [
                [.12, 1, 1], "Fluorescent Orange"
            ],
            [
                [.91, .92, 1], "Fluorescent Pink"
            ],
            [
                [.95, 1, 1], "Folly"
            ],
            [
                [.33, .76, .55], "Forest Green"
            ],
            [
                [.07, .45, .65], "French Beige"
            ],
            [
                [.57, 1, .73], "French Blue"
            ],
            [
                [.8, .32, .56], "French Lilac"
            ],
            [
                [.97, .78, .78], "French Raspberry"
            ],
            [
                [.94, .7, .96], "French Rose"
            ],
            [
                [.83, .56, .76], "Fuchsia"
            ],
            [
                [.94, .66, .78], "Fuchsia Rose"
            ],
            [
                [0, 0, .86], "Gainsboro"
            ],
            [
                [.67, .03, 1], "Ghost White"
            ],
            [
                [.1, 1, .69], "Ginger"
            ],
            [
                [.65, .08, .98], "Glitter"
            ],
            [
                [.14, 1, 1], "Gold"
            ],
            [
                [.1, .86, .6], "Golden Brown"
            ],
            [
                [.13, 1, .99], "Golden Poppy"
            ],
            [
                [.15, 1, 1], "Golden Yellow"
            ],
            [
                [.12, .85, .85], "Goldenrod"
            ],
            [
                [.31, .3, .89], "Granny Smith Apple"
            ],
            [
                [.33, .22, .35], "Gray Asparagus"
            ],
            [
                [0, 0, .5], "Gray"
            ],
            [
                [.44, .84, .67], "Green"
            ],
            [
                [.23, .82, 1], "Green Yellow"
            ],
            [
                [.42, 1, 1], "Guppie Green"
            ],
            [
                [.62, .67, .81], "Han Blue"
            ],
            [
                [.71, .9, .98], "Han Purple"
            ],
            [
                [.29, 1, 1], "Harlequin"
            ],
            [
                [.98, 1, .79], "Harvard Crimson"
            ],
            [
                [.11, 1, .85], "Harvest Gold"
            ],
            [
                [.17, 1, .5], "Heart Gold"
            ],
            [
                [.8, .55, 1], "Heliotrope"
            ],
            [
                [.89, 1, .96], "Hollywood Cerise"
            ],
            [
                [.33, .06, 1], "Honeydew"
            ],
            [
                [.56, 1, .75], "Honolulu Blue"
            ],
            [
                [.45, .4, .47], "Just Green"
            ],
            [
                [.87, .89, 1], "Hot Magenta"
            ],
            [
                [.92, .59, 1], "Hot Pink"
            ],
            [
                [.36, .44, .37], "Hunter Green"
            ],
            [
                [.58, .46, .82], "Iceberg"
            ],
            [
                [.23, .61, .93], "Inchworm"
            ],
            [
                [.32, .94, .53], "India Green"
            ],
            [
                [0, .55, .8], "Indian Red"
            ],
            [
                [.1, .62, .89], "Indian Yellow"
            ],
            [
                [.74, 1, 1], "Indigo"
            ],
            [
                [.56, 1, .42], "Indigo"
            ],
            [
                [.62, 1, .65], "International Klein Blue"
            ],
            [
                [.05, 1, 1], "International Orange"
            ],
            [
                [.68, .62, .81], "Iris"
            ],
            [
                [.17, .06, 1], "Ivory"
            ],
            [
                [.44, 1, .66], "Jade"
            ],
            [
                [.13, .49, .97], "Jasmine"
            ],
            [
                [1, .73, .84], "Jasper"
            ],
            [
                [.91, .93, .65], "Jazzberry Jam"
            ],
            [
                [0, 0, .2], "Jet"
            ],
            [
                [.2, .6, .85], "June Bud"
            ],
            [
                [.45, .76, .67], "Jungle Green"
            ],
            [
                [.28, .88, .73], "Kelly Green"
            ],
            [
                [.03, .96, .49], "Kenyan Copper"
            ],
            [
                [.1, .26, .76], "Khaki"
            ],
            [
                [.99, 1, .91], "Ku Crimson"
            ],
            [
                [.77, .09, .87], "Languid Lavender"
            ],
            [
                [.58, .76, .61], "Lapis Lazuli"
            ],
            [
                [.17, .87, 1], "Laser Lemon"
            ],
            [
                [.26, .16, .73], "Laurel Green"
            ],
            [
                [.99, .92, .81], "Lava"
            ],
            [
                [.94, .06, 1], "Lavender Blush"
            ],
            [
                [.76, .43, .86], "Lavender"
            ],
            [
                [.68, .06, .82], "Lavender Gray"
            ],
            [
                [.74, .63, .92], "Lavender Indigo"
            ],
            [
                [.83, .45, .93], "Lavender Magenta"
            ],
            [
                [.67, .08, .98], "Lavender Mist"
            ],
            [
                [.92, .31, .98], "Lavender Pink"
            ],
            [
                [.74, .32, .71], "Lavender Purple"
            ],
            [
                [.88, .36, .98], "Lavender Rose"
            ],
            [
                [.67, .08, .98], "Lavender"
            ],
            [
                [.25, 1, .99], "Lawn Green"
            ],
            [
                [.16, 1, 1], "Lemon"
            ],
            [
                [.15, .2, 1], "Lemon Chiffon"
            ],
            [
                [.18, 1, 1], "Lemon Lime"
            ],
            [
                [.02, .38, .1], "Licorice"
            ],
            [
                [.08, .3, .99], "Light Apricot"
            ],
            [
                [.54, .25, .9], "Light Blue"
            ],
            [
                [.08, .84, .71], "Light Brown"
            ],
            [
                [.99, .55, .9], "Light Carmine Pink"
            ],
            [
                [0, .47, .94], "Light Coral"
            ],
            [
                [.56, .37, .92], "Light Cornflower Blue"
            ],
            [
                [.95, .57, .96], "Light Crimson"
            ],
            [
                [.5, .12, 1], "Light Cyan"
            ],
            [
                [.85, .47, .98], "Light Fuchsia Pink"
            ],
            [
                [.17, .16, .98], "Light Goldenrod Yellow"
            ],
            [
                [0, 0, .83], "Light Gray"
            ],
            [
                [.33, .39, .93], "Light Green"
            ],
            [
                [.15, .42, .94], "Light Khaki"
            ],
            [
                [.72, .28, .85], "Light Pastel Purple"
            ],
            [
                [.97, .29, 1], "Light Pink"
            ],
            [
                [.04, .65, .91], "Light Red Ochre"
            ],
            [
                [.05, .52, 1], "Light Salmon"
            ],
            [
                [.49, .82, .7], "Light Sea Green"
            ],
            [
                [.56, .46, .98], "Light Sky Blue"
            ],
            [
                [.07, .39, .7], "Light Taupe"
            ],
            [
                [.17, .12, 1], "Light Yellow"
            ],
            [
                [.83, .19, .78], "Lilac"
            ],
            [
                [.21, 1, 1], "Lime"
            ],
            [
                [.33, .76, .8], "Lime Green"
            ],
            [
                [.2, .95, .76], "Limerick"
            ],
            [
                [.29, .94, .35], "Lincoln Green"
            ],
            [
                [.08, .08, .98], "Linen"
            ],
            [
                [.09, .45, .76], "Lion"
            ],
            [
                [.59, .51, .86], "Little Boy Blue"
            ],
            [
                [.92, .1, .33], "Liver"
            ],
            [
                [0, .86, .9], "Lust"
            ],
            [
                [.91, .85, .79], "Magenta"
            ],
            [
                [.91, 1, 1], "Magenta"
            ],
            [
                [.43, .29, .94], "Magic Mint"
            ],
            [
                [.73, .04, 1], "Magnolia"
            ],
            [
                [.06, 1, .75], "Mahogany"
            ],
            [
                [.15, .63, .98], "Maize"
            ],
            [
                [.39, .95, .85], "Malachite"
            ],
            [
                [.64, .11, .67], "Manatee"
            ],
            [
                [.06, .74, 1], "Mango Tango"
            ],
            [
                [.31, .48, .76], "Mantis"
            ],
            [
                [.84, 1, .53], "Mardi Gras"
            ],
            [
                [.96, .83, .76], "Maroon"
            ],
            [
                [0, 1, .5], "Maroon"
            ],
            [
                [.77, .31, 1], "Mauve"
            ],
            [
                [.95, .34, .57], "Mauve Taupe"
            ],
            [
                [.57, .54, .98], "Maya Blue"
            ],
            [
                [.12, .74, .9], "Meat Brown"
            ],
            [
                [.67, 1, .8], "Medium Blue"
            ],
            [
                [.97, .97, .89], "Medium Candy Apple Red"
            ],
            [
                [.02, .7, .69], "Medium Carmine"
            ],
            [
                [.13, .3, .95], "Medium Champagne"
            ],
            [
                [.45, .47, .21], "Medium Jungle Green"
            ],
            [
                [.83, .28, .87], "Medium Lavender Magenta"
            ],
            [
                [.8, .6, .83], "Medium Orchid"
            ],
            [
                [.56, 1, .65], "Medium Persian Blue"
            ],
            [
                [.72, .49, .86], "Medium Purple"
            ],
            [
                [.9, .73, .73], "Medium Red Violet"
            ],
            [
                [.94, .62, .67], "Medium Ruby"
            ],
            [
                [.41, .66, .7], "Medium Sea Green"
            ],
            [
                [.69, .56, .93], "Medium Slate Blue"
            ],
            [
                [.2, .39, .86], "Medium Spring Bud"
            ],
            [
                [.44, 1, .98], "Medium Spring Green"
            ],
            [
                [.03, .31, .4], "Medium Taupe"
            ],
            [
                [.49, .66, .82], "Medium Turquoise"
            ],
            [
                [.02, .51, .47], "Medium Tuscan Red"
            ],
            [
                [.04, .73, .85], "Medium Vermilion"
            ],
            [
                [.9, .89, .78], "Medium Violet Red"
            ],
            [
                [.08, .52, .97], "Mellow Apricot"
            ],
            [
                [.13, .49, .97], "Mellow Yellow"
            ],
            [
                [.02, .29, .99], "Melon"
            ],
            [
                [.67, .78, .44], "Midnight Blue"
            ],
            [
                [.13, .95, 1], "Mikado Yellow"
            ],
            [
                [.44, .66, .71], "Mint"
            ],
            [
                [.42, .04, 1], "Mint Cream"
            ],
            [
                [.33, .4, 1], "Mint Green"
            ],
            [
                [.02, .12, 1], "Misty Rose"
            ],
            [
                [.1, .14, .98], "Moccasin"
            ],
            [
                [.12, .85, .59], "Mode Beige"
            ],
            [
                [.55, .41, .76], "Moonstone Blue"
            ],
            [
                [.33, .22, .87], "Moss Green"
            ],
            [
                [.45, .74, .73], "Mountain Meadow"
            ],
            [
                [.9, .2, .6], "Mountbatten Pink"
            ],
            [
                [.91, .62, .77], "Mulberry"
            ],
            [
                [.13, .65, 1], "Mustard"
            ],
            [
                [.32, .55, .26], "Myrtle"
            ],
            [
                [.28, 1, .5], "Napier Green"
            ],
            [
                [.13, .62, .98], "Naples Yellow"
            ],
            [
                [.09, .74, 1], "Neon Carrot"
            ],
            [
                [.97, .74, 1], "Neon Fuchsia"
            ],
            [
                [.31, .92, 1], "Neon Green"
            ],
            [
                [.01, .41, .84], "New York Pink"
            ],
            [
                [.54, .31, .93], "Non Photo Blue"
            ],
            [
                [.56, 1, .75], "Ocean Boat Blue"
            ],
            [
                [.14, .71, .81], "Old Gold"
            ],
            [
                [.11, .09, .99], "Old Lace"
            ],
            [
                [.84, .14, .47], "Old Lavender"
            ],
            [
                [.93, .52, .4], "Old Mauve"
            ],
            [
                [1, .33, .75], "Old Rose"
            ],
            [
                [.17, 1, .5], "Olive"
            ],
            [
                [.12, .48, .24], "Olive Drab 7"
            ],
            [
                [.22, .75, .56], "Olive Drab"
            ],
            [
                [.24, .38, .73], "Olivine"
            ],
            [
                [.54, .07, .22], "Onyx"
            ],
            [
                [.89, .28, .72], "Opera Mauve"
            ],
            [
                [.08, 1, 1], "Orange"
            ],
            [
                [.1, 1, 1], "Orange Peel"
            ],
            [
                [.05, 1, 1], "Orange Red"
            ],
            [
                [.1, .99, .98], "Orange"
            ],
            [
                [.11, 1, 1], "Orange"
            ],
            [
                [.84, .49, .85], "Orchid"
            ],
            [
                [.08, .67, .4], "Otter Brown"
            ],
            [
                [.53, .14, .3], "Outer Space"
            ],
            [
                [.03, .71, 1], "Outrageous Orange"
            ],
            [
                [.65, .83, .89], "Palatinate Blue"
            ],
            [
                [.85, .62, .41], "Palatinate Purple"
            ],
            [
                [.57, .18, .9], "Pale Aqua"
            ],
            [
                [.5, .26, .93], "Pale Blue"
            ],
            [
                [.08, .45, .6], "Pale Brown"
            ],
            [
                [.02, .7, .69], "Pale Carmine"
            ],
            [
                [.57, .31, .89], "Pale Cerulean"
            ],
            [
                [.99, .22, .87], "Pale Chestnut"
            ],
            [
                [.05, .53, .85], "Pale Copper"
            ],
            [
                [.58, .28, .94], "Pale Cornflower Blue"
            ],
            [
                [.09, .4, .9], "Pale Gold"
            ],
            [
                [.15, .29, .93], "Pale Goldenrod"
            ],
            [
                [.33, .39, .98], "Pale Green"
            ],
            [
                [.71, .18, 1], "Pale Lavender"
            ],
            [
                [.86, .47, .98], "Pale Magenta"
            ],
            [
                [.98, .13, .98], "Pale Pink"
            ],
            [
                [.83, .28, .87], "Pale Plum"
            ],
            [
                [.95, .49, .86], "Pale Red Violet"
            ],
            [
                [.47, .32, .87], "Pale Robin Egg Blue"
            ],
            [
                [.06, .07, .79], "Pale Silver"
            ],
            [
                [.16, .2, .93], "Pale Spring Bud"
            ],
            [
                [.07, .33, .74], "Pale Taupe"
            ],
            [
                [.95, .49, .86], "Pale Violet Red"
            ],
            [
                [.91, .8, .47], "Pansy Purple"
            ],
            [
                [.1, .16, 1], "Papaya Whip"
            ],
            [
                [.39, .6, .78], "Paris Green"
            ],
            [
                [.55, .16, .81], "Pastel Blue"
            ],
            [
                [.08, .37, .51], "Pastel Brown"
            ],
            [
                [.17, .05, .81], "Pastel Gray"
            ],
            [
                [.93, .37, .96], "Pastel Magenta"
            ],
            [
                [.1, .72, 1], "Pastel Orange"
            ],
            [
                [0, .26, .87], "Pastel Pink"
            ],
            [
                [.82, .13, .71], "Pastel Purple"
            ],
            [
                [.01, .62, 1], "Pastel Red"
            ],
            [
                [.84, .25, .8], "Pastel Violet"
            ],
            [
                [.17, .41, .99], "Pastel Yellow"
            ],
            [
                [.83, 1, .5], "Patriarch"
            ],
            [
                [.57, .31, .47], "Payne Grey"
            ],
            [
                [.11, .29, 1], "Peach"
            ],
            [
                [.07, .36, 1], "Peach"
            ],
            [
                [.08, .27, 1], "Peach Puff"
            ],
            [
                [.11, .31, .98], "Peach Yellow"
            ],
            [
                [.18, .78, .89], "Pear"
            ],
            [
                [.12, .15, .92], "Pearl"
            ],
            [
                [.45, .37, .85], "Pearl Aqua"
            ],
            [
                [.88, .43, .72], "Pearly Purple"
            ],
            [
                [.16, 1, .9], "Peridot"
            ],
            [
                [.64, .85, .73], "Persian Blue"
            ],
            [
                [.48, 1, .65], "Persian Green"
            ],
            [
                [.72, .85, .48], "Persian Indigo"
            ],
            [
                [.07, .59, .85], "Persian Orange"
            ],
            [
                [.91, .49, .97], "Persian Pink"
            ],
            [
                [0, .75, .44], "Persian Plum"
            ],
            [
                [.9, .84, 1], "Persian Rose"
            ],
            [
                [.06, 1, .93], "Persimmon"
            ],
            [
                [.08, .69, .8], "Peru"
            ],
            [
                [.95, .13, .99], "Piggy Pink"
            ],
            [
                [.49, .99, .47], "Pine Green"
            ],
            [
                [.97, .25, 1], "Pink"
            ],
            [
                [.89, .13, 1], "Pink Lace"
            ],
            [
                [.9, .26, .91], "Pink Pearl"
            ],
            [
                [.96, .42, .97], "Pink Sherbet"
            ],
            [
                [.27, .42, .77], "Pistachio"
            ],
            [
                [.11, .01, .9], "Platinum"
            ],
            [
                [.83, .28, .87], "Plum"
            ],
            [
                [.03, .79, 1], "Portland Orange"
            ],
            [
                [.52, .23, .9], "Powder Blue"
            ],
            [
                [.09, 1, 1], "Princeton Orange"
            ],
            [
                [0, .75, .44], "Prune"
            ],
            [
                [.81, 1, 1], "Psychedelic Purple"
            ],
            [
                [.07, .91, 1], "Pumpkin"
            ],
            [
                [.75, .66, .61], "Purple Heart"
            ],
            [
                [.83, 1, .5], "Purple"
            ],
            [
                [.75, .34, .71], "Purple Mountain Majesty"
            ],
            [
                [.8, 1, .77], "Purple"
            ],
            [
                [.87, .69, 1], "Purple Pizzazz"
            ],
            [
                [.86, .2, .31], "Purple Taupe"
            ],
            [
                [.77, .87, .94], "Purple"
            ],
            [
                [.87, .11, .32], "Quartz"
            ],
            [
                [.97, .79, 1], "Radical Red"
            ],
            [
                [.94, .95, .89], "Raspberry"
            ],
            [
                [.95, .34, .57], "Raspberry Glace"
            ],
            [
                [.92, .65, .89], "Raspberry Pink"
            ],
            [
                [.94, .62, .7], "Raspberry Rose"
            ],
            [
                [.09, .48, .51], "Raw Umber"
            ],
            [
                [.94, .84, .89], "Razzmatazz"
            ],
            [
                [0, .75, .65], "Red Brown"
            ],
            [
                [.98, .99, .53], "Red Devil"
            ],
            [
                [.96, 1, .95], "Red"
            ],
            [
                [.96, .99, .77], "Red"
            ],
            [
                [.01, .71, 1], "Red Orange"
            ],
            [
                [.99, .88, .93], "Red"
            ],
            [
                [.01, .93, 1], "Red"
            ],
            [
                [.9, .89, .78], "Red Violet"
            ],
            [
                [.99, .54, .67], "Redwood"
            ],
            [
                [.74, .65, .5], "Regalia"
            ],
            [
                [.81, .34, 1], "Rich Brilliant Lavender"
            ],
            [
                [.95, 1, .84], "Rich Carmine"
            ],
            [
                [.55, .96, .82], "Rich Electric Blue"
            ],
            [
                [.77, .48, .81], "Rich Lavender"
            ],
            [
                [.79, .51, .82], "Rich Lilac"
            ],
            [
                [.94, .73, .69], "Rich Maroon"
            ],
            [
                [.22, .29, .28], "Rifle Green"
            ],
            [
                [.92, 1, 1], "Rose"
            ],
            [
                [.92, .73, .98], "Rose Bonbon"
            ],
            [
                [.01, .32, .4], "Rose Ebony"
            ],
            [
                [.97, .4, .72], "Rose Gold"
            ],
            [
                [.99, .83, .89], "Rose Madder"
            ],
            [
                [.84, .11, .67], "Rose Quartz"
            ],
            [
                [0, .35, .56], "Rose Taupe"
            ],
            [
                [.99, .54, .67], "Rose Vale"
            ],
            [
                [.98, 1, .4], "Rosewood"
            ],
            [
                [0, .24, .74], "Rosy Brown"
            ],
            [
                [.61, 1, .66], "Royal Azure"
            ],
            [
                [.89, .78, .79], "Royal Fuchsia"
            ],
            [
                [.74, .52, .66], "Royal Purple"
            ],
            [
                [.13, .62, .98], "Royal Yellow"
            ],
            [
                [.94, .92, .88], "Ruby"
            ],
            [
                [.98, .89, .61], "Ruby Red"
            ],
            [
                [.97, 1, 1], "Ruddy"
            ],
            [
                [.07, .79, .73], "Ruddy Brown"
            ],
            [
                [.98, .37, .88], "Ruddy Pink"
            ],
            [
                [.07, .79, .5], "Russet"
            ],
            [
                [.05, .92, .72], "Rust"
            ],
            [
                [.98, .8, .85], "Rusty Red"
            ],
            [
                [.07, .86, .55], "Saddle Brown"
            ],
            [
                [.07, 1, 1], "Safety Orange"
            ],
            [
                [.13, .8, .96], "Saffron"
            ],
            [
                [.04, .59, 1], "Salmon"
            ],
            [
                [.97, .43, 1], "Salmon Pink"
            ],
            [
                [.13, .34, .76], "Sand"
            ],
            [
                [.12, .85, .59], "Sand Dune"
            ],
            [
                [.14, .73, .93], "Sandstorm"
            ],
            [
                [.08, .61, .96], "Sandy Brown"
            ],
            [
                [.12, .85, .59], "Sandy Taupe"
            ],
            [
                [.99, 1, .57], "Sangria"
            ],
            [
                [.26, .66, .49], "Sap Green"
            ],
            [
                [.6, .92, .73], "Sapphire"
            ],
            [
                [.56, 1, .65], "Sapphire Blue"
            ],
            [
                [.12, .74, .8], "Satin Sheen Gold"
            ],
            [
                [.02, 1, 1], "Scarlet"
            ],
            [
                [.97, .94, .99], "Scarlet"
            ],
            [
                [.14, 1, 1], "School Bus Yellow"
            ],
            [
                [.34, .54, 1], "Screaming Green"
            ],
            [
                [.41, .67, .55], "Sea Green"
            ],
            [
                [0, .6, .2], "Seal Brown"
            ],
            [
                [.07, .07, 1], "Seashell"
            ],
            [
                [.12, 1, 1], "Selective Yellow"
            ],
            [
                [.08, .82, .44], "Sepia"
            ],
            [
                [.1, .33, .54], "Shadow"
            ],
            [
                [.88, .94, .99], "Shocking Pink"
            ],
            [
                [.83, .56, 1], "Shocking Pink"
            ],
            [
                [.03, .83, .53], "Sienna"
            ],
            [
                [0, 0, .75], "Silver"
            ],
            [
                [.55, .43, .92], "Sky Blue"
            ],
            [
                [.89, .45, .81], "Sky Magenta"
            ],
            [
                [.69, .56, .8], "Slate Blue"
            ],
            [
                [.58, .22, .56], "Slate Gray"
            ],
            [
                [.99, .59, .58], "Smokey Topaz"
            ],
            [
                [.08, .5, .06], "Smoky Black"
            ],
            [
                [.54, .94, .99], "Spiro Disco Ball"
            ],
            [
                [.22, 1, .99], "Spring Bud"
            ],
            [
                [.42, 1, 1], "Spring Green"
            ],
            [
                [.58, .61, .71], "Steel Blue"
            ],
            [
                [.52, .25, .42], "Stormcloud"
            ],
            [
                [.15, .51, .89], "Straw"
            ],
            [
                [.1, .34, .98], "Sunset"
            ],
            [
                [.1, .33, .82], "Tan"
            ],
            [
                [.05, 1, .98], "Tangelo"
            ],
            [
                [.09, 1, .95], "Tangerine"
            ],
            [
                [.99, .5, .89], "Tango Pink"
            ],
            [
                [.08, .31, .28], "Taupe"
            ],
            [
                [.89, .04, .55], "Taupe Gray"
            ],
            [
                [.28, .2, .94], "Tea Green"
            ],
            [
                [.01, .51, .97], "Tea Rose"
            ],
            [
                [0, .2, .96], "Tea Rose"
            ],
            [
                [.54, .6, .53], "Teal Blue"
            ],
            [
                [.5, 1, .51], "Teal Green"
            ],
            [
                [.03, .6, .89], "Terra Cotta"
            ],
            [
                [.83, .12, .85], "Thistle"
            ],
            [
                [.92, .5, .87], "Thulian Pink"
            ],
            [
                [.95, .46, .99], "Tickle Me Pink"
            ],
            [
                [.5, .95, .73], "Tiffany Blue"
            ],
            [
                [.08, .73, .88], "Tigers Eye"
            ],
            [
                [.09, .04, .86], "Timberwolf"
            ],
            [
                [.16, 1, .93], "Titanium Yellow"
            ],
            [
                [.03, .72, 1], "Tomato"
            ],
            [
                [.68, .44, .75], "Toolbox"
            ],
            [
                [.1, .51, 1], "Topaz"
            ],
            [
                [.97, .94, .99], "Tractor Red"
            ],
            [
                [0, 0, .5], "Trolley Grey"
            ],
            [
                [.47, 1, .46], "Tropical Rain Forest"
            ],
            [
                [.57, 1, .81], "True Blue"
            ],
            [
                [.59, .66, .76], "Tufts Blue"
            ],
            [
                [.07, .39, .87], "Tumbleweed"
            ],
            [
                [.96, .37, .71], "Turkish Rose"
            ],
            [
                [.49, .77, .84], "Turquoise"
            ],
            [
                [.49, 1, 1], "Turquoise Blue"
            ],
            [
                [.4, .25, .84], "Turquoise Green"
            ],
            [
                [0, .42, .49], "Tuscan Red"
            ],
            [
                [.91, .47, .54], "Twilight Lavender"
            ],
            [
                [.94, 1, .85], "Ua Red"
            ],
            [
                [.7, .38, .76], "Ube"
            ],
            [
                [.39, .71, .82], "Ufo Green"
            ],
            [
                [.83, .56, 1], "Ultra Pink"
            ],
            [
                [.68, .93, .56], "Ultramarine"
            ],
            [
                [.63, .73, .96], "Ultramarine Blue"
            ],
            [
                [.06, .28, .39], "Umber"
            ],
            [
                [.06, .21, 1], "Unbleached Silk"
            ],
            [
                [1, .86, .48], "Up Maroon"
            ],
            [
                [.13, .3, .95], "Vanilla"
            ],
            [
                [.14, .55, .77], "Vegas Gold"
            ],
            [
                [.99, .96, .78], "Venetian Red"
            ],
            [
                [.49, .63, .7], "Verdigris"
            ],
            [
                [.01, .77, .89], "Vermilion"
            ],
            [
                [.77, .87, .94], "Veronica"
            ],
            [
                [.76, 1, 1], "Violet"
            ],
            [
                [.64, .72, .7], "Violet Blue"
            ],
            [
                [.75, 1, 1], "Violet"
            ],
            [
                [.79, .99, .69], "Violet"
            ],
            [
                [.83, .45, .93], "Violet"
            ],
            [
                [0, .75, .57], "Vivid Auburn"
            ],
            [
                [.97, .82, .62], "Vivid Burgundy"
            ],
            [
                [.91, .87, .85], "Vivid Cerise"
            ],
            [
                [.03, .46, 1], "Vivid Tangerine"
            ],
            [
                [.77, 1, 1], "Vivid Violet"
            ],
            [
                [.51, .34, .98], "Waterspout"
            ],
            [
                [.11, .27, .96], "Wheat"
            ],
            [
                [0, 0, .96], "White Smoke"
            ],
            [
                [.63, .22, .82], "Wild Blue Yonder"
            ],
            [
                [.91, .74, 1], "Wild Strawberry"
            ],
            [
                [.97, .57, .99], "Wild Watermelon"
            ],
            [
                [.98, .59, .45], "Wine"
            ],
            [
                [.93, .52, .4], "Wine Dregs"
            ],
            [
                [.78, .27, .86], "Wisteria"
            ],
            [
                [.09, .45, .76], "Wood Brown"
            ],
            [
                [.38, .14, .53], "Xanadu"
            ],
            [
                [.59, .9, .57], "Yale Blue"
            ],
            [
                [.22, .76, .8], "Yellow Green"
            ],
            [
                [.14, 1, .94], "Yellow"
            ],
            [
                [.14, 1, 1], "Yellow"
            ],
            [
                [.1, .74, 1], "Yellow Orange"
            ]
        ];
        Wu.map((function(e) {
            e[0] = Gu(RK.Vec3, Hu(e[0]))
        }));
        var Qu = Wu;

        function Xu(e) {
            return (Xu = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Yu(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Zu(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ju(e, t) {
            return !t || "object" !== Xu(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function $u(e) {
            return ($u = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function ef(e, t) {
            return (ef = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var tf = VN.classNames,
            nf = function(e) {
                function t() {
                    return Yu(this, t), Ju(this, $u(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && ef(e, t)
                }(t, React.Component), n = t, o = [{
                    key: "gradientMaker",
                    value: function(e) {
                        for (var t = 100, n = [], r = e && e.length ? e.length : 0, o = 0; o < r; o++) {
                            var a = e[o],
                                i = e.length > o + 1 ? .6 * t : t,
                                s = 100 - t;
                            for (var c in a) n.push("rgb(" + a[c].slice(0, 3).join(",") + ") " + Math.floor(s + i / (a.length - 1) * c) + "%");
                            t -= i
                        }
                        return "linear-gradient( 135deg, " + n.join(",") + ")"
                    }
                }], (r = [{
                    key: "render",
                    value: function() {
                        var e = this.props.options,
                            n = this.props.size || 26,
                            r = [];
                        for (var o in e) {
                            var a = e[o],
                                i = a.gradients ? t.gradientMaker(a.gradients) : void 0;
                            r.push(React.createElement("div", {
                                className: tf("paintGrid-square", {
                                    isSelected: a.selected
                                }),
                                key: o,
                                onClick: a.onClick,
                                onMouseOut: a.onMouseOut,
                                onMouseEnter: a.onMouseEnter
                            }, React.createElement("div", {
                                className: "paintGrid-square-inner",
                                style: {
                                    width: n,
                                    height: n,
                                    background: i
                                }
                            }), a.displayLabel || null))
                        }
                        return React.createElement("div", {
                            className: "grid-layout"
                        }, r)
                    }
                }]) && Zu(n.prototype, r), o && Zu(n, o), t
            }();

        function rf(e) {
            return (rf = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function of(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function af(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function sf(e, t) {
            return !t || "object" !== rf(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function cf(e) {
            return (cf = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function lf(e, t) {
            return (lf = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var uf = VN.classNames,
            ff = function(e) {
                function t() {
                    return of(this, t), sf(this, cf(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && lf(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "onClick",
                    value: function(e) {
                        window.CK && CK.userHasTouched && CK.Events.emit("tip", [this.props, e]), e.fastclick && (e.preventDefault(), e.stopPropagation()), this.props.onClick && this.props.onClick()
                    }
                }, {
                    key: "onMouseEnter",
                    value: function(e) {
                        this.props.onMouseEnter && this.props.onMouseEnter(), window.CK && !CK.userHasTouched && CK.Events.emit("tip", [{
                            label: this.props.label,
                            description: this.props.description
                        }, e])
                    }
                }, {
                    key: "onMouseOut",
                    value: function() {
                        this.props.onMouseOut && this.props.onMouseOut(), window.CK && !CK.userHasTouched && CK.Events.emit("tip", void 0)
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props,
                            n = t.selected,
                            r = t.scheme,
                            o = ("race" === t.schemeGroup ? [r.skin[0], r.hair[0], r.eye[0]] : r.misc || r.cloth || r.leather || r.metal || []).map((function(e) {
                                return e.gradient.slice(0, 3)
                            })),
                            a = nf.gradientMaker(o),
                            i = CK.SchemeThumbs.size / 4;
                        return React.createElement("div", {
                            className: uf("paintGrid-square", {
                                isSelected: n
                            }),
                            onClick: function(t) {
                                return e.onClick(t)
                            },
                            onMouseOut: function(t) {
                                return e.onMouseOut(t)
                            },
                            onMouseEnter: function(t) {
                                return e.onMouseEnter(t)
                            },
                            style: {
                                border: 15
                            }
                        }, React.createElement("div", {
                            className: "paintGrid-square-inner",
                            style: {
                                width: i,
                                height: i,
                                background: a
                            }
                        }))
                    }
                }]) && af(n.prototype, r), o && af(n, o), t
            }();

        function hf(e) {
            return (hf = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function pf(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function df() {
            if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
            if (Reflect.construct.sham) return !1;
            if ("function" == typeof Proxy) return !0;
            try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}))), !0
            } catch (e) {
                return !1
            }
        }

        function mf(e, t, n) {
            return (mf = df() ? Reflect.construct : function(e, t, n) {
                var r = [null];
                r.push.apply(r, t);
                var o = new(Function.bind.apply(e, r));
                return n && kf(o, n.prototype), o
            }).apply(null, arguments)
        }

        function yf(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function vf(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function bf(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function gf(e, t) {
            return !t || "object" !== hf(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function wf(e) {
            return (wf = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function kf(e, t) {
            return (kf = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Sf = VN.classNames,
            _f = function(e) {
                function t(e) {
                    var n;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), (n = gf(this, wf(t).call(this, e))).state = {
                        details: !1
                    }, n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && kf(e, t)
                }(t, React.Component), n = t, o = [{
                    key: "getClosestName",
                    value: function(e) {
                        var t = mf(RK.Vec3, yf(e.gradientHSV[1])),
                            n = Qu[0][1],
                            r = 9999;
                        Qu.map((function(e) {
                            var o = pf(e, 2),
                                a = o[0],
                                i = o[1],
                                s = t.clone().sub(a).length();
                            s < r && (r = s, n = i)
                        }));
                        var o = CK.Options.surfaces[e.surfaceID].name;
                        return n + " " + (o.charAt(0).toUpperCase() + o.slice(1))
                    }
                }], (r = [{
                    key: "toggleDetails",
                    value: function() {
                        this.setState({
                            details: !this.state.details
                        })
                    }
                }, {
                    key: "apply",
                    value: function(e) {
                        var n = e.name,
                            r = this.props.category,
                            o = CK.Options.configs[r + "_scheme"].find((function(e) {
                                return e.name === n
                            }));
                        o && function() {
                            var e = [],
                                a = o.colorScheme;
                            for (var i in a) a[i].map((function(t, n) {
                                t.schemeSortOrder = n + 1, e.push(t)
                            }));
                            e.map((function(e) {
                                return e.name = t.getClosestName(e)
                            })), CK.tweak({
                                schemes: vf({}, r, n)
                            })
                        }()
                    }
                }, {
                    key: "clear",
                    value: function() {
                        CK.tweak({
                            schemes: vf({}, this.props.category, void 0)
                        }), this.setState({
                            details: !1
                        })
                    }
                }, {
                    key: "renderSchemeThumbs",
                    value: function() {
                        var e = this,
                            t = [],
                            n = this.props.category,
                            r = n + "_scheme",
                            o = CK.Options.configsByName[r] || {},
                            a = CK.Settings.renderedThumbnails ? zu : ff,
                            i = function(r) {
                                var i = o[r],
                                    s = CK.Options.getScheme(n, r),
                                    c = CK.data.schemes && CK.data.schemes[n] === r;
                                t.push(React.createElement(a, {
                                    key: r,
                                    scheme: s,
                                    schemeGroup: n,
                                    onClick: function() {
                                        c ? e.clear() : e.apply(i)
                                    },
                                    onMouseEnter: function() {
                                        CK.orbitCamera.controls.isManipulating() || CK.display.colorBake.applyTempScheme(n, s)
                                    },
                                    onMouseOut: function() {
                                        CK.display.colorBake.removeAllTemp()
                                    },
                                    label: i.desc || i.name,
                                    description: i.config_desc || i.desc || i.name,
                                    selected: c
                                }))
                            };
                        for (var s in o) i(s);
                        return t
                    }
                }, {
                    key: "applyDetails",
                    value: function(e, t, n) {
                        var r = CK.ColorManager.getNextAvailableID(),
                            o = {},
                            a = {
                                shaders: vf({}, r, t),
                                paints: o
                            };
                        e.map((function(e) {
                            var t = e.slot,
                                n = e.patch;
                            t in o || (o[t] = {}), o[t][n] = r
                        })), n ? CK.display.colorBake.tempOverrideConfig(a) : CK.tweak(a)
                    }
                }, {
                    key: "renderDetails",
                    value: function() {
                        var e = this,
                            t = this.props.category,
                            n = CK.modded.parts,
                            r = {},
                            o = function(e) {
                                var o = n[e];
                                (CK.Options.slots[o.slot].scheme_group || "outfit") === t && o.colors && o.colors.map((function(t, n) {
                                    if (!t.surface || "special" !== t.surface.name) {
                                        var o, a, i = CK.data.paints[e] && CK.data.paints[e][n],
                                            s = t.surface,
                                            c = t.shader,
                                            l = t.priority,
                                            u = t.label;
                                        if (u) o = u, a = {
                                            slot: e,
                                            patch: n,
                                            group: s.name,
                                            label: u,
                                            shaderID: i
                                        };
                                        else if (i) {
                                            o = i;
                                            var f = CK.data.shaders[i].surfaceObj.name;
                                            a = {
                                                slot: e,
                                                patch: n,
                                                shaderID: i,
                                                group: f,
                                                label: f
                                            }
                                        } else c ? (o = "preset" + c.presetID, a = {
                                            slot: e,
                                            patch: n,
                                            shader: c,
                                            group: c.surfaceObj.name,
                                            label: c.surfaceObj.name
                                        }) : s && (o = s.id + "_" + t, a = {
                                            slot: e,
                                            patch: n,
                                            surface: s,
                                            priority: l,
                                            group: s.name,
                                            label: s.name
                                        });
                                        a && (o in r || (r[o] = []), r[o].push(a))
                                    }
                                }))
                            };
                        for (var a in n) o(a);
                        var i = {},
                            s = {};
                        return Object.keys(r).map((function(t) {
                            var n = r[t],
                                o = n[0],
                                a = o.label,
                                c = o.group,
                                l = o.shaderID,
                                u = (CK.Options.shadersByTexture[c] || console.error("Group", c, "not found in shadersByTexture") || CK.Options.shadersByTexture.paint).map((function(t) {
                                    return {
                                        gradients: [t.gradient.slice(0, 3)],
                                        selected: l && CK.Options.shaders[t.presetID].key === CK.data.shaders[l].key,
                                        onClick: function() {
                                            return e.applyDetails(n, t)
                                        },
                                        onMouseOut: function() {
                                            return CK.display.colorBake.removeAllTemp()
                                        },
                                        onMouseEnter: function() {
                                            CK.orbitCamera.controls.isManipulating() || e.applyDetails(n, t, !0)
                                        }
                                    }
                                }));
                            a in s || (s[a] = 0), s[a]++;
                            var f = a + (s[a] > 1 ? " " + s[a] : "");
                            i[f] = React.createElement("div", {
                                key: f,
                                style: {
                                    marginTop: 20
                                }
                            }, React.createElement("div", {
                                className: "colorConfig-label"
                            }, f), React.createElement(nf, {
                                size: 16,
                                options: u
                            }))
                        })), Object.keys(i).sort().map((function(e) {
                            return i[e]
                        }))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.state.details;
                        return React.createElement(React.Fragment, null, React.createElement("div", {
                            className: "colorConfig-head"
                        }, React.createElement("img", {
                            src: "/static/svg/controls.svg",
                            className: "colorConfig-toggle",
                            onClick: function() {
                                return e.toggleDetails()
                            }
                        })), React.createElement("div", {
                            className: Sf("colorConfig", "slider--withDetails", {
                                isOpen: t
                            })
                        }, t ? this.renderDetails() : this.renderSchemeThumbs()))
                    }
                }]) && bf(n.prototype, r), o && bf(n, o), t
            }();

        function Cf(e) {
            return (Cf = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Rf(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Of(e, t) {
            return !t || "object" !== Cf(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Ef(e) {
            return (Ef = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Pf(e, t) {
            return (Pf = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var xf = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = Of(this, Ef(t).call(this, e))).state = {
                    menuOption: !1,
                    x: 0,
                    y: 0
                }, n.tip = function(e) {
                    if (e && e[0] && e[1]) {
                        for (var t = e[1].target.getBoundingClientRect(), r = Math.floor((t.top + t.bottom) / 2); r + 150 > window.innerHeight;) r -= 50;
                        t && n.setState({
                            menuOption: e[0],
                            x: Math.floor(t.left - 400),
                            y: r,
                            touch: !!e[2]
                        })
                    } else CK.ClientSpecs.touchEnabled() || n.setState({
                        menuOption: void 0
                    })
                }, n.close = function() {
                    n.setState({
                        menuOption: void 0
                    })
                }, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Pf(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("cameraMoveStart", this.close), CK.Events.on("tip", this.tip), CK.Events.on("menuChanged", this.close), CK.Events.on("sliderChanged", this.close)
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("cameraMoveStart", this.close), CK.Events.off("tip", this.tip), CK.Events.off("menuChanged", this.close), CK.Events.off("sliderChanged", this.close)
                }
            }, {
                key: "render",
                value: function() {
                    var e = {
                        tipperTouch: {
                            width: 300,
                            bottom: 60,
                            left: 20,
                            zIndex: 9
                        },
                        tipper: {
                            width: 300,
                            transform: "translate(0%,-50%)",
                            zIndex: 9999
                        },
                        title: {
                            margin: "0 0 8px"
                        },
                        p: {
                            margin: 0,
                            display: "flex",
                            alignItems: "flex-start"
                        },
                        img: {
                            maxWidth: 120,
                            marginRight: 10,
                            flexShrink: 0
                        },
                        warning: {
                            margin: 2
                        }
                    };
                    if (!this.state.menuOption) return null;
                    var t = this.state.menuOption,
                        n = t.description,
                        r = t.label,
                        o = t.thumb,
                        a = t.grayedOut,
                        i = t.grayedOutReason;
                    if (!r || !n) return null;
                    var s = this.state.touch || CK.ClientSpecs.touchEnabled();
                    return o && -1 !== o.indexOf("twohanded") && (e.img.maxWidth = 50), e.tipper.left = this.state.x, e.tipper.top = this.state.y, React.createElement("div", {
                        className: "fixed-tipper",
                        style: s ? e.tipperTouch : e.tipper
                    }, a && !!i && React.createElement("h3", {
                        className: "warning",
                        style: e.warning
                    }, React.createElement("img", {
                        src: "/static/svg/warning.svg",
                        className: "warning-image"
                    }), i), React.createElement("h3", {
                        style: e.title
                    }, r), React.createElement("p", {
                        style: e.p
                    }, o && o.length > 3 && React.createElement("img", {
                        style: e.img,
                        src: o
                    }), n))
                }
            }]) && Rf(n.prototype, r), o && Rf(n, o), t
        }();

        function jf(e) {
            return (jf = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Tf(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Mf(e, t) {
            return !t || "object" !== jf(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Kf(e) {
            return (Kf = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function If(e, t) {
            return (If = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Nf = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = Mf(this, Kf(t).call(this, e))).state = {
                    label: null,
                    left: 0,
                    bottom: 0
                }, n.tip = function(e) {
                    if (!e) return n.setState({
                        label: null
                    });
                    var t = e.target.getBoundingClientRect(),
                        r = t.left + t.width / 2,
                        o = window.innerHeight - t.top + 6;
                    n.setState({
                        label: e.label,
                        left: r,
                        bottom: o
                    })
                }, n.close = function() {
                    return n.setState({
                        target: void 0
                    })
                }, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && If(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("cameraMoveStart", this.close), CK.Events.on("labeltip", this.tip)
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("cameraMoveStart", this.close), CK.Events.off("labeltip", this.tip)
                }
            }, {
                key: "render",
                value: function() {
                    return this.state.label ? React.createElement("div", {
                        className: "tooltip",
                        style: {
                            left: this.state.left,
                            bottom: this.state.bottom
                        }
                    }, this.state.label) : null
                }
            }]) && Tf(n.prototype, r), o && Tf(n, o), t
        }();

        function Bf(e) {
            return (Bf = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Af(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Lf(e, t) {
            return !t || "object" !== Bf(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Uf(e) {
            return (Uf = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Df(e, t) {
            return (Df = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Ff = function(e) {
            function t(e) {
                var n;
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = Lf(this, Uf(t).call(this, e))).state = {
                    visible: !0
                };
                return n.checkUpdate = function() {
                    n.state.visible && CK.display.loadingDuration < 2e3 ? n.setState({
                        visible: !1
                    }) : !n.state.visible && CK.display.loadingDuration >= 2e3 && n.setState({
                        visible: !0
                    })
                }, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Df(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("end", this.checkUpdate)
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("end", this.checkUpdate)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.state.visible ? .5 : 0,
                        t = UIState.compact ? {
                            position: "absolute",
                            top: "30vh",
                            left: "50vw",
                            transition: "all 1s ease",
                            opacity: e
                        } : {
                            position: "absolute",
                            top: "45vh",
                            left: Math.floor(CK.renderManager.width / 2 - CK.orbitCamera.getOffsetX()),
                            transition: "opacity 1s ease",
                            width: 64,
                            height: 64,
                            opacity: e
                        };
                    return React.createElement("img", {
                        style: t,
                        src: "/static/svg/spinner.svg",
                        className: "svg-spinner"
                    })
                }
            }]) && Af(n.prototype, r), o && Af(n, o), t
        }();

        function zf(e) {
            return (zf = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Vf() {
            return (Vf = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }).apply(this, arguments)
        }

        function Gf(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function qf(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Hf(e, t, n) {
            return t && qf(e.prototype, t), n && qf(e, n), e
        }

        function Wf(e, t) {
            return !t || "object" !== zf(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Qf(e) {
            return (Qf = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Xf(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    writable: !0,
                    configurable: !0
                }
            }), t && Yf(e, t)
        }

        function Yf(e, t) {
            return (Yf = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Zf = function(e) {
                function t(e) {
                    var n, r;
                    Gf(this, t);
                    for (var o = arguments.length, a = new Array(o > 1 ? o - 1 : 0), i = 1; i < o; i++) a[i - 1] = arguments[i];
                    return (r = Wf(this, (n = Qf(t)).call.apply(n, [this, e].concat(a)))).state = {
                        value: e.value
                    }, r
                }
                return Xf(t, React.Component), Hf(t, [{
                    key: "componentWillReceiveProps",
                    value: function(e) {
                        this.state.value !== e.value && this.setState({
                            value: e.value
                        })
                    }
                }, {
                    key: "onChange",
                    value: function(e) {
                        var t = this;
                        this.setState({
                            value: e.target.value
                        }, (function() {
                            return t.props.onChange(e.target.value)
                        }))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = Object.assign({}, this.props);
                        return delete t.onChange, React.createElement("textarea", Vf({}, t, this.state, {
                            onChange: function(t) {
                                t.persist(), e.onChange(t)
                            }
                        }))
                    }
                }]), t
            }(),
            Jf = function(e) {
                function t() {
                    return Gf(this, t), Wf(this, Qf(t).apply(this, arguments))
                }
                return Xf(t, React.Component), Hf(t, [{
                    key: "limitText",
                    value: function(e) {
                        var t = this;
                        return (e = CK.encoder.escape(e, !0)).split("\n").slice(0, this.props.rows || 1).map((function(e) {
                            return e.slice(0, t.props.cols || 12)
                        })).join("\n")
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.slot,
                            n = CK.data.parts[t];
                        return n && "text" === CK.Options.parts[n].type || this.props.alwaysOn ? React.createElement("div", null, this.props.label && React.createElement("div", null, this.props.label), React.createElement(Zf, {
                            autoFocus: UIState.compacting,
                            key: "textEntry" + t,
                            style: {
                                textAlign: "center",
                                maxWidth: "100%"
                            },
                            value: CK.getLabel(t),
                            placeholder: this.props.placeholder || "Your Text",
                            cols: 2 * (this.props.cols || 12),
                            rows: this.props.rows || 1,
                            onChange: function(n) {
                                return CK.setLabel(t, e.limitText(n))
                            }
                        })) : null
                    }
                }]), t
            }();

        function $f(e) {
            return ($f = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function eh(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function th(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function nh(e, t) {
            return !t || "object" !== $f(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function rh(e) {
            return (rh = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function oh(e, t) {
            return (oh = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ah = function(e) {
            function t() {
                return eh(this, t), nh(this, rh(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && oh(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "onClose",
                value: function() {
                    CK.character.changeSettings({
                        camera: void 0,
                        showOnly: void 0
                    })
                }
            }, {
                key: "onOpen",
                value: function() {
                    if (Ws.clipSettingsActive() || !CK.data.parts.base || 3001 === CK.data.parts.base) return null;
                    var e = CK.data.parts.mount ? "labelMount" : "label";
                    CK.character.changeSettings({
                        camera: e,
                        showOnly: {
                            base: !0,
                            baseRim: !0,
                            label: !0
                        }
                    })
                }
            }, {
                key: "renderPinned",
                value: function() {
                    var e = 3001 === CK.data.parts.base;
                    return React.createElement(React.Fragment, null, !e && Ws.clipSettingsActive() && React.createElement(Jf, {
                        label: "Back",
                        slot: "initiativeBack",
                        placeholder: "Back Text",
                        alwaysOn: !0,
                        rows: 2
                    }), !e && React.createElement(Jf, {
                        label: Ws.clipSettingsActive() ? "Front" : void 0,
                        slot: "label",
                        rows: 3
                    }))
                }
            }, {
                key: "render",
                value: function() {
                    return React.createElement(Ko, {
                        label: "Label",
                        pinned: this.renderPinned(),
                        onOpen: this.onOpen,
                        onClose: this.onClose
                    }, React.createElement(bt, {
                        label: "Label"
                    }))
                }
            }]) && th(n.prototype, r), o && th(n, o), t
        }();

        function ih(e) {
            return (ih = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function sh(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function ch(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function lh(e, t) {
            return !t || "object" !== ih(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function uh(e, t, n) {
            return (uh = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(e, t, n) {
                var r = function(e, t) {
                    for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = fh(e)););
                    return e
                }(e, t);
                if (r) {
                    var o = Object.getOwnPropertyDescriptor(r, t);
                    return o.get ? o.get.call(n) : o.value
                }
            })(e, t, n || e)
        }

        function fh(e) {
            return (fh = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function hh(e, t) {
            return (hh = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ph = VN.ReactRouter,
            dh = (ph.withRouter, ph.Redirect),
            mh = function(e) {
                function t() {
                    return sh(this, t), lh(this, fh(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && hh(e, t)
                }(t, e), n = t, (r = [{
                    key: "addToCart",
                    value: function() {
                        var e = this;
                        !CK.data.parts.base && this.constructor.getSelectedProduct() && CK.User.loggedIn ? Overlay.prompt("Your miniature doesn't have a base and won't stand up on its own. Are you sure you want to add it to your cart?", [{
                            label: "Yes",
                            onClick: function() {
                                Overlay.hidePrompt(), uh(fh(t.prototype), "addToCart", e).call(e)
                            }
                        }, {
                            label: "Cancel",
                            cancel: !0,
                            onClick: function() {
                                return Overlay.hidePrompt()
                            }
                        }], "Warning!") : uh(fh(t.prototype), "addToCart", this).call(this)
                    }
                }, {
                    key: "cheapestProduct",
                    value: function(e) {
                        CK.Products.getAvailable().reduce((function(e, t) {
                            return e[0] = void 0 === e[0] || t < e[0] ? t : e[0], e
                        }), [])
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this;
                        if (this.state.redirect) return React.createElement(dh, {
                            to: {
                                pathname: this.state.url
                            }
                        });
                        var t = this.constructor.getSelectedProduct();
                        return t && t.unavailable ? React.createElement("div", {
                            className: "shop-button-hitArea",
                            id: "add",
                            onClick: function(e) {
                                e.preventDefault(), Overlay.prompt("As a precautionary response to COVID-19, the facility that produces our " + t.display_name + " material has been temporarily closed. This material will be unavailable until further notice. Would you like to switch to our suggested alternative, standard plastic?", [{
                                    label: "Yes",
                                    onClick: function() {
                                        CK.tweak({
                                            physical: "white_plastic_28mm"
                                        }), Overlay.hidePrompt()
                                    }
                                }, {
                                    label: "Cancel",
                                    cancel: !0,
                                    onClick: function() {
                                        return Overlay.hidePrompt()
                                    }
                                }], t.display_name + " Unavailable")
                            }
                        }, React.createElement("div", {
                            className: "shop-button grayedOut"
                        }, "Add to Cart")) : React.createElement("div", {
                            className: "shop-button-hitArea clickable",
                            id: "add",
                            onClick: function(t) {
                                t.preventDefault(), e.addToCart()
                            }
                        }, React.createElement("div", {
                            className: "shop-button"
                        }, this.state.adding ? "Adding..." : "Add to Cart"))
                    }
                }, {
                    key: "getSelectedProduct",
                    value: function() {
                        return f.getSelectedProduct()
                    }
                }]) && ch(n.prototype, r), o && ch(n, o), t
            }(zo);

        function yh(e) {
            return (yh = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function vh(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function bh(e, t) {
            return !t || "object" !== yh(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function gh(e) {
            return (gh = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function wh(e, t) {
            return (wh = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var kh = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = bh(this, gh(t).call(this, e))).refresh = function() {
                    return n.forceUpdate()
                }, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && wh(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("sliderChanged", this.refresh)
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("sliderChanged", this.refresh)
                }
            }, {
                key: "render",
                value: function() {
                    var e, t, n, r, o = f.getSelectedProduct(),
                        a = 1;
                    CK.data.parameters && CK.data.parameters.quantity && (a = CK.data.parameters.quantity);
                    var i = function() {
                        return UIState.set({
                            mainSelection: "Material"
                        })
                    };
                    return o ? (e = "$" + (o.price * a).toFixed(2), t = o.old_price ? "$" + (o.old_price * a).toFixed(2) + " " : "", n = o.display_name_bitless, r = o.tag, React.createElement("div", {
                        className: "editorFooter",
                        onClick: i
                    }, React.createElement("div", {
                        className: "editorFooter-info"
                    }, React.createElement("div", {
                        className: "editorFooter-labelContainer"
                    }, r && React.createElement("div", {
                        className: "editorFooter-xl"
                    }, r), React.createElement("div", {
                        className: "editorFooter-label"
                    }, n)), React.createElement("div", {
                        className: "editorFooter-price"
                    }, React.createElement("del", null, t), e)), React.createElement(mh, null))) : React.createElement("div", {
                        className: "editorFooter",
                        onClick: i
                    }, !UIState.compact && React.createElement("div", {
                        className: "editorFooter-info"
                    }, React.createElement("div", {
                        className: "editorFooter-label"
                    }, "Select Material")), React.createElement(mh, null))
                }
            }]) && vh(n.prototype, r), o && vh(n, o), t
        }();

        function Sh(e) {
            return (Sh = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function _h(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ch(e, t) {
            return !t || "object" !== Sh(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Rh(e) {
            return (Rh = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Oh(e, t) {
            return (Oh = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Eh = VN.classNames,
            Ph = "Height units are in 'fantasy feet'. A non-linear scale tuned to provide relative options for all fictional races, while maintaining miniature readability, durability, and compatibility at tabletop scales.",
            xh = function(e) {
                function t(e) {
                    var n;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), (n = Ch(this, Rh(t).call(this, e))).state = {
                        hud: !1
                    }, n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Oh(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentWillUnmount",
                    value: function() {
                        b.disable()
                    }
                }, {
                    key: "toggleHUD",
                    value: function() {
                        this.state.hud ? (b.disable(), this.setState({
                            hud: !1
                        })) : (b.enable(), this.setState({
                            hud: !0
                        }))
                    }
                }, {
                    key: "tip",
                    value: function(e) {
                        CK.Events.emit("tip", [{
                            thumb: " ",
                            description: Ph,
                            label: "Height"
                        }, e])
                    }
                }, {
                    key: "tipPopup",
                    value: function() {
                        UIState.compact && Overlay.prompt(Ph)
                    }
                }, {
                    key: "render",
                    value: function() {
                        for (var e = this, t = [], n = b.minFeet, r = b.maxFeet, o = n; o <= r; o++) t.push({
                            label: o,
                            value: (o - n) / (r - n),
                            isRed: o >= b.xlFeet
                        });
                        var a = f.isExtraTallAvailable(),
                            i = a ? void 0 : b.xlSliderThreshold,
                            s = f.countXLParts(),
                            c = f.getSize(),
                            l = a ? s ? "XXL" : "XL" : "XL Unavailable";
                        return React.createElement("div", {
                            className: Eh("slider-container", "measureHeight", {
                                "measureHeight--showXL": !i,
                                "measureHeight--hasLimit": !!i
                            })
                        }, c ? React.createElement("div", {
                            className: "xl-tag"
                        }, c) : null, React.createElement("img", {
                            src: "/static/svg/measure-toggle.svg",
                            className: "measureHeight-toggle".concat(this.state.hud ? " selected" : ""),
                            onClick: function() {
                                return e.toggleHUD()
                            }
                        }), React.createElement("div", {
                            className: "measureHeight-help",
                            onMouseOut: function() {
                                return CK.Events.emit("tip")
                            },
                            onMouseOver: function(t) {
                                return e.tip(t)
                            },
                            onClick: function() {
                                return e.tipPopup()
                            }
                        }, "?"), React.createElement(Cl, {
                            label: "Height",
                            marks: t,
                            max: i,
                            limit: i,
                            limitText: l,
                            onSliderUpdate: function() {
                                return e.forceUpdate()
                            }
                        }))
                    }
                }]) && _h(n.prototype, r), o && _h(n, o), t
            }();

        function jh(e) {
            return (jh = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Th(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Mh(e) {
            return (Mh = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Kh(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function Ih(e, t) {
            return (Ih = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Nh = VN.classNames,
            Bh = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = Mh(t).call(this, e)) || "object" !== jh(o) && "function" != typeof o ? Kh(r) : o).state = {
                        details: !1
                    }, n.onChange = n.onChange.bind(Kh(n)), n.onAfterChange = n.onAfterChange.bind(Kh(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Ih(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "toggleDetails",
                    value: function() {
                        this.setState({
                            details: !this.state.details
                        })
                    }
                }, {
                    key: "getValue",
                    value: function() {
                        return (CK.getSlider("weighTorso") + CK.getSlider("weightUpper") + CK.getSlider("weightLower")) / 3
                    }
                }, {
                    key: "onChange",
                    value: function(e) {
                        CK.character.previewSliders({
                            weightUpper: e,
                            weighTorso: e,
                            weightLower: e
                        })
                    }
                }, {
                    key: "onAfterChange",
                    value: function(e) {
                        CK.tweak({
                            sliders: {
                                weightUpper: e,
                                weighTorso: e,
                                weightLower: e
                            }
                        })
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this;
                        return React.createElement("div", {
                            className: Nh("slider-container", "slider--withDetails", {
                                isOpen: this.state.details
                            })
                        }, React.createElement("img", {
                            src: "/static/svg/controls.svg",
                            className: "slider-toggle",
                            onClick: function() {
                                return e.toggleDetails()
                            }
                        }), React.createElement("div", {
                            className: "slider-wrapper"
                        }, React.createElement("a", {
                            className: "label"
                        }, "Weight"), React.createElement(At, {
                            value: this.getValue(),
                            onChange: function(t) {
                                return e.onChange(t)
                            },
                            onAfterChange: function(t) {
                                return e.onAfterChange(t)
                            }
                        })), React.createElement("div", {
                            className: "slider-details"
                        }, React.createElement(Cl, {
                            name: "weightUpper",
                            label: "Arms",
                            onSliderUpdate: function() {
                                return e.forceUpdate()
                            },
                            small: !0
                        }), React.createElement(Cl, {
                            name: "weighTorso",
                            label: "Upper",
                            onSliderUpdate: function() {
                                return e.forceUpdate()
                            },
                            small: !0
                        }), React.createElement(Cl, {
                            name: "weightLower",
                            label: "Lower",
                            onSliderUpdate: function() {
                                return e.forceUpdate()
                            },
                            small: !0
                        })))
                    }
                }]) && Th(n.prototype, r), o && Th(n, o), t
            }();

        function Ah(e) {
            return (Ah = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Lh(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Uh(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Dh(e, t) {
            return !t || "object" !== Ah(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Fh(e) {
            return (Fh = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function zh(e, t) {
            return (zh = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Vh = VN.classNames,
            Gh = function(e) {
                function t() {
                    return Lh(this, t), Dh(this, Fh(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && zh(e, t)
                }(t, e), n = t, (r = [{
                    key: "toggleDetails",
                    value: function() {
                        this.state.details && this.onAfterChange((CK.getSlider("armsL") + CK.getSlider("armsR")) / 2), this.setState({
                            details: !this.state.details
                        })
                    }
                }, {
                    key: "onChange",
                    value: function(e) {
                        CK.character.previewSliders({
                            armsL: e,
                            armsR: e
                        })
                    }
                }, {
                    key: "onAfterChange",
                    value: function(e) {
                        CK.tweak({
                            sliders: {
                                armsL: e,
                                armsR: e
                            }
                        })
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this;
                        if (CK.modded.hideSliders.armsR) return null;
                        var t = this.state.details || CK.getSlider("armsL") !== CK.getSlider("armsR");
                        return React.createElement("div", {
                            className: Vh("slider-container", "slider--withDetails", {
                                isOpen: t
                            })
                        }, React.createElement("img", {
                            src: "/static/svg/controls.svg",
                            className: "slider-toggle",
                            onClick: function() {
                                return e.toggleDetails()
                            }
                        }), React.createElement("div", {
                            className: "slider-wrapper"
                        }, React.createElement("a", {
                            className: "label"
                        }, "Arm Length"), React.createElement(At, {
                            value: (CK.getSlider("armsL") + CK.getSlider("armsR")) / 2,
                            onChange: function(t) {
                                return e.onChange(t)
                            },
                            onAfterChange: function(t) {
                                return e.onAfterChange(t)
                            }
                        })), React.createElement("div", {
                            className: "slider-details"
                        }, React.createElement(Cl, {
                            name: "armsL",
                            label: "Left",
                            onSliderUpdate: function() {
                                return e.forceUpdate()
                            },
                            small: !0
                        }), React.createElement(Cl, {
                            name: "armsR",
                            label: "Right",
                            onSliderUpdate: function() {
                                return e.forceUpdate()
                            },
                            small: !0
                        })))
                    }
                }]) && Uh(n.prototype, r), o && Uh(n, o), t
            }(Bh);

        function qh(e) {
            return (qh = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Hh(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Wh(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Qh(e, t) {
            return !t || "object" !== qh(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Xh(e) {
            return (Xh = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Yh(e, t) {
            return (Yh = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Zh = function(e) {
            function t() {
                return Hh(this, t), Qh(this, Xh(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Yh(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.character.changeSettings({
                        camera: "xl"
                    }), CK.environment.scaleVisualizer.show()
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.character.changeSettings({
                        camera: void 0
                    }), CK.environment.scaleVisualizer.hide()
                }
            }, {
                key: "render",
                value: function() {
                    return React.createElement(React.Fragment, null, React.createElement(xh, null), React.createElement(Cl, {
                        name: "headSize",
                        label: "Head"
                    }), React.createElement(Bh, null), React.createElement(Cl, {
                        label: "Posture"
                    }), React.createElement(Cl, {
                        label: "Build"
                    }), Nn.a.released("upperScale") && React.createElement(Cl, {
                        label: "Upper Scale",
                        name: "upper"
                    }), Nn.a.released("armLength") && React.createElement(Gh, null), React.createElement(Cl, {
                        label: "Muscularity"
                    }), React.createElement(Cl, {
                        label: "Bust"
                    }), React.createElement(Cl, {
                        label: "Waist"
                    }), React.createElement(Cl, {
                        label: "Belly"
                    }), React.createElement(Cl, {
                        label: "Curves"
                    }), React.createElement(Cl, {
                        label: "Booty"
                    }))
                }
            }]) && Wh(n.prototype, r), o && Wh(n, o), t
        }();

        function Jh(e) {
            return (Jh = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function $h(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function ep(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function tp(e, t) {
            return !t || "object" !== Jh(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function np(e) {
            return (np = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function rp(e, t) {
            return (rp = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var op = function(e) {
            function t() {
                return $h(this, t), tp(this, np(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && rp(e, t)
            }(t, e), n = t, o = [{
                key: "getRandomPartSet",
                value: function(e) {
                    var t = e[Math.floor(Math.random() * e.length)];
                    return Object.assign({}, t.parts)
                }
            }], (r = [{
                key: "random",
                value: function() {
                    var e, n = Ls.getAvailable(this.props),
                        r = Math.floor(5 * Math.random());
                    if (r >= 1) {
                        e = t.getRandomPartSet(n);
                        var o = t.getRandomPartSet(n),
                            a = Object.assign({}, e, o);
                        for (var i in a) {
                            var s = 1 === r ? Math.random() > .5 ? o : e : t.getRandomPartSet(n);
                            if (e[i] = s[i], e[i]) {
                                var c = CK.Options.getPart(e[i]);
                                "L" === c.side && (e[c.slotR] = c.link)
                            }
                        }
                    } else e = t.getRandomPartSet(n);
                    CK.tweak({
                        parts: e
                    })
                }
            }, {
                key: "render",
                value: function() {
                    var e = this,
                        t = Ls.getOptions(this.props);
                    return t.unshift(new He({
                        thumb: "/static/herobundles/config/dice.png",
                        onClick: function() {
                            return e.random()
                        },
                        label: "Random",
                        description: "A randomized outfit or combination of outfits.",
                        thumbSize: [120, 240]
                    })), React.createElement(ut, {
                        alwaysResults: !0
                    }, t.map((function(e, t) {
                        var n = e.originalData ? e.originalData.config_id : t + "index";
                        return React.createElement(et, {
                            option: e,
                            key: n,
                            originalData: e.originalData
                        })
                    })))
                }
            }]) && ep(n.prototype, r), o && ep(n, o), t
        }(Ls);

        function ap(e) {
            return (ap = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ip(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function sp(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function cp(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function lp(e, t) {
            return !t || "object" !== ap(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function up(e) {
            return (up = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function fp(e, t) {
            return (fp = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var hp = function(e) {
            function t() {
                return sp(this, t), lp(this, up(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && fp(e, t)
            }(t, React.Component), n = t, o = [{
                key: "hasContent",
                value: function(e) {
                    return !!CK.data.getAvailableSubPoses(e.slot).length
                }
            }], (r = [{
                key: "render",
                value: function() {
                    var e = this.props.slot,
                        t = CK.data.getAvailableSubPoses(e).map((function(t) {
                            var n = CK.data.limitedPoses[e] && CK.data.limitedPoses[e] === t.pose_id;
                            return new He({
                                thumb: CK.Paths.getConfigThumb(t.name),
                                label: t.desc,
                                description: t.config_desc,
                                onClick: function() {
                                    n ? CK.tweak({
                                        poses: ip({}, e, void 0)
                                    }) : CK.tweak({
                                        poses: ip({}, e, t.pose_id)
                                    })
                                },
                                selected: n,
                                mirrorThumb: CK.data.mirrorPose,
                                thumbSize: [t.thumb_x || 120, t.thumb_y || 120],
                                tagLabel: t.tagLabel,
                                tagColor: t.tagColor,
                                displayOrder: t.display_order,
                                originalData: t
                            })
                        })).sort((function(e, t) {
                            return e.display_order < t.display_order ? -1 : 1
                        }));
                    return React.createElement("div", null, React.createElement(Ts, {
                        options: t,
                        key: "Poses"
                    }))
                }
            }]) && cp(n.prototype, r), o && cp(n, o), t
        }();

        function pp(e) {
            return (pp = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function dp(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function mp(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function yp(e, t) {
            return !t || "object" !== pp(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function vp(e) {
            return (vp = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function bp(e, t) {
            return (bp = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var gp = function(e) {
            function t() {
                return dp(this, t), yp(this, vp(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && bp(e, t)
            }(t, React.Component), n = t, o = [{
                key: "enabled",
                value: function(e) {
                    var t = CK.modded.parts[e];
                    if (t) return t.slot.endsWith("D") && (t = CK.Options.getPartBySlotAndName(t.unsidedSlot + "R", t.name)), t && !t.keywords.disablePosing
                }
            }], (r = [{
                key: "componentDidMount",
                value: function() {
                    var e = this._getEnabledChilden(),
                        t = UIState.slotSelected;
                    e.find((function(e) {
                        return e.props.label === t
                    })) || (t = "Head"), t !== UIState.slotSelected && (EX.Kit.deselect(), UIState.set({
                        slotSelected: t
                    }))
                }
            }, {
                key: "render",
                value: function() {
                    var e = this._getEnabledChilden(),
                        t = UIState.slotSelected;
                    e.find((function(e) {
                        return e.props.label === t
                    })) || (t = "Head");
                    var n = e.find((function(e) {
                        return e.props.label === t
                    }));
                    return React.createElement(React.Fragment, null, n)
                }
            }, {
                key: "_getEnabledChilden",
                value: function() {
                    return React.Children.toArray(this.props.children).filter((function(e) {
                        return !e.props.disabled && t.enabled(e.props.slot)
                    }))
                }
            }]) && mp(n.prototype, r), o && mp(n, o), t
        }();

        function wp(e) {
            return (wp = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function kp(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Sp(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function _p(e, t) {
            return !t || "object" !== wp(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Cp(e) {
            return (Cp = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Rp(e, t) {
            return (Rp = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Op = VN.classNames,
            Ep = function(e) {
                function t() {
                    return kp(this, t), _p(this, Cp(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Rp(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "click",
                    value: function(e) {
                        UIState.set({
                            slotSelected: e.label
                        }), Zt.on && e.slot && e.boneID ? EX.Kit.select(e.slot, e.boneID) : EX.Kit.deselect()
                    }
                }, {
                    key: "addMenu",
                    value: function(e) {
                        for (var t = this, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [1, 1], r = this.getHeight(e.slot); !this.gridFree(n, r);) n[0]++, n[0] > 5 && (n[1]++, n[0] = 1);
                        var o = e.thumb ? e.thumb + ".png" : CK.Paths.getPartThumb(CK.modded.parts[e.slot]),
                            a = !!CK.data.mirroredPose,
                            i = UIState.slotSelected || "Head";
                        this.grid[n.join(",")] = React.createElement("div", {
                            style: {
                                gridColumn: a ? 6 - n[0] : n[0],
                                gridRow: n[1] + " / span " + r
                            },
                            key: e.label
                        }, React.createElement("img", {
                            className: Op("expert-posing-thumb", {
                                mirrored: a && !e.mirrored || e.mirrored && !a
                            }, {
                                selected: e.label === i
                            }),
                            src: o,
                            onClick: e.onClick || function() {
                                return t.click(e)
                            }
                        }));
                        for (var s = 1; s < r; s++) this.grid[[n[0], n[1] + s].join(",")] = null
                    }
                }, {
                    key: "gridFree",
                    value: function(e, t) {
                        for (var n = 0; n < t; n++) {
                            var r = e[1] + n;
                            if (void 0 !== this.grid[e[0] + "," + r]) return !1
                        }
                        return !0
                    }
                }, {
                    key: "mirrorCoord",
                    value: function(e) {
                        return [1 === e[0] ? 5 : 4, e[1]]
                    }
                }, {
                    key: "addMirrorMenu",
                    value: function(e, t) {
                        for (var n = this.getHeight(e.slot), r = this.getHeight(e.slot), o = n > r ? n : r, a = [1, 1]; !this.gridFree(a, o) || !this.gridFree(this.mirrorCoord(a), o);) a[0] > 1 ? (a[1]++, a[0] = 1) : a[0]++;
                        this.addMenu(e, this.mirrorCoord(a)), this.addMenu(t, a)
                    }
                }, {
                    key: "getHeight",
                    value: function(e) {
                        var t = CK.modded.parts[e];
                        if (e.endsWith("D") && (t = CK.Options.getPartBySlotAndName(t.unsidedSlot + "R", t.name)), !t || !t.thumbSize) return 1;
                        var n = t.thumbSize;
                        return n[1] / n[0] || 1
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.content || React.Children.toArray(this.props.children).filter((function(e) {
                                return !e.props.disabled && gp.enabled(e.props.slot)
                            })),
                            n = [],
                            r = [],
                            o = [],
                            a = {},
                            i = {};
                        t.map((function(e) {
                            var o = e.props.slot;
                            if (o.startsWith("bodyUpper")) n.push(e);
                            else if (o.endsWith("R")) {
                                var s = o.slice(0, -1) + "L",
                                    c = t.find((function(e) {
                                        return e.props.slot === s
                                    }));
                                c && (a[s] = e, i[o] = c, r.push(c))
                            }
                        })), t.map((function(e) {
                            var t = e.props.slot;
                            t.startsWith("bodyUpper") || t in a || t in i || o.push(e)
                        })), this.grid = {}, n.map((function(t) {
                            e.addMenu(t.props, [t.props.column, t.props.row])
                        })), r.map((function(t) {
                            var n = a[t.props.slot];
                            e.addMirrorMenu(t.props, n.props)
                        })), o.map((function(t) {
                            e.addMenu(t.props)
                        }));
                        var s = Object.values(this.grid),
                            c = 1;
                        Object.keys(this.grid).map((function(e) {
                            if (e) {
                                var t = parseInt(e.split(",")[1]);
                                t > c && (c = t)
                            }
                        }));
                        for (var l = [], u = 0; u < c; u++) l.push("1fr");
                        return React.createElement("div", {
                            className: "expert-posing-grid",
                            style: {
                                gridTemplateRows: l.join(" ")
                            }
                        }, s)
                    }
                }]) && Sp(n.prototype, r), o && Sp(n, o), t
            }();

        function Pp(e) {
            return (Pp = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function xp(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function jp(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Tp(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Mp(e, t) {
            return !t || "object" !== Pp(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Kp(e) {
            return (Kp = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Ip(e, t) {
            return (Ip = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Np = [-.2, .2];

        function Bp(e, t) {
            var n = CK.display.meshes[e];
            if (!n) return Np;
            var r = n.geometry.locators;
            if (r) {
                var o = r.offset_min || r.locator_offset_min,
                    a = r.offset_max || r.locator_offset_max;
                if (void 0 !== o && void 0 !== a) return Lp.isFlipped(e, t) ? [o.position.y + .11, a.position.y - .11] : [.11 - a.position.y, -o.position.y - .11]
            }
        }

        function Ap(e, t, n) {
            var r = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3],
                o = CK.modded.parts[e];
            if (!o) return null;
            if (o = o.source, ["pistol", "crossbow", "rifle", "familiar", "shield", "disablePosing"].find((function(e) {
                    return o.source.keywords[e]
                }))) return null;
            var a = e.endsWith("D");
            if (a && o.source.keywords.disablePosingD) return null;
            var i = a || o.keywords.bookPose || o.keywords.xAxisPosing,
                s = e.endsWith("L"),
                c = !!Bp(e, n),
                l = "flipI" + e.slice(1),
                u = CK.data.custom[l],
                f = !o.keywords.disableRotate,
                h = !!o.keywords.spell,
                p = f,
                d = 1;
            o.keywords.xAxisPosing ? d = 0 : o.keywords.zAxisPosing && (d = 2);
            var m = new RK.Quaternion,
                y = (new RK.Quaternion).setFromUnitVectors(new RK.Vec3(1, 0, 0), new RK.Vec3(0, 1, 0)),
                v = new RK.Vec3(0, 0, 0);
            v.setComponent(d, 1);
            var b = (new RK.Quaternion).setFromUnitVectors(new RK.Vec3(1, 0, 0), v),
                g = .999 * Math.PI,
                w = .98 * Math.PI,
                k = {
                    x: [-g, g],
                    y: [-w, w],
                    z: [-w, w],
                    order: "swingtwist",
                    orient: b.toSimple()
                },
                S = {
                    x: [-g, g],
                    y: [Math.PI, -Math.PI],
                    z: [Math.PI, -Math.PI],
                    order: "swingtwist",
                    orient: m.toSimple()
                },
                _ = {
                    x: [-g, g],
                    y: [Math.PI, -Math.PI],
                    z: [Math.PI, -Math.PI],
                    order: "swingtwist",
                    orient: y.toSimple()
                },
                C = null,
                R = new RK.Quaternion(0, 0, 0, 1);
            u && R.set(0, 0, 1, 0), f && ((C = h ? k : i ? S : _).preRotate = R.toSimple());
            var O = function() {
                    var t = CK.display.meshes[e],
                        r = CK.display.getBoneFromID(t, n);
                    if (r) {
                        var o = t.skeleton || r.skin;
                        return o ? o.getQtn(r).multiply(R) : (new RK.Quaternion).fromArray(r.poses.rot).multiply(R)
                    }
                    console.error("Could not find bone", n, "in", t)
                },
                E = function() {
                    return !u
                },
                P = CK.Paths.getPartThumb(CK.Options.getPartBySlotAndName(s ? "itemL" : "itemR", o.name)),
                x = React.createElement(React.Fragment, null, f && React.createElement(hn, {
                    slot: e,
                    boneID: n,
                    coneLimit: C,
                    getOrig: O,
                    getCanClear: E
                }), c && "itemD" !== e && React.createElement(qt, {
                    slot: e,
                    label: "Grip Position",
                    boneID: n,
                    axis: "y",
                    transform: "position",
                    limit: function() {
                        return Bp(e, n) || Np
                    }
                }), React.createElement(Lp, {
                    boneID: n,
                    slot: e
                }));
            return r ? React.createElement(gn, {
                label: t,
                slot: e,
                boneID: n,
                mirrored: s,
                thumb: P,
                transformer: p,
                key: t,
                coneLimit: C
            }, x) : x
        }
        var Lp = function(e) {
            function t() {
                return jp(this, t), Mp(this, Kp(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Ip(e, t)
            }(t, React.Component), n = t, o = [{
                key: "hasChanged",
                value: function(e) {
                    var t = e.slot,
                        n = e.boneID,
                        r = !!(CK && CK.data && CK.data.transforms && CK.data.transforms[t] && CK.data.transforms[t][n] && CK.data.transforms[t][n].flp),
                        o = this.getFlipName(e),
                        a = !!CK.data.custom[o];
                    return r || a
                }
            }, {
                key: "getClearData",
                value: function(e) {
                    var t = e.slot,
                        n = e.boneID,
                        r = this.getFlipName(e);
                    CK.tweak({
                        transforms: xp({}, t, xp({}, n, {
                            qtn: {
                                x: void 0,
                                y: void 0,
                                z: void 0
                            },
                            pos: {
                                x: void 0,
                                y: void 0,
                                z: void 0
                            },
                            flp: {
                                z: void 0
                            },
                            flo: xp({
                                x: void 0,
                                z: void 0
                            }, "z", void 0)
                        })),
                        custom: xp({}, r, void 0)
                    })
                }
            }, {
                key: "getFlipName",
                value: function(e) {
                    return "flipI" + e.slot.slice(1)
                }
            }, {
                key: "isFlipped",
                value: function(e, n) {
                    var r = t.getFlipName({
                            slot: e
                        }),
                        o = CK.data.custom[r];
                    return !!(CK && CK.data && CK.data.transforms && CK.data.transforms[e] && CK.data.transforms[e][n] && CK.data.transforms[e][n].flp) || o
                }
            }], (r = [{
                key: "flip",
                value: function() {
                    var e = this.props,
                        n = e.slot,
                        r = e.boneID,
                        o = t.getFlipName(this.props),
                        a = CK.display.meshes[n],
                        i = n.endsWith("D"),
                        s = CK.display.getBoneFromID(a, r),
                        c = !!(CK && CK.data && CK.data.transforms && CK.data.transforms[n] && CK.data.transforms[n][r] && CK.data.transforms[n][r].flp),
                        l = CK.data.custom[o],
                        u = !(c || l),
                        f = {
                            x: void 0,
                            y: void 0,
                            z: void 0
                        };
                    if (i && u) {
                        var h = CK.display.getBoneFromID(a, 502),
                            p = CK.display.getBoneFromID(a, 504),
                            d = (new RK.Vec3).setFromMatrixPosition(h.matrixWorld),
                            m = (new RK.Vec3).setFromMatrixPosition(p.matrixWorld);
                        f = d.add(m).multiplyScalar(.5);
                        var y = (new RK.Matrix4).getInverse(s.matrixWorld);
                        f.applyMatrix4(y), f = f.toSimple()
                    }
                    var v = {
                            transforms: xp({}, n, xp({}, r, {
                                flp: u ? {
                                    z: 1
                                } : void 0,
                                flo: f
                            }))
                        },
                        b = !!Bp(n, r) && "itemD" !== n;
                    if (l) {
                        var g = CK.data.transforms && CK.data.transforms[n] && CK.data.transforms[n][r] && CK.data.transforms[n][r].qtn;
                        if (!g || void 0 === g.w) {
                            if (!s) return console.error("Could not flip because bone", r, "not found in", a);
                            g = a.skeleton ? a.skeleton.getQtn(s).toSimple() : (new RK.Quaternion).fromArray(s.poses.rot).toSimple()
                        }
                        var w = (new RK.Quaternion).copy(g),
                            k = new RK.Quaternion(0, 0, 1, 0);
                        w.multiply(k), v.custom = xp({}, o, void 0), v.transforms[n][r].qtn = w.toSimple(), v.transforms[n][r].pos = {
                            x: void 0,
                            y: void 0,
                            z: void 0
                        }
                    } else if (b) {
                        var S = v.transforms[n][r];
                        void 0 === S.pos && (S.pos = {}), S.pos.y = -s.position.y
                    }
                    CK.tweak(v)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this,
                        n = this.props,
                        r = n.slot,
                        o = n.boneID;
                    if (CK.modded.parts[r].keywords.disableFlip) return null;
                    var a = t.getFlipName(this.props),
                        i = !!(CK && CK.data && CK.data.transforms && CK.data.transforms[r] && CK.data.transforms[r][o] && CK.data.transforms[r][o].flp),
                        s = !!CK.data.custom[a];
                    return React.createElement(gn, {
                        className: "label",
                        hasChanged: function() {
                            return CK.data.custom[a]
                        },
                        key: r + a
                    }, React.createElement("p", null, React.createElement("input", {
                        type: "checkbox",
                        checked: i || s,
                        onChange: function() {
                            return e.flip()
                        }
                    }), "Reversed"))
                }
            }]) && Tp(n.prototype, r), o && Tp(n, o), t
        }();

        function Up(e) {
            return (Up = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Dp(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Fp(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function zp(e, t) {
            return !t || "object" !== Up(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Vp(e) {
            return (Vp = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Gp(e, t) {
            return (Gp = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var qp = function(e) {
            function t() {
                return Dp(this, t), zp(this, Vp(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Gp(e, t)
            }(t, e), n = t, (r = [{
                key: "render",
                value: function() {
                    var e, t = this,
                        n = (this.props.content || React.Children.toArray(this.props.children).filter((function(e) {
                            return !e.props.disabled && gp.enabled(e.props.slot)
                        }))).sort((function(e, t) {
                            return e.props.sort === t.props.sort ? 0 : void 0 === e.props.sort || e.props.sort > t.props.sort ? 1 : -1
                        }));
                    CK.data.mirroredPose && n.reverse();
                    var r = n.map((function(n) {
                        var r = n.props,
                            o = r.label,
                            a = r.slot,
                            i = n.props.thumb ? n.props.thumb + "-sml.png" : CK.Paths.getPartThumb(CK.modded.parts[a]),
                            s = n.props.onClick || function() {
                                return t.click(n.props)
                            },
                            c = new He({
                                thumb: i,
                                label: o,
                                onClick: s,
                                mirrorThumb: n.props.mirrored
                            });
                        return (UIState.slotSelected || "Head") === o && (e = c), c
                    }));
                    return React.createElement(Ta, {
                        big: this.props.big,
                        options: r,
                        selected: e
                    })
                }
            }]) && Fp(n.prototype, r), o && Fp(n, o), t
        }(Ep);

        function Hp(e) {
            var t = e.slot,
                n = e.column,
                r = e.row,
                o = e.thumb,
                a = e.shoulderBoneID,
                i = e.armBoneID,
                s = e.elbowBones,
                c = e.elbowBoneID,
                l = e.sort,
                u = e.label;
            return 60 === CK.data.limitedPoses.main ? null : React.createElement(gn, {
                label: u,
                slot: t,
                column: n,
                row: r,
                thumb: o,
                boneID: i,
                sort: l,
                key: u
            }, React.createElement(hn, {
                label: "Shoulder",
                slot: t,
                boneID: i
            }), React.createElement(hn, {
                label: "Elbow",
                slot: t,
                boneID: c,
                disableTransformer: !0,
                getOrig: function(e) {
                    var t = e.skeleton.getQtn(e.skeleton.getBoneByName(s[0])),
                        n = e.skeleton.getQtn(e.skeleton.getBoneByName(s[1]));
                    return t.clone().slerp(n, .5)
                }
            }), React.createElement(hn, {
                label: "Clavicle",
                slot: t,
                boneID: a
            }))
        }
        var Wp = {
            r: function(e) {
                return Hp(Object.assign({
                    slot: "bodyUpper",
                    label: "Right Arm",
                    column: 2,
                    row: 2,
                    thumb: "/static/img/pose/arm-r",
                    shoulderBoneID: 123,
                    armBoneID: 99,
                    elbowBones: ["main_armR_03_104_bind_jnt", "main_armR_02_101_bind_jnt"],
                    elbowBoneID: 104,
                    sort: 2
                }, e))
            },
            l: function(e) {
                return Hp(Object.assign({
                    slot: "bodyUpper",
                    label: "Left Arm",
                    column: 4,
                    row: 2,
                    thumb: "/static/img/pose/arm-l",
                    shoulderBoneID: 36,
                    armBoneID: 12,
                    elbowBones: ["main_armL_02_014_bind_jnt", "main_armL_03_017_bind_jnt"],
                    elbowBoneID: 17,
                    sort: 4
                }, e))
            }
        };

        function Qp(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Xp(e) {
            if (e) {
                var t = e.poseModifier[e.poseModifier.length - 1];
                return t ? t + "_pose" : console.error("Why no pose modifier for item part", e.name) || "unknown_pose"
            }
            return "hand_pose"
        }

        function Yp(e) {
            var t = e.label,
                n = e.slot,
                r = e.column,
                o = e.row,
                a = e.thumb,
                i = e.boneID,
                s = e.sort,
                c = e.side;
            if (60 === CK.data.limitedPoses.main) return null;
            var l = CK.display.meshes[n],
                u = CK.data.parts["item" + c] in {
                    1235: 1,
                    1237: 1,
                    1236: 1,
                    1238: 1
                };
            if (l) {
                var f = CK.display.meshes[n].skeleton.skeletonSlot,
                    h = !u && CK.modded.parts["item" + c];
                return (Ls.getOptions({
                    category: Xp(h)
                }) || []).map((function(e) {
                    var t = e.originalData.name,
                        n = CK.data.custom.handPoses && CK.data.custom.handPoses[f] && CK.data.custom.handPoses[f][c] === t;
                    e.onClick = function() {
                        if (n) CK.tweak({
                            custom: {
                                handPoses: Qp({}, f, Qp({}, c, void 0))
                            }
                        });
                        else {
                            var e = {
                                custom: {
                                    handPoses: Qp({}, f, Qp({}, c, t))
                                }
                            };
                            u && (e.parts = Qp({}, "item" + c, void 0)), CK.tweak(e)
                        }
                    }, e.selected = n, e.thumbSize = [64, 64]
                })), React.createElement(gn, {
                    label: t,
                    slot: n,
                    column: r,
                    row: o,
                    thumb: a,
                    boneID: i,
                    transformer: !0,
                    sort: s,
                    key: t
                }, React.createElement(hn, {
                    slot: n,
                    boneID: i
                }), !1)
            }
        }
        var Zp = {
            r: function(e) {
                return Yp(Object.assign({
                    boneID: 149,
                    slot: "bodyUpper",
                    label: "Right Wrist",
                    thumb: "/static/img/pose/hand-r",
                    sort: 1,
                    column: 2,
                    row: 3,
                    side: "R"
                }, e))
            },
            l: function(e) {
                return Yp(Object.assign({
                    boneID: 63,
                    slot: "bodyUpper",
                    label: "Left Wrist",
                    thumb: "/static/img/pose/hand-l",
                    sort: 5,
                    column: 4,
                    row: 3,
                    side: "L"
                }, e))
            }
        };

        function Jp(e, t, n, r, o, a, i) {
            var s = [];
            return e.map((function(e, r) {
                qt.getBone(n, e) && s.push(React.createElement(hn, {
                    key: r + t,
                    slot: n,
                    boneID: e,
                    label: r + 1
                }))
            })), s.length ? React.createElement(gn, {
                label: t,
                slot: n,
                boneID: e[0],
                column: r,
                row: o,
                thumb: a,
                sort: i
            }, s) : null
        }

        function $p(e) {
            return ($p = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ed(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function td(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function nd(e, t) {
            return !t || "object" !== $p(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function rd(e) {
            return (rd = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function od(e, t) {
            return (od = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ad = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = nd(this, rd(t).call(this, e))).refresh = function() {
                    return n.forceUpdate()
                }, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && od(e, t)
            }(t, e), n = t, o = [{
                key: "hasChanged",
                value: function(e) {
                    var t = e.slot,
                        n = e.boneID,
                        r = CK.data.transforms[t];
                    return r && n in r && r[n].scl
                }
            }, {
                key: "getClearData",
                value: function(e) {
                    return {
                        transforms: ed({}, e.slot, ed({}, e.boneID, {
                            scl: void 0
                        }))
                    }
                }
            }], (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("characterFinishedChanging", this.refresh)
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("characterFinishedChanging", this.refresh)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this,
                        n = this.props,
                        r = n.slot,
                        o = n.label,
                        a = n.boneID,
                        i = n.min,
                        s = n.max;
                    i || (i = 1), s || (s = 2);
                    var c = CK.data.transforms[r],
                        l = t.hasChanged(this.props),
                        u = CK.display.meshes[r];
                    if (!u) return null;
                    var f = CK.display.getBoneFromID(u, a);
                    if (!f) return React.createElement("div", null, r, " does not have bone ", a);
                    var h = l ? c[a].scl.x : f.scale.x,
                        p = function(e) {
                            return ed({}, r, ed({}, a, {
                                scl: {
                                    x: e,
                                    y: e,
                                    z: e
                                }
                            }))
                        };
                    return React.createElement("div", {
                        className: "slider-wrapper"
                    }, !this.props.hideLabel && React.createElement("a", {
                        className: "label"
                    }, o), React.createElement(At, {
                        min: i,
                        max: s,
                        value: h,
                        onChange: function(t) {
                            t >= i && t <= s ? CK.character.previewTransforms(p(t)) : console.warn("Setting slider ", o, "to out of bounds value", t), e.props.onChange && e.props.onChange(), e.refresh()
                        },
                        onAfterChange: function(t, n) {
                            n ? CK.tweak(qt.getClearData(e.props)) : CK.tweak({
                                transforms: p(t)
                            }), e.props.afterChange && e.props.afterChange()
                        }
                    }))
                }
            }]) && td(n.prototype, r), o && td(n, o), t
        }(qt);

        function id(e) {
            return (id = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function sd(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function cd(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function ld(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ud(e) {
            return (ud = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function fd(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function hd(e, t) {
            return (hd = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var pd = VN.classNames,
            dd = ["hornSideR", "hornSideL", "hornFrontR", "hornFrontL", "hornBackR", "hornBackL", "hornFront", "hornForehead", "hornTop", "hornBack"],
            md = ["Horn Right", "Horn Left", "Horn Front Right", "Horn Front Left", "Horn Back Right", "Horn Back Left", "Horn Front", "Horn Forehead", "Horn Top", "Horn Back"],
            yd = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = ud(t).call(this, e)) || "object" !== id(o) && "function" != typeof o ? fd(r) : o).switchLink = n.switchLink.bind(fd(n)), n.onChange = n.onChange.bind(fd(n)), n.afterChange = n.afterChange.bind(fd(n)), n.onClear = n.onClear.bind(fd(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && hd(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        var e = this,
                            n = this.props,
                            r = n.slot,
                            o = n.label,
                            a = null;
                        if (this.isValidForLinking()) {
                            var i = t.linked,
                                s = pd("sprite-creationkit-ui-sprites", "link-button", "linked-part", {
                                    "creationkit-ui-sprites-icon-linkedpart-linked": i
                                }, {
                                    "creationkit-ui-sprites-icon-linkedpart-unlinked": !i
                                });
                            a = React.createElement("a", {
                                className: s,
                                style: {
                                    cursor: "pointer",
                                    paddingBottom: 20
                                },
                                onClick: function() {
                                    return e.switchLink()
                                }
                            })
                        }
                        var c = .999 * Math.PI,
                            l = .98 * Math.PI,
                            u = new RK.Quaternion;
                        this.props.mirrored && u.set(0, 0, 1, 0);
                        var f = {
                            x: [-c, c],
                            y: [-l, l],
                            z: [-l, l],
                            order: "swingtwist",
                            orient: u.toSimple()
                        };
                        return React.createElement(gn, {
                            key: r,
                            label: o,
                            slot: r,
                            sort: 37,
                            boneID: "".concat(r, "_pivot_jnt"),
                            mirrored: this.props.mirrored,
                            transformer: !0,
                            onClear: this.onClear
                        }, a, React.createElement(hn, {
                            slot: r,
                            boneID: "".concat(r, "_pivot_jnt"),
                            coneLimit: f,
                            onChange: this.onChange,
                            afterChange: this.afterChange
                        }), React.createElement(ad, {
                            slot: r,
                            boneID: "".concat(r, "_pivot_jnt"),
                            max: 1.8,
                            min: 1,
                            label: "Scale",
                            onChange: this.onChange,
                            afterChange: this.afterChange
                        }))
                    }
                }, {
                    key: "componentDidMount",
                    value: function() {
                        t.linked = this.isValidForLinking() && this.isSymmetrical(), CK.Events.on("gizmoAfterChange", this.afterChange), eb()
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        CK.Events.off("gizmoAfterChange", this.afterChange), tb()
                    }
                }, {
                    key: "isSymmetrical",
                    value: function() {
                        var e = this._getMirrorItems();
                        if (e) {
                            var t = cd(e, 3),
                                n = (t[0], t[1], t[2]),
                                r = this.props.slot,
                                o = r + "_pivot_jnt",
                                a = CK.display.meshes[r];
                            if (a) {
                                var i = CK.display.getBoneFromID(a, o),
                                    s = (new RK.Quaternion).fromArray(i.poses.rot),
                                    c = (new RK.Quaternion).fromArray(n.poses.rot),
                                    l = i.quaternion.clone(),
                                    u = n.quaternion.clone(),
                                    f = s.inverse().multiply(l),
                                    h = c.inverse().multiply(u);
                                h.y *= -1, h.z *= -1;
                                var p = f.dot(h) < 0 ? -1 : 1;
                                f.x -= h.x * p, f.y -= h.y * p, f.z -= h.z * p, f.w -= h.w * p;
                                var d = i.scale.clone().sub(n.scale);
                                return f.length() + d.length() < .001
                            }
                        }
                    }
                }, {
                    key: "getLinked",
                    value: function() {
                        return this.isValidForLinking() && t.linked && this.isSymmetrical()
                    }
                }, {
                    key: "isValidForLinking",
                    value: function() {
                        var e = this.props.slot;
                        if (e.endsWith("R") || e.endsWith("L")) {
                            var t = e.slice(0, -1),
                                n = CK.modded.parts[t + "L"],
                                r = CK.modded.parts[t + "R"];
                            return n && r && n.link === r.id
                        }
                    }
                }, {
                    key: "switchLink",
                    value: function() {
                        t.linked = !t.linked, this.afterChange(), this.forceUpdate()
                    }
                }, {
                    key: "onChange",
                    value: function() {
                        var e = this._mirrorUpdate(CK.character.data.modded);
                        e && CK.character.previewTransforms(e)
                    }
                }, {
                    key: "afterChange",
                    value: function() {
                        var e = this._mirrorUpdate(CK.modded);
                        e && CK.tweak({
                            transforms: e
                        })
                    }
                }, {
                    key: "onClear",
                    value: function(e) {
                        var t = this.props.slot,
                            n = t + "_pivot_jnt";
                        if (e.transforms && e.transforms[t] && e.transforms[t][n] && this.getLinked()) {
                            var r = this._getMirrorItems();
                            if (r) {
                                var o = cd(r, 2),
                                    a = o[0],
                                    i = o[1],
                                    s = {
                                        transforms: sd({}, a, sd({}, i, {}))
                                    };
                                s.transforms[a][i] = e.transforms[t][n], CK.tweak(s)
                            }
                        }
                    }
                }, {
                    key: "_mirrorUpdate",
                    value: function(e, n) {
                        if (t.linked || n) {
                            var r = this._getMirrorItems();
                            if (r) {
                                var o = cd(r, 3),
                                    a = o[0],
                                    i = o[1],
                                    s = o[2],
                                    c = this.props.slot,
                                    l = c + "_pivot_jnt",
                                    u = CK.display.meshes[c];
                                if (u) {
                                    var f = CK.display.getBoneFromID(u, l),
                                        h = (new RK.Quaternion).fromArray(f.poses.rot),
                                        p = (new RK.Quaternion).fromArray(s.poses.rot),
                                        d = e.transforms;
                                    if (d[c] && d[c][l]) {
                                        var m = sd({}, a, sd({}, i, {})),
                                            y = d[c][l],
                                            v = m[a][i];
                                        if (y.qtn) {
                                            var b = (new RK.Quaternion).copy(y.qtn),
                                                g = h.inverse().multiply(b);
                                            g.y *= -1, g.z *= -1;
                                            var w = p.multiply(g);
                                            v.qtn = w.toSimple()
                                        }
                                        return y.scl && (v.scl = JSON.parse(JSON.stringify(y.scl))), m
                                    }
                                }
                            }
                        }
                    }
                }, {
                    key: "_getMirrorItems",
                    value: function() {
                        var e = this.props.slot,
                            t = ["R", "L"],
                            n = t.map((function(t) {
                                return e.endsWith(t)
                            })).reduce((function(e, t, n) {
                                return t ? n : e
                            }), -1);
                        if (-1 !== n) {
                            var r = t[(n + 1) % 2],
                                o = this.props.slot.slice(0, -1) + r,
                                a = o + "_pivot_jnt",
                                i = CK.display.meshes[e];
                            if (i) {
                                var s = CK.display.getBoneFromID(i, a);
                                if (s) return [o, a, s]
                            }
                        }
                    }
                }]) && ld(n.prototype, r), o && ld(n, o), t
            }();

        function vd(e) {
            return (vd = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function bd(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function gd(e, t) {
            return !t || "object" !== vd(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function wd(e) {
            return (wd = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function kd(e, t) {
            return (kd = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        yd.linked = !0;
        for (var Sd = [546, 547, 548, 549, 550, 551, 552, 553, 554, 555, 556, 557], _d = [533, 534, 535, 536, 537, 538, 539, 540, 541, 542, 543, 544], Cd = [500, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 515, 516, 517, 518], Rd = [], Od = 500; Od < 551; Od++) Rd.push(Od);
        var Ed = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = gd(this, wd(t).call(this, e))).refresh = function() {
                    return n.forceUpdate()
                }, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && kd(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "componentDidMount",
                value: function() {
                    CK.Events.on("CharacterFinishedChanging", this.refresh), CK.Events.next("extras-loaded", this.refresh)
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.Events.off("CharacterFinishedChanging", this.refresh), CK.Events.off("extras-loaded", this.refresh)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.props.content ? gp : UIState.compact || !CK.ClientSpecs.specs.cssGrid ? qp : Ep;
                    if (!window.EX) return this.props.content ? React.createElement("div", {
                        className: "expert-spinner"
                    }, React.createElement("img", {
                        src: "/static/svg/spinner.svg",
                        className: "svg-spinner"
                    })) : null;
                    var t = !!CK.display.meshes.itemD,
                        n = CK.display.armHasIK() && !!CK.display.meshes.mount,
                        r = CK.display.armHasIK(!0) && !!CK.display.meshes.mount,
                        o = CK.modded.parts.hair,
                        a = !(!o || !["poseable", "ponytailJoints", "braidJoints", "looseHairJoints"].find((function(e) {
                            return !!o.keywords[e]
                        }))),
                        i = Sd[0],
                        s = a && (o.keywords.ponytailJoints || qt.getBone("hair", i)),
                        c = !(!CK.modded.parts.back || !CK.modded.parts.back.keywords.cape),
                        l = 10246 === CK.data.parts.face,
                        u = 10795 === CK.data.parts.face,
                        f = !!CK.data.parts.itemTail,
                        h = .999 * Math.PI,
                        p = Math.PI / 2,
                        d = new RK.Vec3(0, 1, 0),
                        m = new RK.Vec3(0, -1, 0),
                        y = new RK.Vec3(0, 0, 1),
                        v = {
                            x: [-h, h],
                            y: [p, -p],
                            z: [p, -p],
                            order: "swingtwist",
                            orient: (new RK.Quaternion).setFromUnitVectors(d, m).toSimple()
                        },
                        b = {
                            x: [-h, h],
                            y: [p, -p],
                            z: [p, -p],
                            order: "swingtwist",
                            orient: (new RK.Quaternion).setFromUnitVectors(d, y).toSimple()
                        };
                    return (new RK.Quaternion).setFromUnitVectors(new RK.Vec3(0, 1, 0), new RK.Vec3(1, 0, 0)).toSimple(), React.createElement(e, {
                        menuOnly: this.props.menu
                    }, Ap("item0R", "Right Handheld A", 198), Ap("item1R", "Right Handheld C", 198), Ap("item0L", "Left Handheld A", 194), Ap("item1L", "Left Handheld C", 194), t ? [Ap("itemD", "Handheld", 501)] : [Ap("itemR", "Right Handheld", 198), Ap("itemL", "Left Handheld", 194), !n && Wp.r(), !r && Wp.l(), Wp.r({
                        slot: "bodyUpper0",
                        column: 1,
                        row: 1,
                        sort: 9,
                        label: "Right Arm A"
                    }), Wp.l({
                        slot: "bodyUpper0",
                        column: 5,
                        row: 1,
                        sort: 10,
                        label: "Left Arm A"
                    }), Wp.r({
                        slot: "bodyUpper1",
                        column: 1,
                        row: 3,
                        sort: 11,
                        label: "Right Arm C"
                    }), Wp.l({
                        slot: "bodyUpper1",
                        column: 5,
                        row: 3,
                        sort: 12,
                        label: "Left Arm C"
                    }), !n && Zp.r(), !r && Zp.l(), Zp.r({
                        label: "Right Wrist A",
                        slot: "bodyUpper0",
                        column: 1,
                        row: 2,
                        sort: 15
                    }), Zp.l({
                        label: "Left Wrist A",
                        slot: "bodyUpper0",
                        column: 5,
                        row: 2,
                        sort: 16
                    }), Zp.r({
                        label: "Right Wrist C",
                        slot: "bodyUpper1",
                        column: 1,
                        row: 4,
                        sort: 17
                    }), Zp.l({
                        label: "Left Wrist C",
                        slot: "bodyUpper1",
                        column: 5,
                        row: 4,
                        sort: 18
                    })], t && !1, React.createElement(gn, {
                        label: "Right Pauldron",
                        slot: "shouldersR",
                        transformer: !0,
                        boneID: 201,
                        sort: 20
                    }, React.createElement(hn, {
                        slot: "shouldersR",
                        boneID: 201
                    }), React.createElement(qt, {
                        slot: "shouldersR",
                        label: "Up",
                        boneID: 201,
                        axis: "y",
                        transform: "position",
                        disableMark: !0
                    }), React.createElement(qt, {
                        slot: "shouldersR",
                        label: "Side",
                        boneID: 201,
                        axis: "x",
                        transform: "position",
                        disableMark: !0
                    }), React.createElement(qt, {
                        slot: "shouldersR",
                        label: "Forward",
                        boneID: 201,
                        axis: "z",
                        transform: "position",
                        disableMark: !0
                    })), React.createElement(gn, {
                        label: "Left Pauldron",
                        slot: "shouldersL",
                        mirrored: !0,
                        transformer: !0,
                        boneID: 197,
                        sort: 21
                    }, React.createElement(hn, {
                        slot: "shouldersL",
                        boneID: 197
                    }), React.createElement(qt, {
                        slot: "shouldersL",
                        label: "Up",
                        boneID: 197,
                        axis: "y",
                        transform: "position",
                        disableMark: !0
                    }), React.createElement(qt, {
                        slot: "shouldersL",
                        label: "Side",
                        boneID: 197,
                        axis: "x",
                        transform: "position",
                        disableMark: !0
                    }), React.createElement(qt, {
                        slot: "shouldersL",
                        label: "Forward",
                        boneID: 197,
                        axis: "z",
                        transform: "position",
                        disableMark: !0
                    })), React.createElement(gn, {
                        label: "Right Wing",
                        slot: "wingsR",
                        mirrored: !0,
                        sort: 23,
                        boneID: 500,
                        transformer: !0
                    }, React.createElement(hn, {
                        slot: "wingsR",
                        boneID: 500
                    })), React.createElement(gn, {
                        label: "Left Wing",
                        slot: "wingsL",
                        sort: 24,
                        boneID: 500,
                        transformer: !0
                    }, React.createElement(hn, {
                        slot: "wingsL",
                        boneID: 500
                    })), Jp(Cd, "Tail", "tail"), Jp(Cd, "Tail 2", "tail0"), Jp(Cd, "Tail 3", "tail1"), Jp(Cd, "Tail 4", "tail2"), Jp(Cd, "Tail 5", "tail3"), Jp(Cd, "Tail 6", "tail4"), Jp(Cd, "Tail 7", "tail5"), Jp(Cd, "Tail 8", "tail6"), Jp(Cd, "Tail 9", "tail7"), Jp([91, 93, 95], "Head", "bodyUpper", 3, 1, "/static/img/pose/head", 6), !n && !r && Jp([177, 180, 184], "Torso", "bodyUpper", 3, 2, "/static/img/pose/torso", 7), Jp([501, 502, 503, 504, 505, 506, 507], "Beard", "beard"), a && Jp(s ? Sd : _d, "Hair", "hair"), c && Jp([500, 501, 502, 503, 504, 505, 506, 507], "Back", "back"), l && Jp([500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512], "Trunk", "face"), u && Jp(Rd, "Tentacles", "face"), (l || u) && Ap("itemTrunk", "Trunk Item", "trunk_itemSnap_513_bind_jnt"), f && Ap("itemTail", "Tail Item", "tail_itemSnap_523_bind_jnt"), React.createElement(gn, {
                        label: "Right Back Item",
                        slot: "backItemR",
                        mirrored: !0,
                        sort: 27,
                        boneID: "backItemR_transform_jnt",
                        transformer: !0
                    }, React.createElement(hn, {
                        slot: "backItemR",
                        boneID: "backItemR_transform_jnt",
                        coneLimit: b
                    })), React.createElement(gn, {
                        label: "Left Back Item",
                        slot: "backItemL",
                        sort: 28,
                        boneID: "backItemL_transform_jnt",
                        transformer: !0
                    }, React.createElement(hn, {
                        slot: "backItemL",
                        boneID: "backItemL_transform_jnt",
                        coneLimit: v
                    })), dd.map((function(e, t) {
                        var n = md[t];
                        return React.createElement(yd, {
                            key: e,
                            slot: e,
                            boneID: e + "_pivot_jnt",
                            label: n,
                            mirrored: e.endsWith("L")
                        })
                    })), !1, !1, kn(), kn("baseItemB", "Base Item B"))
                }
            }]) && bd(n.prototype, r), o && bd(n, o), t
        }();

        function Pd(e) {
            return (Pd = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function xd(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function jd(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Td(e, t) {
            return !t || "object" !== Pd(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Md(e) {
            return (Md = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Kd(e, t) {
            return (Kd = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Id = function(e) {
            function t() {
                return xd(this, t), Td(this, Md(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Kd(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "renderBtn",
                value: function(e) {
                    return React.createElement(et, {
                        key: e,
                        option: new He({
                            thumb: "static/svg/arms/arms-".concat(e || 0, ".svg"),
                            onClick: function() {
                                return CK.tweak({
                                    custom: {
                                        arms: e
                                    }
                                })
                            },
                            selected: CK.data.custom.arms === e
                        })
                    })
                }
            }, {
                key: "render",
                value: function() {
                    return Nn.a.released("extraArms") ? React.createElement("div", {
                        style: {
                            display: "flex",
                            flexDirection: "row",
                            justifyContent: "center",
                            padding: 5
                        }
                    }, this.renderBtn(void 0), this.renderBtn(1), this.renderBtn(2)) : null
                }
            }]) && jd(n.prototype, r), o && jd(n, o), t
        }();

        function Nd(e) {
            return (Nd = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Bd(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Ad(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ld(e, t) {
            return !t || "object" !== Nd(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Ud(e) {
            return (Ud = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Dd(e, t) {
            return (Dd = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Fd = [{
                slug: "instrument",
                label: "Instruments"
            }, {
                slug: "shortblade",
                label: "Short Blades"
            }, {
                slug: "sword",
                label: "Long Blades"
            }, {
                slug: "axe",
                label: "Axes"
            }, {
                slug: "blunt",
                label: "Blunt Weapons"
            }, {
                slug: "polearm",
                label: "Polearms"
            }, {
                slug: "staff",
                label: "Staffs"
            }, {
                slug: "shield",
                label: "Shields"
            }, {
                slug: "bow",
                label: "Bows & Arrows"
            }, {
                slug: "quiver",
                label: "Quivers"
            }, {
                slug: "crossbow",
                label: "Crossbows"
            }, {
                slug: "pistol",
                label: "Pistols"
            }, {
                slug: "rifle",
                label: "Long Guns"
            }, {
                slug: "miscellaneous",
                label: "Other"
            }],
            zd = function(e) {
                function t() {
                    return Bd(this, t), Ld(this, Ud(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Dd(e, t)
                }(t, React.Component), n = t, o = [{
                    key: "getSelected",
                    value: function() {
                        return UIState.backItemFilter || "instrument"
                    }
                }], (r = [{
                    key: "render",
                    value: function() {
                        var e, n = t.getSelected(),
                            r = Fd.map((function(t) {
                                var r = new He({
                                    label: t.label,
                                    onClick: function() {
                                        return UIState.set({
                                            backItemFilter: t.slug
                                        })
                                    },
                                    thumb: "/static/svg/items/".concat(t.slug, ".svg")
                                });
                                return t.slug === n && (e = r), r
                            }));
                        return React.createElement(Ta, {
                            options: r,
                            selected: e
                        })
                    }
                }]) && Ad(n.prototype, r), o && Ad(n, o), t
            }();

        function Vd(e) {
            return (Vd = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Gd(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function qd(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Hd(e, t) {
            return !t || "object" !== Vd(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Wd(e) {
            return (Wd = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Qd(e, t) {
            return (Qd = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        zd.filters = Fd;
        var Xd = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = Hd(this, Wd(t).call(this, e))).state = {
                    activeMenu: "back"
                }, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Qd(e, t)
            }(t, React.Component), n = t, o = [{
                key: "hasNew",
                value: function() {
                    return bt.hasNew({
                        slot: "itemR"
                    })
                }
            }], (r = [{
                key: "renderNav",
                value: function() {
                    var e = this,
                        t = [{
                            slug: "back",
                            label: "Back Items"
                        }];
                    return t.push.apply(t, Gd(si.getNavItems(this.props.slot, "R")).concat(Gd(si.getNavItems(this.props.slot, "L")))), React.createElement(Ro, {
                        nav: t,
                        onItemClick: function(t) {
                            return e.setState({
                                activeMenu: t
                            })
                        }
                    })
                }
            }, {
                key: "render",
                value: function() {
                    var e = zd.filters,
                        t = zd.getSelected(),
                        n = e.find((function(e) {
                            return e.slug === t
                        })),
                        r = this.state.activeMenu,
                        o = "back" === r;
                    return React.createElement(Ko, {
                        pinned: React.createElement(React.Fragment, null, " ", this.renderNav(), " ", o && React.createElement(zd, null), "  "),
                        pinnedNoPadding: !!UIState.compact,
                        hasFilter: !0
                    }, o ? React.createElement(qi, {
                        label: n.label,
                        slot: "backItem",
                        hasClear: !0,
                        test: function(e) {
                            return e.keywords[n.slug] && !e.keywords.backExclude
                        },
                        clearTransforms: !0
                    }) : si.renderContent("backItem", r))
                }
            }]) && qd(n.prototype, r), o && qd(n, o), t
        }();

        function Yd(e) {
            return (Yd = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Zd(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Jd(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function $d(e, t, n) {
            return t && Jd(e.prototype, t), n && Jd(e, n), e
        }

        function em(e, t) {
            return !t || "object" !== Yd(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function tm(e) {
            return (tm = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function nm(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    writable: !0,
                    configurable: !0
                }
            }), t && rm(e, t)
        }

        function rm(e, t) {
            return (rm = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var om = function(e) {
                function t() {
                    return Zd(this, t), em(this, tm(t).apply(this, arguments))
                }
                return nm(t, React.Component), $d(t, [{
                    key: "render",
                    value: function() {
                        var e = im.filters,
                            t = im.getSelected(),
                            n = e.find((function(e) {
                                return e.slug === t
                            }));
                        return React.createElement(Ko, {
                            pinned: React.createElement(im, null),
                            pinnedNoPadding: !!UIState.compact,
                            hasFilter: !0
                        }, React.createElement(bt, {
                            label: n.label,
                            slot: this.props.slot,
                            test: function(e) {
                                return e.keywords[n.slug] && !e.keywords.trunkExclude
                            },
                            clearTransforms: !0
                        }))
                    }
                }]), t
            }(),
            am = [{
                slug: "instrument",
                label: "Instruments"
            }, {
                slug: "shortblade",
                label: "Short Blades"
            }, {
                slug: "sword",
                label: "Long Blades"
            }, {
                slug: "axe",
                label: "Axes"
            }, {
                slug: "blunt",
                label: "Blunt Weapons"
            }, {
                slug: "polearm",
                label: "Polearms"
            }, {
                slug: "staff",
                label: "Staffs"
            }, {
                slug: "shield",
                label: "Shields"
            }, {
                slug: "bow",
                label: "Bows & Arrows"
            }, {
                slug: "crossbow",
                label: "Crossbows"
            }, {
                slug: "pistol",
                label: "Pistols"
            }, {
                slug: "rifle",
                label: "Long Guns"
            }, {
                slug: "miscellaneous",
                label: "Other"
            }],
            im = function(e) {
                function t() {
                    return Zd(this, t), em(this, tm(t).apply(this, arguments))
                }
                return nm(t, React.Component), $d(t, [{
                    key: "render",
                    value: function() {
                        var e, n = t.getSelected(),
                            r = am.map((function(t) {
                                var r = new He({
                                    label: t.label,
                                    onClick: function() {
                                        return UIState.set({
                                            backItemFilter: t.slug
                                        })
                                    },
                                    thumb: "/static/svg/items/".concat(t.slug, ".svg")
                                });
                                return t.slug === n && (e = r), r
                            }));
                        return React.createElement(Ta, {
                            options: r,
                            selected: e
                        })
                    }
                }], [{
                    key: "getSelected",
                    value: function() {
                        return UIState.backItemFilter || "instrument"
                    }
                }]), t
            }();
        im.filters = am;
        var sm = function(e) {
            var t = e.isOn,
                n = e.handleToggle,
                r = e.onColor,
                o = e.insetLabel;
            return React.createElement(React.Fragment, null, React.createElement("input", {
                checked: t,
                onChange: n,
                className: "toggle-switch-checkbox",
                id: "toggle-switch-new",
                type: "checkbox"
            }), React.createElement("label", {
                style: {
                    background: t && r
                },
                className: "toggle-switch-label",
                htmlFor: "toggle-switch-new"
            }, o, React.createElement("span", {
                className: "toggle-switch-button"
            })))
        };

        function cm(e) {
            return (cm = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function lm(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function um(e) {
            return (um = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function fm(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function hm(e, t) {
            return (hm = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var pm = VN.classNames,
            dm = [{
                hexCode: "#C33F38",
                name: "red"
            }, {
                hexCode: "#C77E40",
                name: "orange"
            }, {
                hexCode: "#D0B600",
                name: "yellow"
            }, {
                hexCode: "#68CF53",
                name: "green"
            }, {
                hexCode: "#4683CD",
                name: "blue"
            }, {
                hexCode: "#743ACB",
                name: "purple"
            }, {
                hexCode: "#333",
                name: "black"
            }, {
                hexCode: "white",
                name: "white"
            }],
            mm = VN.axios,
            ym = function(e) {
                function t(e) {
                    var n, r, o;
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this;
                    var a = (n = !(o = um(t).call(this, e)) || "object" !== cm(o) && "function" != typeof o ? fm(r) : o).getLS("dice-isTransparent", !1),
                        i = n.getLS("dice-activeColor", dm[0]);
                    return n.state = {
                        activeColor: i,
                        isTransparent: a,
                        adding: UIState.getRequest("addDiceToBasket") && UIState.getRequest("addDiceToBasket").isPending()
                    }, n.addToCart = n.addToCart.bind(fm(n)), n.addFailed = n.addFailed.bind(fm(n)), n.addSucceeded = n.addSucceeded.bind(fm(n)), n.setColor = n.setColor.bind(fm(n)), n.setTransparent = n.setTransparent.bind(fm(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && hm(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "getLS",
                    value: function(e, t) {
                        return localStorage.getItem(e) ? JSON.parse(localStorage.getItem(e)) : t
                    }
                }, {
                    key: "addFailed",
                    value: function(e, t) {
                        e && e.response && 302 == e.response.status ? this.setState({
                            redirect: !0,
                            url: e.response.data.url,
                            adding: !1
                        }) : (Ln.a.prompt("Failed to add dice to cart. Try logging in or refreshing the page.", [{
                            label: "OK",
                            onClick: function() {
                                Ln.a.hideOverlay()
                            }
                        }]), this.setState({
                            adding: !1
                        }))
                    }
                }, {
                    key: "addSucceeded",
                    value: function(e, t) {
                        this.setState({
                            adding: !1
                        }), Reporting.addedDiceToCart(this.analyticsName), Promise.resolve(UIState.basketQuantityPromise()).then(UIState.showOverlay = "cart")
                    }
                }, {
                    key: "componentDidMount",
                    value: function() {
                        var e = this;
                        this.showDice(), this.isPending() && (this.setState({
                            adding: !0,
                            messages: ""
                        }), Promise.resolve(UIState.getRequest("addDiceToBasket")).then((function(t) {
                            e.setState({
                                adding: !1,
                                messages: ""
                            })
                        })))
                    }
                }, {
                    key: "isPending",
                    value: function() {
                        return !(!UIState.getRequest("addDiceToBasket") || !UIState.getRequest("addDiceToBasket").isPending())
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        CK.environment.scaleVisualizer.switch("d20", "d20", "d20"), CK.environment.scaleVisualizer.hide()
                    }
                }, {
                    key: "showDice",
                    value: function() {
                        CK.environment.scaleVisualizer.show(), CK.environment.scaleVisualizer.switch("allDice", this.state.activeColor.name, this.opacityString)
                    }
                }, {
                    key: "addToCart",
                    value: function(e, t) {
                        var n = this;
                        if (CK.User.loggedIn) {
                            if (!this.isPending()) {
                                this.setState({
                                    adding: !0
                                });
                                var r = CK.Options.productsByName[this.productName].p_id,
                                    o = new FormData;
                                o.append("quantity", 1), o.append("dice_id", 1), o.append("pk", r);
                                var a = UIState.QueryablePromise(mm({
                                    method: "post",
                                    url: "/basket/add/" + r + "/json/",
                                    data: o
                                }));
                                UIState.addRequest("addDiceToBasket", a)
                            }
                            Promise.resolve(UIState.getRequest("addDiceToBasket")).then((function() {
                                e()
                            })).catch((function(e) {
                                t(e)
                            }))
                        } else t({}, "not logged in"), Ln.a.showLogin((function() {
                            return n.addToCart(e, t)
                        }))
                    }
                }, {
                    key: "renderColor",
                    value: function(e) {
                        var t = this;
                        return React.createElement("div", {
                            className: pm("colorPick-color", {
                                isActive: this.state.activeColor.name === e.name
                            }),
                            style: {
                                backgroundColor: e.hexCode
                            },
                            onClick: function() {
                                return t.setColor(e)
                            },
                            key: e.name
                        })
                    }
                }, {
                    key: "setColor",
                    value: function(e) {
                        this.setState({
                            activeColor: e
                        }), localStorage.setItem("dice-activeColor", JSON.stringify(e))
                    }
                }, {
                    key: "setTransparent",
                    value: function(e) {
                        this.setState({
                            isTransparent: e
                        }), localStorage.setItem("dice-isTransparent", e)
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this;
                        this.showDice();
                        var t = CK.Options.productsByName[this.productName];
                        return React.createElement("div", {
                            className: pm("diceContainer", {
                                desktop: !UIState.compact
                            })
                        }, React.createElement("div", {
                            className: "diceLabels"
                        }, React.createElement("div", {
                            className: "colorLabel"
                        }, " Color ", !UIState.compact && "- " + this.colorName), UIState.compact && React.createElement("div", {
                            className: pm("transparent", {
                                clear: "Clear" == this.colorName
                            }, {
                                black: "black" == this.state.activeColor.name
                            })
                        }, React.createElement(sm, {
                            isOn: this.state.isTransparent,
                            onColor: this.state.activeColor.hexCode,
                            handleToggle: function() {
                                return e.setTransparent(!e.state.isTransparent)
                            },
                            insetLabel: this.opacityString
                        }))), React.createElement("div", {
                            className: "colorPick"
                        }, React.createElement("div", {
                            className: "colorPick-content"
                        }, dm.map((function(t) {
                            return e.renderColor(t)
                        }))), UIState.compact && React.createElement("div", {
                            className: "diceImagePlaceholder"
                        }, React.createElement("img", {
                            src: "/static/img/dice/400/".concat(this.filename, ".png"),
                            srcSet: "\n                                    /static/img/dice/400/".concat(this.filename, ".png 400w,\n                                    /static/img/dice/800/").concat(this.filename, ".png 800w\n                                "),
                            alt: "Set of dice",
                            className: "diceImage"
                        }))), !UIState.compact && React.createElement(React.Fragment, null, React.createElement("div", {
                            className: pm("transparent", {
                                clear: "Clear" == this.colorName
                            }, {
                                black: "black" == this.state.activeColor.name
                            })
                        }, React.createElement(sm, {
                            isOn: this.state.isTransparent,
                            onColor: this.state.activeColor.hexCode,
                            handleToggle: function() {
                                return e.setTransparent(!e.state.isTransparent)
                            },
                            insetLabel: "Clear" == this.colorName ? "Clear" : this.opacityString
                        })), React.createElement("div", {
                            className: "diceImagePlaceholder"
                        }, React.createElement("img", {
                            src: "/static/img/dice/400/".concat(this.filename, ".png"),
                            srcSet: "\n                                    /static/img/dice/400/".concat(this.filename, ".png 400w,\n                                    /static/img/dice/800/").concat(this.filename, ".png 800w\n                                "),
                            alt: "Set of dice",
                            className: "diceImage"
                        }))), React.createElement("a", {
                            href: "#",
                            className: "diceButton",
                            onClick: function(t) {
                                t.preventDefault(), e.addToCart(e.addSucceeded, e.addFailed)
                            }
                        }, this.state.adding ? React.createElement("span", null, "Adding...") : React.createElement("span", null, "Add to Order")), React.createElement("span", {
                            className: "extraPriceInfo"
                        }, this.colorName, " ", this.opacityString, " Dice: ", this.oldPrice && React.createElement("span", {
                            className: "oldPrice"
                        }, this.oldPrice), " $", t.price))
                    }
                }, {
                    key: "opacityString",
                    get: function() {
                        return this.state.isTransparent ? "translucent" : "opaque"
                    }
                }, {
                    key: "colorName",
                    get: function() {
                        return "white" == this.state.activeColor.name && this.state.isTransparent ? "Clear" : this.state.activeColor.name
                    }
                }, {
                    key: "analyticsName",
                    get: function() {
                        return CK.Options.productsByName[this.productName].display_name
                    }
                }, {
                    key: "oldPrice",
                    get: function() {
                        var e = CK.Options.productsByName[this.productName];
                        if (e.old_price > e.price) return "$" + Number(e.old_price).toFixed(2)
                    }
                }, {
                    key: "productName",
                    get: function() {
                        return "dice_".concat(this.opacityString, "_").concat(this.state.activeColor.name)
                    }
                }, {
                    key: "filename",
                    get: function() {
                        return "dice_".concat(this.opacityString, "_").concat(this.state.activeColor.name)
                    }
                }]) && lm(n.prototype, r), o && lm(n, o), t
            }();

        function vm(e) {
            return (vm = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function bm(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function gm(e) {
            return (gm = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function wm(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function km(e, t) {
            return (km = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Sm = VN.classNames,
            _m = VN.axios,
            Cm = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = gm(t).call(this, e)) || "object" !== vm(o) && "function" != typeof o ? wm(r) : o).products = n.getProductsOrderedByPrice(), n.state = {
                        adding: !1,
                        selectedProduct: n.products[0],
                        quantity: 1,
                        messages: ""
                    }, n.addFailed = n.addFailed.bind(wm(n)), n.addSucceeded = n.addSucceeded.bind(wm(n)), n.changeQuantity = n.changeQuantity.bind(wm(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && km(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentDidMount",
                    value: function() {
                        var e = this;
                        this.isPending() && (this.setState({
                            adding: !0,
                            messages: ""
                        }), Promise.resolve(UIState.getRequest("addGiftCardToBasket")).then((function(t) {
                            e.setState({
                                adding: !1,
                                messages: ""
                            })
                        })))
                    }
                }, {
                    key: "isPending",
                    value: function() {
                        return !(!UIState.getRequest("addGiftCardToBasket") || !UIState.getRequest("addGiftCardToBasket").isPending())
                    }
                }, {
                    key: "getProductsOrderedByPrice",
                    value: function() {
                        var e = CK.Options.products;
                        return (e = e.filter((function(e) {
                            return "card" == e.product_type || e.slug.startsWith("giftcard")
                        }))).sort((function(e, t) {
                            return e.price - t.price
                        }))
                    }
                }, {
                    key: "addGiftCardToBasket",
                    value: function(e, t) {
                        var n = this;
                        if (CK.User.loggedIn) {
                            if (!this.isPending()) {
                                var r = new FormData;
                                r.append("quantity", t), r.append("card_id", 1), r.append("pk", e);
                                var o = UIState.QueryablePromise(_m({
                                    method: "post",
                                    url: "/basket/add/" + e + "/json/",
                                    data: r
                                }));
                                UIState.addRequest("addGiftCardToBasket", o), Promise.resolve(UIState.getRequest("addGiftCardToBasket")).then((function() {
                                    return n.addSucceeded()
                                })).catch((function() {
                                    return n.addFailed()
                                }))
                            }
                        } else Ln.a.showLogin((function() {
                            return n.addGiftCardToBasket(e, t)
                        }))
                    }
                }, {
                    key: "addFailed",
                    value: function() {
                        this.setState({
                            adding: !1,
                            messages: "Whoops! Our gift card system is offline for maintenance, sorry for the inconvenience. Please contact customer support: support@charmsmith.com or try back later!"
                        }), UIState.updateBasketQuantity()
                    }
                }, {
                    key: "addSucceeded",
                    value: function() {
                        this.setState({
                            adding: !1,
                            messages: "",
                            selectedProduct: this.products[0]
                        }), Promise.resolve(UIState.basketQuantityPromise()).then(UIState.showOverlay = "cart")
                    }
                }, {
                    key: "addToCart",
                    value: function() {
                        var e = this;
                        this.state.adding || (this.state.selectedProduct && this.state.selectedProduct.p_id ? CK.User.loggedIn ? (this.setState({
                            adding: !0
                        }), Reporting.addedGiftCardToCart(this.state.selectedProduct.price, this.state.quantity), this.addGiftCardToBasket(this.state.selectedProduct.p_id, this.state.quantity)) : Ln.a.showLogin((function() {
                            return e.addToCart()
                        })) : console.log("getSelectedProduct failed?!"))
                    }
                }, {
                    key: "selectProduct",
                    value: function(e) {
                        this.setState({
                            selectedProduct: e
                        })
                    }
                }, {
                    key: "changeQuantity",
                    value: function(e) {
                        var t = Math.floor(Math.max(Math.min(e.target.value, 99), 1));
                        this.setState({
                            quantity: t
                        })
                    }
                }, {
                    key: "renderAmount",
                    value: function(e) {
                        var t = this,
                            n = Sm("giftcard-amount", {
                                isActive: this.state.selectedProduct.price == e.price
                            }),
                            r = Number(e.price).toFixed(0);
                        return React.createElement("div", {
                            key: r,
                            className: n,
                            onClick: function() {
                                return t.selectProduct(e)
                            }
                        }, "$", r)
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this;
                        return React.createElement(React.Fragment, null, React.createElement("img", {
                            className: "giftcard-image",
                            src: "/static/img/giftcard/giftcard.png",
                            alt: ""
                        }), React.createElement("div", {
                            className: "giftcardContainer"
                        }, React.createElement("div", {
                            className: "giftcard-title"
                        }, "Purchase Digital Gift Card"), React.createElement("div", {
                            className: "giftcard-amounts"
                        }, this.products.map((function(t) {
                            return e.renderAmount(t)
                        }))), React.createElement("div", {
                            className: "giftcard-row"
                        }, React.createElement("label", {
                            htmlFor: "giftcard-quantity"
                        }, "Quantity"), CK.sizing.compact() ? React.createElement("select", {
                            style: {
                                backgroundColor: "#484848"
                            },
                            onChange: this.changeQuantity,
                            id: "giftcard-quantity",
                            className: "giftcard-quantity",
                            type: "number"
                        }, React.createElement("option", {
                            value: 1
                        }, "1"), React.createElement("option", {
                            value: 2
                        }, "2"), React.createElement("option", {
                            value: 3
                        }, "3"), React.createElement("option", {
                            value: 4
                        }, "4")) : React.createElement("input", {
                            id: "giftcard-quantity",
                            className: "giftcard-quantity",
                            type: "number",
                            min: "1",
                            max: "99",
                            value: this.state.quantity,
                            onChange: this.changeQuantity
                        })), React.createElement("a", {
                            href: "#",
                            className: "giftcard-button",
                            onClick: function(t) {
                                t.preventDefault(), e.addToCart()
                            }
                        }, this.state.adding ? "Adding..." : "Add to Order ".concat(this.state.quantity, " x $").concat(this.state.selectedProduct.price)), React.createElement("div", {
                            className: "giftcard-link",
                            onClick: function() {
                                window.open("/faq#gift", "_blank")
                            }
                        }, "Learn more about Digital Gift Cards")))
                    }
                }]) && bm(n.prototype, r), o && bm(n, o), t
            }();

        function Rm(e) {
            return (Rm = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Om(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Em(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Pm(e, t) {
            return !t || "object" !== Rm(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function xm(e) {
            return (xm = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function jm(e, t) {
            return (jm = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Tm = function(e) {
            function t() {
                return Om(this, t), Pm(this, xm(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && jm(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "renderBtn",
                value: function(e) {
                    return React.createElement(et, {
                        key: e,
                        option: new He({
                            thumb: "static/svg/tails/tail-".concat(e || 0, ".svg"),
                            onClick: function() {
                                return CK.tweak({
                                    custom: {
                                        tails: e
                                    }
                                })
                            },
                            selected: CK.data.custom.tails === e,
                            thumbSize: [35, 35]
                        })
                    })
                }
            }, {
                key: "render",
                value: function() {
                    return Nn.a.released("extraTails") ? React.createElement("div", {
                        style: {
                            display: "flex",
                            flexDirection: "row",
                            justifyContent: "center",
                            flexWrap: "wrap"
                        }
                    }, this.renderBtn(void 0), this.renderBtn(1), this.renderBtn(2), this.renderBtn(3), this.renderBtn(4), this.renderBtn(5), this.renderBtn(6), this.renderBtn(7), this.renderBtn(8)) : null
                }
            }]) && Em(n.prototype, r), o && Em(n, o), t
        }();

        function Mm(e) {
            return (Mm = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Km(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Im(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Nm(e, t) {
            return !t || "object" !== Mm(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Bm(e) {
            return (Bm = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Am(e, t) {
            return (Am = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Lm = ["hornSideR", "hornFrontR", "hornBackR", "hornFront", "hornTop", "hornForehead", "hornBack", "bodyMiscHead"],
            Um = [
                [69, 25],
                [91, 31],
                [40, 33],
                [89, 13],
                [55, 3],
                [111, 37],
                [28, 9],
                [6, 6]
            ];
        var Dm = [];
        Lm.map((function(e) {
            Dm.push(e), e.endsWith("R") && Dm.push(e.slice(0, -1) + "L")
        }));
        var Fm = function(e) {
            function t() {
                return Km(this, t), Nm(this, Bm(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Am(e, t)
            }(t, React.Component), n = t, o = [{
                key: "getClear",
                value: function() {
                    return function() {
                        CK.clearSlots(Lm)
                    }
                }
            }, {
                key: "hasNew",
                value: function() {
                    return void 0 === t.hasNew && (t.hasNew = !!Lm.find((function(e) {
                        return CK.Options.partsBySlot[e].find((function(e) {
                            return e.new
                        }))
                    }))), t.hasNew
                }
            }], (r = [{
                key: "renderPinned",
                value: function() {
                    var e = this,
                        n = t.selected;
                    return React.createElement("div", {
                        className: "horns"
                    }, Lm.map((function(r, o) {
                        var a = CK.Options.getSelectableParts(r);
                        if (!a || !a.length) return null;
                        var i = CK.data.parts[r] || r.endsWith("R") && CK.data.parts[r.slice(0, -1) + "L"];
                        return React.createElement("div", {
                            className: "horns-slot",
                            key: r,
                            onClick: function() {
                                t.selected = r, e.forceUpdate()
                            },
                            style: {
                                backgroundColor: n === r ? "#565656" : i ? "#C18287" : "white",
                                top: Um[o][1],
                                left: Um[o][0]
                            }
                        })
                    })))
                }
            }, {
                key: "render",
                value: function() {
                    var e = t.selected,
                        n = e.endsWith("R") ? React.createElement(qi, {
                            slot: e.slice(0, -1),
                            label: e,
                            linkedDefault: !0
                        }) : React.createElement(bt, {
                            slot: e,
                            label: e
                        });
                    return React.createElement(Ko, {
                        hasFilter: !0,
                        pinned: this.renderPinned()
                    }, n)
                }
            }]) && Im(n.prototype, r), o && Im(n, o), t
        }();

        function zm(e) {
            return (zm = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Vm(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Gm(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function qm(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Hm(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Wm(e, t) {
            return !t || "object" !== zm(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Qm(e) {
            return (Qm = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Xm(e, t) {
            return (Xm = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        Fm.selected = Lm[0], Fm.slots = Dm, Fm.clear = function() {
            var e = {},
                t = {};
            Dm.map((function(n) {
                e[n] = void 0, t[n] = void 0
            })), CK.tweak({
                parts: e,
                transforms: t
            })
        }, Fm.hasHorns = function() {
            return !!Dm.find((function(e) {
                return e in CK.data.parts
            }))
        };
        var Ym = ["head", "lips", "nose"],
            Zm = [
                [40, 13],
                [40, 60],
                [40, 47]
            ],
            Jm = {
                label: !0,
                labelType: "labelOnly"
            },
            $m = function(e) {
                function t() {
                    return qm(this, t), Wm(this, Qm(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Xm(e, t)
                }(t, React.Component), n = t, o = [{
                    key: "hasContent",
                    value: function() {
                        return CK.data.parts.face && 10823 === CK.data.parts.face
                    }
                }], (r = [{
                    key: "render",
                    value: function() {
                        var e = this;
                        if (!CK.display.meshes.face || "humanoid" !== CK.display.meshes.face.part.name || "humanoid" !== CK.modded.parts.face.name) return null;
                        var n = t.selected,
                            r = CK.display.meshes.face.geometry.morphTargetDictionary,
                            o = [],
                            a = function(e) {
                                var t = Gm(e.split("_"), 2),
                                    r = t[0],
                                    a = t[1];
                                if (r === n) {
                                    var i = CK.data.custom.face && CK.data.custom.face[r] && CK.data.custom.face[r] === a,
                                        s = i ? function() {
                                            CK.tweak({
                                                custom: {
                                                    face: Vm({}, r, void 0)
                                                }
                                            })
                                        } : function() {
                                            CK.tweak({
                                                custom: {
                                                    face: Vm({}, r, a)
                                                }
                                            })
                                        },
                                        c = a;
                                    o.push(React.createElement(et, {
                                        key: a,
                                        option: new He({
                                            labelOptions: Jm,
                                            onClick: s,
                                            selected: i,
                                            label: c
                                        })
                                    }))
                                }
                            };
                        for (var i in r) a(i);
                        return React.createElement("div", null, React.createElement("div", {
                            style: {
                                display: "inline-block",
                                position: "relative",
                                width: 80,
                                height: 80,
                                backgroundImage: 'url("/static/herobundles/face/humanoid/hf_face_hiRez_humanoid_thumb.png")'
                            }
                        }, Ym.map((function(r, o) {
                            return React.createElement("div", {
                                key: r,
                                onClick: function() {
                                    t.selected = r, e.forceUpdate()
                                },
                                style: {
                                    backgroundColor: n === r ? "#ab0007" : "white",
                                    border: "none",
                                    width: 16,
                                    height: 16,
                                    borderRadius: "50%",
                                    position: "absolute",
                                    top: Zm[o][1] - 8,
                                    left: Zm[o][0] - 8
                                }
                            })
                        }))), React.createElement("div", null, o))
                    }
                }]) && Hm(n.prototype, r), o && Hm(n, o), t
            }();

        function ey(e) {
            return (ey = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ty(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ny(e, t) {
            return !t || "object" !== ey(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function ry(e, t, n) {
            return (ry = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(e, t, n) {
                var r = function(e, t) {
                    for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = oy(e)););
                    return e
                }(e, t);
                if (r) {
                    var o = Object.getOwnPropertyDescriptor(r, t);
                    return o.get ? o.get.call(n) : o.value
                }
            })(e, t, n || e)
        }

        function oy(e) {
            return (oy = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function ay(e, t) {
            return (ay = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        $m.selected = Ym[0];
        var iy = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = ny(this, oy(t).call(this, e))).refresh = function() {
                    CK.display.allColorLoaded && (CK.Events.off("CharacterFinishedChanging", n.refresh), n.forceUpdate())
                }, CK.character.changeSettings({
                    forceLoadAllColorMaps: !0
                }), CK.Events.on("CharacterFinishedChanging", n.refresh), n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && ay(e, t)
            }(t, e), n = t, (r = [{
                key: "componentWillUnmount",
                value: function() {
                    CK.character.changeSettings({
                        forceLoadAllColorMaps: !1
                    }, !0), CK.Events.off("CharacterFinishedChanging", this.refresh)
                }
            }, {
                key: "render",
                value: function() {
                    return CK.display.allColorLoaded ? ry(oy(t.prototype), "render", this).call(this) : React.createElement(Ko, null, React.createElement("div", {
                        className: "expert-spinner"
                    }, React.createElement("img", {
                        src: "/static/svg/spinner.svg",
                        className: "svg-spinner"
                    })))
                }
            }]) && ty(n.prototype, r), o && ty(n, o), t
        }(vl);

        function sy(e) {
            return (sy = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function cy(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function ly(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function uy(e, t) {
            return !t || "object" !== sy(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function fy(e) {
            return (fy = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function hy(e, t) {
            return (hy = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var py = function(e) {
            function t() {
                return cy(this, t), uy(this, fy(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && hy(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "onAfterChange",
                value: function() {
                    CK.addUndoPoint(), this.forceUpdate()
                }
            }, {
                key: "render",
                value: function() {
                    var e = this,
                        t = this.props.min ? this.props.min : 0,
                        n = this.props.max || 1,
                        r = n - t,
                        o = this.props.label,
                        a = this.props.object,
                        i = this.props.variable;
                    if (!a || void 0 === i || void 0 === a[i]) return React.createElement("div", null);
                    var s = (a[i] - t) / r;
                    return React.createElement("div", {
                        className: "slider-wrapper"
                    }, o && React.createElement("a", {
                        className: "label"
                    }, o + ""), React.createElement(At, {
                        min: 0,
                        max: 1,
                        limit: n,
                        step: .01,
                        value: s,
                        onChange: function(n) {
                            var o = t + n * r;
                            CK.Settings.debug && console.log(o), a[i] = o, e.props.onChange && e.props.onChange(o), CK.GameLoop.requestRenderRefresh(), CKUI.requestEditorRefresh(), e.forceUpdate()
                        },
                        onAfterChange: function() {
                            return e.onAfterChange()
                        },
                        small: this.props.small
                    }))
                }
            }]) && ly(n.prototype, r), o && ly(n, o), t
        }();

        function dy(e) {
            return (dy = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function my(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function yy(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function vy(e, t) {
            return !t || "object" !== dy(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function by(e) {
            return (by = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function gy(e, t) {
            return (gy = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var wy = function(e) {
            function t() {
                return my(this, t), vy(this, by(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && gy(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "refreshSpecific",
                value: function() {
                    this.props.shader.calculateDiffs(), this.props.onChange()
                }
            }, {
                key: "render",
                value: function() {
                    var e = this,
                        t = this.props,
                        n = t.shader,
                        r = t.attr;
                    return React.createElement("div", {
                        className: "sliderGroup"
                    }, React.createElement("div", {
                        className: "sliderGroup-row"
                    }, React.createElement("div", {
                        className: "sliderGroup-row-label"
                    }, "High"), React.createElement("div", {
                        className: "sliderGroup-row-slider"
                    }, React.createElement(py, {
                        object: n[r],
                        variable: 2,
                        onChange: function() {
                            return e.refreshSpecific()
                        },
                        small: !0
                    }))), React.createElement("div", {
                        className: "sliderGroup-row"
                    }, React.createElement("div", {
                        className: "sliderGroup-row-label"
                    }, "Mid"), React.createElement("div", {
                        className: "sliderGroup-row-slider"
                    }, React.createElement(py, {
                        object: n[r],
                        variable: 1,
                        onChange: function() {
                            return e.refreshSpecific()
                        },
                        small: !0
                    }))), React.createElement("div", {
                        className: "sliderGroup-row"
                    }, React.createElement("div", {
                        className: "sliderGroup-row-label"
                    }, "Low"), React.createElement("div", {
                        className: "sliderGroup-row-slider"
                    }, React.createElement(py, {
                        object: n[r],
                        variable: 0,
                        onChange: function() {
                            return e.refreshSpecific()
                        },
                        small: !0
                    }))))
                }
            }]) && yy(n.prototype, r), o && yy(n, o), t
        }();

        function ky(e) {
            return (ky = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Sy(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function _y(e, t) {
            return !t || "object" !== ky(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Cy(e) {
            return (Cy = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Ry(e, t) {
            return (Ry = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Oy = VN.classNames,
            Ey = function(e) {
                function t(e) {
                    var n;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), (n = _y(this, Cy(t).call(this, e))).state = {
                        details: !1
                    }, n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Ry(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props,
                            n = t.shader,
                            r = t.label,
                            o = t.attr,
                            a = t.onChange,
                            i = this.state.details,
                            s = null;
                        return s = i ? React.createElement(wy, {
                            shader: n,
                            attr: o,
                            onChange: a
                        }) : React.createElement(At, {
                            min: 0,
                            max: 1,
                            step: .01,
                            value: n[o][1],
                            onChange: function(e) {
                                n[o][0] = e - n.diffs[o][0], n[o][1] = e, n[o][2] = e - n.diffs[o][1], n[o] = n[o].map((function(e) {
                                    return e < 0 ? 0 : e > 1 ? 1 : e
                                })), a()
                            },
                            onAfterChange: function() {
                                return CK.addUndoPoint()
                            }
                        }), React.createElement("div", {
                            className: Oy("slider-container", "slider--withDetails", {
                                isOpen: i
                            })
                        }, React.createElement("img", {
                            src: "/static/svg/controls.svg",
                            className: "slider-toggle",
                            onClick: function() {
                                return e.setState({
                                    details: !i
                                })
                            }
                        }), React.createElement("div", {
                            className: "slider-wrapper"
                        }, React.createElement("div", {
                            className: "label"
                        }, r), s, i && this.props.children || null))
                    }
                }]) && Sy(n.prototype, r), o && Sy(n, o), t
            }(),
            Py = r(15);

        function xy(e) {
            return (xy = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function jy(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Ty(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function My(e, t) {
            return !t || "object" !== xy(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Ky(e) {
            return (Ky = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Iy(e, t) {
            return (Iy = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Ny = function(e) {
            function t() {
                return jy(this, t), My(this, Ky(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Iy(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "componentDidMount",
                value: function() {
                    var e = this;
                    if (this.refs.container && this.refs.canvas) {
                        var t = this.refs.canvas,
                            n = this.refs.container.offsetWidth,
                            r = this.refs.container.offsetHeight;
                        t.width = n, t.height = r;
                        var o = t.getContext("2d");
                        o.clearRect(0, 0, t.width, t.height), Py.a.fillHue(o, n, r, !0), this.mouseUp = function(t) {
                            return e.onMouseUpInWindow(t)
                        }, window.addEventListener("mouseup", this.mouseUp, !1)
                    }
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    window.removeEventListener("mouseup", this.mouseUp, !1)
                }
            }, {
                key: "onMouseUpInWindow",
                value: function() {
                    void 0 !== this.changedValue && (this.props.onAfterChange && this.props.onAfterChange(this.changedValue), delete this.changedValue)
                }
            }, {
                key: "blockScroll",
                value: function() {
                    var e = document.querySelectorAll(".View-scrollable"),
                        t = !0,
                        n = !1,
                        r = void 0;
                    try {
                        for (var o, a = e[Symbol.iterator](); !(t = (o = a.next()).done); t = !0) o.value.classList.add("View-scrollable--blocked")
                    } catch (e) {
                        n = !0, r = e
                    } finally {
                        try {
                            t || null == a.return || a.return()
                        } finally {
                            if (n) throw r
                        }
                    }
                }
            }, {
                key: "releaseScroll",
                value: function() {
                    var e = document.querySelectorAll(".View-scrollable--blocked"),
                        t = !0,
                        n = !1,
                        r = void 0;
                    try {
                        for (var o, a = e[Symbol.iterator](); !(t = (o = a.next()).done); t = !0) o.value.classList.remove("View-scrollable--blocked")
                    } catch (e) {
                        n = !0, r = e
                    } finally {
                        try {
                            t || null == a.return || a.return()
                        } finally {
                            if (n) throw r
                        }
                    }
                    this.onMouseUpInWindow()
                }
            }, {
                key: "onChange",
                value: function(e) {
                    this.props.onChange(1 - e.target.value), this.changedValue = 1 - e.target.value
                }
            }, {
                key: "render",
                value: function() {
                    var e = this;
                    return React.createElement("div", {
                        className: "colorSlider",
                        ref: "container"
                    }, React.createElement("canvas", {
                        ref: "canvas"
                    }), React.createElement("input", {
                        type: "range",
                        min: "0",
                        max: "1",
                        step: "0.01",
                        value: 1 - this.props.value,
                        onTouchStart: function() {
                            return e.blockScroll()
                        },
                        onTouchEnd: function() {
                            return e.releaseScroll()
                        },
                        onChange: function(t) {
                            return e.onChange(t)
                        }
                    }))
                }
            }]) && Ty(n.prototype, r), o && Ty(n, o), t
        }();

        function By(e) {
            return (By = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Ay(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Ly(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Uy(e, t) {
            return !t || "object" !== By(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Dy(e) {
            return (Dy = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Fy(e, t) {
            return (Fy = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var zy = function(e) {
            function t() {
                return Ay(this, t), Uy(this, Dy(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Fy(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "render",
                value: function() {
                    var e = this.props,
                        t = e.hsv,
                        n = e.onUpdate;
                    return React.createElement(React.Fragment, null, React.createElement("div", {
                        className: "shaderEditor-multipicker"
                    }, React.createElement(Py.a, {
                        hsv: t,
                        handleID: 0,
                        mode: Py.a.modes.saturationValue,
                        onUpdate: n,
                        onAfterChange: function() {
                            return CK.addUndoPoint()
                        }
                    })), React.createElement(Ny, {
                        value: t[0],
                        onChange: function(e) {
                            t[0] = e, n()
                        },
                        onAfterChange: function() {
                            return CK.addUndoPoint()
                        }
                    }))
                }
            }]) && Ly(n.prototype, r), o && Ly(n, o), t
        }();

        function Vy(e) {
            return (Vy = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Gy(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function qy(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Hy(e) {
            return (Hy = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Wy(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function Qy(e, t) {
            return (Qy = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Xy = VN.classNames,
            Yy = function(e) {
                function t(e) {
                    var n, r, o;
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this;
                    var a = (n = !(o = Hy(t).call(this, e)) || "object" !== Vy(o) && "function" != typeof o ? Wy(r) : o).props.emissive ? n.props.shader.emissive : n.props.shader.gradient;
                    return n.state = {
                        selectedColor: 1,
                        details: !1,
                        hex: Jy.apply(void 0, Gy(a[1] || [0, 0, 0]))
                    }, n.updateRGB = n.updateRGB.bind(Wy(n)), n.updateHex = n.updateHex.bind(Wy(n)), n.refreshColor = n.refreshColor.bind(Wy(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Qy(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentDidUpdate",
                    value: function(e) {
                        if (this.props.shader !== e.shader) {
                            var t = this.props.emissive ? this.props.shader.emissive : this.props.shader.gradient;
                            this.setState({
                                hex: Jy.apply(void 0, Gy(t[this.state.selectedColor] || [0, 0, 0]))
                            })
                        }
                    }
                }, {
                    key: "updateRGB",
                    value: function(e, t) {
                        var n = this.props.emissive,
                            r = this.details ? this.state.selectedColor : 1,
                            o = Math.min(Math.max(parseInt(e.target.value) || 0, 0), 255);
                        n ? this.props.shader.setEmissiveChannel(r, t, o) : this.props.shader.setGradientChannel(r, t, o), this.refreshColor()
                    }
                }, {
                    key: "updateHex",
                    value: function(e) {
                        var t = this.props.emissive,
                            n = this.details ? this.state.selectedColor : 1;
                        t ? this.props.shader.setEmissiveRGB(n, this.hexToRgb(e.target.value)) : this.props.shader.setGradientRGB(n, this.hexToRgb(e.target.value)), this.refreshColor(!0)
                    }
                }, {
                    key: "hexToRgb",
                    value: function(e) {
                        var t = (e + "").trim().replace(/#/, "").replace(/[^0-9A-F]/gi, "0");
                        if (0 === t.length) return this.setState({
                            hex: ""
                        }), [0, 0, 0];
                        t.length % 3 == 1 && (t += "00"), t.length % 3 == 2 && (t += "0");
                        for (var n = t.slice(0, t.length / 3), r = t.slice(t.length / 3, 2 * t.length / 3), o = t.slice(2 * t.length / 3, t.length); n.length > 2 && "0" === n[0] && "0" === r[0] && "0" === o[0];) n = n.substring(1), r = r.substring(1), o = o.substring(1);
                        n.length > 2 && (n = n.slice(0, 2), r = r.slice(0, 2), o = o.slice(0, 2)), this.setState({
                            hex: e
                        });
                        var a = this.props.emissive ? this.props.shader.emissive : this.props.shader.gradient;
                        return n ? [parseInt(n, 16), parseInt(r, 16), parseInt(o, 16)] : a[this.state.selectedColor]
                    }
                }, {
                    key: "refreshColor",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = this.props,
                            n = t.shader,
                            r = t.emissive,
                            o = r ? n.emissiveHSV : n.gradientHSV;
                        e || this.setState({
                            hex: void 0
                        }), this.details ? n.calculateDiffs() : [0, 1].map((function(e) {
                            var t = o[1].slice();
                            t[0] -= r ? n.diffs.emissive.h[e] : n.diffs.gradient.h[e], t[1] -= r ? n.diffs.emissive.s[e] : n.diffs.gradient.s[e], t[2] -= r ? n.diffs.emissive.v[e] : n.diffs.gradient.v[e], t[0] += 100, t[0] %= 1, t[0] = t[0] > 1 ? 1 : t[0] < 0 ? 0 : t[0], t[1] = t[1] > 1 ? 1 : t[1] < 0 ? 0 : t[1], t[2] = t[2] > 1 ? 1 : t[2] < 0 ? 0 : t[2], o[e ? 2 : 0] = t
                        })), this.props.onChange(), this.forceUpdate()
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props,
                            n = t.shader,
                            r = t.emissive,
                            o = t.forceDetails,
                            a = this.details,
                            i = this.props.label || "",
                            s = r ? n.emissiveHSV : n.gradientHSV,
                            c = r ? n.emissive : n.gradient,
                            l = c[0],
                            u = c[1],
                            f = c[2],
                            h = a ? this.state.selectedColor : 1,
                            p = c[h];
                        return React.createElement(React.Fragment, null, React.createElement("div", {
                            className: Xy("shaderEditor", "slider-container", "slider--withDetails", {
                                isOpen: a
                            })
                        }, !r && void 0 === o && React.createElement("img", {
                            src: "/static/svg/controls.svg",
                            className: "shaderEditor-toggle",
                            onClick: function() {
                                return e.setState({
                                    details: !a
                                })
                            }
                        }), this.props.onToggle && React.createElement("img", {
                            src: "/static/svg/controls.svg",
                            className: "shaderEditor-toggle",
                            onClick: function() {
                                return e.props.onToggle()
                            },
                            onMouseOut: function() {
                                return CK.Events.emit("labeltip")
                            },
                            onMouseOver: function(e) {
                                return CK.Events.emit("labeltip", {
                                    target: e.target,
                                    label: "Settings"
                                })
                            }
                        }), React.createElement("div", null, !r && React.createElement("div", {
                            className: "shaderEditor-title"
                        }, i), a ? React.createElement(React.Fragment, null, React.createElement("div", {
                            className: "shaderEditor-colorpicker"
                        }, React.createElement("div", {
                            className: "shaderEditor-swatches"
                        }, React.createElement("div", {
                            className: Xy("shaderEditor-swatch", {
                                selected: 2 === h
                            }),
                            style: {
                                backgroundColor: "rgb(".concat(f[0], ", ").concat(f[1], ", ").concat(f[2], ")")
                            },
                            onClick: function() {
                                return e.setState({
                                    selectedColor: 2,
                                    hex: void 0
                                })
                            }
                        }, "High"), React.createElement("div", {
                            className: Xy("shaderEditor-swatch", {
                                selected: 1 === h
                            }),
                            style: {
                                backgroundColor: "rgb(".concat(u[0], ", ").concat(u[1], ", ").concat(u[2], ")")
                            },
                            onClick: function() {
                                return e.setState({
                                    selectedColor: 1,
                                    hex: void 0
                                })
                            }
                        }, "Mid"), React.createElement("div", {
                            className: Xy("shaderEditor-swatch", {
                                selected: 0 === h
                            }),
                            style: {
                                backgroundColor: "rgb(".concat(l[0], ", ").concat(l[1], ", ").concat(l[2], ")")
                            },
                            onClick: function() {
                                return e.setState({
                                    selectedColor: 0,
                                    hex: void 0
                                })
                            }
                        }, "Low")), React.createElement(zy, {
                            hsv: s[h],
                            onUpdate: this.refreshColor
                        })), React.createElement("div", {
                            className: "shaderEditor-hex"
                        }, React.createElement("div", {
                            className: "shaderEditor-hex-row"
                        }, React.createElement("div", {
                            className: "shaderEditor-hex-label"
                        }, "HEX"), React.createElement("div", {
                            className: "shaderEditor-hex-form"
                        }, React.createElement("input", {
                            className: "shaderEditor-hex-input",
                            type: "text",
                            size: "4",
                            value: void 0 !== this.state.hex ? this.state.hex : Jy(parseInt(p[0]), parseInt(p[1]), parseInt(p[2])),
                            onChange: this.updateHex
                        }))), React.createElement("div", {
                            className: "shaderEditor-hex-row"
                        }, React.createElement("div", {
                            className: "shaderEditor-hex-label"
                        }, "RGB"), React.createElement("div", {
                            className: "shaderEditor-hex-inputs shaderEditor-hex-form"
                        }, React.createElement("input", {
                            className: "shaderEditor-hex-input",
                            type: "text",
                            size: "1",
                            value: parseInt(p[0]),
                            onChange: function(t) {
                                return e.updateRGB(t, 0)
                            }
                        }), React.createElement("input", {
                            className: "shaderEditor-hex-input",
                            type: "text",
                            size: "1",
                            value: parseInt(p[1]),
                            onChange: function(t) {
                                return e.updateRGB(t, 1)
                            }
                        }), React.createElement("input", {
                            className: "shaderEditor-hex-input",
                            type: "text",
                            size: "1",
                            value: parseInt(p[2]),
                            onChange: function(t) {
                                return e.updateRGB(t, 2)
                            }
                        }))))) : React.createElement("div", {
                            className: "shaderEditor-colorpicker"
                        }, React.createElement(zy, {
                            hsv: s[1],
                            onUpdate: this.refreshColor
                        })))))
                    }
                }, {
                    key: "details",
                    get: function() {
                        return this.props.emissive || this.state.details || this.props.forceDetails
                    }
                }]) && qy(n.prototype, r), o && qy(n, o), t
            }();

        function Zy(e) {
            var t = e.toString(16);
            return 1 == t.length ? "0" + t : t
        }

        function Jy(e, t, n) {
            return "#" + Zy(e) + Zy(t) + Zy(n)
        }

        function $y(e) {
            return ($y = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ev(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function tv(e, t) {
            return !t || "object" !== $y(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function nv(e) {
            return (nv = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function rv(e, t) {
            return (rv = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ov = VN.classNames,
            av = function(e) {
                function t(e) {
                    var n;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), (n = tv(this, nv(t).call(this, e))).state = {
                        showSliders: !1
                    }, n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && rv(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "showSliders",
                    value: function() {
                        return this.state.showSliders || !this.isChecked && !this.isUnchecked()
                    }
                }, {
                    key: "isChecked",
                    value: function() {
                        var e = this.props,
                            t = e.shader,
                            n = e.attr;
                        return 1 === t[n][0] && 1 === t[n][1] && 1 === t[n][2]
                    }
                }, {
                    key: "isUnchecked",
                    value: function() {
                        var e = this.props,
                            t = e.shader,
                            n = e.attr;
                        return 0 === t[n][0] && 0 === t[n][1] && 0 === t[n][2]
                    }
                }, {
                    key: "toggleSliders",
                    value: function() {
                        var e = !this.state.showSliders,
                            t = this.props,
                            n = t.shader,
                            r = t.attr;
                        if (!e) {
                            var o = 0;
                            n[r].map((function(e) {
                                return o += e
                            })), this.setAll(o / 3 > .5 ? 1 : 0)
                        }
                        this.setState({
                            showSliders: e
                        })
                    }
                }, {
                    key: "setAll",
                    value: function(e) {
                        var t = this.props,
                            n = t.shader,
                            r = t.attr;
                        n[r][0] = e, n[r][1] = e, n[r][2] = e
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props,
                            n = t.shader,
                            r = t.label,
                            o = t.attr,
                            a = t.onChange,
                            i = this.isChecked(),
                            s = this.showSliders();
                        return React.createElement("div", {
                            className: ov("slider-container", "slider--withDetails", {
                                isOpen: s
                            })
                        }, React.createElement("img", {
                            src: "/static/svg/controls.svg",
                            className: "slider-toggle",
                            onClick: function() {
                                return e.toggleSliders()
                            }
                        }), React.createElement("div", {
                            className: "slider-wrapper"
                        }, React.createElement("div", {
                            className: "label"
                        }, r), s ? React.createElement(wy, {
                            shader: n,
                            attr: o,
                            onChange: a
                        }) : React.createElement("label", {
                            className: "checkbox shaderEditor-checkbox"
                        }, React.createElement("input", {
                            type: "checkbox",
                            checked: i,
                            onChange: function() {
                                e.setAll(i ? 0 : 1), a(), e.forceUpdate()
                            }
                        }), React.createElement("span", {
                            className: "checkbox-square"
                        }))))
                    }
                }]) && ev(n.prototype, r), o && ev(n, o), t
            }();

        function iv(e) {
            return (iv = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function sv(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function cv(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function lv(e, t) {
            return !t || "object" !== iv(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function uv(e) {
            return (uv = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function fv(e, t) {
            return (fv = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var hv = VN.classNames,
            pv = function(e) {
                function t() {
                    return sv(this, t), lv(this, uv(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && fv(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        var e = this.props,
                            t = e.details,
                            n = e.detailView,
                            r = e.regularView,
                            o = e.onToggle,
                            a = e.label;
                        return React.createElement("div", {
                            className: hv("slider-container", "slider--withDetails", {
                                isOpen: t
                            })
                        }, React.createElement("img", {
                            src: "/static/svg/controls.svg",
                            className: "slider-toggle",
                            onClick: function() {
                                return o(!t)
                            }
                        }), React.createElement("div", {
                            className: "slider-wrapper"
                        }, React.createElement("div", {
                            className: "label"
                        }, a), t ? n : r))
                    }
                }]) && cv(n.prototype, r), o && cv(n, o), t
            }();

        function dv(e) {
            return (dv = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function mv(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function yv(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function vv(e, t) {
            return !t || "object" !== dv(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function bv(e) {
            return (bv = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function gv(e, t) {
            return (gv = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var wv = function(e) {
            function t() {
                return mv(this, t), vv(this, bv(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && gv(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "render",
                value: function() {
                    var e = this,
                        t = this.props,
                        n = t.onChange,
                        r = t.shader,
                        o = this.props.label || "Glow";
                    return r.skin ? null : React.createElement(pv, {
                        label: o,
                        details: r.complexEmissive,
                        detailView: React.createElement(Yy, {
                            shader: r,
                            emissive: !0,
                            onChange: n
                        }),
                        regularView: React.createElement(py, {
                            object: r,
                            variable: "simpleEmissive",
                            onChange: function() {
                                n(), e.forceUpdate()
                            },
                            small: !1
                        }),
                        onToggle: function(t) {
                            r.complexEmissive = t, n(), e.forceUpdate()
                        }
                    })
                }
            }]) && yv(n.prototype, r), o && yv(n, o), t
        }();

        function kv(e) {
            return (kv = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Sv(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function _v(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Cv(e, t) {
            return !t || "object" !== kv(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Rv(e) {
            return (Rv = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Ov(e, t) {
            return (Ov = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Ev = function(e) {
                function t() {
                    return Sv(this, t), Cv(this, Rv(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Ov(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props,
                            n = t.shader,
                            r = t.onChange;
                        return React.createElement("div", {
                            className: "slider-wrapper shaderEditor-shading"
                        }, React.createElement("div", {
                            className: "label"
                        }, "Skin"), React.createElement("label", {
                            className: "checkbox shaderEditor-checkbox"
                        }, React.createElement("input", {
                            type: "checkbox",
                            checked: n.skin,
                            onChange: function() {
                                n.skin = !n.skin, r(), e.forceUpdate()
                            }
                        }), React.createElement("span", {
                            className: "checkbox-square"
                        })))
                    }
                }]) && _v(n.prototype, r), o && _v(n, o), t
            }(),
            Pv = r(10);

        function xv(e) {
            return (xv = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function jv(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Tv(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Mv(e, t) {
            return !t || "object" !== xv(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Kv(e) {
            return (Kv = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Iv(e, t) {
            return (Iv = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        VN.classNames;
        var Nv = function(e) {
            function t() {
                return jv(this, t), Mv(this, Kv(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Iv(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "refreshColor",
                value: function() {
                    CK.display.colorBake.requestRefreshColor(), CK.Events.emit("shaderBallChanged", this.shader), CK.display._applyMaterialSims(), Pv.a.requestRenderRefresh()
                }
            }, {
                key: "refreshPhysical",
                value: function() {
                    CK.display.colorBake.requestRefreshPhysical(), CK.Events.emit("shaderBallChanged", this.shader), CK.display._applyMaterialSims(), Pv.a.requestRenderRefresh()
                }
            }, {
                key: "refreshEmissive",
                value: function() {
                    CK.display.colorBake.requestRefreshEmissive(), CK.Events.emit("shaderBallChanged", this.shader), CK.display._applyMaterialSims(), Pv.a.requestRenderRefresh(), this.forceUpdate()
                }
            }, {
                key: "refreshSkinCheckBox",
                value: function() {
                    CK.display.colorBake.requestRefreshColor(), CK.display.colorBake.requestRefreshEmissive(), CK.Events.emit("shaderBallChanged", this.shader), this.forceUpdate()
                }
            }, {
                key: "refreshColorAndEmissive",
                value: function() {
                    CK.display.colorBake.requestRefreshColor(), CK.display.colorBake.requestRefreshEmissive(), CK.Events.emit("shaderBallChanged", this.shader), CK.display._applyMaterialSims(), Pv.a.requestRenderRefresh()
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.shader;
                    return e ? React.createElement(React.Fragment, null, !1, e.eye ? this.renderEye(e) : this.renderRegular(e)) : null
                }
            }, {
                key: "renderRegular",
                value: function(e) {
                    var n = this,
                        r = t.advanced;
                    return React.createElement(React.Fragment, null, React.createElement(Yy, {
                        shader: e,
                        onChange: function() {
                            return n.refreshColorAndEmissive()
                        },
                        label: "Color",
                        forceDetails: !!r,
                        onToggle: function() {
                            t.advanced = !r, n.forceUpdate()
                        }
                    }), r && React.createElement(React.Fragment, null, CK.Settings.allowBakedPhysical && React.createElement(Ey, {
                        shader: e,
                        attr: "rough",
                        label: "Roughness",
                        onChange: function() {
                            return n.refreshPhysical()
                        }
                    }), CK.Settings.allowBakedPhysical && React.createElement(Ey, {
                        shader: e,
                        attr: "sheen",
                        label: "Fuzz",
                        onChange: function() {
                            return n.refreshPhysical()
                        }
                    }), CK.Settings.allowBakedPhysical && React.createElement(Ey, {
                        shader: e,
                        attr: "alpha",
                        label: "Opacity",
                        onChange: function() {
                            return n.refreshPhysical()
                        }
                    }), CK.Settings.allowBakedPhysical && React.createElement(av, {
                        shader: e,
                        attr: "metal",
                        label: "Metal",
                        onChange: function() {
                            return n.refreshPhysical()
                        }
                    }), CK.Settings.allowBakedPhysical && CK.Settings.allowBakedEmissive && React.createElement(Ev, {
                        shader: e,
                        onChange: function() {
                            return n.refreshSkinCheckBox()
                        }
                    }), CK.Settings.allowBakedEmissive && React.createElement(wv, {
                        shader: e,
                        onChange: function() {
                            return n.refreshEmissive()
                        }
                    }), (!CK.Settings.allowBakedEmissive || !CK.Settings.allowBakedPhysical) && React.createElement("div", null, "Some advanced options are not supported on your device & browser.")))
                }
            }, {
                key: "renderEye",
                value: function(e) {
                    var t = this,
                        n = CK.display.eyeTypes,
                        r = Math.round(1 / e.alpha[0]) - 1;
                    (isNaN(r) || r < 0 || r >= Object.keys(n).length) && (r = 0);
                    for (var o = Object.keys(n).filter((function(e) {
                            return n[e].index === r
                        }))[0], a = Object.keys(n).sort((function(e, t) {
                            return n[e].displayOrder - n[t].displayOrder
                        })), i = a.length, s = Math.trunc((i + 6 - 1) / 6), c = Math.trunc((i + s - 1) / s), l = [], u = 0; u < s; ++u) {
                        var f = u * c,
                            h = Math.min(i - f, c),
                            p = a.slice(f, f + h).map((function(r) {
                                return React.createElement("div", {
                                    key: r,
                                    className: VN.classNames("eye-type", {
                                        isActive: o === r
                                    }),
                                    onClick: function() {
                                        return o = n[r].index, e.alpha[0] = 1 / (o + 1), t.refreshPhysical(), void t.forceUpdate();
                                        var o
                                    }
                                }, React.createElement("img", {
                                    src: "/static/svg/eyes/".concat(r, ".svg"),
                                    alt: r
                                }))
                            })),
                            d = React.createElement("div", {
                                key: u,
                                className: VN.classNames("eye-type-list")
                            }, p);
                        l.push(d)
                    }
                    return React.createElement(React.Fragment, null, React.createElement("div", null, React.createElement("p", null, "Shape"), l), React.createElement(Yy, {
                        shader: e,
                        onChange: function() {
                            return t.refreshColor()
                        },
                        label: "Iris"
                    }), React.createElement("div", {
                        className: "shaderEditor-title"
                    }, "Eyeball"), React.createElement("div", {
                        className: "shaderEditor-colorpicker"
                    }, React.createElement(zy, {
                        hsv: e.emissiveHSV[2],
                        onUpdate: function() {
                            return t.refreshEmissive()
                        }
                    })), React.createElement("div", {
                        className: "shaderEditor-title"
                    }, "Pupil"), React.createElement("div", {
                        className: "shaderEditor-colorpicker"
                    }, React.createElement(zy, {
                        hsv: e.emissiveHSV[1],
                        onUpdate: function() {
                            return t.refreshEmissive()
                        }
                    })), React.createElement("div", {
                        className: "slider-wrapper"
                    }, React.createElement("div", {
                        className: "label"
                    }, "Iris Size"), React.createElement(At, {
                        min: 0,
                        max: 1,
                        step: .01,
                        value: e.rough[2],
                        onChange: function(n) {
                            e.rough[2] = n, t.refreshPhysical()
                        },
                        onAfterChange: function() {
                            return CK.addUndoPoint()
                        }
                    })), React.createElement("div", {
                        className: "slider-wrapper"
                    }, React.createElement("div", {
                        className: "label"
                    }, "Rotate"), React.createElement(At, {
                        min: 0,
                        max: 1,
                        step: .01,
                        value: e.alpha[1],
                        onChange: function(n) {
                            e.alpha[1] = n, t.refreshPhysical()
                        },
                        onAfterChange: function() {
                            return CK.addUndoPoint()
                        }
                    })), React.createElement("div", {
                        className: "slider-wrapper"
                    }, React.createElement("div", {
                        className: "label"
                    }, "Glow"), React.createElement(At, {
                        min: 0,
                        max: 1,
                        step: .01,
                        value: e.metal[1],
                        onChange: function(n) {
                            e.metal[1] = n, t.refreshPhysical()
                        },
                        onAfterChange: function() {
                            return CK.addUndoPoint()
                        }
                    })), !1)
                }
            }, {
                key: "shader",
                get: function() {
                    return this.props.shader || CK.data.shaders[this.props.shaderID]
                }
            }]) && Tv(n.prototype, r), o && Tv(n, o), t
        }();

        function Bv(e) {
            return (Bv = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Av(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Lv(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Uv(e, t) {
            return !t || "object" !== Bv(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Dv(e) {
            return (Dv = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Fv(e, t) {
            return (Fv = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }

        function zv(e) {
            return e.sort((function(e, t) {
                var n = e.shader,
                    r = t.shader;
                return n.surfaceID !== t.surfaceID ? e.surfaceID - t.surfaceID : n.name < r.name ? -1 : n.name > r.name ? 1 : 0
            }))
        }
        var Vv = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = Uv(this, Dv(t).call(this, e))).componentDidMount(), ku.a.clearQueue(), n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Fv(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "componentDidMount",
                value: function() {
                    var e = this;
                    CK.PaintTool.enable(this.getSelectedShader() || Bu.getSelectedShader(), (function(t) {
                        return e.onApply(t)
                    }), (function(t) {
                        return e.onHover(t)
                    }))
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    CK.PaintTool.disable()
                }
            }, {
                key: "onApply",
                value: function(e) {
                    var t = this.getSelectedShader();
                    if (!t) return Bu.onApply(e);
                    var n = this.getSelectedId(),
                        r = {};
                    CK.ColorManager.redirectHit(e, t).map((function(t) {
                        return r[t.slot] = Av({}, e.patch, parseInt(n))
                    }));
                    var o = e.layer,
                        a = e.subLayer,
                        i = e.slot;
                    if (void 0 !== o) {
                        var s = CK.display.modded.orderedDecals[i][o].mapping + "_" + a;
                        CK.tweak({
                            paints: Av({}, i, Av({}, s, parseInt(n)))
                        })
                    } else CK.tweak({
                        paints: r
                    })
                }
            }, {
                key: "onHover",
                value: function(e) {
                    var t = this.getSelectedShader();
                    if (!t) return Bu.onHover(e);
                    var n = CK.ColorManager.redirectHit(e, t);
                    n.length && CK.display.colorBake.applyTempShader(t, n.map((function(e) {
                        return e.slot
                    })), n[0].mapping)
                }
            }, {
                key: "copyClick",
                value: function() {
                    this.select(CK.ColorManager.copyShader(this.getSelectedId()))
                }
            }, {
                key: "getSelectedId",
                value: function() {
                    var e = this.getAvailableShaders(),
                        n = e.find((function(e) {
                            return e.id === t._selectedID
                        }));
                    return void 0 !== t._selectedID && n || (e.length ? t._selectedID = e[0].id : t._selectedID = void 0), t._selectedID
                }
            }, {
                key: "getSelectedShader",
                value: function() {
                    return CK.data.shaders[this.getSelectedId()]
                }
            }, {
                key: "select",
                value: function(e) {
                    t._selectedID = parseInt(e), CK.PaintTool.select(this.getSelectedShader())
                }
            }, {
                key: "rename",
                value: function(e) {
                    Overlay.promptTextInput("Shader Name", e.name, e.name, CK.sanitizeName).then((function(t) {
                        t && (t = t.replace(/(^\s+|\s+$)/g, "")), t && t.length ? e.name = t : "" === t && (e.name = _f.getClosestName(e))
                    }))
                }
            }, {
                key: "changeMaterial",
                value: function() {
                    var e = this,
                        t = [],
                        n = this.getSelectedShader();
                    ku.a.clearQueue(), Object.keys(CK.Options.responses).map((function(r) {
                        var o = CK.Options.responses[r].clone();
                        o.gradientHSV = n.gradientHSV, t.push(React.createElement(Pu, {
                            selected: !1,
                            key: r,
                            shader: o,
                            showHoverOver: !0,
                            label: r,
                            description: r,
                            onClick: function() {
                                n.applyMaterialResponse(o), CK.display.colorBake.requestRefresh(), CK.Events.emit("shaderBallChanged", n), e.forceUpdate(), CK.addUndoPoint(), setTimeout((function() {
                                    return Overlay.hideOverlay()
                                }), 100)
                            },
                            onMouseEnter: function() {
                                var t = n.clone();
                                t.applyMaterialResponse(o), CK.display.colorBake.tempReplaceShader(e.getSelectedId(), t)
                            },
                            onMouseOut: function() {
                                CK.display.colorBake.removeAllTemp()
                            }
                        }))
                    })), UIState.set({
                        showPrompt: React.createElement(zn.a, {
                            prompt: !0,
                            title: "Material",
                            onClose: function() {
                                return Overlay.hideOverlay()
                            }
                        }, React.createElement("div", {
                            className: "shaderBrowser-group-balls"
                        }, t))
                    })
                }
            }, {
                key: "createClick",
                value: function() {
                    var e = CK.ColorManager.addShaderAndTweak([881], !0);
                    this.select(e[0]), this.changeMaterial(), this.forceUpdate()
                }
            }, {
                key: "onClick",
                value: function(e) {
                    this.select(e), CK.PaintTool.dragged = !0, this.forceUpdate()
                }
            }, {
                key: "getUsedShaders",
                value: function() {
                    var e = CK.data.usedShaders;
                    return zv(Object.keys(e).map((function(t) {
                        return {
                            shader: e[t],
                            id: parseInt(t),
                            used: !0
                        }
                    })))
                }
            }, {
                key: "getUnusedShaders",
                value: function() {
                    var e = CK.data.intentionalUnusedShaders;
                    return zv(Object.keys(e).map((function(t) {
                        return {
                            shader: e[t],
                            id: parseInt(t),
                            used: !1
                        }
                    })))
                }
            }, {
                key: "getAvailableShaders",
                value: function() {
                    var e = this.getUsedShaders(),
                        t = this.getUnusedShaders();
                    return e.concat(t)
                }
            }, {
                key: "getBalls",
                value: function() {
                    var e = this,
                        t = this.getSelectedId();
                    return this.getAvailableShaders().map((function(n) {
                        var r = n.shader,
                            o = n.id,
                            a = n.used;
                        return React.createElement(Pu, {
                            selected: o === t,
                            id: o,
                            showHoverOver: !0,
                            unused: !a,
                            label: r.name,
                            key: o,
                            shader: r,
                            onClick: function() {
                                return e.onClick(o)
                            }
                        })
                    }))
                }
            }, {
                key: "renderSchemeEdit",
                value: function() {
                    return null
                }
            }, {
                key: "render",
                value: function() {
                    var e = this,
                        t = this.getBalls(),
                        n = this.getSelectedId(),
                        r = this.getSelectedShader();
                    return t.length && void 0 !== n && r ? React.createElement(Ko, null, React.createElement("div", {
                        className: "shaderBrowser-group",
                        key: "debug"
                    }, React.createElement("div", {
                        className: "shaderBrowser-group-label"
                    }, "My Paints"), React.createElement("div", {
                        className: "shaderBrowser-group-balls"
                    }, t, React.createElement("img", {
                        src: "/static/svg/add-paint.svg",
                        className: "shaderBrowser-group-add",
                        onClick: function() {
                            return e.createClick()
                        },
                        onMouseOut: function() {
                            return CK.Events.emit("labeltip")
                        },
                        onMouseOver: function(e) {
                            return CK.Events.emit("labeltip", {
                                target: e.target,
                                label: "Create new paint"
                            })
                        }
                    }))), React.createElement("div", {
                        className: "shaderBrowser"
                    }, !1, React.createElement("div", {
                        className: "shaderEditor-header"
                    }, React.createElement("div", {
                        className: "shaderEditor-header-items"
                    }, React.createElement(Pu, {
                        showHoverOver: !1,
                        onClick: r.eye ? null : function() {
                            return e.changeMaterial()
                        },
                        shader: r,
                        size: CK.Shaderballs.size / 2,
                        label: "Change Material"
                    }), React.createElement("div", {
                        onClick: function() {
                            return e.rename(r)
                        },
                        className: "shaderEditor-header-name",
                        onMouseOut: function() {
                            return CK.Events.emit("labeltip")
                        },
                        onMouseOver: function(e) {
                            return CK.Events.emit("labeltip", {
                                target: e.target,
                                label: "Rename"
                            })
                        }
                    }, r.name)), React.createElement("div", {
                        className: "shaderEditor-header-items"
                    }, React.createElement("img", {
                        className: "shaderEditor-header-img",
                        src: "/static/svg/copy.svg",
                        onClick: function() {
                            return e.copyClick()
                        },
                        onMouseOut: function() {
                            return CK.Events.emit("labeltip")
                        },
                        onMouseOver: function(e) {
                            return CK.Events.emit("labeltip", {
                                target: e.target,
                                label: "Copy"
                            })
                        }
                    }), React.createElement("img", {
                        className: "shaderEditor-header-img",
                        src: "/static/svg/trash-white.svg",
                        onClick: function() {
                            CK.ColorManager.deleteShader(n);
                            var r = function(e) {
                                for (var t = 0; t < e.length; t++)
                                    if (e[t].props.selected) return e[t + 1] || e[t - 1]
                            }(t);
                            r && e.select(parseInt(r.props.id)), e.forceUpdate(), CK.Events.emit("labeltip")
                        },
                        onMouseOut: function() {
                            return CK.Events.emit("labeltip")
                        },
                        onMouseOver: function(e) {
                            return CK.Events.emit("labeltip", {
                                target: e.target,
                                label: "Delete"
                            })
                        }
                    }))), React.createElement(Nv, {
                        shaderID: n
                    }))) : React.createElement(Ko, null, React.createElement("div", {
                        className: "shaderBrowser"
                    }, React.createElement("div", {
                        className: "shaderBrowser-group-balls",
                        style: {
                            cursor: "pointer"
                        },
                        onClick: function() {
                            return e.createClick()
                        }
                    }, "Create New Paint", React.createElement("img", {
                        src: "/static/svg/add-paint.svg",
                        style: {
                            width: 30,
                            height: 30
                        }
                    }))), !1)
                }
            }]) && Lv(n.prototype, r), o && Lv(n, o), t
        }();

        function Gv(e) {
            return (Gv = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function qv(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Hv(e, t) {
            return !t || "object" !== Gv(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Wv(e) {
            return (Wv = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Qv(e, t) {
            return (Qv = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Xv = VN.ReactRouter,
            Yv = Xv.withRouter,
            Zv = (Xv.Switch, Xv.Redirect, ["bodyMiscBack", "bodyMiscLegsL", "bodyMiscLegsR", "bodyMiscArmsL", "bodyMiscArmsR", "bodyMiscChest", "bodyMiscFeetL", "bodyMiscFeetR"]),
            Jv = ["finger1R", "finger2R", "finger3R", "finger4R", "finger5R", "finger1L", "finger2L", "finger3L", "finger4L", "finger5L"],
            $v = ["helm", "neck", "shouldersR", "shouldersL", "chest", "glovesR", "glovesL", "gloves0R", "gloves0L", "gloves1R", "gloves1L", "legs", "feetR", "feetL", "mask"];

        function eb() {
            60 !== CK.getPose() && CK.character.changeSettings({
                camera: "face"
            })
        }

        function tb() {
            CK.character.changeSettings({
                camera: void 0
            })
        }
        var nb = Yv(function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), n = Hv(this, Wv(t).call(this, e)), CKUI.checkSizing(), n.state = {
                    width: window.innerWidth,
                    height: window.innerHeight
                }, n.currentPathname = null, n.currentSearch = null, n.currentKey = null, n
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Qv(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "initializeRouter",
                value: function(e) {
                    var t = this;
                    this.currentPathname || (this.currentPathname = this.props.location.pathname, this.currentSearch = this.props.location.search, this.currentKey = this.props.location.key, e.push({
                        pathname: this.currentPathname,
                        search: this.currentSearch
                    })), e.listen((function(n, r) {
                        "PUSH" === r ? n.pathname === t.currentPathname && n.search === t.currentSearch || (t.currentPathname = n.pathname, t.currentSearch = n.search, t.currentKey = n.key, "/" == n.pathname && e.push({
                            pathname: n.pathname,
                            search: n.search
                        })) : "POP" === r && (UIState.showOverlay || UIState.showPrompt || void 0 === n.key || n.key === t.currentKey) && "/" == n.pathname ? (e.push({
                            pathname: n.pathname,
                            search: n.search
                        }), (UIState.showPrompt || UIState.showOverlay) && UIState.permanentOverlay || (UIState.showPrompt ? (UIState.set({
                            showPrompt: !1
                        }), console.log("blocked a back attempt - close prompt")) : UIState.showOverlay ? (UIState.clearOverlays(), console.log("blocked a back attempt - close overlay")) : CK.canUndo() ? (console.log("blocked a back attempt - trigger an undo"), CK.undo(), tc.a.notify({
                            message: "UNDO"
                        })) : (tc.a.notify({
                            message: "CANNOT UNDO",
                            duration: 1600
                        }), console.log("blocked a back attempt - cannot undo")))) : (t.currentPathname = n.pathname, t.currentSearch = n.search, t.currentKey = n.key)
                    }))
                }
            }, {
                key: "componentDidMount",
                value: function() {
                    var e = this,
                        t = this.props.history;
                    CK.routerInitialized || (this.initializeRouter(t), CK.routerInitialized = !0), (window.visualViewport || window).addEventListener("resize", (function() {
                        setTimeout((function() {
                            document.body.scrollTop = 0, window.scrollTo(0, 0), e.setState({
                                width: window.visualViewport ? window.visualViewport.width : window.innerWidth,
                                height: window.visualViewport ? window.visualViewport.height : window.innerHeight
                            })
                        }), 100)
                    })), navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform) && CK.sizing.compact() && window.addEventListener("beforeunload", (function(e) {
                        e.preventDefault(), e.returnValue = ""
                    }))
                }
            }, {
                key: "clearBodyExtra",
                value: function() {
                    var e = {};
                    Zv.map((function(t) {
                        return e[t] = void 0
                    })), CK.tweak({
                        parts: e
                    })
                }
            }, {
                key: "render",
                value: function() {
                    var e = this,
                        t = CK.data,
                        n = t.custom.arms,
                        r = f.isExtraTall(),
                        o = t.parts,
                        a = o.bodyLower && CK.Options.parts[o.bodyLower] && CK.Options.parts[o.bodyLower].keywords.nonBipedal,
                        i = !!Jv.find((function(e) {
                            return e in o
                        })),
                        s = o.tail && !CK.Options.parts[o.tail].keywords.tailHeldIncompatible,
                        c = "#gifts" == window.location.hash ? "Extras" : "Races";
                    UIState.parseGiftURL(), UIState.parsePromoURL();
                    var l = "";
                    return UIState.compact ? (l += "compact-layout", l += UIState.collapsed ? " main-menu-Tabs" : "") : l += "desktop-layout", l += UIState.landscape ? " landscape-layout" : " portrait-layout", React.createElement("div", {
                        className: l,
                        style: {
                            width: this.state.width,
                            height: this.state.height
                        }
                    }, React.createElement(Ln.a, null), React.createElement(Yr, {
                        showExtraMenu: !0
                    }, React.createElement(wu, {
                        label: "My Characters"
                    })), React.createElement("div", {
                        className: "app-wrapper"
                    }, !1, React.createElement(b, null), React.createElement(ec, null), React.createElement(Ff, null), React.createElement(Gl, null), React.createElement(Ac, {
                        defaultSelection: c,
                        footer: React.createElement(kh, null)
                    }, !1, React.createElement(vl, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        label: "Races"
                    }, React.createElement(qs, {
                        category: "racegenders",
                        columns: 2,
                        label: "Races",
                        showSelected: !0
                    })), React.createElement(vl, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        onOpen: eb,
                        onClose: tb,
                        label: "Head"
                    }, React.createElement(Ko, {
                        label: "Face",
                        hasFilter: !0,
                        pinned: React.createElement(Cl, {
                            name: "faceSoftness",
                            label: "Softness"
                        })
                    }, React.createElement(bt, {
                        label: "Face"
                    })), React.createElement(Ko, {
                        label: "Features"
                    }, React.createElement($m, {
                        label: "Features"
                    })), React.createElement(Ko, {
                        label: "Expression",
                        extraClass: "expression",
                        pinned: React.createElement(Ls, {
                            category: "expression",
                            ignoreGenre: !0,
                            showSelected: !1,
                            selectedTest: function(e) {
                                for (var n in e.sliders)
                                    if (!(n in t.sliders) || t.sliders[n] !== e.sliders[n]) return !1;
                                return !0
                            }
                        })
                    }, React.createElement(jl, {
                        label: "Expression",
                        maxCombinedValue: 1.5,
                        sliders: [
                            ["Smile", "xprsn_smile"],
                            ["Cocky", "xprsn_cocky"],
                            ["Snarl", "xprsn_snarl"],
                            ["Confused", "xprsn_confused"]
                        ]
                    }), React.createElement(Cl, {
                        name: "jaw",
                        label: "AAAARRRGGGGHH!!!"
                    }), CK.Settings.color && React.createElement(Cl, {
                        name: "lookH",
                        label: "Eye Sideways"
                    }), CK.Settings.color && React.createElement(Cl, {
                        name: "lookV",
                        label: "Eye Up & Down"
                    })), React.createElement(Ko, {
                        label: "Ears",
                        hasFilter: !0,
                        slot: "ear",
                        hasClear: !0
                    }, React.createElement(qi, {
                        label: "Ears",
                        slot: "ear",
                        linkedDefault: !0
                    })), React.createElement(Ko, {
                        label: "Hair",
                        hasFilter: !0,
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Hair",
                        slot: "hair",
                        clearTransforms: !0
                    })), React.createElement(Ko, {
                        label: "Beard",
                        hasFilter: !0,
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Beard",
                        slot: "beard"
                    })), React.createElement(Ko, {
                        label: "Eyebrows",
                        hasFilter: !0,
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Eyebrows",
                        slot: "eyebrows"
                    })), React.createElement(Ko, {
                        label: "Eyes",
                        hasFilter: !0,
                        slot: "eye",
                        hasClear: !0
                    }, React.createElement(qi, {
                        slot: "eye",
                        label: "Eyes",
                        linkedDefault: !0
                    })), React.createElement(Ko, {
                        label: "Teeth",
                        hasFilter: !0,
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Teeth"
                    })), React.createElement(Fm, {
                        label: "Additional",
                        hasClear: Fm.hasHorns(),
                        clear: function() {
                            return Fm.clear()
                        }
                    })), React.createElement(vl, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        label: "Body"
                    }, React.createElement(Ko, {
                        label: "Torso",
                        slot: "bodyUpper",
                        hasFilter: !0,
                        hasClear: !0,
                        pinned: React.createElement(Id, null)
                    }, React.createElement(bt, {
                        label: "Torso",
                        slot: "bodyUpper"
                    })), n && !1, !1, n > 2 && !1, React.createElement(Ko, {
                        label: "Legs",
                        hasFilter: !0,
                        hasClear: !0,
                        slot: "bodyLower"
                    }, React.createElement(bt, {
                        label: "Legs",
                        slot: "bodyLower"
                    })), !1, React.createElement(Ko, {
                        label: "Measurements"
                    }, React.createElement(Zh, {
                        label: "Measurements"
                    })), React.createElement(Ko, {
                        label: "Wings",
                        hasFilter: !0,
                        hasClear: !0,
                        slot: "wings"
                    }, React.createElement(qi, {
                        label: "Wings",
                        slot: "wings",
                        flip: !0,
                        linkedDefault: !0
                    })), React.createElement(Ko, {
                        label: "Tail",
                        hasFilter: !0,
                        hasClear: !0,
                        pinned: React.createElement(Tm, null)
                    }, React.createElement(bt, {
                        label: "Tail"
                    })), React.createElement(Ko, {
                        label: "Additional",
                        hasFilter: !0,
                        hasClear: !!Zv.find((function(e) {
                            return e in o
                        })),
                        clear: function() {
                            return e.clearBodyExtra()
                        }
                    }, React.createElement(bt, {
                        slot: "bodyMiscBack",
                        label: "",
                        header: React.createElement("div", {
                            style: {
                                marginTop: 10
                            }
                        }, "Back"),
                        hideIfEmpty: !0
                    }), React.createElement(qi, {
                        slot: "bodyMiscLegs",
                        label: "",
                        linkedDefault: !0,
                        header: React.createElement("div", {
                            style: {
                                marginTop: 30
                            }
                        }, "Legs"),
                        hideIfEmpty: !0
                    }), React.createElement(qi, {
                        slot: "bodyMiscArms",
                        label: "",
                        linkedDefault: !0,
                        header: React.createElement("div", {
                            style: {
                                marginTop: 30
                            }
                        }, "Arms"),
                        hideIfEmpty: !0
                    }), React.createElement(bt, {
                        slot: "bodyMiscChest",
                        label: "",
                        header: React.createElement("div", {
                            style: {
                                marginTop: 30
                            }
                        }, "Chest"),
                        hideIfEmpty: !0
                    }), React.createElement(qi, {
                        slot: "bodyMiscFeet",
                        label: "",
                        linkedDefault: !0,
                        header: React.createElement("div", {
                            style: {
                                marginTop: 30
                            }
                        }, "Feet"),
                        hideIfEmpty: !0
                    }))), React.createElement(vl, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        label: "Clothing"
                    }, React.createElement(Ko, {
                        label: "Outfits",
                        hasFilter: !0,
                        hasClear: $v.find((function(e) {
                            return CK.data.parts[e]
                        })),
                        clear: function() {
                            var e = {};
                            $v.map((function(t) {
                                return e[t] = void 0
                            })), CK.tweak({
                                parts: e
                            })
                        }
                    }, React.createElement(op, {
                        label: "Outfits",
                        category: "armorSets",
                        columns: 4,
                        showSelected: !0
                    })), React.createElement(Ca, {
                        label: "Headwear",
                        slot: "helm",
                        hasClear: !0
                    }), !1, React.createElement(Ko, {
                        label: "Shoulders",
                        hasFilter: !0,
                        hasClear: !0
                    }, React.createElement(qi, {
                        label: "Shoulders",
                        linkedDefault: !0
                    })), React.createElement(Ko, {
                        label: "Chest",
                        hasFilter: !0,
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Chest"
                    })), !1, n && React.createElement(Ko, {
                        label: "Gloves A",
                        slot: "gloves0",
                        hasFilter: !0
                    }, React.createElement(qi, {
                        label: "Gloves A",
                        slot: "gloves0",
                        linkedDefault: !0
                    })), React.createElement(Ko, {
                        label: n ? "Gloves B" : "Gloves",
                        slot: "gloves",
                        hasFilter: !0,
                        hasClear: !0
                    }, React.createElement(qi, {
                        label: n ? "Gloves B" : "Gloves",
                        slot: "gloves",
                        linkedDefault: !0
                    })), n >= 2 && React.createElement(Ko, {
                        label: "Gloves C",
                        slot: "gloves1",
                        hasFilter: !0
                    }, React.createElement(qi, {
                        label: "Gloves C",
                        slot: "gloves1",
                        linkedDefault: !0
                    })), React.createElement(Ko, {
                        label: "Legs",
                        hasFilter: !0,
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Legs",
                        test: !a && function(e) {
                            return !e.keywords.bipedUnselectable
                        }
                    })), React.createElement(Ko, {
                        label: "Feet",
                        hasFilter: !0,
                        hasClear: !0
                    }, React.createElement(qi, {
                        label: "Feet",
                        linkedDefault: !0
                    })), React.createElement(Ko, {
                        label: "Mask",
                        hasFilter: !0,
                        slot: "mask",
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Mask",
                        slot: "mask"
                    }))), React.createElement(vl, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        label: "Gear"
                    }, n && React.createElement(mi, {
                        slot: "item0",
                        label: "Hands A",
                        itemD: !1,
                        hasClear: o.item0R || o.item0L,
                        clear: function() {
                            return jt.clearClick("item0R", "item0L")
                        }
                    }), React.createElement(mi, {
                        slot: "item",
                        label: n ? "Hands B" : "Hands",
                        itemD: !n,
                        hasClear: o.itemR || o.itemL,
                        clear: function() {
                            return jt.clearClick("itemR", "itemL")
                        }
                    }), n >= 2 && React.createElement(mi, {
                        slot: "item1",
                        label: "Hands C",
                        itemD: !1,
                        hasClear: o.item1R || o.item1L,
                        clear: function() {
                            return jt.clearClick("item1R", "item1L")
                        }
                    }), 10246 === o.face && React.createElement(om, {
                        slot: "itemTrunk",
                        label: "Trunk",
                        hasClear: !0
                    }), 10795 === o.face && React.createElement(om, {
                        slot: "itemTrunk",
                        label: "Tentacles",
                        hasClear: !0
                    }), s && React.createElement(om, {
                        slot: "itemTail",
                        label: "Tail",
                        hasClear: !0
                    }), React.createElement(Zi, {
                        label: "Side",
                        hasClear: !0
                    }), React.createElement(Ko, {
                        label: "Back",
                        hasFilter: !0,
                        slot: "back",
                        hasClear: !0,
                        navAuto: !0
                    }, React.createElement(bt, {
                        label: "back",
                        slot: "back",
                        clearTransforms: !0
                    }), React.createElement(bt, {
                        hideIfEmpty: !0,
                        label: "Extra",
                        slot: "backAttach"
                    })), React.createElement(Xd, {
                        label: "Back Items",
                        slot: "backItem",
                        hasClear: !0
                    }), React.createElement(Ko, {
                        label: "Eye",
                        hasFilter: !0,
                        slot: "faceUpper",
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Eye",
                        slot: "faceUpper"
                    })), React.createElement(Ko, {
                        label: "Mouth",
                        hasFilter: !0,
                        slot: "faceLower",
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Mouth",
                        slot: "faceLower"
                    })), React.createElement(Ko, {
                        label: "Rings",
                        slot: "ring",
                        hasFilter: !0,
                        hasClear: i,
                        clear: function() {
                            var e = {};
                            Jv.map((function(t) {
                                return e[t] = void 0
                            })), CK.tweak({
                                parts: e
                            })
                        }
                    }, React.createElement(Ss, {
                        label: "Rings",
                        slot: "ring"
                    })), !1), React.createElement(vl, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        label: "Base",
                        onClose: ah.onClose
                    }, React.createElement(Ko, {
                        label: "Items",
                        slot: "baseItem",
                        hasFilter: !0,
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Items",
                        slot: "baseItem",
                        clearTransforms: !0
                    })), Nn.a.released("baseItemB") && (!!o.baseItem || !!o.baseItemB) && React.createElement(Ko, {
                        label: "Items B",
                        slot: "baseItemB",
                        hasFilter: !0,
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Items",
                        slot: "baseItemB",
                        clearTransforms: !0
                    })), React.createElement(Ko, {
                        label: "Base",
                        pinned: Ws.clipSize(),
                        slot: "base",
                        hasClear: !0
                    }, React.createElement(bt, {
                        label: "Base",
                        columns: 3,
                        test: function(e) {
                            return !e.keywords.initiative || !r
                        }
                    })), Nn.a.released("baseRim") && React.createElement(Ko, {
                        label: "Rim"
                    }, React.createElement(bt, {
                        label: "Rim",
                        slot: "baseRim"
                    })), React.createElement(ah, {
                        label: "Label",
                        slot: "label",
                        hasClear: t.parts.label || t.labels.initiativeBack || t.labels.label,
                        clear: function() {
                            CK.tweak({
                                parts: {
                                    label: void 0
                                },
                                labels: {
                                    initiativeBack: void 0,
                                    label: void 0
                                }
                            })
                        }
                    })), React.createElement(vl, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        label: "Mount"
                    }, React.createElement(hs, {
                        label: "Mount"
                    })), React.createElement(vl, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        label: "Pose"
                    }, React.createElement(Ko, {
                        label: "Character",
                        pinned: React.createElement("div", {
                            style: {
                                width: "100%",
                                display: "flex",
                                justifyContent: "center"
                            }
                        }, React.createElement("div", {
                            onClick: function() {
                                CK.mirror()
                            },
                            className: "button " + (CK.data.mirroredPose ? "selected" : "")
                        }, React.createElement("img", {
                            src: "/static/svg/mirror.svg",
                            width: 46,
                            height: 46
                        }), React.createElement("div", {
                            style: {
                                fontSize: "small"
                            }
                        }, "Mirror")))
                    }, React.createElement(Al, {
                        label: "Pose",
                        transformNoClear: Fm.slots
                    })), Nn.a.released("familiarPickAPose") && React.createElement(Ko, {
                        label: "Familiar",
                        hasFilter: !0,
                        slot: "baseItem"
                    }, React.createElement(hp, {
                        label: "Familiar",
                        slot: "baseItem"
                    })), !1, !1, React.createElement(Ko, {
                        label: "Advanced",
                        pinned: React.createElement(Ed, null),
                        hasClear: !0,
                        clear: function() {
                            return CK.clearTransforms()
                        }
                    }, React.createElement(Ed, {
                        content: !0,
                        label: "Advanced"
                    }))), !1, CK.Settings.color && React.createElement(iy, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        label: "Color"
                    }, React.createElement(Ko, {
                        label: "Race",
                        hasClear: !!t.schemes.race,
                        clear: function() {
                            Ln.a.promptOkCancel("Clear race theme?").then((function() {
                                CK.tweak({
                                    schemes: {
                                        race: void 0
                                    }
                                })
                            }))
                        }
                    }, React.createElement(_f, {
                        label: "Race",
                        category: "race"
                    })), React.createElement(Ko, {
                        label: "Theme",
                        hasClear: !!t.schemes.outfit,
                        clear: function() {
                            Ln.a.promptOkCancel("Clear outfit theme?").then((function() {
                                CK.tweak({
                                    schemes: {
                                        outfit: void 0
                                    }
                                })
                            }))
                        }
                    }, React.createElement(_f, {
                        label: "Outfits",
                        category: "outfit",
                        slots: ["legs", "chest"]
                    })), React.createElement(Ko, {
                        label: "Decals",
                        pinned: !1,
                        hasClear: !!Object.keys(t.decals).length,
                        clear: function() {
                            CK.tweak({
                                decals: void 0
                            })
                        }
                    }, React.createElement("div", null, "Decals coming soon!")), React.createElement(Bu, {
                        label: "Paint",
                        hasClear: !!Object.keys(t.shaders).length,
                        clear: function() {
                            Ln.a.promptOkCancel("Clear all paints?").then((function() {
                                return CK.tweak({
                                    shaders: void 0
                                })
                            }))
                        }
                    }), React.createElement(Vv, {
                        label: "Mix",
                        hasClear: !!Object.keys(t.shaders).length,
                        clear: function() {
                            Ln.a.promptOkCancel("Clear all paints?").then((function() {
                                return CK.tweak({
                                    shaders: void 0
                                })
                            }))
                        }
                    })), UIState.compact && !CK.Settings.color && "1" === CK.Options.elements.colorbanner && React.createElement(vl, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        label: "Color"
                    }, React.createElement(Ko, {
                        label: "Kickstarter"
                    }, React.createElement("a", {
                        href: "/kickstarter/",
                        target: "blank",
                        className: "kickstarter"
                    }, React.createElement("img", {
                        src: "/static/img/corner-kickstarter.png"
                    })))), React.createElement(vl, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        label: "Extras"
                    }, React.createElement(Ko, {
                        label: "Dice",
                        noPadding: !0
                    }, React.createElement(ym, {
                        label: "Dice"
                    })), React.createElement(Ko, {
                        label: "Gift Cards"
                    }, React.createElement(Cm, null))), React.createElement(vl, {
                        tabbed: !0,
                        iconNav: !UIState.compact,
                        label: "Material"
                    }, React.createElement(ya, {
                        label: "Mini"
                    }))), !1, !1, !1, null, !UIState.compact && "1" === CK.Options.elements.colorbanner && React.createElement("a", {
                        href: "/kickstarter/",
                        target: "blank",
                        className: "corner-kickstarter"
                    }, React.createElement("img", {
                        src: "/static/img/corner-kickstarter.png"
                    })), !UIState.compact && React.createElement(ro, null)), !UIState.compact && React.createElement(xf, null), !UIState.compact && React.createElement(Nf, null))
                }
            }]) && qv(n.prototype, r), o && qv(n, o), t
        }());

        function rb(e) {
            return (rb = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function ob(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ab(e) {
            return (ab = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function ib(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function sb(e, t) {
            return (sb = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var cb = MU.withStyles,
            lb = VN.ReactRouter.withRouter,
            ub = VN.classNames,
            fb = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, n = !(o = ab(t).call(this, e)) || "object" !== rb(o) && "function" != typeof o ? ib(r) : o, UIState.compact = !0, n.exitCart = n.exitCart.bind(ib(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && sb(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "exitCart",
                    value: function() {
                        UIState.showOverlay = !1, UIState.updateBasketQuantity(), this.props.history.push("/")
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.portrait ? "compact-layout portrait" : "compact-layout landscape",
                            n = this.props.classes,
                            r = CK.Settings.theme,
                            o = React.createElement(window.Cart.CartContainer, {
                                theme: r
                            });
                        return React.createElement("div", {
                            id: "mobileApp",
                            className: ub(t, n.mobileApp)
                        }, React.createElement(ec, {
                            hidden: !0
                        }), React.createElement("div", {
                            id: "mobileHeader",
                            className: n.mobileHeader
                        }, React.createElement("div", {
                            id: "mobileLogo",
                            className: n.mobileLogo,
                            onClick: function() {
                                return e.exitCart()
                            }
                        }), CK.Options.partner && CK.Options.partner.static_path && React.createElement("img", {
                            className: n.affiliateLogo,
                            src: CK.Options.partner.static_path + "affiliate-logo.png",
                            onError: function(e) {
                                e.target.style.display = "none"
                            }
                        })), o)
                    }
                }]) && ob(n.prototype, r), o && ob(n, o), t
            }(),
            hb = cb({
                mobileHeader: {
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "space-between",
                    alignSelf: "flex-start",
                    position: "absolute",
                    top: 0,
                    height: "56px",
                    left: 0,
                    right: 0,
                    zIndex: 4,
                    flex: "0 1 48px",
                    backgroundColor: "white",
                    boxShadow: "0 1px 3px 0 rgba(0, 0, 0, 0.2)"
                },
                mobileApp: {
                    display: "flex",
                    flexDirection: "column",
                    backgroundColor: "white",
                    height: "100%",
                    overflow: "hidden"
                },
                mobileLogo: {
                    marginLeft: 16,
                    marginRight: 20,
                    flex: "0 0 32px",
                    height: "45px",
                    backgroundImage: "url('../../../static/svg/logo.svg')",
                    backgroundSize: "32px 45px",
                    backgroundRepeat: "no-repeat",
                    cursor: "pointer"
                },
                affiliateLogo: {
                    position: "absolute",
                    left: 64,
                    maxWidth: 96,
                    maxHeight: 56,
                    padding: "0px 8px"
                }
            })(lb(fb));

        function pb(e) {
            return (pb = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function db(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function mb(e, t) {
            return !t || "object" !== pb(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function yb(e) {
            return (yb = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function vb(e, t) {
            return (vb = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var bb = function(e) {
            function t(e) {
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), mb(this, yb(t).call(this, e))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && vb(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "render",
                value: function() {
                    return React.createElement("div", {
                        onClick: this.props.onClick,
                        style: this.props.onClick && {
                            cursor: "pointer"
                        }
                    }, React.createElement("h1", {
                        id: "logo",
                        className: this.props.className
                    }, " ", CK.Settings.projectLabel, " "))
                }
            }]) && db(n.prototype, r), o && db(n, o), t
        }();

        function gb(e) {
            return (gb = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function wb(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function kb(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Sb(e) {
            return (Sb = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function _b(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function Cb(e, t) {
            return (Cb = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Rb = VN.classNames,
            Ob = VN.ReactRouter.withRouter,
            Eb = MU.withStyles,
            Pb = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, (n = !(o = Sb(t).call(this, e)) || "object" !== gb(o) && "function" != typeof o ? _b(r) : o).state = {
                        scrollPosition: 0
                    }, n.handleScroll = n.handleScroll.bind(_b(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Cb(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "componentDidMount",
                    value: function() {
                        this.listenForScroll()
                    }
                }, {
                    key: "onRouteChanged",
                    value: function() {
                        this.setState({
                            scrollPosition: 0
                        }), this.listenForScroll()
                    }
                }, {
                    key: "listenForScroll",
                    value: function() {
                        document.querySelector("#main > *").addEventListener("scroll", this.handleScroll)
                    }
                }, {
                    key: "handleScroll",
                    value: function(e) {
                        this.setState({
                            scrollPosition: e.target.scrollTop
                        })
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        var e = document.querySelector("#main > *");
                        e && e.removeEventListener("scroll", this)
                    }
                }, {
                    key: "componentDidUpdate",
                    value: function(e) {
                        this.props.location !== e.location && this.onRouteChanged()
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this.props.classes;
                        return this.props.logoOnly ? React.createElement("div", {
                            id: "cartHeader",
                            className: Rb(this.props.className, wb({}, e.headerUnderline, this.state.scrollPosition > 0))
                        }, React.createElement("div", null), React.createElement(bb, {
                            onClick: this.props.onClick,
                            className: this.props.logoClass
                        }), React.createElement("div", null)) : React.createElement("div", {
                            id: "cartHeader",
                            className: Rb(this.props.className, wb({}, e.headerUnderline, this.state.scrollPosition > 0))
                        }, React.createElement(bb, {
                            onClick: this.props.onClick,
                            className: this.props.logoClass
                        }), React.createElement("div", null, this.props.children), React.createElement("div", null))
                    }
                }]) && kb(n.prototype, r), o && kb(n, o), t
            }(),
            xb = Eb({
                headerUnderline: {
                    borderBottom: "1px solid #EAEAEA"
                }
            })(Ob(Pb));

        function jb(e) {
            return (jb = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Tb(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Mb(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Kb(e) {
            return (Kb = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Ib(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function Nb(e, t) {
            return (Nb = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Bb = MU.withStyles,
            Ab = VN.ReactRouter.withRouter,
            Lb = VN.classNames,
            Ub = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, n = !(o = Kb(t).call(this, e)) || "object" !== jb(o) && "function" != typeof o ? Ib(r) : o, UIState.compact = !1, n.exitCart = n.exitCart.bind(Ib(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Nb(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "viewNotInCheckoutFlow",
                    value: function() {
                        var e = this.props.history.location.pathname;
                        return "/cart" == e || "/cart/" == e || "/cart/login" == e || "/cart/login/" == e
                    }
                }, {
                    key: "isThankYouView",
                    value: function() {
                        var e = this.props.history.location.pathname;
                        return "/cart/checkout/thank-you" == e || "/cart/checkout/thank-you/" == e
                    }
                }, {
                    key: "exitCart",
                    value: function() {
                        UIState.showOverlay = !1, UIState.updateBasketQuantity(), this.props.history.push("/")
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.classes,
                            n = this.props.portrait ? "desktop-layout portrait" : "desktop-layout landscape",
                            r = this.isThankYouView(),
                            o = CK.Settings.theme,
                            a = React.createElement(window.Cart.CartContainer, {
                                theme: o
                            });
                        return React.createElement("div", {
                            className: Lb(t.wrapper, n)
                        }, React.createElement(ec, {
                            hidden: !0
                        }), this.props.match.isExact ? React.createElement(Yr, {
                            onClick: function() {
                                return e.exitCart()
                            },
                            logoClass: t.clickable,
                            suppressCartQuantity: !0,
                            className: t.header,
                            position: "relative"
                        }) : React.createElement(xb, {
                            onClick: function() {
                                return e.exitCart()
                            },
                            logoOnly: r,
                            logoClass: Lb(t.logoClass, t.clickable),
                            cartClass: t.suppressCartQuantity,
                            suppressCartQuantity: !0,
                            className: Lb(t.cartHeader, Tb({}, t.centerLogoFlex, r))
                        }, this.viewNotInCheckoutFlow() ? "" : "CHECKOUT"), a)
                    }
                }]) && Mb(n.prototype, r), o && Mb(n, o), t
            }(),
            Db = Bb({
                header: {
                    position: "relative !important"
                },
                cartHeader: {
                    height: "112px",
                    padding: "0 24px",
                    margin: 0,
                    background: "none",
                    display: "flex",
                    "& div": {
                        flex: "1",
                        textAlign: "center",
                        fontWeight: "bold",
                        fontFamily: "RobotoBold",
                        marginBottom: "40px !important",
                        marginTop: "auto !important",
                        letterSpacing: "1px"
                    },
                    "@media (min-width: 960px)": {
                        margin: "0 calc(50% - 480px - 24px)"
                    },
                    "@media (min-width: 1280px)": {
                        margin: "0 calc(13% + 7 * ((100vw - 1280px) / 44.8) - 24px)"
                    },
                    "@media (min-width: 1920px)": {
                        margin: "0 calc(20% - 24px)"
                    }
                },
                logoClass: {
                    left: "0 !important",
                    position: "relative !important",
                    paddingTop: "54px !important",
                    margin: "auto",
                    top: "16px",
                    display: "block",
                    width: "175px",
                    height: 0,
                    backgroundImage: "url('../../../static/img/logo/logo@2x.png')",
                    backgroundSize: "175px 54px",
                    overflow: "hidden",
                    pointerEvents: "none",
                    backgroundRepeat: "no-repeat"
                },
                centerLogoFlex: {
                    "& div.logoContainer": {
                        flex: "0 !important"
                    }
                },
                clickable: {
                    cursor: "pointer"
                },
                suppressCartQuantity: {
                    "& span.cart-quantity": {
                        display: "none"
                    }
                },
                wrapper: {
                    background: "#FCFCFC",
                    height: "100%",
                    overflow: "hidden"
                }
            })(Ab(Ub));

        function Fb(e) {
            return (Fb = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function zb(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function Vb(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Gb(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function qb(e, t) {
            return !t || "object" !== Fb(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Hb(e) {
            return (Hb = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Wb(e, t) {
            return (Wb = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Qb = MU.withStyles,
            Xb = VN.ReactRouter.withRouter,
            Yb = VN.classNames,
            Zb = function(e) {
                function t() {
                    return Vb(this, t), qb(this, Hb(t).apply(this, arguments))
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && Wb(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.classes;
                        return React.createElement("div", {
                            className: t.footer
                        }, React.createElement("div", {
                            className: Yb(t.content, zb({}, t.contentDesktop, !UIState.compact))
                        }, React.createElement("div", {
                            className: t.columns
                        }, React.createElement("div", {
                            className: t.column
                        }, React.createElement("div", {
                            className: Yb(t.columnTitle, zb({}, t.mobileHidden, UIState.compact))
                        }, "Company Info"), React.createElement("ul", {
                            className: t.list
                        }, React.createElement("li", null, React.createElement("a", {
                            href: "/about/",
                            target: "blank"
                        }, "About Us")), React.createElement("li", null, React.createElement("a", {
                            href: "/Materials/",
                            target: "blank"
                        }, "Material & Pricing")), React.createElement("li", null, React.createElement("a", {
                            href: "/ShippingandReturn/",
                            target: "blank"
                        }, "Shipping & Returns")), React.createElement("li", {
                            className: Yb(zb({}, t.desktopHidden, !UIState.compact))
                        }, React.createElement("a", {
                            href: "/support/"
                        }, "Submit a Ticket")))), React.createElement("div", {
                            className: t.column
                        }, React.createElement("div", {
                            className: Yb(t.columnTitle, zb({}, t.mobileHidden, UIState.compact))
                        }, "Gift Cards"), React.createElement("ul", {
                            className: t.list
                        }, React.createElement("li", null, React.createElement("a", {
                            href: "",
                            onClick: function(t) {
                                t.preventDefault(), e.props.history.push("/account/gift-card-redeem")
                            }
                        }, "Redeem a Gift Card")), React.createElement("li", null, React.createElement("a", {
                            href: "",
                            onClick: function(e) {
                                e.preventDefault(), UIState.showOverlay = "giftCard"
                            }
                        }, "Buy a Gift Card")), React.createElement("li", {
                            className: Yb(zb({}, t.desktopHidden, !UIState.compact))
                        }, React.createElement("a", {
                            href: "/Privacy/",
                            target: "blank"
                        }, "Privacy Policy")), React.createElement("li", {
                            className: Yb(zb({}, t.desktopHidden, !UIState.compact))
                        }, React.createElement("a", {
                            href: "/ToS/",
                            target: "blank"
                        }, "Terms & Conditions")), React.createElement("li", {
                            className: Yb(zb({}, t.desktopHidden, !UIState.compact))
                        }, React.createElement("a", {
                            href: "/CookiePolicy/",
                            target: "blank"
                        }, "Cookie Policy")))), React.createElement("div", {
                            className: Yb(t.column, zb({}, t.mobileHidden, UIState.compact))
                        }, React.createElement("div", {
                            className: t.columnTitle
                        }, "Need Support?"), React.createElement("ul", {
                            className: t.list
                        }, React.createElement("li", null, React.createElement("a", {
                            href: "/support/",
                            target: "blank"
                        }, "Submit a Ticket")))), React.createElement("div", {
                            className: Yb(zb({}, t.mobileHidden, UIState.compact))
                        }, React.createElement("div", {
                            className: Yb(t.social, t.socialDesktop)
                        }, React.createElement("a", {
                            href: "https://www.facebook.com/HeroForgeMinis/",
                            target: "_blank"
                        }, React.createElement("img", {
                            src: "/static/svg/social/facebook.svg",
                            className: t.fbImg
                        })), React.createElement("a", {
                            href: "https://twitter.com/heroforgeminis",
                            target: "_blank"
                        }, React.createElement("img", {
                            src: "/static/svg/social/twitter.svg"
                        })), React.createElement("a", {
                            href: "https://www.instagram.com/heroforgeminis/",
                            target: "_blank"
                        }, React.createElement("img", {
                            src: "/static/svg/social/instagram.svg"
                        }))), React.createElement("ul", {
                            className: t.list
                        }, React.createElement("li", null, React.createElement("a", {
                            href: "/Privacy/",
                            target: "blank"
                        }, "Privacy Policy")), React.createElement("li", null, React.createElement("a", {
                            href: "/ToS/",
                            target: "blank"
                        }, "Terms & Conditions")), React.createElement("li", null, React.createElement("a", {
                            href: "/CookiePolicy/",
                            target: "blank"
                        }, "Cookie Policy"))))), React.createElement("div", {
                            className: t.copyright
                        }, " ", (new Date).getFullYear(), " Heroforge.com - All Rights reserved"), React.createElement("div", {
                            className: Yb(t.social, zb({}, t.desktopHidden, !UIState.compact))
                        }, React.createElement("a", {
                            href: "https://www.facebook.com/HeroForgeMinis/",
                            target: "_blank"
                        }, React.createElement("img", {
                            src: "/static/svg/social/facebook.svg",
                            className: t.fbImg
                        })), React.createElement("a", {
                            href: "https://twitter.com/heroforgeminis",
                            target: "_blank"
                        }, React.createElement("img", {
                            src: "/static/svg/social/twitter.svg"
                        })), React.createElement("a", {
                            href: "https://www.instagram.com/heroforgeminis/",
                            target: "_blank"
                        }, React.createElement("img", {
                            src: "/static/svg/social/instagram.svg"
                        })))))
                    }
                }]) && Gb(n.prototype, r), o && Gb(n, o), t
            }(),
            Jb = Qb({
                footer: {
                    backgroundColor: "#F7F7F7",
                    width: "100%"
                },
                content: {
                    width: "100%",
                    padding: "25px 20px",
                    boxSizing: "border-box"
                },
                contentDesktop: {
                    margin: "0 auto",
                    padding: "45px 0 30px",
                    maxWidth: 910
                },
                columns: {
                    display: "flex"
                },
                column: {
                    flex: 1
                },
                columnTitle: {
                    fontWeight: "bold",
                    fontFamily: "Roboto",
                    fontSize: 16,
                    marginBottom: 15
                },
                list: {
                    listStyle: "none",
                    fontFamily: "Roboto",
                    padding: 0,
                    margin: 0,
                    fontSize: 14,
                    "& li + li": {
                        marginTop: 4
                    },
                    "& a": {
                        display: "block",
                        color: "#8A8A8A",
                        textDecoration: "none"
                    }
                },
                social: {
                    display: "flex",
                    alignItems: "center",
                    marginTop: 24,
                    marginBottom: 64,
                    justifyContent: "center",
                    "& a": {
                        width: 20
                    },
                    "& a + a": {
                        marginLeft: 15
                    }
                },
                socialDesktop: {
                    marginBottom: 15,
                    marginTop: 4,
                    justifyContent: "left",
                    "& a + a": {
                        marginLeft: 10
                    }
                },
                copyright: {
                    marginTop: 24,
                    color: "#8A8A8A",
                    textAlign: "center",
                    fontSize: 11,
                    fontFamily: "Roboto",
                    textTransform: "uppercase"
                },
                fbImg: {
                    marginTop: -5
                },
                mobileHidden: {
                    display: "none"
                },
                desktopHidden: {
                    display: "none"
                }
            }, {
                withTheme: !0
            })(Xb(Zb)),
            $b = {
                useNextVariants: !0,
                breakpoints: {
                    values: {
                        md: CK.Settings.compactWidth
                    }
                },
                palette: {
                    primary: {
                        light: "#989898",
                        main: "#555963",
                        dark: "#333333"
                    },
                    secondary: {
                        main: "#ab0007",
                        dark: "#6f0b0d",
                        contrastText: "white"
                    },
                    background: {
                        lightest: "#FFFFFF",
                        lighter: "#FCFCFC",
                        light: "#F6F7F8",
                        main: "#E9EAEB"
                    },
                    border: {
                        light: "#CCC",
                        main: "#EAEAEA"
                    }
                },
                typography: {
                    fontSize: 12,
                    htmlFontSize: 16,
                    fontFamily: ["Roboto", "-apple-system", '"Helvetica Neue"', "Arial", "sans-serif", '"Apple Color Emoji"', '"Segoe UI Emoji"', '"Segoe UI Symbol"'].join(","),
                    bold: {
                        fontFamily: "RobotoBold"
                    }
                },
                overrides: {
                    MuiExpansionPanel: {
                        expanded: {
                            margin: "0 0 8px 0",
                            boxShadow: "none",
                            border: "1px solid #E6E6E6"
                        }
                    },
                    MuiAppBar: {
                        root: {
                            boxShadow: "none"
                        }
                    },
                    MuiFormLabel: {
                        asterisk: {
                            color: "#F0286B"
                        },
                        root: {
                            letterSpacing: "0.5px",
                            textTransform: "capitalize",
                            lineHeight: ".2"
                        }
                    },
                    MuiSelect: {
                        icon: {
                            right: "8px"
                        },
                        select: {
                            padding: void 0,
                            height: void 0
                        },
                        selectMenu: {
                            lineHeight: void 0
                        }
                    },
                    MuiOutlinedInput: {
                        input: {
                            padding: "12px 14px"
                        }
                    },
                    MuiPrivateNotchedOutline: {
                        root: {
                            margin: "-1px"
                        }
                    },
                    MuiTypography: {
                        root: {
                            letterSpacing: "0.2px"
                        }
                    }
                }
            };

        function eg(e) {
            return (eg = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function tg(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function ng(e) {
            return (ng = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function rg(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function og(e, t) {
            return (og = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var ag = MU.withStyles,
            ig = VN.ReactRouter.withRouter,
            sg = VN.classNames,
            cg = {
                container: {
                    height: "100%",
                    overflow: "auto",
                    "-webkit-overflow-scrolling": "auto",
                    paddingTop: 50
                },
                mobileApp: {
                    display: "flex",
                    flexDirection: "column",
                    backgroundColor: "white"
                }
            },
            lg = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), r = this, n = !(o = ng(t).call(this, e)) || "object" !== eg(o) && "function" != typeof o ? rg(r) : o, UIState.compact = !0, n.exitAccounts = n.exitAccounts.bind(rg(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && og(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "exitAccounts",
                    value: function() {
                        UIState.showOverlay = !1, UIState.updateBasketQuantity(), this.props.history.push("/")
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.classes,
                            n = this.props.portrait ? "compact-layout portrait" : "compact-layout landscape",
                            r = React.createElement(window.Accounts.AccountsContainer, {
                                theme: $b
                            });
                        return React.createElement("div", {
                            id: "mobileApp",
                            className: sg(t.container, t.mobileApp, n)
                        }, React.createElement(Ln.a, null), React.createElement(ec, {
                            hidden: !0
                        }), React.createElement(Yr, {
                            onClick: function() {
                                return e.exitAccounts()
                            }
                        }), r, React.createElement(Jb, null))
                    }
                }]) && tg(n.prototype, r), o && tg(n, o), t
            }(),
            ug = ag(cg)(ig(lg));

        function fg(e) {
            return (fg = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function hg(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function pg(e) {
            return (pg = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function dg(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function mg(e, t) {
            return (mg = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var yg = MU,
            vg = yg.withStyles,
            bg = yg.MuiThemeProvider,
            gg = VN.ReactRouter.withRouter,
            wg = VN.classNames,
            kg = function(e) {
                function t(e) {
                    var n, r, o;
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), UIState.compact = !1, r = this, (n = !(o = pg(t).call(this, e)) || "object" !== fg(o) && "function" != typeof o ? dg(r) : o).exitAccounts = n.exitAccounts.bind(dg(n)), n
                }
                var n, r, o;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && mg(e, t)
                }(t, React.Component), n = t, (r = [{
                    key: "exitAccounts",
                    value: function() {
                        UIState.showOverlay = !1, UIState.updateBasketQuantity(), this.props.history.push("/")
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this,
                            t = this.props.classes,
                            n = this.props.portrait ? "desktop-layout portrait" : "desktop-layout landscape",
                            r = React.createElement(window.Accounts.AccountsContainer, {
                                theme: $b,
                                nav: React.createElement(zr, null)
                            });
                        return React.createElement(bg, {
                            theme: $b
                        }, React.createElement("div", {
                            className: wg(t.wrapper, n)
                        }, React.createElement(Ln.a, null), React.createElement(Yr, {
                            showExtraMenu: !0,
                            onClick: function() {
                                return e.exitAccounts()
                            },
                            position: "relative"
                        }), React.createElement("div", {
                            className: t.container
                        }, React.createElement(ec, {
                            hidden: !0
                        }), r, React.createElement(Jb, null))))
                    }
                }]) && hg(n.prototype, r), o && hg(n, o), t
            }(),
            Sg = vg({
                container: {
                    position: "absolute",
                    top: 40,
                    left: 0,
                    bottom: 0,
                    right: 0,
                    overflow: "auto",
                    display: "flex",
                    flexDirection: "column"
                },
                logoClass: {
                    position: "relative !important",
                    top: "40 !important",
                    left: "0 !important"
                },
                wrapper: {
                    background: "#FCFCFC",
                    height: "100%"
                }
            }, {
                withTheme: !0
            })(gg(kg)),
            _g = VN.MediaQuery,
            Cg = {
                position: "absolute",
                top: "12%",
                left: "50%",
                marginLeft: "-175px",
                width: "350px",
                textAlign: "center",
                zIndex: "2",
                backgroundColor: "rgba(255,255,255,0.7)"
            },
            Rg = function() {
                return React.createElement("div", {
                    className: "debugMediaQuery",
                    style: Cg
                }, React.createElement(_g, {
                    minWidth: CK.Settings.compactWidth
                }, "Screen is wide enough to show our desktop view"), React.createElement(_g, {
                    maxWidth: CK.Settings.compactWidth - 1
                }, "You are sized too small for our desktop view", React.createElement(_g, {
                    orientation: "landscape"
                }, "We should switch to a mini-desktop layout in this landscape view")), React.createElement(_g, {
                    maxDeviceWidth: 1223
                }, "You are a tablet or mobile phone"), React.createElement(_g, {
                    minDeviceWidth: 1224
                }, "You are a desktop", React.createElement(_g, {
                    maxWidth: CK.Settings.compactWidth - 1
                }, "You are sized like a tablet or mobile phone though")), React.createElement(_g, {
                    minDeviceWidth: 1824
                }, "Also you have a huge screen"), React.createElement(_g, {
                    orientation: "portrait"
                }, "You are portrait"), React.createElement(_g, {
                    orientation: "landscape"
                }, "You are landscape"), React.createElement(_g, {
                    minResolution: "2dppx"
                }, "You are retina"))
            };
        var Og = VN.ReactRouter,
            Eg = Og.BrowserRouter,
            Pg = Og.Route,
            xg = Og.Switch,
            jg = Og.Redirect;

        function Tg() {
            return React.createElement(Eg, null, React.createElement("div", null, React.createElement(xg, null, React.createElement(Pg, {
                path: "/cart",
                render: function() {
                    return React.createElement("div", null, React.createElement(_g, {
                        minWidth: CK.Settings.compactWidth
                    }, React.createElement(Db, null)), React.createElement(_g, {
                        maxWidth: CK.Settings.compactWidth - 1
                    }, React.createElement(_g, {
                        minWidth: 721
                    }, React.createElement(_g, {
                        query: "(max-aspect-ratio: 7500/10000)"
                    }, React.createElement(hb, {
                        portrait: !0
                    })), React.createElement(_g, {
                        query: "(min-aspect-ratio: 7501/10000)"
                    }, React.createElement(hb, null))), React.createElement(_g, {
                        maxWidth: 720
                    }, React.createElement(_g, {
                        minWidth: 451
                    }, React.createElement(_g, {
                        query: "(max-aspect-ratio: 14400/10000)"
                    }, React.createElement(hb, {
                        portrait: !0
                    })), React.createElement(_g, {
                        query: "(min-aspect-ratio: 14401/10000)"
                    }, React.createElement(hb, null))), React.createElement(_g, {
                        maxWidth: 450
                    }, React.createElement(hb, {
                        portrait: !0
                    })))), CK.Settings.debug && Rg())
                }
            }), React.createElement(jg, {
                from: "/accounts",
                to: "/account"
            }), React.createElement(Pg, {
                path: "/account",
                render: function() {
                    return React.createElement("div", null, React.createElement(_g, {
                        minWidth: CK.Settings.compactWidth
                    }, React.createElement(Sg, null)), React.createElement(_g, {
                        maxWidth: CK.Settings.compactWidth - 1
                    }, React.createElement(ug, null)), CK.Settings.debug && Rg())
                }
            }), React.createElement(Pg, {
                render: function() {
                    return React.createElement(nb, null)
                }
            }))))
        }

        function Mg(e) {
            return (Mg = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Kg(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function Ig(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Ng(e, t) {
            return !t || "object" !== Mg(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Bg(e) {
            return (Bg = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Ag(e, t) {
            return (Ag = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Lg = function(e) {
            function t() {
                return Kg(this, t), Ng(this, Bg(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Ag(e, t)
            }(t, e), n = t, o = [{
                key: "refresh",
                value: function() {
                    ReactDOM.render(Tg(), this.root)
                }
            }], (r = null) && Ig(n.prototype, r), o && Ig(n, o), t
        }(Zn);

        function Ug(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function Dg(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        Lg.showSupportEmail = function() {
            Ln.a.prompt(React.createElement("div", {
                style: {
                    userSelect: "text",
                    padding: "0 12px"
                }
            }, React.createElement("div", null, React.createElement("a", {
                href: "/support/#form"
            }, "support@heroforge.com"), React.createElement("br", null)), React.createElement("div", {
                style: {
                    opacity: .6
                }
            }, React.createElement("br", null), "Sky Castle Studios", React.createElement("br", null), "2701 Ocean Park Blvd.", React.createElement("br", null), "Suite 251, Box 7", React.createElement("br", null), "Santa Monica, CA 90405")), [{
                label: "Get Support",
                icon: "/static/svg/mail-white.svg",
                onClick: function() {
                    Ln.a.hideOverlay(), window.open("/support/")
                }
            }, {
                label: "Cancel",
                cancel: !0,
                onClick: function() {
                    Ln.a.hideOverlay()
                }
            }], "Contact", {
                selectable: !0
            })
        };
        var Fg = VN.axios,
            zg = function() {
                function e() {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e)
                }
                var t, n, r;
                return t = e, r = [{
                    key: "init",
                    value: function() {
                        window.gtag || (window.gtag = function() {}), window.fbq || (window.fbq = function() {}), CK.Settings.forge || (void 0 === this.minutes && this.initTimeOnPage(), e.initialized = !0)
                    }
                }, {
                    key: "initTimeOnPage",
                    value: function() {
                        var e = this;
                        this.minutes = 0, this.activeMinutes = 0, this.previousActiveMinute = 0, CK.Events.on("characterChanged", (function() {
                            e.userStillActive()
                        })), setInterval((function() {
                            return e.minutes++
                        }), 6e4)
                    }
                }, {
                    key: "userStillActive",
                    value: function() {
                        this.previousActiveMinute !== this.minutes && (this.previousActiveMinute = this.minutes, this.activeMinutes++, this.event("TimeOnPage", "spentTime", this.activeMinutes))
                    }
                }, {
                    key: "spec",
                    value: function(e, t, n) {
                        this.event(e, "specs", t, n)
                    }
                }, {
                    key: "event",
                    value: function(e, t, n, r) {
                        this.initialized && gtag("event", e, {
                            event_label: n,
                            value: r,
                            event_action: t
                        })
                    }
                }, {
                    key: "exception",
                    value: function(e, t) {
                        this.initialized && (void 0 !== t && (e += ":" + t), gtag("event", "exception", {
                            description: e,
                            fatal: !1
                        }), console.error(e, t), CK.Events.initialized && CK.Events.emit("exception", e))
                    }
                }, {
                    key: "getStats",
                    value: function(e) {
                        var t = 0,
                            n = 0,
                            r = Number.MAX_VALUE,
                            o = -r,
                            a = !0,
                            i = !1,
                            s = void 0;
                        try {
                            for (var c, l = e[Symbol.iterator](); !(a = (c = l.next()).done); a = !0) {
                                var u = c.value;
                                t += 1, n += u, r = Math.min(r, u), o = Math.max(o, u)
                            }
                        } catch (e) {
                            i = !0, s = e
                        } finally {
                            try {
                                a || null == l.return || l.return()
                            } finally {
                                if (i) throw s
                            }
                        }
                        var f = n / t,
                            h = 0,
                            p = !0,
                            d = !1,
                            m = void 0;
                        try {
                            for (var y, v = e[Symbol.iterator](); !(p = (y = v.next()).done); p = !0) {
                                var b = y.value - f;
                                h += b * b
                            }
                        } catch (e) {
                            d = !0, m = e
                        } finally {
                            try {
                                p || null == v.return || v.return()
                            } finally {
                                if (d) throw m
                            }
                        }
                        return {
                            count: t,
                            min: r,
                            max: o,
                            mean: f,
                            deviation: Math.sqrt(h / (t - 1))
                        }
                    }
                }, {
                    key: "sendGraphicsReport",
                    value: function() {
                        var e = this;
                        Ln.a.prompt("Thank you for running Hero Forge in report mode. Please press Start to generate and send the report. Another message will be shown when it is complete.", [{
                            label: "Start",
                            onClick: function() {
                                CK.GameLoop.sampleFpsAsync(100).then((function(t) {
                                    var n = JSON.parse(JSON.stringify(CK.ClientSpecs.specs));
                                    n.frameStats = e.getStats(t);
                                    var r = CK.renderManager.renderer.getShaderCompileReport().substring(0, 16384);
                                    n.shaderCompileLog = r;
                                    var o = {
                                        report: btoa(JSON.stringify(n)),
                                        screenshot: CK.Capture.renderThumbnail(),
                                        user: USER_EMAIL || "not logged in"
                                    };
                                    return Fg({
                                        method: "post",
                                        url: "/graphics_report/",
                                        data: o
                                    })
                                })).then((function() {
                                    console.log("Sent graphics report"), Ln.a.prompt("Report sent. Thank you for your assistance.")
                                })).catch((function(e) {
                                    console.error("Failed to send graphic report", e), Ln.a.alert("Failed to send report. Please check the browser log for error messages.")
                                })), Ln.a.hidePrompt()
                            }
                        }, {
                            label: "Cancel",
                            onClick: function() {
                                return Ln.a.hidePrompt()
                            }
                        }])
                    }
                }, {
                    key: "addedToCartNotLoggedIn",
                    value: function() {
                        this.initialized && (gtag("event", "addedToCartNotLoggedIn"), this._addedToCartNotLoggedIn = !0)
                    }
                }, {
                    key: "successfullyLoggedIn",
                    value: function() {
                        this.init(), this.initialized && (this._addedToCartNotLoggedIn ? gtag("event", "successfullyLoggedInAfterAddToCart") : gtag("event", "successfullyLoggedIn"))
                    }
                }, {
                    key: "sendSearch",
                    value: function(e, t, n) {
                        var r = this,
                            o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "all";
                        !e || e.length < 3 || this._searchPrevious && this._searchPrevious.term.includes(e) || (this._search ? this._search.term.length < e.length && (this._search = {
                            term: e,
                            menu: n,
                            genre: o,
                            found: t
                        }) : (this._search = {
                            term: e,
                            menu: n,
                            genre: o,
                            found: t
                        }, setTimeout((function() {
                            r._searchPrevious = r._search, r.searchFilter(t, r._search.menu, r._search.genre, r._search.term), r._search = void 0
                        }), 3e3)))
                    }
                }, {
                    key: "searchFilter",
                    value: function(e, t, n, r) {}
                }, {
                    key: "genreSelected",
                    value: function(e) {}
                }, {
                    key: "characterScreenshot",
                    value: function(e) {}
                }, {
                    key: "characterSaved",
                    value: function(e) {}
                }, {
                    key: "characterSharedAnonymous",
                    value: function(e) {}
                }, {
                    key: "characterShared",
                    value: function(e) {}
                }, {
                    key: "addedToCart",
                    value: function(e) {
                        var t = window.Reporting._getProductCategoryID(e);
                        fbq("track", "AddToCart", {
                            content_ids: [t],
                            content_type: "product"
                        }), gtag("event", "add_to_cart", {
                            items: {
                                id: t,
                                name: t,
                                quantity: 1
                            }
                        }), rdt("track", "AddToCart")
                    }
                }, {
                    key: "removedFromCart",
                    value: function(e) {
                        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1,
                            n = window.Reporting._getProductCategoryID(e);
                        gtag("event", "remove_from_cart", {
                            items: {
                                id: n,
                                name: n,
                                quantity: t
                            }
                        })
                    }
                }, {
                    key: "preconfigSelected",
                    value: function(e) {}
                }, {
                    key: "userConfigsLoaded",
                    value: function(e, t) {}
                }, {
                    key: "clickedPart",
                    value: function(e) {}
                }, {
                    key: "clickedThumbnailButton",
                    value: function(e) {}
                }, {
                    key: "characterChanged",
                    value: function() {}
                }, {
                    key: "completeRegistration",
                    value: function() {
                        fbq("track", "CompleteRegistration", {
                            content_name: "Signup",
                            status: !0
                        }), gtag("event", "sign_up", {
                            method: "default"
                        }), rdt("track", "SignUp"), pintrk("track", "signup")
                    }
                }, {
                    key: "initiateCheckout",
                    value: function(e) {
                        var t = Ug(window.Reporting.getContentIds(e.items), 3),
                            n = t[0],
                            r = t[1],
                            o = (t[2], {
                                content_ids: n,
                                contents: r,
                                content_type: "product",
                                num_items: e.items ? e.items.length : 0
                            });
                        fbq("track", "InitiateCheckout", o), gtag("event", "begin_checkout", {
                            items: n
                        })
                    }
                }, {
                    key: "checkoutProgress",
                    value: function(e, t) {
                        var n = Ug(window.Reporting.getContentIds(e), 3),
                            r = n[0];
                        n[1], n[2], gtag("event", "checkout_progress", {
                            items: r,
                            checkout_step: t
                        })
                    }
                }, {
                    key: "purchase",
                    value: function(e) {
                        var t = Ug(window.Reporting.getContentIds(e.items), 3),
                            n = t[0],
                            r = t[1],
                            o = t[2],
                            a = window.Reporting.getItemCosts(e.items),
                            i = window.Reporting.getPackagingCosts(e.items),
                            s = window.Reporting.getMerchantFees(e.cartValue),
                            c = Number(e.cartValue - a - i - s).toFixed(2),
                            l = {
                                content_ids: n,
                                contents: r,
                                content_type: "product",
                                num_items: e.items ? e.items.length : 0,
                                currency: "USD",
                                value: c
                            },
                            u = {
                                order_id: e.order_id,
                                value: c,
                                order_quantity: e.items ? e.items.length : 0,
                                currency: "USD",
                                line_items: o
                            };
                        window.Reporting.facebookPurchaseTrackingEvent(l), window.Reporting.pinterestPurchaseTrackingEvent(u), window.Reporting.simpleConversionTrackingEvent(e.order_id), window.Reporting.valueConversionTrackingEvent(e.order_id, r, c), window.Reporting.enhancedEcomPurchaseTrackingEvent(e.order_id, r, c), window.Reporting.promptGoogleMerchantReview(e.order_id, e.country_id, n), window.Reporting.tapfiliatePurchaseTrackingEvent(e.order_id, c), rdt("track", "Purchase")
                    }
                }, {
                    key: "getMerchantFees",
                    value: function(e) {
                        return Number(.029 * Number(e) + .3).toFixed(2)
                    }
                }, {
                    key: "getItemCost",
                    value: function(e) {
                        return 0
                    }
                }, {
                    key: "getItemCosts",
                    value: function(e) {
                        return 0
                    }
                }, {
                    key: "getPackagingCosts",
                    value: function(e) {
                        return 0
                    }
                }, {
                    key: "itemIsGiftcard",
                    value: function(e) {
                        return "card_id" === e.prod_type || "Gift Card" === e.display_name || e.new_thumb.startsWith("/static/img/giftcard/")
                    }
                }, {
                    key: "valueConversionID",
                    value: function() {}
                }, {
                    key: "simpleConversionID",
                    value: function() {}
                }, {
                    key: "facebookPurchaseTrackingEvent",
                    value: function(e) {
                        fbq("track", "Purchase", e)
                    }
                }, {
                    key: "pinterestPurchaseTrackingEvent",
                    value: function(e) {
                        pintrk("track", "checkout", e)
                    }
                }, {
                    key: "simpleConversionTrackingEvent",
                    value: function(e) {
                        gtag("event", "conversion", {
                            transaction_id: e,
                            send_to: window.Reporting.simpleConversionID()
                        })
                    }
                }, {
                    key: "valueConversionTrackingEvent",
                    value: function(e, t, n) {
                        var r = {
                            transaction_id: e,
                            send_to: window.Reporting.valueConversionID(),
                            value: n,
                            currency: "USD",
                            items: t
                        };
                        gtag("event", "conversion", r)
                    }
                }, {
                    key: "enhancedEcomPurchaseTrackingEvent",
                    value: function(e, t, n) {
                        gtag("event", "purchase", {
                            transaction_id: e,
                            value: n,
                            currency: "USD",
                            items: t
                        })
                    }
                }, {
                    key: "promptGoogleMerchantReview",
                    value: function() {}
                }, {
                    key: "tapfiliatePurchaseTrackingEvent",
                    value: function() {}
                }, {
                    key: "addedGiftCardToCart",
                    value: function(e, t) {
                        var n = "giftcard-" + e,
                            r = {
                                content_ids: [n],
                                contents: [{
                                    id: n,
                                    quantity: t
                                }],
                                content_type: "product"
                            };
                        rdt("track", "AddToCart"), pintrk("track", "AddToCart", {
                            value: e,
                            order_quantity: t,
                            currency: "USD"
                        }), fbq("track", "AddToCart", r), gtag("event", "add_to_cart", {
                            items: {
                                id: n,
                                name: n,
                                quantity: t
                            }
                        })
                    }
                }, {
                    key: "addedDiceToCart",
                    value: function(t) {
                        var n = e.dashedProductName(t),
                            r = {
                                content_ids: [n],
                                contents: [{
                                    id: n,
                                    quantity: 1
                                }],
                                content_type: "product"
                            };
                        rdt("track", "AddToCart"), fbq("track", "AddToCart", r), pintrk("track", "AddToCart", {
                            line_items: {
                                product_id: n,
                                product_name: n,
                                product_quantity: 1
                            }
                        }), fbq("track", "AddToCart", r), gtag("event", "add_to_cart", {
                            items: {
                                id: n,
                                name: n,
                                quantity: 1
                            }
                        })
                    }
                }, {
                    key: "getContentIds",
                    value: function(e) {
                        for (var t = e.map((function(e) {
                                return window.Reporting._getProductCategoryID(e.config || e)
                            })), n = e.length, r = [], o = [], a = Number(window.Reporting.getPackagingCosts(e) / e.length); n--;) {
                            var i = e[n].line_price_excl_tax_incl_discounts,
                                s = window.Reporting.getMerchantFees(e[n].line_price_incl_tax_incl_discounts),
                                c = Number(window.Reporting.getItemCost(e[n]) + a + s).toFixed(2),
                                l = Number(i - c).toFixed(2);
                            r.push({
                                id: t[n],
                                quantity: e[n].quantity,
                                price: l
                            }), o.push({
                                product_id: t[n],
                                product_quantity: e[n].quantity,
                                product_category: e[n].sku,
                                product_price: l
                            })
                        }
                        return [t, r, o]
                    }
                }, {
                    key: "dashedProductName",
                    value: function(e) {
                        if ("string" == typeof e) {
                            var t = new RegExp("[^A-Za-z0-9]+", "g");
                            return e.replace(t, "-")
                        }
                    }
                }], (n = null) && Dg(t.prototype, n), r && Dg(t, r), e
            }();

        function Vg(e) {
            return (Vg = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function Gg(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function qg(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function Hg(e, t) {
            return !t || "object" !== Vg(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function Wg(e) {
            return (Wg = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function Qg(e, t) {
            return (Qg = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var Xg = function(e) {
            function t() {
                return Gg(this, t), Hg(this, Wg(t).apply(this, arguments))
            }
            var n, r, o;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && Qg(e, t)
            }(t, e), n = t, o = [{
                key: "searchFilter",
                value: function(e, t, n, r) {
                    this.event("search", e ? "searchHit" : "searchMiss", "".concat(t, " - ").concat(n, " - ").concat(r)), fbq("track", "Search", {
                        search_string: (e ? "searchHit" : "searchMiss") + "".concat(t, " - ").concat(n, " - ").concat(r)
                    }), rdt("track", "Search"), pintrk("track", "search", {
                        search_query: (e ? "searchHit" : "searchMiss") + "".concat(t, " - ").concat(n, " - ").concat(r)
                    })
                }
            }, {
                key: "genreSelected",
                value: function(e) {}
            }, {
                key: "characterScreenshot",
                value: function(e) {
                    var t = this._getProductCategoryID(CK.character.data);
                    fbq("track", "ViewContent", {
                        content_ids: [t],
                        contents: [{
                            id: t,
                            quantity: 1
                        }],
                        content_type: "product"
                    }), rdt("track", "ViewContent")
                }
            }, {
                key: "characterSaved",
                value: function(e) {
                    fbq("track", "AddToWishlist", {
                        content_ids: [this._getProductCategoryID(e)],
                        content_type: "product",
                        content_category: "saved"
                    }), rdt("track", "AddToWishlist")
                }
            }, {
                key: "characterSharedAnonymous",
                value: function(e) {
                    fbq("track", "AddToWishlist", {
                        content_ids: [this._getProductCategoryID(e)],
                        content_category: "shareAnonymous"
                    }), rdt("track", "AddToWishlist")
                }
            }, {
                key: "characterShared",
                value: function(e) {
                    fbq("track", "AddToWishlist", {
                        content_ids: [this._getProductCategoryID(e)],
                        content_category: "shared"
                    }), rdt("track", "AddToWishlist")
                }
            }, {
                key: "getGiftcardCost",
                value: function(e) {
                    return .6 * e * .538
                }
            }, {
                key: "getItemCosts",
                value: function(e) {
                    return e.reduce((function(e, t) {
                        return e + window.Reporting.getItemCost(t)
                    }), 0)
                }
            }, {
                key: "getItemCost",
                value: function(e) {
                    if (window.Reporting.itemIsGiftcard(e)) return this.getGiftcardCost(e.unit_price) * e.quantity;
                    var t = {
                        steel_28mm: 18.81,
                        steel_xl: 30.42,
                        steel_28mm_mount: 47,
                        bronze_28mm: 74.39,
                        bronze_xl: 135.19,
                        bronze_28mm_mount: 155.62,
                        gray_plastic_28mm: 14.95,
                        gray_plastic_xl: 22.43,
                        gray_plastic_28mm_mount: 34.78,
                        white_plastic_28mm: 13.41,
                        white_plastic_xl: 17.9,
                        white_plastic_28mm_mount: 25.7,
                        digital_28mm: 0,
                        digital_xl: 0,
                        digital_28mm_mount: 0,
                        strong_plastic_3inch: 21.41
                    };
                    if (e.config && t[e.config.physical]) return t[e.config.physical] * e.quantity;
                    var n = {
                        CHX25401: 3,
                        CHX25402: 3,
                        CHX25403: 3,
                        CHX25404: 3,
                        CHX25405: 3,
                        CHX25406: 3,
                        CHX25407: 3,
                        CHX25408: 3,
                        CHX23071: 6,
                        CHX23072: 6,
                        CHX23073: 6,
                        CHX23074: 6,
                        CHX23075: 6,
                        CHX23076: 6,
                        CHX23077: 6,
                        CHX23078: 6
                    };
                    return e.sku && n[e.sku] ? n[e.sku] * e.quantity : 0
                }
            }, {
                key: "getPackagingCosts",
                value: function(e) {
                    return e.reduce((function(e, t) {
                        return (t.config && t.config.physical && !t.config.physical.startsWith("digital") ? 1 : 0) * t.quantity + e
                    }), 0) > 0 ? 1 : 0
                }
            }, {
                key: "simpleConversionID",
                value: function() {
                    return window.location.href.indexOf("heroforge") > -1 ? "AW-943798896/59nuCJSO26UBEPD0hMID" : "AW-111111111/11aaAAA111AAAAA1aAIA"
                }
            }, {
                key: "valueConversionID",
                value: function() {
                    return window.location.href.indexOf("heroforge") > -1 ? "AW-943798896/-b7nCP78wGMQ8PSEwgM" : "AW-111111111/11aaAAA111AAAAA1aAIA"
                }
            }, {
                key: "tapfiliatePurchaseTrackingEvent",
                value: function(e, t) {
                    CK.Options.partner && "tap" === CK.Options.partner.static_path && tap("conversion", e, t, void 0, void 0, void 0)
                }
            }, {
                key: "promptGoogleMerchantReview",
                value: function(e, t, n) {
                    var r = new Date;
                    r.setDate(r.getDate() + 28);
                    var o = "" + (r.getMonth() + 1),
                        a = "" + r.getDate(),
                        i = r.getFullYear();
                    o.length < 2 && (o = "0" + o), a.length < 2 && (a = "0" + a);
                    var s = [i, o, a].join("-"),
                        c = 123456789;
                    window.location.href.indexOf("heroforge") > -1 && (c = 138423296), window.gapi.load("surveyoptin", (function() {
                        window.gapi.surveyoptin.render({
                            merchant_id: c,
                            order_id: e,
                            email: UIState.cacheUserEmail,
                            delivery_country: t,
                            estimated_delivery_date: s,
                            opt_in_style: "BOTTOM_LEFT_DIALOG"
                        })
                    }))
                }
            }, {
                key: "preconfigSelected",
                value: function(e) {}
            }, {
                key: "preconfigRandomized",
                value: function(e) {}
            }, {
                key: "userConfigsLoaded",
                value: function(e, t) {}
            }, {
                key: "clickedPart",
                value: function(e) {}
            }, {
                key: "characterChanged",
                value: function() {
                    var e = this._getProductCategoryID(CK.character.data);
                    if (UIState.currentProduct && UIState.currentProduct == e) this.productHash[e].decrement();
                    else {
                        if (!window.fbq || window.fbq == {}) return;
                        this.productHash[e] || (this.productHash[e] = new CK.Countdown(this.changesBeforeReport, (function() {
                            fbq("track", "ViewContent", {
                                content_ids: [e],
                                contents: [{
                                    id: e,
                                    quantity: 1
                                }],
                                content_type: "product"
                            }), gtag("event", "view_item", {
                                items: [{
                                    id: e,
                                    name: e,
                                    quantity: 1
                                }]
                            }), rdt("track", "ViewContent")
                        }))), UIState.currentProduct = e
                    }
                }
            }, {
                key: "_getProductCategoryID",
                value: function(e) {
                    return e.parts ? this._getDominantTerm([e]) + "-" + this._getGender(e) + "-" + this._getRace(e) + "-" + e.physical : e.new_thumb && e.new_thumb.startsWith("/static/img/giftcard/") ? "giftcard-" + (e.sans_strategy_price || e.unit_price) : zg.dashedProductName(e.display_name)
                }
            }, {
                key: "_getGender",
                value: function(e) {
                    if (e.sliders && void 0 !== e.sliders.faceSoftness) {
                        var t = e.sliders.faceSoftness - (e.parts.beard ? .5 : 0);
                        return t < .4 ? "male" : t > .6 ? "female" : "andro"
                    }
                    return "unknown"
                }
            }, {
                key: "_getRace",
                value: function(e) {
                    var t, n = e.parts,
                        r = {};
                    for (var o in n && CK.Options.configs.racegenders && ["hair", "face", "bodyUpper", "bodyLower", "tail", "earR", "beard"].map((function(e) {
                            var t = n[e];
                            t && CK.Options.configs.racegenders.map((function(n) {
                                n.name in r || (r[n.name] = 0), t === n.parts[e] && (r[n.name] += "face" === e ? 3 : 1)
                            }))
                        })), r)(!t || r[o] > r[t]) && (t = o);
                    return t && t.endsWith("Male") ? t = t.slice(0, -4) : t && t.endsWith("Female") && (t = t.slice(0, -6)), t
                }
            }, {
                key: "_getDominantTerm",
                value: function(e) {
                    var t, n = this._getTermBreakdown(e);
                    for (var r in n)(!t || n[r] > n[t]) && (t = r);
                    return t
                }
            }, {
                key: "_getTermBreakdown",
                value: function(e) {
                    var t = {};
                    return e.map((function(e) {
                        if (e)
                            for (var n in e.parts) {
                                var r = CK.Options.parts[e.parts[n]];
                                if (r && r.terms)
                                    for (var o in r.terms) o in t || (t[o] = 0), t[o]++
                            }
                    })), t
                }
            }, {
                key: "productHash",
                get: function() {
                    return t._productHash
                },
                set: function(e) {
                    t._productHash = e
                }
            }, {
                key: "changesBeforeReport",
                get: function() {
                    return t._changesBeforeReport
                }
            }], (r = null) && qg(n.prototype, r), o && qg(n, o), t
        }(zg);
        Xg._productHash = {}, Xg._changesBeforeReport = 25;

        function Yg(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        console.log("HF ".concat("Production 5/1/20 14:2:3 B:release/hf_2020_04_03 V15496")), window.Reporting = Xg;
        var Zg = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, r;
            return t = e, r = [{
                key: "init",
                value: function() {
                    var e = this;
                    An.dataPath = "/static/js/options.min.json", this.settings(), Loading.creationKitReady((function() {
                        e.startLoad()
                    }))
                }
            }, {
                key: "initForge",
                value: function() {}
            }, {
                key: "settings",
                value: function() {
                    var e, t, n, r, o;
                    CK.initSettings(An), CK.Settings.materialSims = (e = CK.Settings, t = e.occlusion, n = e.sunOcclusion, r = e.allowBakedPhysical, o = e.allowBakedEmissive, {
                        default: {
                            diffuse: new RK.Color(180 / 255, 180 / 255, 180 / 255),
                            roughness: .55,
                            metalness: 0,
                            opacity: 1,
                            sheen: 0,
                            occlusionStrength: .8,
                            lighting: {
                                envLight: {
                                    saturationScale: 0,
                                    intensity: t ? 1 : .8,
                                    rotateY: 0,
                                    mapName: "glass_passage_1k"
                                },
                                ambient: {
                                    intensity: t ? .1 : .01
                                },
                                sunlight: {
                                    color: new RK.Color(1, 1, 1),
                                    intensity: n ? .7 : .2,
                                    position: new RK.Vec3(9, 10, 2)
                                },
                                envCube: {
                                    groundColor: new RK.Vec4(214 / 255, 213 / 255, 219 / 255, 1),
                                    groundShadowStrength: .45,
                                    envCubeSaturation: 1,
                                    fog: new RK.Vec4(.93, .957, 1, 0),
                                    rotation: 0,
                                    contrast: 1,
                                    contrastMidpoint: .5
                                }
                            }
                        },
                        forge: {},
                        color: {
                            bakedColor: !0,
                            bakedPhysical: r,
                            bakedEmissive: o,
                            eyeShader: !0,
                            bakedSurfaceHiRez: !0
                        },
                        color_plastic: {
                            bakedColor: !0,
                            bakedPhysical: r,
                            bakedEmissive: o,
                            eyeShader: !0,
                            bakedSurfaceHiRez: !0
                        },
                        strong: {
                            diffuse: new RK.Color(.76, .74, .72),
                            roughness: 1,
                            occlusionStrength: 0,
                            color: !1
                        },
                        ultra: {
                            diffuse: new RK.Color(.8, .8, .8),
                            roughness: .3,
                            metalness: 0
                        },
                        bronze: {
                            diffuse: new RK.Color(1, .62, .28),
                            roughness: .23,
                            metalness: 1,
                            lighting: {
                                envLight: {
                                    intensity: 2
                                }
                            }
                        },
                        rose_gold: {
                            diffuse: new RK.Color(.95, .75, .7),
                            roughness: .23,
                            metalness: 1,
                            lighting: {
                                envLight: {
                                    intensity: 2
                                }
                            }
                        },
                        steel: {
                            diffuse: new RK.Color(.57, .46, .38),
                            roughness: .7,
                            metalness: 1,
                            lighting: {
                                envLight: {
                                    intensity: 2.2
                                }
                            }
                        },
                        gray: {
                            diffuse: new RK.Color(.2, .2, .2),
                            roughness: .4,
                            occlusionStrength: 1,
                            lighting: {
                                envLight: {
                                    intensity: 3
                                }
                            }
                        },
                        digital: {
                            diffuse: new RK.Color(0, .83, 0),
                            roughness: .5,
                            lighting: {
                                envLight: {
                                    saturationScale: 0,
                                    intensity: .8,
                                    rotateY: 0,
                                    mapName: "glass_passage_1k"
                                },
                                ambient: {
                                    intensity: .03
                                }
                            }
                        },
                        white: {
                            diffuse: new RK.Color(.65, .65, .65),
                            roughness: .6
                        }
                    })
                }
            }, {
                key: "startLoad",
                value: function() {
                    var e = this;
                    CK.main((function() {}), (function() {
                        Lg.init()
                    }), (function() {
                        e.finishedLoading()
                    }), (function() {
                        Loading.fail()
                    }))
                }
            }, {
                key: "finishedLoading",
                value: function() {
                    Loading.close(),
                        function() {
                            if (CK.Settings.color && !CK.Settings.GetCookieSetting("hasBeenToColor")) {
                                CK.Settings.SetCookieSetting("hasBeenToColor", !0);
                                var e = CK.User.permissions.backer && CK.User.permissions.backer2;
                                Overlay.prompt(React.createElement("div", null, "Greetings Adventurer!", React.createElement("br", null), "You've unlocked the Kickstarter-exclusive Color Tools Beta", e ? " EXTRA EARLY because you also backed the original Hero Forge Kickstarter. Thank you" : "", "!", React.createElement("br", null), "Start adding color to your minis with the new tools found under the Color ", React.createElement("a", {
                                    href: "#",
                                    onClick: function(e) {
                                        e.preventDefault(), Overlay.hidePrompt(), UIState.set({
                                            mainSelection: "Color"
                                        })
                                    }
                                }, React.createElement("img", {
                                    style: {
                                        width: 24,
                                        height: 24
                                    },
                                    src: "/static/svg/color.svg"
                                }), " tab"), ".", React.createElement("br", null), "You can even begin pre-ordering color miniatures.", React.createElement("br", null), React.createElement("br", null), "Please report any bugs to ", React.createElement("a", {
                                    href: "#",
                                    onClick: function(e) {
                                        e.preventDefault(), Overlay.hidePrompt(), CKUI.showSupportEmail()
                                    }
                                }, " ", React.createElement("img", {
                                    style: {
                                        width: 20,
                                        height: 20
                                    },
                                    src: "/static/svg/mail-white.svg"
                                }), " support@heroforge.com,"), " and have fun!", React.createElement("br", null), React.createElement("p", {
                                    align: "right"
                                }, "-The Hero Forge Team")), [{
                                    label: "Onwards!",
                                    onClick: function() {
                                        Overlay.hidePrompt()
                                    }
                                }], "Color Tools Beta")
                            } else "" !== window.LOAD_CONFIG || -1 === window.location.href.indexOf("load_config") && -1 === window.location.href.indexOf("load_share") || Overlay.prompt("Shared character has been deleted, or rolled natural 20 stealth check!", [{
                                label: "Ok :(",
                                onClick: function() {
                                    Overlay.hidePrompt()
                                }
                            }], "Missing Character")
                        }(), CK.Events.on("finishedLoggingIn", (function() {
                            Nn.a.colorPermissions() && !CK.Settings.color && (window.location.href = "/")
                        }))
                }
            }], (n = null) && Yg(t.prototype, n), r && Yg(t, r), e
        }();
        Zg.JointLimits = G, window.CKUI = Lg, window.HeroForge = Zg, window.HF = Zg, window.SETTINGS = An
    },
    56: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return f
        }));
        var r = n(19),
            o = n(5),
            a = n(0);

        function i(e) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function s(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function c(e, t) {
            return !t || "object" !== i(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function l(e) {
            return (l = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function u(e, t) {
            return (u = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var f = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = c(this, l(t).call(this, e))).baseLayer = e.baseLayer, n.channelCount = n.baseLayer ? 3 : 4, n.layerMapping = [], n.layers = (e.layers || "").split(",").map((function(e) {
                    var t = e.split("_");
                    return n.layerMapping.push(t[1]), parseInt(t[0])
                })), n.color = !!n.layers.find((function(e) {
                    return e === t.LAYER_TYPES.color
                })), n.maskCount = n.layers.filter((function(e) {
                    return e === t.LAYER_TYPES.mask
                })).length, n.form = n.color && n.maskCount ? t.DECAL_FORMS.maskAndColor : n.color ? t.DECAL_FORMS.color : t.DECAL_FORMS.mask, n.colorIndex = n.layers.indexOf(t.LAYER_TYPES.color), n.displace = !!e.displace, n.uvwh = null != e.u ? new RK.Vec4(e.u, e.v, e.w, e.h) : void 0, n.worldScale = n.uvwh ? 1 : e.w || 1, n.isPartDecal = n.name.includes("_"), n.partName = n.name.split("_")[0], n.decalName = n.name.split("_")[1], n.group = e.group || n.slot, n.isPartDecal && o.a.slots[n.slot] && o.a.slots[n.slot].target_slot && (n.targets = [n.partName]), a.a.color && e.colors && (n.colors = n.parseColors(e.colors)), n
            }
            var n, i, f;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && u(e, t)
            }(t, e), n = t, f = [{
                key: "deconstructDecalMapping",
                value: function(e) {
                    var t = e.split("_");
                    return 2 === t.length ? t : 4 === t.length ? [t[0] + "_ud_" + t[2], t[3]] : console.error("Invalid decal mapping", e) || ["invalid", 0]
                }
            }], (i = [{
                key: "getTexturePath",
                value: function() {
                    return r.a.getDecalTexturePath(this)
                }
            }]) && s(n.prototype, i), f && s(n, f), t
        }(n(38).a);
        f.LAYER_TYPES = Object.freeze({
            mask: 1,
            color: 2,
            depth: 3
        }), f.DECAL_FORMS = Object.freeze({
            mask: 1,
            color: 2,
            maskAndColor: 3
        })
    },
    63: function(e, t, n) {
        "use strict";

        function r(e) {
            return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function a(e, t) {
            return !t || "object" !== r(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function i(e) {
            return (i = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function s(e, t) {
            return (s = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        n.d(t, "a", (function() {
            return c
        }));
        var c = function(e) {
            function t() {
                var e;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (e = a(this, i(t).call(this))).frustumCulled = !1, e.backupAttributes = {}, e.isMixerBuffer = !0, e
            }
            var n, r, c;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && s(e, t)
            }(t, RK.BufferGeometry), n = t, c = [{
                key: "copyBone",
                value: function(e) {
                    return e.clone()
                }
            }], (r = [{
                key: "mergeVertices",
                value: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 8;
                    if (this.index)
                        for (var t = {}, n = this.index.array, r = this.attributes.position.array, o = 0; o < n.length / 3; o++)
                            for (var a = 0; a < 3; a++) {
                                var i = 3 * o + a,
                                    s = n[i],
                                    c = r[3 * s].toFixed(e) + "," + r[3 * s + 1].toFixed(e) + "," + r[3 * s + 2].toFixed(e);
                                c in t && n[3 * o + (a + 1) % 3] != s && n[3 * o + (a + 2) % 3] != s ? n[i] = t[c] : t[c] = n[i]
                            } else console.warn("Can not merge non indexed geometry")
                }
            }, {
                key: "convertToIndexed",
                value: function() {
                    if (this.index) console.warn("Mesh is already indexed");
                    else {
                        for (var e = this.attributes.position.array.length / 3, t = new Uint32Array(e), n = 0; n < e; n++) t[n] = n;
                        this.setIndex(new RK.BufferAttribute(t, 1))
                    }
                }
            }, {
                key: "copyUnskinned",
                value: function() {
                    var e = this,
                        n = new t;
                    return n.filePath = this.filePath, n.name = this.name, n.locators = this.locators, n.index = this.index, n.paintMapping = this.paintMapping, n.ckPosGroup = this.ckPosGroup, n.ckSeams = this.ckSeams, n.ckSeamOriginalIndices = this.ckSeamOriginalIndices, n.ckSeamBoundaries = this.ckSeamBoundaries, n.ckSeamHalfEdge = this.ckSeamHalfEdge, n.ckBoundaries = this.ckBoundaries, n.ckRivets = this.ckRivets, n.ckBounds = this.ckBounds, n.exportTime = this.exportTime, ["position", "normal", "uv", "uv2", "color", "vertexID"].map((function(t) {
                        t in e.attributes && (n.attributes[t] = e.attributes[t])
                    })), n.skinned = !1, n.morphAttributes = this.morphAttributes, this.morphTargetInfluences && (n.morphTargetInfluences = this.morphTargetInfluences.slice()), n.morphTargetDictionary = this.morphTargetDictionary, this.morphTargets && (n.morphTargets = this.morphTargets), n
                }
            }, {
                key: "createAttributeBackups",
                value: function(e, t) {
                    if (void 0 === t) {
                        if (e in this.attributes && !(e in this.backupAttributes)) return this.backupAttributes[e] = this.attributes[e], this.attributes[e] = (new RK.BufferAttribute).copy(this.attributes[e]), !0
                    } else {
                        var n = this.morphTargetDictionary[t],
                            r = void 0 !== n && this.morphAttributes[e] && this.morphAttributes[e][n];
                        if (r && (this.backupMorphAttributes = this.backupMorphAttributes || {}, this.backupMorphAttributes[t] = this.backupMorphAttributes[t] || {}, !(e in this.backupMorphAttributes[t]))) return this.backupMorphAttributes[t][e] = r, this.morphAttributes[e][n] = (new RK.BufferAttribute).copy(r), !0
                    }
                }
            }, {
                key: "restoreAttributeFromBackup",
                value: function(e, t) {
                    if (void 0 === t) {
                        var n = this.backupAttributes[e];
                        n ? this.attributes[e].copy(n) : console.error("Attribute", e, "does not exist in backups")
                    } else {
                        var r = this.getAttributeBackup(e, t);
                        if (r) {
                            var o = this.morphTargetDictionary[t];
                            this.morphAttributes[e][o].copy(r)
                        } else console.error("Morph attribute ".concat(t, " ").concat(e, " does not exist in backups"))
                    }
                }
            }, {
                key: "prepareAttributeForEdit",
                value: function(e, t) {
                    this.createAttributeBackups(e, t) || this.restoreAttributeFromBackup(e, t)
                }
            }, {
                key: "getAttributeBackup",
                value: function(e, t) {
                    return void 0 === t ? this.backupAttributes && this.backupAttributes[e] : this.backupMorphAttributes && this.backupMorphAttributes[t] && this.backupMorphAttributes[t][e]
                }
            }, {
                key: "copyWithSharing",
                value: function() {
                    if (this.mixerBones) {
                        var e = this.copyUnskinned();
                        e.ckbTotalInfluences = this.ckbTotalInfluences, e.ckbOriginalIndices = this.ckbOriginalIndices, e.mixerBonesByOrigID = this.mixerBonesByOrigID, e.ckFaceSizes = this.ckFaceSizes, e.ckbPositionMap = this.ckbPositionMap, e.mainSkeleton = this.mainSkeleton, e.skinned = this.skinned, e.poses = this.poses, e.extremeIndices = this.extremeIndices;
                        for (var n = this.skinInfluenceCount || 0, r = Math.ceil(n / 4), o = 0; o < r; ++o) {
                            var a = "skinWeight".concat(o);
                            a in this.attributes && (e.attributes[a] = this.attributes[a])
                        }
                        var i = this.mixerBones;
                        e.mixerBones = i.map((function(e) {
                            return t.copyBone(e)
                        }));
                        for (var s = 0; s < r; ++s) {
                            var c = this.skinIndexNames[s];
                            e.attributes[c] = (new RK.BufferAttribute).copy(this.attributes[c])
                        }
                        for (var l in e.skinInfluenceCount = n, e.skinIndexNames = (this.skinIndexNames || []).slice(0), e.skinWeightNames = (this.skinWeightNames || []).slice(0), this.backupAttributes) e.attributes[l] = this.backupAttributes[l];
                        return e
                    }
                    return this
                }
            }, {
                key: "copyAsStandalone",
                value: function(e) {
                    var n = this.copyWithSharing(),
                        r = n.mixerBones,
                        o = n.attributes.skinIndex.array,
                        a = {};
                    o.map((function(e) {
                        return a[e] = void 0
                    })), delete a[0];
                    var i = Object.keys(a).map((function(e) {
                        return parseInt(e)
                    }));
                    if (i.length <= 1) return n.mainSkeleton = !1, n.skinned = !1, n;
                    n.mainSkeleton = !0;
                    var s = {};
                    i.map((function(t) {
                        do {
                            var n = (t < 500 ? e[t] : r[t - 500]) || console.error("Could not find ", t);
                            s[t] = !0, t = n.parentId
                        } while (t && !s[t])
                    }));
                    var c = Object.keys(s),
                        l = {};
                    for (var u in c.map((function(e, t) {
                            return l[e] = t
                        })), n.mixerBones = c.map((function(n) {
                            var o;
                            return (o = (n = parseInt(n)) < 500 ? t.copyBone(e[n]) || console.error("Could not find ", n) : r[n - 500] || console.error("Could not find ", n, "in", r)).parentId in l ? o.parentId = l[o.parentId] : o.parentId = -1, o
                        })), o) {
                        var f = o[u];
                        f > 0 && (o[u] = l[f] || console.error(f, "not found in", l))
                    }
                    return delete n.poses, n
                }
            }]) && o(n.prototype, r), c && o(n, c), t
        }()
    },
    64: function(e, t, n) {
        "use strict";
        var r;
        n.d(t, "a", (function() {
            return i
        }));
        try {
            r = "undefined" != typeof Intl && void 0 !== Intl.Collator ? Intl.Collator("generic", {
                sensitivity: "base"
            }) : null
        } catch (e) {
            console.log("Collator could not be initialized and wouldn't be used")
        }
        var o = [],
            a = [];

        function i(e, t) {
            var n, i, s, c, l, u, f = !!r,
                h = e.length,
                p = t.length;
            if (0 === h) return p;
            if (0 === p) return h;
            for (s = 0; s < p; ++s) o[s] = s, a[s] = t.charCodeAt(s);
            if (o[p] = p, f)
                for (s = 0; s < h; ++s) {
                    for (i = s + 1, c = 0; c < p; ++c) n = i, u = 0 === r.compare(e.charAt(s), String.fromCharCode(a[c])), (i = o[c] + (u ? 0 : 1)) > (l = n + 1) && (i = l), i > (l = o[c + 1] + 1) && (i = l), o[c] = n;
                    o[c] = i
                } else
                    for (s = 0; s < h; ++s) {
                        for (i = s + 1, c = 0; c < p; ++c) n = i, u = e.charCodeAt(s) === a[c], (i = o[c] + (u ? 0 : 1)) > (l = n + 1) && (i = l), i > (l = o[c + 1] + 1) && (i = l), o[c] = n;
                        o[c] = i
                    }
            return i
        }
    },
    65: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return p
        }));
        var r = n(5),
            o = n(15),
            a = n(41);

        function i() {
            if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
            if (Reflect.construct.sham) return !1;
            if ("function" == typeof Proxy) return !0;
            try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}))), !0
            } catch (e) {
                return !1
            }
        }

        function s(e, t, n) {
            return (s = i() ? Reflect.construct : function(e, t, n) {
                var r = [null];
                r.push.apply(r, t);
                var o = new(Function.bind.apply(e, r));
                return n && c(o, n.prototype), o
            }).apply(null, arguments)
        }

        function c(e, t) {
            return (c = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }

        function l(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function u(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function f(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var h = {
                alpha: [1, 1, 1],
                rough: [.5, .5, .5],
                metal: [0, 0, 0],
                sheen: [0, 0, 0]
            },
            p = function() {
                function e(t) {
                    var n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    u(this, e), this.gradientHSV = t.gradientHSV ? a.a.deepCopy(t.gradientHSV) : t.gradient ? t.gradient.map((function(e) {
                        return o.a.RGBtoHSV.apply(o.a, l(e))
                    })) : [
                        [0, 0, 0],
                        [0, 0, 0],
                        [0, 0, 0],
                        [0, 0, 0, 0]
                    ], this.emissiveHSV = t.emissiveHSV ? a.a.deepCopy(t.emissiveHSV) : t.emissive ? t.emissive.map((function(e) {
                        return o.a.RGBtoHSV.apply(o.a, l(e))
                    })) : [
                        [0, 0, 0],
                        [0, 0, 0],
                        [0, 0, 0],
                        [0, 0, 0, 0]
                    ], this.alpha = t.alpha && t.alpha.slice ? t.alpha.slice() : [1, 1, 1], this.rough = t.rough && t.rough.slice ? t.rough.slice() : [.5, .5, .5], this.metal = t.metal && t.metal.slice ? t.metal.slice() : [0, 0, 0], this.sheen = t.sheen && t.sheen.slice ? t.sheen.slice() : [0, 0, 0], this.complexEmissive = !!t.complexEmissive, this.simpleEmissive = t.simpleEmissive || 0, this.presetID = t.presetID || t.id || console.error("Must provide preset id for shader response", t) || 2, this.surfaceID = t.surfaceID || (r.a.surfacesByName[t.surface] || console.error("Surface ".concat(t.surface, " not found"), t) || r.a.surfacesByName.misc).id, this.name = t.name || "Unnamed Paint", this.group = t.group, this.isCopy = t.isCopy, this.flatLighting = t.flatLighting, this.displayOrder = t.displayOrder, this.skin = !!t.skin, this.inherit = t.inherit, this.isShaderResponse = !0, this.schemeSortOrder = t.schemeSortOrder, this.eye = t.eye, this.validateData(), this.originalKey = n ? this.key : t.originalKey, this.diffs = t.diffs || this.getDiffs()
                }
                var t, n, i;
                return t = e, i = [{
                    key: "fromDB",
                    value: function(t) {
                        return new e({
                            gradient: t.low ? [e.HexToRGB(t.low), e.HexToRGB(t.mid), e.HexToRGB(t.high), t.skin ? [255, 0, 0, .5] : [0, 0, 0, 0]] : [
                                [0, 0, 0, 0],
                                [0, 0, 0, 0],
                                [0, 0, 0, 0],
                                [0, 0, 0, 0]
                            ],
                            rough: [void 0 !== t.rough_min ? t.rough_min : .5, void 0 !== t.rough_mid ? t.rough_mid : .5, void 0 !== t.rough_max ? t.rough_max : .5],
                            metal: [t.metal_min || 0, t.metal_mid || 0, t.metal_max || 0],
                            sheen: [t.sheen_min || 0, t.sheen_mid || 0, t.sheen_max || 0],
                            presetID: t.id,
                            name: t.name,
                            surfaceID: (r.a.surfacesByName[t.surface] || console.error("Surface not valid", t.surface) || {}).id,
                            group: t.grp,
                            displayOrder: t.display_order || 0,
                            skin: t.skin,
                            eye: t.eye,
                            inherit: t.inherit,
                            simpleEmissive: t.emissive_simple || 0,
                            complexEmissive: t.emissive_complex,
                            emissive: t.emissive_low ? [e.HexToRGB(t.emissive_low), e.HexToRGB(t.emissive_mid), e.HexToRGB(t.emissive_high), [0, 0, 0, 0]] : [
                                [0, 0, 0, 0],
                                [0, 0, 0, 0],
                                [0, 0, 0, 0],
                                [0, 0, 0, 0]
                            ],
                            alpha: [d(t.alpha_low, 1), d(t.alpha_mid, 1), d(t.alpha_high, 1)]
                        }, !0)
                    }
                }, {
                    key: "fromPartial",
                    value: function(t) {
                        var n = r.a.shaders[t.presetID] || console.warn("Missing shader response parent", t.presetID) || r.a.shaders[1];
                        return new e(Object.assign({}, n, t))
                    }
                }, {
                    key: "componentToHex",
                    value: function(e) {
                        var t = e.toString(16);
                        return 1 == t.length ? "0" + t : t
                    }
                }, {
                    key: "RGBToHex",
                    value: function(e, t, n) {
                        return e = Math.round(e), t = Math.round(t), n = Math.round(n), this.componentToHex(e) + this.componentToHex(t) + this.componentToHex(n)
                    }
                }, {
                    key: "HexToRGB",
                    value: function(e) {
                        return e ? (6 === e.length && (e = "#" + e), 7 !== e.length && console.error("Invalid hex code", e), [parseInt(e.slice(1, 3), 16), parseInt(e.slice(3, 5), 16), parseInt(e.slice(5, 7), 16)]) : null
                    }
                }], (n = [{
                    key: "applyMaterialResponse",
                    value: function(e) {
                        this.alpha = e.alpha, this.rough = e.rough, this.metal = e.metal, this.sheen = e.sheen, this.skin = e.skin, this.surfaceID = e.surfaceID, this.complexEmissive = e.complexEmissive, this.simpleEmissive = e.simpleEmissive, this.emissiveHSV = e.emissiveHSV
                    }
                }, {
                    key: "validateData",
                    value: function() {
                        var e = this;
                        ["gradientHSV", "emissiveHSV"].map((function(t) {
                            var n = e[t];
                            n.length && 3 === e[t].length && n.push([0, 0, 0, 0]), n.length && 4 === n.length && !n.find((function(e) {
                                return !e.length || e.length < 3 || void 0 !== e.find((function(e) {
                                    return isNaN(e)
                                }))
                            })) || (e[t] = console.error("Invalid data", t, "in", n, e) || [
                                [0, 0, 0],
                                [0, 0, 0],
                                [0, 0, 0],
                                [0, 0, 0, 0]
                            ]), e[t] = n.map((function(e) {
                                return e.map((function(e) {
                                    return e > 1 ? 1 : e < 0 ? 0 : e
                                }))
                            }))
                        })), ["alpha", "rough", "metal", "sheen"].map((function(t) {
                            var n = e[t];
                            n.length && 3 === n.length && void 0 === n.find((function(e) {
                                return isNaN(e)
                            })) || (e[t] = console.error("Invalid data", t, "in", n, e) || h[t].slice()), e[t] = n.map((function(e) {
                                return e > 1 ? 1 : e < 0 ? 0 : e
                            }))
                        }))
                    }
                }, {
                    key: "getHex",
                    value: function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
                            n = o.a.HSVtoRGB.apply(o.a, l(this.gradientHSV[t]));
                        return e.RGBToHex.apply(e, l(n))
                    }
                }, {
                    key: "setGradientChannel",
                    value: function(e, t, n) {
                        var r = o.a.HSVtoRGB.apply(o.a, l(this.gradientHSV[e]));
                        r[t] = n, this.gradientHSV[e] = o.a.RGBtoHSV.apply(o.a, l(r))
                    }
                }, {
                    key: "setEmissiveChannel",
                    value: function(e, t, n) {
                        var r = o.a.HSVtoRGB.apply(o.a, l(this.emissiveHSV[e]));
                        r[t] = n, this.emissiveHSV[e] = o.a.RGBtoHSV.apply(o.a, l(r))
                    }
                }, {
                    key: "setGradientRGB",
                    value: function(e, t) {
                        this.gradientHSV[e] = o.a.RGBtoHSV.apply(o.a, l(t))
                    }
                }, {
                    key: "setEmissiveRGB",
                    value: function(e, t) {
                        this.emissiveHSV[e] = o.a.RGBtoHSV.apply(o.a, l(t))
                    }
                }, {
                    key: "calculateDiffs",
                    value: function() {
                        this.diffs = this.getDiffs()
                    }
                }, {
                    key: "getDiffs",
                    value: function() {
                        var e = this,
                            t = this.gradientHSV,
                            n = this.emissiveHSV,
                            r = {
                                gradient: {
                                    h: [t[1][0] - t[0][0], t[1][0] - t[2][0]],
                                    s: [t[1][1] - t[0][1], t[1][1] - t[2][1]],
                                    v: [t[1][2] - t[0][2], t[1][2] - t[2][2]]
                                },
                                emissive: {
                                    h: [n[1][0] - n[0][0], n[1][0] - n[2][0]],
                                    s: [n[1][1] - n[0][1], n[1][1] - n[2][1]],
                                    v: [n[1][2] - n[0][2], n[1][2] - n[2][2]]
                                }
                            };
                        return ["metal", "sheen", "rough", "alpha"].map((function(t) {
                            r[t] = [e[t][1] - e[t][0], e[t][1] - e[t][2]]
                        })), r
                    }
                }, {
                    key: "clone",
                    value: function() {
                        return new e(this)
                    }
                }, {
                    key: "matchesNonParameters",
                    value: function(e) {
                        return this.rough.toString() === e.rough.toString() && this.metal.toString() === e.metal.toString() && this.sheen.toString() === e.sheen.toString() && this.rough.toString() === e.rough.toString()
                    }
                }, {
                    key: "matchesGradient",
                    value: function(e) {
                        return this.gradient.toString() === e.toString()
                    }
                }, {
                    key: "matchesEmissive",
                    value: function(e) {
                        return this.emissive.toString() === e.emissive.toString()
                    }
                }, {
                    key: "matches",
                    value: function(e) {
                        return this.matchesNonParameters(e) && this.matchesEmissive(e) && this.matchesGradient(e.gradient)
                    }
                }, {
                    key: "toDB",
                    value: function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                        if (t || confirm("Overwrite " + CK.Options.shaders[this.presetID].name)) {
                            var n = {
                                low: e.RGBToHex.apply(e, l(this.gradient[0])),
                                mid: e.RGBToHex.apply(e, l(this.gradient[1])),
                                high: e.RGBToHex.apply(e, l(this.gradient[2])),
                                name: this.name,
                                surface: this.surface,
                                grp: this.group || null,
                                display_order: this.displayOrder ? parseInt(this.displayOrder) : 0,
                                inherit: this.inherit || null
                            };
                            this.inherit || Object.assign(n, {
                                emissive_simple: this.simpleEmissive,
                                emissive_complex: this.complexEmissive,
                                emissive_low: e.RGBToHex.apply(e, l(this.emissive[0])),
                                emissive_mid: e.RGBToHex.apply(e, l(this.emissive[1])),
                                emissive_high: e.RGBToHex.apply(e, l(this.emissive[2])),
                                alpha_low: this.alpha[0],
                                alpha_mid: this.alpha[1],
                                alpha_high: this.alpha[2],
                                skin: this.skin ? 1 : 0,
                                eye: this.eye ? 1 : 0,
                                rough_min: this.rough[0] || null,
                                rough_mid: this.rough[1] || null,
                                rough_max: this.rough[2] || null,
                                metal_min: this.metal[0] || null,
                                metal_mid: this.metal[1] || null,
                                metal_max: this.metal[2] || null,
                                sheen_min: this.sheen[0] || null,
                                sheen_mid: this.sheen[1] || null,
                                sheen_max: this.sheen[2] || null
                            });
                            var r = {};
                            for (var o in n) null != n[o] && (r[o] = n[o]);
                            return this.presetID ? (console.log("updating", this.presetID, r), Debug.TableEditor.updateRow("shaders", this.presetID, r).then((function() {
                                return console.log("success")
                            }))) : (console.log("adding new row", r), Debug.TableEditor.insertRow("shaders", r).then((function() {
                                return console.log("success")
                            })))
                        }
                    }
                }, {
                    key: "toJson",
                    value: function() {
                        var e = this,
                            t = {
                                gradient: this.gradient.map((function(e) {
                                    return e.map((function(e) {
                                        return parseInt(e)
                                    }))
                                })),
                                simpleEmissive: this.simpleEmissive,
                                complexEmissive: this.complexEmissive,
                                emissive: this.emissive.map((function(e) {
                                    return e.map((function(e) {
                                        return parseInt(e)
                                    }))
                                })),
                                rough: this.rough,
                                name: this.name,
                                skin: this.skin,
                                surfaceID: this.surfaceID,
                                presetID: this.presetID,
                                flatLighting: this.flatLighting,
                                alpha: this.alpha,
                                eye: this.eye
                            };
                        return ["metal", "sheen"].map((function(n) {
                            e[n] && (e[n][0] || e[n][1] || e[n][2]) && (t[n] = e[n])
                        })), ["metal", "sheen", "rough"].map((function(e) {
                            t[e] && t[e].map((function(e) {
                                return e.toFixed(2)
                            }))
                        })), t
                    }
                }, {
                    key: "hasChanged",
                    value: function() {
                        return !!this.isCopy || !(this.originalKey === this.key || this.parent.key === this.key)
                    }
                }, {
                    key: "getKey",
                    value: function() {
                        if (!this._key) {
                            var e = this.toJson();
                            delete e.name, delete e.presetID, this._key = JSON.stringify(e)
                        }
                        return this._key
                    }
                }, {
                    key: "changed",
                    value: function() {
                        delete this._key, delete this.thumb
                    }
                }, {
                    key: "updateMaterial",
                    value: function(e) {
                        var t = this.gradient,
                            n = this.emissiveHSV.map((function(e) {
                                return o.a.HSVtoRGB.apply(o.a, l(e))
                            })),
                            r = this.rough,
                            a = this.sheen,
                            i = this.metal,
                            c = this.alpha,
                            u = t,
                            f = n[2],
                            h = o.a.RGBtoHSV.apply(o.a, l(f)),
                            p = [0, 1, .635],
                            d = o.a.HSVInterpolate(h, p, .5),
                            m = o.a.HSVtoRGB.apply(o.a, l(d)),
                            y = o.a.HSVtoRGB.apply(o.a, p),
                            v = n[1],
                            b = r[0],
                            g = r[1],
                            w = r[2],
                            k = a[0],
                            S = a[1],
                            _ = a[2],
                            C = i[0],
                            R = i[1],
                            O = Math.round(1 / c[0]) - 1,
                            E = Object.keys(CK.display.eyeTypes || {}).sort((function(e, t) {
                                return CK.display.eyeTypes[e].index - CK.display.eyeTypes[t].index
                            }));
                        (isNaN(O) || O < 0 || O >= E.length) && (O = 0);
                        var P = E[O],
                            x = c[1] * Math.PI * 2;
                        e.setUniform("iris0", s(RK.Vec3, l(u[0])).divideScalar(255)), e.setUniform("iris1", s(RK.Vec3, l(u[1])).divideScalar(255)), e.setUniform("iris2", s(RK.Vec3, l(u[2])).divideScalar(255)), e.setUniform("sclera0", s(RK.Vec3, l(y)).divideScalar(255)), e.setUniform("sclera1", s(RK.Vec3, l(m)).divideScalar(255)), e.setUniform("sclera2", s(RK.Vec3, l(f)).divideScalar(255)), e.setUniform("irisDepth", b), e.setUniform("corneaBulge", g), e.setUniform("irisSize", w), e.setUniform("eyeConvergence", k), e.setUniform("eyeLookH", S), e.setUniform("eyeLookV", _), e.setUniform("limbus", C), e.setUniform("eyeGlow", R), e.setUniform("pupil", s(RK.Vec3, l(v)).divideScalar(255)), e.setUniform("irisRotate", x);
                        var j = "/static/textures/character/eye/iris_".concat(P, ".png"),
                            T = function(t) {
                                e.setUniform("irisTexture", t)
                            };
                        CK.Resources.loaded(j) ? T(CK.Resources.getNow(j)) : CK.Resources.getResource(j).then((function(e) {
                            return T(e)
                        }));
                        var M = "/static/textures/character/eye/sclera.png",
                            K = function(t) {
                                e.setUniform("scleraTexture", t)
                            };
                        CK.Resources.loaded(M) ? K(CK.Resources.getNow(M)) : CK.Resources.getResource(M).then((function(e) {
                            return K(e)
                        }))
                    }
                }, {
                    key: "emissive",
                    get: function() {
                        var e = this;
                        return (this.skin ? [
                            [33, 0, 0],
                            [43, 0, 0],
                            [47, 0, 0],
                            [0, 0, 0, 0]
                        ] : this.complexEmissive || this.eye ? this.emissiveHSV.map((function(e) {
                            return o.a.HSVtoRGB.apply(o.a, l(e))
                        })) : this.gradientHSV.map((function(t) {
                            return o.a.HSVtoRGB(t[0], t[1], e.simpleEmissive)
                        }))).map((function(e) {
                            return e.map((function(e) {
                                return Math.round(e)
                            })).map((function(e) {
                                return e < 0 ? 0 : e > 255 ? 255 : e
                            }))
                        }))
                    },
                    set: function(e) {
                        e = e || [
                            [0, 0, 0],
                            [0, 0, 0],
                            [0, 0, 0]
                        ], this.emissiveHSV = e.map((function(e) {
                            return o.a.RGBtoHSV.apply(o.a, l(e))
                        }))
                    }
                }, {
                    key: "gradient",
                    get: function() {
                        var e = this.gradientHSV.map((function(e) {
                            return o.a.HSVtoRGB.apply(o.a, l(e))
                        }));
                        return this.skin ? (e[3][0] = 255, e[3][1] = 0, e[3][2] = 0, e[3][3] = 54) : e[3][3] = 0, e.map((function(e) {
                            return e.map((function(e) {
                                return Math.round(e)
                            })).map((function(e) {
                                return e < 0 ? 0 : e > 255 ? 255 : e
                            }))
                        }))
                    }
                }, {
                    key: "color",
                    get: function() {
                        return this.gradient
                    }
                }, {
                    key: "physical",
                    get: function() {
                        for (var e = [], t = 0; t < 3; t++) e.push([255 * this.rough[t], 255 * this.metal[t], 255 * this.alpha[t], 255 * this.sheen[t]]);
                        return e.push([0, 0, 0, 0]), e
                    }
                }, {
                    key: "hex",
                    get: function() {
                        return this.getHex()
                    }
                }, {
                    key: "surface",
                    get: function() {
                        return this.surfaceObj.name
                    }
                }, {
                    key: "surfaceObj",
                    get: function() {
                        return r.a.surfaces[this.surfaceID]
                    }
                }, {
                    key: "parent",
                    get: function() {
                        return r.a.shaders[this.presetID] || console.warn("Missing shader response parent", this.presetID) || r.a.shaders[29]
                    }
                }, {
                    key: "key",
                    get: function() {
                        return this.getKey()
                    }
                }]) && f(t.prototype, n), i && f(t, i), e
            }();

        function d(e, t) {
            return void 0 !== e ? e : t
        }
        window.ShaderResponse = p
    },
    66: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return m
        }));
        var r = n(19),
            o = n(21),
            a = n(37),
            i = n(10),
            s = n(5),
            c = n(46);

        function l() {
            if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
            if (Reflect.construct.sham) return !1;
            if ("function" == typeof Proxy) return !0;
            try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}))), !0
            } catch (e) {
                return !1
            }
        }

        function u(e, t, n) {
            return (u = l() ? Reflect.construct : function(e, t, n) {
                var r = [null];
                r.push.apply(r, t);
                var o = new(Function.bind.apply(e, r));
                return n && f(o, n.prototype), o
            }).apply(null, arguments)
        }

        function f(e, t) {
            return (f = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }

        function h(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function p(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e)) && "[object Arguments]" !== Object.prototype.toString.call(e)) return;
                var n = [],
                    r = !0,
                    o = !1,
                    a = void 0;
                try {
                    for (var i, s = e[Symbol.iterator](); !(r = (i = s.next()).done) && (n.push(i.value), !t || n.length !== t); r = !0);
                } catch (e) {
                    o = !0, a = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (o) throw a
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function d(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var m = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, l;
            return t = e, l = [{
                key: "init",
                value: function() {
                    var e = this;
                    if (!this.initialized) {
                        this.initialized = !0, this.meshes = {}, this._thumbs = {}, this._queue = [], this.readyForNext = !1;
                        var t = r.a.getCamera(s.a.getPart(3287)),
                            n = r.a.getSphereEnvMap("glass_passage_1k");
                        o.a.getResources([t, n]).then((function(t) {
                            var n = p(t, 2),
                                r = n[0],
                                o = n[1],
                                a = new RK.EnvironmentLight(new RK.Color(1, 1, 1), 1);
                            a.map = o, a.mapWidth = o.width, a.saturationScale = 0;
                            var s = new RK.AmbientLight;
                            s.intensity = .1;
                            var c = new RK.DirectionalLight;
                            c.intensity = .7, c.position.copy(new RK.Vec3(9, 10, 2)), e._scene = new RK.Scene, e._scene.add(a), e._scene.add(s), e._scene.add(c), e.cam = new RK.PerspectiveCamera(21.2, 1, 2, 100), e.cam.position.fromArray(r.position), e.cam.rotation.reorder("YZX"), e.cam.rotation.fromArray(r.rotation), e.cam.updateProjectionMatrix(), e.cam.scale.set(-1, -1, 1), i.a.register((function() {
                                return e.makeNextThumbnail()
                            }), "end", "Shaderball"), e.readyForNext = !0
                        }))
                    }
                }
            }, {
                key: "getMesh",
                value: function(e) {
                    var t = this;
                    if (e in this.meshes) return Promise.resolve(this.meshes[e]);
                    var n = s.a.getPartBySlotAndName("shaderball", e) || console.error("Could not find shaderball", e);
                    return this.meshes[e] = o.a.getResources([r.a.getTexture(n, !1, "mask", n.bakedTextureSize), r.a.getTexture(n, !1, "nrml", n.bakedTextureSize), r.a.getMeshPath(n)]).then((function(n) {
                        if (n && n[0] && n[1] && n[2]) {
                            var r = p(n, 3),
                                o = r[0],
                                i = r[1],
                                s = r[2],
                                c = new SK.Physical({
                                    options: {
                                        surface: !0,
                                        uv: !0,
                                        normalMap: !0,
                                        env: !0,
                                        occlusion: !1,
                                        preBakedOcclusion: !0,
                                        lights: !0,
                                        sunOcclusion: !1
                                    },
                                    textures: {
                                        normalMap: i,
                                        surfaceGradientMap: o
                                    }
                                });
                            c.setUniform("surfaceGradientMap", o), t.meshes[e] = a.a.makeMesh(s, c)
                        } else t.meshes[e] = !1;
                        return t.meshes[e]
                    })), this.meshes[e]
                }
            }, {
                key: "getMeshForResponse",
                value: function(e) {
                    var t = s.a.surfaces[e.surfaceID];
                    return this.getMesh(t.name)
                }
            }, {
                key: "getTexture",
                value: function(e) {
                    return CK.Resources.loaded(e) ? Promise.resolve(CK.Resources.getNow(e)) : CK.Resources.getResource(e)
                }
            }, {
                key: "getTexturesForResponse",
                value: function(e) {
                    var t = this;
                    if (e.eye) {
                        var n = Object.keys(CK.display.eyeTypes || {}).sort((function(e, t) {
                            return CK.display.eyeTypes[e].index - CK.display.eyeTypes[t].index
                        })).map((function(e) {
                            return "/static/textures/character/eye/iris_".concat(e, ".png")
                        })).slice();
                        n.push("/static/textures/character/eye/sclera.png");
                        var r = n.map((function(e) {
                            return t.getTexture(e)
                        }));
                        return Promise.all(r)
                    }
                    return Promise.resolve([])
                }
            }, {
                key: "renderThumbnailNow",
                value: function(e) {
                    var t = s.a.surfaces[e.surfaceID].name,
                        n = this.meshes[t];
                    if (n) return this.render(n, e)
                }
            }, {
                key: "renderThumbnail",
                value: function(e) {
                    var t = this,
                        n = this.getMeshForResponse(e),
                        r = this.getTexturesForResponse(e);
                    return Promise.all([n, r]).then((function(n) {
                        var r = n[0];
                        return t._queue.length || CK.GameLoop.requestRenderRefresh(), r && r.material ? t.render(r, e) : (t.readyForNext = !0, "/static/img/missingball.png")
                    }))
                }
            }, {
                key: "render",
                value: function(e, t) {
                    if (e && e.material) {
                        t.gradient || console.error("No gradient in", t);
                        var n = e.material;
                        return n.setUniform("emissiveRange", c.a.getVec4Array(t.emissive)), n.setUniform("alphaRange", u(RK.Vec3, h(t.alpha))), n.setUniform("sheenRange", u(RK.Vec3, h(t.sheen))), n.setUniform("roughnessRange", u(RK.Vec3, h(t.rough))), n.setUniform("metalnessRange", u(RK.Vec3, h(t.metal))), n.setUniform("diffuseColorRange", c.a.getVec4Array(t.gradient)), n.eye = t.eye, t.eye && t.updateMaterial(n), this._scene.add(e), this.renderer.setSize(128, 128), this.renderer.render(this._scene, this.cam), this._scene.remove(e), this.readyForNext = !0, t.thumb = this.renderer.domElement.toDataURL("image/png"), t.thumbCallbacks && (t.thumbCallbacks.map((function(e) {
                            return e()
                        })), delete t.thumbCallbacks), t.thumb
                    }
                }
            }, {
                key: "requestBall",
                value: function(e, t) {
                    this._queueUp(e, t)
                }
            }, {
                key: "_queueUp",
                value: function(e, t) {
                    if (e.thumb) return t();
                    e.thumbCallbacks ? e.thumbCallbacks.push(t) : (e.thumbCallbacks = [t], this._queue.unshift(e))
                }
            }, {
                key: "clearQueue",
                value: function() {
                    (this._queue || []).map((function(e) {
                        delete e.thumbCallbacks
                    })), this._queue = []
                }
            }, {
                key: "makeNextThumbnail",
                value: function() {
                    if (this._queue.length && this.readyForNext) {
                        this.readyForNext = !1;
                        var e = this._queue.pop();
                        this.renderThumbnail(e)
                    }
                }
            }, {
                key: "getBallNow",
                value: function(e) {
                    return e.thumb ? e.thumb : this._queue && this._queue.length || !this.readyForNext ? void 0 : (e.thumb = this.renderThumbnailNow(e), e.thumbCallbacks && (console.warn("Why are there uncalled shader ball generation callbacks?", e.thumbCallbacks), e.thumbCallbacks.map((function(e) {
                        return e()
                    })), delete e.thumbCallbacks), e.thumb)
                }
            }, {
                key: "renderer",
                get: function() {
                    return CK.renderManagerOffscreen.renderer
                }
            }], (n = null) && d(t.prototype, n), l && d(t, l), e
        }();
        m.size = 128
    },
    70: function(e, t, n) {
        "use strict";

        function r(e) {
            return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }

        function a(e, t) {
            return !t || "object" !== r(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function i(e) {
            return (i = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function s(e, t) {
            return (s = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        n.d(t, "a", (function() {
            return c
        }));
        var c = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = a(this, i(t).call(this, e))).state = {
                    i: 0
                }, n
            }
            var n, r, c;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && s(e, t)
            }(t, React.Component), n = t, (r = [{
                key: "next",
                value: function() {
                    this.setState({
                        i: (this.state.i + 1) % this.props.images.length
                    })
                }
            }, {
                key: "previous",
                value: function() {
                    this.setState({
                        i: (this.state.i + this.props.images.length - 1) % this.props.images.length
                    })
                }
            }, {
                key: "render",
                value: function() {
                    var e = this,
                        t = this.props.images[this.state.i];
                    return React.createElement("div", {
                        style: {
                            position: "relative",
                            top: 0,
                            left: 0,
                            textAlign: "center"
                        }
                    }, React.createElement("img", {
                        style: {
                            top: 0,
                            left: 0,
                            position: "relative",
                            maxWidth: "75vw",
                            maxHeight: "75vh"
                        },
                        onClick: function() {
                            e.next()
                        },
                        src: t
                    }), this.props.images.length > 1 && React.createElement("a", {
                        onClick: function() {
                            e.previous()
                        },
                        style: {
                            cursor: "pointer",
                            background: "#696969",
                            padding: "6px 16px",
                            borderRadius: "50%",
                            left: 5,
                            top: "47%",
                            position: "absolute"
                        }
                    }, ""), this.props.images.length > 1 && React.createElement("a", {
                        onClick: function() {
                            e.next()
                        },
                        style: {
                            cursor: "pointer",
                            background: "#696969",
                            padding: "6px 16px",
                            borderRadius: "50%",
                            right: 5,
                            top: "47%",
                            position: "absolute"
                        }
                    }, ""))
                }
            }]) && o(n.prototype, r), c && o(n, c), t
        }()
    },
    8: function(e, t, n) {
        "use strict";

        function r(e, t) {
            arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
            this.x = e || 0, this.y = t || 0
        }
        var o, a;
        n.d(t, "a", (function() {
            return r
        })), Object.defineProperties(r.prototype, {
            width: {
                get: function() {
                    return this.x
                },
                set: function(e) {
                    this.x = e
                }
            },
            height: {
                get: function() {
                    return this.y
                },
                set: function(e) {
                    this.y = e
                }
            },
            xy: {
                get: function() {
                    return this
                },
                set: function(e) {
                    this.copy(e)
                }
            },
            yx: {
                get: function() {
                    return new r(this.y, this.x)
                },
                set: function(e) {
                    this.set(e.y, e.x)
                }
            }
        }), Object.assign(r.prototype, {
            isVec2: !0,
            set: function(e, t) {
                return this.x = e, this.y = t, this
            },
            setScalar: function(e) {
                return this.x = e, this.y = e, this
            },
            setX: function(e) {
                return this.x = e, this
            },
            setY: function(e) {
                return this.y = e, this
            },
            setComponent: function(e, t) {
                switch (e) {
                    case 0:
                        this.x = t;
                        break;
                    case 1:
                        this.y = t;
                        break;
                    default:
                        throw new Error("index is out of range: " + e)
                }
                return this
            },
            getComponent: function(e) {
                switch (e) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    default:
                        throw new Error("index is out of range: " + e)
                }
            },
            clone: function() {
                return new this.constructor(this.x, this.y)
            },
            copy: function(e) {
                return this.x = e.x, this.y = e.y, this
            },
            add: function(e, t) {
                return void 0 !== t ? (console.warn("RK.Vec2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this)
            },
            addScalar: function(e) {
                return this.x += e, this.y += e, this
            },
            toSimple: function() {
                return {
                    x: this.x,
                    y: this.y
                }
            },
            addVectors: function(e, t) {
                return this.x = e.x + t.x, this.y = e.y + t.y, this
            },
            addScaledVector: function(e, t) {
                return this.x += e.x * t, this.y += e.y * t, this
            },
            sub: function(e, t) {
                return void 0 !== t ? (console.warn("RK.Vec2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this)
            },
            subScalar: function(e) {
                return this.x -= e, this.y -= e, this
            },
            subVectors: function(e, t) {
                return this.x = e.x - t.x, this.y = e.y - t.y, this
            },
            multiply: function(e) {
                return this.x *= e.x, this.y *= e.y, this
            },
            multiplyScalar: function(e) {
                return this.x *= e, this.y *= e, this
            },
            divide: function(e) {
                return this.x /= e.x, this.y /= e.y, this
            },
            divideScalar: function(e) {
                return this.multiplyScalar(1 / e)
            },
            min: function(e) {
                return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this
            },
            max: function(e) {
                return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this
            },
            clamp: function(e, t) {
                return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this
            },
            clampScalar: (o = new r, a = new r, function(e, t) {
                return o.set(e, e), a.set(t, t), this.clamp(o, a)
            }),
            clampLength: function(e, t) {
                var n = this.length();
                return this.divideScalar(n || 1).multiplyScalar(Math.max(e, Math.min(t, n)))
            },
            floor: function() {
                return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this
            },
            round: function() {
                return this.x = Math.round(this.x), this.y = Math.round(this.y), this
            },
            roundToZero: function() {
                return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this
            },
            negate: function() {
                return this.x = -this.x, this.y = -this.y, this
            },
            dot: function(e) {
                return this.x * e.x + this.y * e.y
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y)
            },
            lengthManhattan: function() {
                return Math.abs(this.x) + Math.abs(this.y)
            },
            normalize: function() {
                return this.divideScalar(this.length() || 1)
            },
            angle: function() {
                var e = Math.atan2(this.y, this.x);
                return e < 0 && (e += 2 * Math.PI), e
            },
            distanceTo: function(e) {
                return Math.sqrt(this.distanceToSquared(e))
            },
            distanceToSquared: function(e) {
                var t = this.x - e.x,
                    n = this.y - e.y;
                return t * t + n * n
            },
            distanceToManhattan: function(e) {
                return Math.abs(this.x - e.x) + Math.abs(this.y - e.y)
            },
            setLength: function(e) {
                return this.normalize().multiplyScalar(e)
            },
            lerp: function(e, t) {
                return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this
            },
            lerpVectors: function(e, t, n) {
                return this.subVectors(t, e).multiplyScalar(n).add(e)
            },
            equals: function(e) {
                return e.x === this.x && e.y === this.y
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e
            },
            fromBufferAttribute: function(e, t, n) {
                return void 0 !== n && console.warn("RK.Vec2: offset has been removed from .fromBufferAttribute()."), this.x = e.getX(t), this.y = e.getY(t), this
            },
            rotateAround: function(e, t) {
                var n = Math.cos(t),
                    r = Math.sin(t),
                    o = this.x - e.x,
                    a = this.y - e.y;
                return this.x = o * n - a * r + e.x, this.y = o * r + a * n + e.y, this
            }
        })
    },
    91: function(e, t, n) {
        "use strict";
        n.d(t, "a", (function() {
            return a
        }));
        var r = n(27);

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
            }
        }
        var a = function() {
            function e(t, n, o, a, i, s, c) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), void 0 === t && (t = -Math.PI / 2), void 0 === n && (n = Math.PI / 2), void 0 === o && (o = -Math.PI / 2), void 0 === a && (a = Math.PI / 2), void 0 === i && (i = -Math.PI / 2), void 0 === s && (s = Math.PI / 2), void 0 === c && (c = "swingtwist"), this.swingTwist = new RK.SwingTwist, this.minX = t, this.maxX = n, this.minY = o, this.maxY = a, this.minZ = i, this.maxZ = s, this.order = c, this.orient = new r.a, this.bind = new r.a, this.preRotate = new r.a, this._q = new r.a
            }
            var t, n, a;
            return t = e, a = [{
                key: "MirrorCone",
                value: function(e) {
                    var t = e.orient;
                    if (t) {
                        var n = new r.a;
                        for (var o in n.copy(t), n.multiply(new r.a(0, 0, 1, 0)), t) t[o] = n[o]
                    }
                    var a = e.x[0];
                    e.x[0] = -e.x[1], e.x[1] = -a, a = e.y[0], e.y[0] = -e.y[1], e.y[1] = -a
                }
            }], (n = [{
                key: "constrain",
                value: function(e) {
                    this._q.multiplyQuaternions(this.bind, this.orient), this._q.inverse(), this._q.multiply(e.quaternion), this._q.multiply(this.preRotate.clone().inverse()), this._q.multiply(this.orient);
                    var t = this.swingTwist.setFromQuaternion(this._q, this.order),
                        n = 0,
                        r = 0,
                        o = -1,
                        a = -1;
                    t.swing.y >= 0 ? (n = Math.abs(this.maxY), t.swing.z >= 0 ? (o = 0, a = .5 * Math.PI) : (o = .5 * Math.PI, a = Math.PI)) : (n = Math.abs(this.minY), t.swing.z >= 0 ? (o = 1.5 * Math.PI, a = 2 * Math.PI) : (o = Math.PI, a = 1.5 * Math.PI)), r = t.swing.z >= 0 ? Math.abs(this.maxZ) : Math.abs(this.minZ), n = Math.sin(n / 2), r = Math.sin(r / 2);
                    var i = t.swing.y,
                        s = t.swing.z;

                    function c(e, t, n, r, o) {
                        var a = Math.sin(n),
                            i = Math.cos(n);
                        return -2 * r * e * i + 2 * e * e * a * i + 2 * o * t * a - 2 * t * t * a * i
                    }
                    var l = c(n, r, o, i, s);
                    if (c(n, r, a, i, s) < l) {
                        var u = o;
                        o = a, a = u
                    }
                    for (var f = 0; f < 8; ++f) {
                        var h = (o + a) / 2;
                        c(n, r, h, i, s) < 0 ? o = h : a = h
                    }
                    var p = !1,
                        d = (o + a) / 2,
                        m = n * Math.sin(d),
                        y = r * Math.cos(d);
                    m * m + y * y < i * i + s * s && (t.swing.y = m, t.swing.z = y, t.swing.w = Math.sqrt(1 - m * m - y * y), p = !0);
                    var v = Math.sign(t.twist.x),
                        b = 2 * Math.acos(t.twist.w) * v;
                    b /= 2 * Math.PI, b += .5, b -= Math.floor(b), b -= .5, b *= 2 * Math.PI;
                    var g = Math.min(Math.max(b, this.minX), this.maxX);
                    return b !== g && (t.twist.x = Math.sin(g / 2), t.twist.w = Math.cos(g / 2), p = !0), p && (t.toQuaternion(this._q), e.quaternion.copy(this.orient), e.quaternion.inverse(), e.quaternion.multiplyQuaternions(this._q, e.quaternion), e.quaternion.multiplyQuaternions(this.orient, e.quaternion), e.quaternion.multiplyQuaternions(this.bind, e.quaternion), e.quaternion.multiplyQuaternions(e.quaternion, this.preRotate)), p
                }
            }]) && o(t.prototype, n), a && o(t, a), e
        }()
    }
});
//# sourceMappingURL=dev/heroforge.js.map