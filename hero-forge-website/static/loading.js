!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=549)}({549:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"load",value:function(){var e=this;this.initialized||(this.initialized=!0,window.PRELOAD&&(window.Pre=this,this.resources={},this.progress={},this.loadItemCount=this.getEstimatedTotalItems(),PRELOAD.map((function(t){switch(t.split("?")[0].split(".").pop()){case"ckb":e.resources[t]=e.ckbLoad(t);break;case"png":e.resources[t]=e.imageLoad(t);break;default:e.resources[t]=e.dataLoad(t)}}))))}},{key:"getEstimatedTotalItems",value:function(){if(window.LOAD_CONFIG)try{var e=JSON.parse(window.LOAD_CONFIG.replace(/\n/g,"\\n"));if(e.parts)return Object.keys(e.parts).length+3}catch(e){}else if(sessionStorage.cachedConfig)try{var t=JSON.parse(sessionStorage.cachedConfig);if(t.parts)return Object.keys(t.parts).length+3}catch(e){}else{if(window.PRELOAD)return PRELOAD.length;console.error("Could not get estimated totals for loading")}}},{key:"updateProgress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{loaded:1,total:1},n=t.total>0?t.loaded/t.total:0;n>1&&(n=1),this.progress[e]&&n<this.progress[e]&&(n=this.progress[e]),this.progress[e]=n,window.Loading&&Loading.setPercent(this.getPercent()||5)}},{key:"getPercent",value:function(){var e=0;for(var t in this.progress)e+=this.progress[t];var n=Math.round(e/this.loadItemCount*100)||5;return n>97&&(n=97),n<3&&(n=3),n}},{key:"ckbLoad",value:function(e){var t=this;return new Promise((function(n,r){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(i){t.updateProgress(e),o.response&&200===o.status?n(o.response):r(i)},o.onprogress=function(n){t.updateProgress(e,n)},o.send(null)}))}},{key:"dataLoad",value:function(e){var t=this;return new Promise((function(n,r){var o=new XMLHttpRequest;o.onload=function(i){t.updateProgress(e),o.response&&200===o.status?n(JSON.parse(o.response)):r(i)},o.onprogress=function(n){t.updateProgress(e,n)},o.open("GET",e,!0),o.send()}))}},{key:"imageLoad",value:function(e){var t=this;return new Promise((function(n,r){var o=new Image;o.onload=function(){t.updateProgress(e),n(o)},o.onerror=function(e){return r(e)},o.src=e}))}}],(n=null)&&r(t.prototype,n),o&&r(t,o),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.visible=!0,this.messages=e,this.hasFailed=!1,this.root=document.createElement("div"),document.body.appendChild(this.root),this.message=this.messages.initialLoading,this.title="LOADING",o.load(),this.refresh(),window.MSInputMethodContext&&document.documentMode&&(this.hasFailed=!0,this.message=React.createElement("div",null,"Internet Explorer is no longer supported.",React.createElement("ul",{style:{textAlign:"left"}},React.createElement("li",{key:"3"},"Upgrade your browser. We recommend ",React.createElement("a",{href:"https://www.google.com/chrome/browser/"},"Chrome"),"."))),this.refresh())}},{key:"renderLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e?React.createElement("img",{key:"loading-icon",src:"/static/img/ajax-loader-still.png"}):React.createElement("img",{key:"loading-icon",src:"/static/img/ajax-loader.gif"})}},{key:"creationKitReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.load=t,this.updateMessage(this.messages.startLoading),CK.Settings.showLoadingScreen?void 0!==CK.Settings.invitationKey?this.askForInvitationKey((function(){e.checkSpecs()})):this.checkSpecs():(console.log("Loading Screen Disabled in Settings"),this.close(),this.load())}},{key:"askForInvitationKey",value:function(e){var t=this;CK.User.loggedIn||localStorage.getItem("invitationKey")?e():(this.message=React.createElement("div",null,React.createElement("input",{placeholder:"Invitation Key",onChange:function(n){n.target.value.toLowerCase()===CK.Settings.invitationKey&&(localStorage.setItem("invitationKey","true"),t.message=React.createElement("div",null),t.refresh(),e())}})),this.title="Please Enter Invitation Key",this.refresh())}},{key:"checkSpecs",value:function(){try{this.specs=CK.checkCompatibility()}catch(e){return Reporting.exception("Failed to get compatability",e),void this.fail()}this.specs.mobile&&CK.Settings.mobileCheck||"supported"!==this.specs.rendering?this.fail():this.load()}},{key:"setPercent",value:function(e){this.percent=e,this.refresh()}},{key:"refresh",value:function(){this.visible?ReactDOM.render(this.renderLoadingScreen(this.message||this.renderLoader(this.percent)),this.root):ReactDOM.render(null,this.root)}},{key:"renderLoadingScreen",value:function(){return console.log("Must overwrite loading screen render!"),null}},{key:"close",value:function(){if(!this.hasFailed){if(this.visible=!1,void 0!==window.STARTLOAD){var e=((performance.now()-window.STARTLOAD)/1e3).toFixed(2);console.log("Loaded in ".concat(e," seconds.")),Reporting.event("loadingScreen","success","time",e)}else Reporting.event("loadingScreen","success","success");this.refresh()}}},{key:"bringDownEarly",value:function(){this.visible=!1,this.refresh()}},{key:"updateMessage",value:function(e){this.hasFailed||(this.message=e,this.refresh())}},{key:"updateTitle",value:function(e){this.title=e,this.refresh()}},{key:"fail",value:function(){var e=this;if(!this.hasFailed){this.hasFailed=!0,this.specs=this.specs||{},console.error("Loading Failed Called!",this.specs.rendering),Reporting.event("loadingScreen","failed","rendering:"+this.specs.rendering+" mobile:"+this.specs.mobile),this.title=CK.Settings.text.loadingFailed;var t="supported"===this.specs.rendering,n={tryAnyway:React.createElement("li",{key:"1"},React.createElement("a",{onClick:function(){e.hasFailed=!1,e.title="LOADING",e.load(),Reporting.event("loadingScreen","tryAnyway")}},"Try anyway")),followForUpdates:React.createElement("li",{key:"2"},"Follow us for the latest compatibility updates: ",React.createElement("a",{href:"https://www.facebook.com/HeroForgeMinis/",target:"_blank"},React.createElement("img",{src:"/static/img/social/FaceBook.png"}))," ",React.createElement("a",{href:"https://twitter.com/heroforgeminis",target:"_blank"},React.createElement("img",{src:"/static/img/social/Twitter.png"}))),updateBrowser:React.createElement("li",{key:"3"},"Upgrade your browser. We recommend ",React.createElement("a",{href:"https://www.google.com/chrome/browser/"},"Chrome"),"."),refreshPage:React.createElement("li",{key:"4"},"Refresh the page or try again later."),contactUs:React.createElement("li",{key:"5"},"Email us: support@heroforge.com"),moreInformation:React.createElement("li",{key:"6"},"For more information about Hero Forge, see our ",React.createElement("a",{href:"/support/#what"},"FAQ")),enableWebgl:React.createElement("li",{key:"7"},"Try enabling graphics hardware acceleration (WebGL). ",React.createElement("a",{href:"https://get.webgl.org/"},"More Info")),devTryAnyway:React.createElement("li",{key:"1"},React.createElement("a",{onClick:function(){e.close(),e.load()}},"Dev Try anyway"))};n=Object.assign(n,CK.Settings.loadingSolutions);var r="",o=[];this.specs.mobile&&CK.Settings.mobileCheck?(r=CK.Settings.text.mobileNotSupported,o=[n.followForUpdates],t||"webglDisabled"===this.specs.rendering&&o.push(n.enableWebgl)):"noWebGlBrowser"===this.specs.rendering?(r=CK.Settings.text.browserMinimumRequirements,o=[n.updateBrowser,n.followForUpdates]):"webglDisabled"===this.specs.rendering?(r=CK.Settings.text.webgDisabled,o=[n.enableWebgl,n.updateBrowser,n.followForUpdates]):"noWebGlGraphics"===this.specs.rendering||"requirementsNotMet"===this.specs.rendering?(r=CK.Settings.text.graphicsNotSupported,o=[n.followForUpdates]):(r=CK.Settings.text.somethingWentWrong,o=[n.followForUpdates,n.updateBrowser,n.refreshPage,n.contactUs]),o.push(n.moreInformation),CK.Settings.showLoadingFailureSolutions||(o=React.createElement("div",null)),this.message=React.createElement("div",null,r,React.createElement("ul",{style:{textAlign:"left"}},o)),this.refresh()}}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return c(this,t),d(this,f(t).apply(this,arguments))}return g(t,React.Component),u(t,[{key:"render",value:function(){var e=Math.max(this.props.percent,5);return React.createElement("div",{className:"loading-bar"},e>=1&&React.createElement("div",{className:"loading-fill",style:{width:e+"%"}}))}}]),t}(),m=function(e){function t(){return c(this,t),d(this,f(t).apply(this,arguments))}return g(t,e),u(t,null,[{key:"renderLoadingScreen",value:function(e){var t;return window.USER_PERMISSIONS&&window.USER_PERMISSIONS.find&&(t=!!window.USER_PERMISSIONS.find((function(e){return"color"===e}))),React.createElement("div",{className:"loadingScreen"},React.createElement("div",{className:"loadingScreen-content"},React.createElement("img",{src:LOADING_IMAGE,className:"loadingScreen-image"}),e,React.createElement("img",{src:t?"/static/img/loading/banner-color.png":"/static/img/loading/banner.png?2",className:"loadingScreen-banner"})))}},{key:"renderLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return React.createElement(p,{percent:e})}}]),t}(a);console.log("LD ".concat("Production 4/18/20 11:15:57 B:release/hf_2020_04_03 V14179")),window.Loading=m,m.init();t.default=m}});
//# sourceMappingURL=dev/loading.js.map